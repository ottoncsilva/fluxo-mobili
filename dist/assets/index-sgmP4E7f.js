const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/communicationService-C1eVLKVU.js","assets/evolutionApi-BtEDgQmG.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var S2={exports:{}},gg={},A2={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=Symbol.for("react.element"),v4=Symbol.for("react.portal"),b4=Symbol.for("react.fragment"),y4=Symbol.for("react.strict_mode"),w4=Symbol.for("react.profiler"),_4=Symbol.for("react.provider"),N4=Symbol.for("react.context"),j4=Symbol.for("react.forward_ref"),S4=Symbol.for("react.suspense"),A4=Symbol.for("react.memo"),k4=Symbol.for("react.lazy"),NN=Symbol.iterator;function E4(t){return t===null||typeof t!="object"?null:(t=NN&&t[NN]||t["@@iterator"],typeof t=="function"?t:null)}var k2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E2=Object.assign,T2={};function Hc(t,e,r){this.props=t,this.context=e,this.refs=T2,this.updater=r||k2}Hc.prototype.isReactComponent={};Hc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function C2(){}C2.prototype=Hc.prototype;function gw(t,e,r){this.props=t,this.context=e,this.refs=T2,this.updater=r||k2}var xw=gw.prototype=new C2;xw.constructor=gw;E2(xw,Hc.prototype);xw.isPureReactComponent=!0;var jN=Array.isArray,P2=Object.prototype.hasOwnProperty,vw={current:null},I2={key:!0,ref:!0,__self:!0,__source:!0};function O2(t,e,r){var n,a={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)P2.call(e,n)&&!I2.hasOwnProperty(n)&&(a[n]=e[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Pf,type:t,key:s,ref:o,props:a,_owner:vw.current}}function T4(t,e){return{$$typeof:Pf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bw(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pf}function C4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var SN=/\/+/g;function tx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C4(""+t.key):e.toString(36)}function tp(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pf:case v4:o=!0}}if(o)return o=t,a=a(o),t=n===""?"."+tx(o,0):n,jN(a)?(r="",t!=null&&(r=t.replace(SN,"$&/")+"/"),tp(a,e,r,"",function(u){return u})):a!=null&&(bw(a)&&(a=T4(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(SN,"$&/")+"/")+t)),e.push(a)),1;if(o=0,n=n===""?".":n+":",jN(t))for(var l=0;l<t.length;l++){s=t[l];var c=n+tx(s,l);o+=tp(s,e,r,c,a)}else if(c=E4(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=n+tx(s,l++),o+=tp(s,e,r,c,a);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function mh(t,e,r){if(t==null)return t;var n=[],a=0;return tp(t,n,"","",function(s){return e.call(r,s,a++)}),n}function P4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var En={current:null},rp={transition:null},I4={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:rp,ReactCurrentOwner:vw};function D2(){throw Error("act(...) is not supported in production builds of React.")}ft.Children={map:mh,forEach:function(t,e,r){mh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return mh(t,function(){e++}),e},toArray:function(t){return mh(t,function(e){return e})||[]},only:function(t){if(!bw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ft.Component=Hc;ft.Fragment=b4;ft.Profiler=w4;ft.PureComponent=gw;ft.StrictMode=y4;ft.Suspense=S4;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I4;ft.act=D2;ft.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=E2({},t.props),a=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vw.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)P2.call(e,c)&&!I2.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Pf,type:t.type,key:a,ref:s,props:n,_owner:o}};ft.createContext=function(t){return t={$$typeof:N4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_4,_context:t},t.Consumer=t};ft.createElement=O2;ft.createFactory=function(t){var e=O2.bind(null,t);return e.type=t,e};ft.createRef=function(){return{current:null}};ft.forwardRef=function(t){return{$$typeof:j4,render:t}};ft.isValidElement=bw;ft.lazy=function(t){return{$$typeof:k4,_payload:{_status:-1,_result:t},_init:P4}};ft.memo=function(t,e){return{$$typeof:A4,type:t,compare:e===void 0?null:e}};ft.startTransition=function(t){var e=rp.transition;rp.transition={};try{t()}finally{rp.transition=e}};ft.unstable_act=D2;ft.useCallback=function(t,e){return En.current.useCallback(t,e)};ft.useContext=function(t){return En.current.useContext(t)};ft.useDebugValue=function(){};ft.useDeferredValue=function(t){return En.current.useDeferredValue(t)};ft.useEffect=function(t,e){return En.current.useEffect(t,e)};ft.useId=function(){return En.current.useId()};ft.useImperativeHandle=function(t,e,r){return En.current.useImperativeHandle(t,e,r)};ft.useInsertionEffect=function(t,e){return En.current.useInsertionEffect(t,e)};ft.useLayoutEffect=function(t,e){return En.current.useLayoutEffect(t,e)};ft.useMemo=function(t,e){return En.current.useMemo(t,e)};ft.useReducer=function(t,e,r){return En.current.useReducer(t,e,r)};ft.useRef=function(t){return En.current.useRef(t)};ft.useState=function(t){return En.current.useState(t)};ft.useSyncExternalStore=function(t,e,r){return En.current.useSyncExternalStore(t,e,r)};ft.useTransition=function(){return En.current.useTransition()};ft.version="18.3.1";A2.exports=ft;var D=A2.exports;const H=Tt(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4=D,D4=Symbol.for("react.element"),R4=Symbol.for("react.fragment"),M4=Object.prototype.hasOwnProperty,$4=O4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L4={key:!0,ref:!0,__self:!0,__source:!0};function R2(t,e,r){var n,a={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)M4.call(e,n)&&!L4.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:D4,type:t,key:s,ref:o,props:a,_owner:$4.current}}gg.Fragment=R4;gg.jsx=R2;gg.jsxs=R2;S2.exports=gg;var i=S2.exports,M2={exports:{}},ea={},$2={exports:{}},L2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,X){var se=K.length;K.push(X);e:for(;0<se;){var Z=se-1>>>1,F=K[Z];if(0<a(F,X))K[Z]=X,K[se]=F,se=Z;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var X=K[0],se=K.pop();if(se!==X){K[0]=se;e:for(var Z=0,F=K.length,de=F>>>1;Z<de;){var me=2*(Z+1)-1,Ge=K[me],Me=me+1,ot=K[Me];if(0>a(Ge,se))Me<F&&0>a(ot,Ge)?(K[Z]=ot,K[Me]=se,Z=Me):(K[Z]=Ge,K[me]=se,Z=me);else if(Me<F&&0>a(ot,se))K[Z]=ot,K[Me]=se,Z=Me;else break e}}return X}function a(K,X){var se=K.sortIndex-X.sortIndex;return se!==0?se:K.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,p=3,m=!1,v=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(K){for(var X=r(u);X!==null;){if(X.callback===null)n(u);else if(X.startTime<=K)n(u),X.sortIndex=X.expirationTime,e(c,X);else break;X=r(u)}}function E(K){if(x=!1,w(K),!v)if(r(c)!==null)v=!0,Q(N);else{var X=r(u);X!==null&&te(E,X.startTime-K)}}function N(K,X){v=!1,x&&(x=!1,y(b),b=-1),m=!0;var se=p;try{for(w(X),f=r(c);f!==null&&(!(f.expirationTime>X)||K&&!I());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var F=Z(f.expirationTime<=X);X=t.unstable_now(),typeof F=="function"?f.callback=F:f===r(c)&&n(c),w(X)}else n(c);f=r(c)}if(f!==null)var de=!0;else{var me=r(u);me!==null&&te(E,me.startTime-X),de=!1}return de}finally{f=null,p=se,m=!1}}var k=!1,S=null,b=-1,A=5,T=-1;function I(){return!(t.unstable_now()-T<A)}function O(){if(S!==null){var K=t.unstable_now();T=K;var X=!0;try{X=S(!0,K)}finally{X?R():(k=!1,S=null)}}else k=!1}var R;if(typeof g=="function")R=function(){g(O)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,U=G.port2;G.port1.onmessage=O,R=function(){U.postMessage(null)}}else R=function(){_(O,0)};function Q(K){S=K,k||(k=!0,R())}function te(K,X){b=_(function(){K(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,Q(N))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(K){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var se=p;p=X;try{return K()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,X){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=p;p=K;try{return X()}finally{p=se}},t.unstable_scheduleCallback=function(K,X,se){var Z=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Z+se:Z):se=Z,K){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=se+F,K={id:d++,callback:X,priorityLevel:K,startTime:se,expirationTime:F,sortIndex:-1},se>Z?(K.sortIndex=se,e(u,K),r(c)===null&&K===r(u)&&(x?(y(b),b=-1):x=!0,te(E,se-Z))):(K.sortIndex=F,e(c,K),v||m||(v=!0,Q(N))),K},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(K){var X=p;return function(){var se=p;p=X;try{return K.apply(this,arguments)}finally{p=se}}}})(L2);$2.exports=L2;var V4=$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F4=D,Zn=V4;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V2=new Set,Nd={};function tl(t,e){ic(t,e),ic(t+"Capture",e)}function ic(t,e){for(Nd[t]=e,t=0;t<e.length;t++)V2.add(e[t])}var Os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_v=Object.prototype.hasOwnProperty,U4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,AN={},kN={};function B4(t){return _v.call(kN,t)?!0:_v.call(AN,t)?!1:U4.test(t)?kN[t]=!0:(AN[t]=!0,!1)}function z4(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W4(t,e,r,n){if(e===null||typeof e>"u"||z4(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,r,n,a,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var yw=/[\-:]([a-z])/g;function ww(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yw,ww);on[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yw,ww);on[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yw,ww);on[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function _w(t,e,r,n){var a=on.hasOwnProperty(e)?on[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W4(e,r,a,n)&&(r=null),n||a===null?B4(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Hs=F4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gh=Symbol.for("react.element"),Al=Symbol.for("react.portal"),kl=Symbol.for("react.fragment"),Nw=Symbol.for("react.strict_mode"),Nv=Symbol.for("react.profiler"),F2=Symbol.for("react.provider"),U2=Symbol.for("react.context"),jw=Symbol.for("react.forward_ref"),jv=Symbol.for("react.suspense"),Sv=Symbol.for("react.suspense_list"),Sw=Symbol.for("react.memo"),ui=Symbol.for("react.lazy"),B2=Symbol.for("react.offscreen"),EN=Symbol.iterator;function Au(t){return t===null||typeof t!="object"?null:(t=EN&&t[EN]||t["@@iterator"],typeof t=="function"?t:null)}var ar=Object.assign,rx;function Hu(t){if(rx===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);rx=e&&e[1]||""}return`
`+rx+t}var nx=!1;function ax(t,e){if(!t||nx)return"";nx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=n.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{nx=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Hu(t):""}function q4(t){switch(t.tag){case 5:return Hu(t.type);case 16:return Hu("Lazy");case 13:return Hu("Suspense");case 19:return Hu("SuspenseList");case 0:case 2:case 15:return t=ax(t.type,!1),t;case 11:return t=ax(t.type.render,!1),t;case 1:return t=ax(t.type,!0),t;default:return""}}function Av(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case kl:return"Fragment";case Al:return"Portal";case Nv:return"Profiler";case Nw:return"StrictMode";case jv:return"Suspense";case Sv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case U2:return(t.displayName||"Context")+".Consumer";case F2:return(t._context.displayName||"Context")+".Provider";case jw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sw:return e=t.displayName||null,e!==null?e:Av(t.type)||"Memo";case ui:e=t._payload,t=t._init;try{return Av(t(e))}catch{}}return null}function H4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Av(e);case 8:return e===Nw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function z2(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function G4(t){var e=z2(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xh(t){t._valueTracker||(t._valueTracker=G4(t))}function W2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=z2(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Sp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kv(t,e){var r=e.checked;return ar({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function TN(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Bi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q2(t,e){e=e.checked,e!=null&&_w(t,"checked",e,!1)}function Ev(t,e){q2(t,e);var r=Bi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Tv(t,e.type,r):e.hasOwnProperty("defaultValue")&&Tv(t,e.type,Bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function CN(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Tv(t,e,r){(e!=="number"||Sp(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Gu=Array.isArray;function Wl(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Bi(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Cv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return ar({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function PN(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ge(92));if(Gu(r)){if(1<r.length)throw Error(ge(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Bi(r)}}function H2(t,e){var r=Bi(e.value),n=Bi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function IN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function G2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?G2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vh,K2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vh=vh||document.createElement("div"),vh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jd(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var td={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K4=["Webkit","ms","Moz","O"];Object.keys(td).forEach(function(t){K4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),td[e]=td[t]})});function Y2(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||td.hasOwnProperty(t)&&td[t]?(""+e).trim():e+"px"}function X2(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Y2(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Y4=ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iv(t,e){if(e){if(Y4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function Ov(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dv=null;function Aw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rv=null,ql=null,Hl=null;function ON(t){if(t=Df(t)){if(typeof Rv!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=wg(e),Rv(t.stateNode,t.type,e))}}function Q2(t){ql?Hl?Hl.push(t):Hl=[t]:ql=t}function J2(){if(ql){var t=ql,e=Hl;if(Hl=ql=null,ON(t),e)for(t=0;t<e.length;t++)ON(e[t])}}function Z2(t,e){return t(e)}function eC(){}var sx=!1;function tC(t,e,r){if(sx)return t(e,r);sx=!0;try{return Z2(t,e,r)}finally{sx=!1,(ql!==null||Hl!==null)&&(eC(),J2())}}function Sd(t,e){var r=t.stateNode;if(r===null)return null;var n=wg(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ge(231,e,typeof r));return r}var Mv=!1;if(Os)try{var ku={};Object.defineProperty(ku,"passive",{get:function(){Mv=!0}}),window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{Mv=!1}function X4(t,e,r,n,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var rd=!1,Ap=null,kp=!1,$v=null,Q4={onError:function(t){rd=!0,Ap=t}};function J4(t,e,r,n,a,s,o,l,c){rd=!1,Ap=null,X4.apply(Q4,arguments)}function Z4(t,e,r,n,a,s,o,l,c){if(J4.apply(this,arguments),rd){if(rd){var u=Ap;rd=!1,Ap=null}else throw Error(ge(198));kp||(kp=!0,$v=u)}}function rl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function rC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function DN(t){if(rl(t)!==t)throw Error(ge(188))}function e5(t){var e=t.alternate;if(!e){if(e=rl(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return DN(a),t;if(s===n)return DN(a),e;s=s.sibling}throw Error(ge(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(ge(189))}}if(r.alternate!==n)throw Error(ge(190))}if(r.tag!==3)throw Error(ge(188));return r.stateNode.current===r?t:e}function nC(t){return t=e5(t),t!==null?aC(t):null}function aC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aC(t);if(e!==null)return e;t=t.sibling}return null}var sC=Zn.unstable_scheduleCallback,RN=Zn.unstable_cancelCallback,t5=Zn.unstable_shouldYield,r5=Zn.unstable_requestPaint,vr=Zn.unstable_now,n5=Zn.unstable_getCurrentPriorityLevel,kw=Zn.unstable_ImmediatePriority,iC=Zn.unstable_UserBlockingPriority,Ep=Zn.unstable_NormalPriority,a5=Zn.unstable_LowPriority,oC=Zn.unstable_IdlePriority,xg=null,ns=null;function s5(t){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(xg,t,void 0,(t.current.flags&128)===128)}catch{}}var Ra=Math.clz32?Math.clz32:l5,i5=Math.log,o5=Math.LN2;function l5(t){return t>>>=0,t===0?32:31-(i5(t)/o5|0)|0}var bh=64,yh=4194304;function Ku(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tp(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Ku(l):(s&=o,s!==0&&(n=Ku(s)))}else o=r&~a,o!==0?n=Ku(o):s!==0&&(n=Ku(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,s=e&-e,a>=s||a===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ra(e),a=1<<r,n|=t[r],e&=~a;return n}function c5(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u5(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ra(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=c5(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Lv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lC(){var t=bh;return bh<<=1,!(bh&4194240)&&(bh=64),t}function ix(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function If(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ra(e),t[e]=r}function d5(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-Ra(r),s=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~s}}function Ew(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ra(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Et=0;function cC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uC,Tw,dC,fC,hC,Vv=!1,wh=[],Ai=null,ki=null,Ei=null,Ad=new Map,kd=new Map,mi=[],f5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function MN(t,e){switch(t){case"focusin":case"focusout":Ai=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":Ad.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kd.delete(e.pointerId)}}function Eu(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=Df(e),e!==null&&Tw(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function h5(t,e,r,n,a){switch(e){case"focusin":return Ai=Eu(Ai,t,e,r,n,a),!0;case"dragenter":return ki=Eu(ki,t,e,r,n,a),!0;case"mouseover":return Ei=Eu(Ei,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return Ad.set(s,Eu(Ad.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,kd.set(s,Eu(kd.get(s)||null,t,e,r,n,a)),!0}return!1}function pC(t){var e=_o(t.target);if(e!==null){var r=rl(e);if(r!==null){if(e=r.tag,e===13){if(e=rC(r),e!==null){t.blockedOn=e,hC(t.priority,function(){dC(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function np(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Fv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Dv=n,r.target.dispatchEvent(n),Dv=null}else return e=Df(r),e!==null&&Tw(e),t.blockedOn=r,!1;e.shift()}return!0}function $N(t,e,r){np(t)&&r.delete(e)}function p5(){Vv=!1,Ai!==null&&np(Ai)&&(Ai=null),ki!==null&&np(ki)&&(ki=null),Ei!==null&&np(Ei)&&(Ei=null),Ad.forEach($N),kd.forEach($N)}function Tu(t,e){t.blockedOn===e&&(t.blockedOn=null,Vv||(Vv=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,p5)))}function Ed(t){function e(a){return Tu(a,t)}if(0<wh.length){Tu(wh[0],t);for(var r=1;r<wh.length;r++){var n=wh[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ai!==null&&Tu(Ai,t),ki!==null&&Tu(ki,t),Ei!==null&&Tu(Ei,t),Ad.forEach(e),kd.forEach(e),r=0;r<mi.length;r++)n=mi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<mi.length&&(r=mi[0],r.blockedOn===null);)pC(r),r.blockedOn===null&&mi.shift()}var Gl=Hs.ReactCurrentBatchConfig,Cp=!0;function m5(t,e,r,n){var a=Et,s=Gl.transition;Gl.transition=null;try{Et=1,Cw(t,e,r,n)}finally{Et=a,Gl.transition=s}}function g5(t,e,r,n){var a=Et,s=Gl.transition;Gl.transition=null;try{Et=4,Cw(t,e,r,n)}finally{Et=a,Gl.transition=s}}function Cw(t,e,r,n){if(Cp){var a=Fv(t,e,r,n);if(a===null)gx(t,e,n,Pp,r),MN(t,n);else if(h5(a,t,e,r,n))n.stopPropagation();else if(MN(t,n),e&4&&-1<f5.indexOf(t)){for(;a!==null;){var s=Df(a);if(s!==null&&uC(s),s=Fv(t,e,r,n),s===null&&gx(t,e,n,Pp,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else gx(t,e,n,null,r)}}var Pp=null;function Fv(t,e,r,n){if(Pp=null,t=Aw(n),t=_o(t),t!==null)if(e=rl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=rC(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pp=t,null}function mC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n5()){case kw:return 1;case iC:return 4;case Ep:case a5:return 16;case oC:return 536870912;default:return 16}default:return 16}}var _i=null,Pw=null,ap=null;function gC(){if(ap)return ap;var t,e=Pw,r=e.length,n,a="value"in _i?_i.value:_i.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[s-n];n++);return ap=a.slice(t,1<n?1-n:void 0)}function sp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _h(){return!0}function LN(){return!1}function ta(t){function e(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_h:LN,this.isPropagationStopped=LN,this}return ar(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=_h)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=_h)},persist:function(){},isPersistent:_h}),e}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iw=ta(Gc),Of=ar({},Gc,{view:0,detail:0}),x5=ta(Of),ox,lx,Cu,vg=ar({},Of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ow,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cu&&(Cu&&t.type==="mousemove"?(ox=t.screenX-Cu.screenX,lx=t.screenY-Cu.screenY):lx=ox=0,Cu=t),ox)},movementY:function(t){return"movementY"in t?t.movementY:lx}}),VN=ta(vg),v5=ar({},vg,{dataTransfer:0}),b5=ta(v5),y5=ar({},Of,{relatedTarget:0}),cx=ta(y5),w5=ar({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),_5=ta(w5),N5=ar({},Gc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j5=ta(N5),S5=ar({},Gc,{data:0}),FN=ta(S5),A5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=E5[t])?!!e[t]:!1}function Ow(){return T5}var C5=ar({},Of,{key:function(t){if(t.key){var e=A5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?k5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ow,charCode:function(t){return t.type==="keypress"?sp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P5=ta(C5),I5=ar({},vg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UN=ta(I5),O5=ar({},Of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ow}),D5=ta(O5),R5=ar({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),M5=ta(R5),$5=ar({},vg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),L5=ta($5),V5=[9,13,27,32],Dw=Os&&"CompositionEvent"in window,nd=null;Os&&"documentMode"in document&&(nd=document.documentMode);var F5=Os&&"TextEvent"in window&&!nd,xC=Os&&(!Dw||nd&&8<nd&&11>=nd),BN=" ",zN=!1;function vC(t,e){switch(t){case"keyup":return V5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var El=!1;function U5(t,e){switch(t){case"compositionend":return bC(e);case"keypress":return e.which!==32?null:(zN=!0,BN);case"textInput":return t=e.data,t===BN&&zN?null:t;default:return null}}function B5(t,e){if(El)return t==="compositionend"||!Dw&&vC(t,e)?(t=gC(),ap=Pw=_i=null,El=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xC&&e.locale!=="ko"?null:e.data;default:return null}}var z5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!z5[t.type]:e==="textarea"}function yC(t,e,r,n){Q2(n),e=Ip(e,"onChange"),0<e.length&&(r=new Iw("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var ad=null,Td=null;function W5(t){PC(t,0)}function bg(t){var e=Pl(t);if(W2(e))return t}function q5(t,e){if(t==="change")return e}var wC=!1;if(Os){var ux;if(Os){var dx="oninput"in document;if(!dx){var qN=document.createElement("div");qN.setAttribute("oninput","return;"),dx=typeof qN.oninput=="function"}ux=dx}else ux=!1;wC=ux&&(!document.documentMode||9<document.documentMode)}function HN(){ad&&(ad.detachEvent("onpropertychange",_C),Td=ad=null)}function _C(t){if(t.propertyName==="value"&&bg(Td)){var e=[];yC(e,Td,t,Aw(t)),tC(W5,e)}}function H5(t,e,r){t==="focusin"?(HN(),ad=e,Td=r,ad.attachEvent("onpropertychange",_C)):t==="focusout"&&HN()}function G5(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bg(Td)}function K5(t,e){if(t==="click")return bg(e)}function Y5(t,e){if(t==="input"||t==="change")return bg(e)}function X5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fa=typeof Object.is=="function"?Object.is:X5;function Cd(t,e){if(Fa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!_v.call(e,a)||!Fa(t[a],e[a]))return!1}return!0}function GN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function KN(t,e){var r=GN(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=GN(r)}}function NC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function jC(){for(var t=window,e=Sp();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Sp(t.document)}return e}function Rw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q5(t){var e=jC(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&NC(r.ownerDocument.documentElement,r)){if(n!==null&&Rw(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,s=Math.min(n.start,a);n=n.end===void 0?s:Math.min(n.end,a),!t.extend&&s>n&&(a=n,n=s,s=a),a=KN(r,s);var o=KN(r,n);a&&o&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var J5=Os&&"documentMode"in document&&11>=document.documentMode,Tl=null,Uv=null,sd=null,Bv=!1;function YN(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bv||Tl==null||Tl!==Sp(n)||(n=Tl,"selectionStart"in n&&Rw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),sd&&Cd(sd,n)||(sd=n,n=Ip(Uv,"onSelect"),0<n.length&&(e=new Iw("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Tl)))}function Nh(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Cl={animationend:Nh("Animation","AnimationEnd"),animationiteration:Nh("Animation","AnimationIteration"),animationstart:Nh("Animation","AnimationStart"),transitionend:Nh("Transition","TransitionEnd")},fx={},SC={};Os&&(SC=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function yg(t){if(fx[t])return fx[t];if(!Cl[t])return t;var e=Cl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in SC)return fx[t]=e[r];return t}var AC=yg("animationend"),kC=yg("animationiteration"),EC=yg("animationstart"),TC=yg("transitionend"),CC=new Map,XN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(t,e){CC.set(t,e),tl(e,[t])}for(var hx=0;hx<XN.length;hx++){var px=XN[hx],Z5=px.toLowerCase(),e3=px[0].toUpperCase()+px.slice(1);Qi(Z5,"on"+e3)}Qi(AC,"onAnimationEnd");Qi(kC,"onAnimationIteration");Qi(EC,"onAnimationStart");Qi("dblclick","onDoubleClick");Qi("focusin","onFocus");Qi("focusout","onBlur");Qi(TC,"onTransitionEnd");ic("onMouseEnter",["mouseout","mouseover"]);ic("onMouseLeave",["mouseout","mouseover"]);ic("onPointerEnter",["pointerout","pointerover"]);ic("onPointerLeave",["pointerout","pointerover"]);tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tl("onBeforeInput",["compositionend","keypress","textInput","paste"]);tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function QN(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Z4(n,e,void 0,t),t.currentTarget=null}function PC(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;QN(a,l,u),s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;QN(a,l,u),s=c}}}if(kp)throw t=$v,kp=!1,$v=null,t}function zt(t,e){var r=e[Gv];r===void 0&&(r=e[Gv]=new Set);var n=t+"__bubble";r.has(n)||(IC(e,t,2,!1),r.add(n))}function mx(t,e,r){var n=0;e&&(n|=4),IC(r,t,n,e)}var jh="_reactListening"+Math.random().toString(36).slice(2);function Pd(t){if(!t[jh]){t[jh]=!0,V2.forEach(function(r){r!=="selectionchange"&&(t3.has(r)||mx(r,!1,t),mx(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jh]||(e[jh]=!0,mx("selectionchange",!1,e))}}function IC(t,e,r,n){switch(mC(e)){case 1:var a=m5;break;case 4:a=g5;break;default:a=Cw}r=a.bind(null,e,r,t),a=void 0,!Mv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function gx(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=_o(l),o===null)return;if(c=o.tag,c===5||c===6){n=s=o;continue e}l=l.parentNode}}n=n.return}tC(function(){var u=s,d=Aw(r),f=[];e:{var p=CC.get(t);if(p!==void 0){var m=Iw,v=t;switch(t){case"keypress":if(sp(r)===0)break e;case"keydown":case"keyup":m=P5;break;case"focusin":v="focus",m=cx;break;case"focusout":v="blur",m=cx;break;case"beforeblur":case"afterblur":m=cx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=VN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=b5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=D5;break;case AC:case kC:case EC:m=_5;break;case TC:m=M5;break;case"scroll":m=x5;break;case"wheel":m=L5;break;case"copy":case"cut":case"paste":m=j5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=UN}var x=(e&4)!==0,_=!x&&t==="scroll",y=x?p!==null?p+"Capture":null:p;x=[];for(var g=u,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,y!==null&&(E=Sd(g,y),E!=null&&x.push(Id(g,E,w)))),_)break;g=g.return}0<x.length&&(p=new m(p,v,null,r,d),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&r!==Dv&&(v=r.relatedTarget||r.fromElement)&&(_o(v)||v[Ds]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=u,v=v?_o(v):null,v!==null&&(_=rl(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(x=VN,E="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(x=UN,E="onPointerLeave",y="onPointerEnter",g="pointer"),_=m==null?p:Pl(m),w=v==null?p:Pl(v),p=new x(E,g+"leave",m,r,d),p.target=_,p.relatedTarget=w,E=null,_o(d)===u&&(x=new x(y,g+"enter",v,r,d),x.target=w,x.relatedTarget=_,E=x),_=E,m&&v)t:{for(x=m,y=v,g=0,w=x;w;w=ml(w))g++;for(w=0,E=y;E;E=ml(E))w++;for(;0<g-w;)x=ml(x),g--;for(;0<w-g;)y=ml(y),w--;for(;g--;){if(x===y||y!==null&&x===y.alternate)break t;x=ml(x),y=ml(y)}x=null}else x=null;m!==null&&JN(f,p,m,x,!1),v!==null&&_!==null&&JN(f,_,v,x,!0)}}e:{if(p=u?Pl(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=q5;else if(WN(p))if(wC)N=Y5;else{N=G5;var k=H5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=K5);if(N&&(N=N(t,u))){yC(f,N,r,d);break e}k&&k(t,p,u),t==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&Tv(p,"number",p.value)}switch(k=u?Pl(u):window,t){case"focusin":(WN(k)||k.contentEditable==="true")&&(Tl=k,Uv=u,sd=null);break;case"focusout":sd=Uv=Tl=null;break;case"mousedown":Bv=!0;break;case"contextmenu":case"mouseup":case"dragend":Bv=!1,YN(f,r,d);break;case"selectionchange":if(J5)break;case"keydown":case"keyup":YN(f,r,d)}var S;if(Dw)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else El?vC(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(xC&&r.locale!=="ko"&&(El||b!=="onCompositionStart"?b==="onCompositionEnd"&&El&&(S=gC()):(_i=d,Pw="value"in _i?_i.value:_i.textContent,El=!0)),k=Ip(u,b),0<k.length&&(b=new FN(b,t,null,r,d),f.push({event:b,listeners:k}),S?b.data=S:(S=bC(r),S!==null&&(b.data=S)))),(S=F5?U5(t,r):B5(t,r))&&(u=Ip(u,"onBeforeInput"),0<u.length&&(d=new FN("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}PC(f,e)})}function Id(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ip(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Sd(t,r),s!=null&&n.unshift(Id(t,s,a)),s=Sd(t,e),s!=null&&n.push(Id(t,s,a))),t=t.return}return n}function ml(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function JN(t,e,r,n,a){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Sd(r,s),c!=null&&o.unshift(Id(r,c,l))):a||(c=Sd(r,s),c!=null&&o.push(Id(r,c,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var r3=/\r\n?/g,n3=/\u0000|\uFFFD/g;function ZN(t){return(typeof t=="string"?t:""+t).replace(r3,`
`).replace(n3,"")}function Sh(t,e,r){if(e=ZN(e),ZN(t)!==e&&r)throw Error(ge(425))}function Op(){}var zv=null,Wv=null;function qv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hv=typeof setTimeout=="function"?setTimeout:void 0,a3=typeof clearTimeout=="function"?clearTimeout:void 0,ej=typeof Promise=="function"?Promise:void 0,s3=typeof queueMicrotask=="function"?queueMicrotask:typeof ej<"u"?function(t){return ej.resolve(null).then(t).catch(i3)}:Hv;function i3(t){setTimeout(function(){throw t})}function xx(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Ed(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ed(e)}function Ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tj(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Kc=Math.random().toString(36).slice(2),Qa="__reactFiber$"+Kc,Od="__reactProps$"+Kc,Ds="__reactContainer$"+Kc,Gv="__reactEvents$"+Kc,o3="__reactListeners$"+Kc,l3="__reactHandles$"+Kc;function _o(t){var e=t[Qa];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ds]||r[Qa]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=tj(t);t!==null;){if(r=t[Qa])return r;t=tj(t)}return e}t=r,r=t.parentNode}return null}function Df(t){return t=t[Qa]||t[Ds],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function wg(t){return t[Od]||null}var Kv=[],Il=-1;function Ji(t){return{current:t}}function Kt(t){0>Il||(t.current=Kv[Il],Kv[Il]=null,Il--)}function Ft(t,e){Il++,Kv[Il]=t.current,t.current=e}var zi={},xn=Ji(zi),Ln=Ji(!1),Lo=zi;function oc(t,e){var r=t.type.contextTypes;if(!r)return zi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Vn(t){return t=t.childContextTypes,t!=null}function Dp(){Kt(Ln),Kt(xn)}function rj(t,e,r){if(xn.current!==zi)throw Error(ge(168));Ft(xn,e),Ft(Ln,r)}function OC(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(ge(108,H4(t)||"Unknown",a));return ar({},r,n)}function Rp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zi,Lo=xn.current,Ft(xn,t),Ft(Ln,Ln.current),!0}function nj(t,e,r){var n=t.stateNode;if(!n)throw Error(ge(169));r?(t=OC(t,e,Lo),n.__reactInternalMemoizedMergedChildContext=t,Kt(Ln),Kt(xn),Ft(xn,t)):Kt(Ln),Ft(Ln,r)}var ws=null,_g=!1,vx=!1;function DC(t){ws===null?ws=[t]:ws.push(t)}function c3(t){_g=!0,DC(t)}function Zi(){if(!vx&&ws!==null){vx=!0;var t=0,e=Et;try{var r=ws;for(Et=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ws=null,_g=!1}catch(a){throw ws!==null&&(ws=ws.slice(t+1)),sC(kw,Zi),a}finally{Et=e,vx=!1}}return null}var Ol=[],Dl=0,Mp=null,$p=0,ia=[],oa=0,Vo=null,_s=1,Ns="";function po(t,e){Ol[Dl++]=$p,Ol[Dl++]=Mp,Mp=t,$p=e}function RC(t,e,r){ia[oa++]=_s,ia[oa++]=Ns,ia[oa++]=Vo,Vo=t;var n=_s;t=Ns;var a=32-Ra(n)-1;n&=~(1<<a),r+=1;var s=32-Ra(e)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,_s=1<<32-Ra(e)+a|r<<a|n,Ns=s+t}else _s=1<<s|r<<a|n,Ns=t}function Mw(t){t.return!==null&&(po(t,1),RC(t,1,0))}function $w(t){for(;t===Mp;)Mp=Ol[--Dl],Ol[Dl]=null,$p=Ol[--Dl],Ol[Dl]=null;for(;t===Vo;)Vo=ia[--oa],ia[oa]=null,Ns=ia[--oa],ia[oa]=null,_s=ia[--oa],ia[oa]=null}var Qn=null,Yn=null,Xt=!1,Pa=null;function MC(t,e){var r=da(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function aj(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qn=t,Yn=Ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qn=t,Yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Vo!==null?{id:_s,overflow:Ns}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=da(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Qn=t,Yn=null,!0):!1;default:return!1}}function Yv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xv(t){if(Xt){var e=Yn;if(e){var r=e;if(!aj(t,e)){if(Yv(t))throw Error(ge(418));e=Ti(r.nextSibling);var n=Qn;e&&aj(t,e)?MC(n,r):(t.flags=t.flags&-4097|2,Xt=!1,Qn=t)}}else{if(Yv(t))throw Error(ge(418));t.flags=t.flags&-4097|2,Xt=!1,Qn=t}}}function sj(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function Ah(t){if(t!==Qn)return!1;if(!Xt)return sj(t),Xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qv(t.type,t.memoizedProps)),e&&(e=Yn)){if(Yv(t))throw $C(),Error(ge(418));for(;e;)MC(t,e),e=Ti(e.nextSibling)}if(sj(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Yn=Ti(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Yn=null}}else Yn=Qn?Ti(t.stateNode.nextSibling):null;return!0}function $C(){for(var t=Yn;t;)t=Ti(t.nextSibling)}function lc(){Yn=Qn=null,Xt=!1}function Lw(t){Pa===null?Pa=[t]:Pa.push(t)}var u3=Hs.ReactCurrentBatchConfig;function Pu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ge(309));var n=r.stateNode}if(!n)throw Error(ge(147,t));var a=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ge(284));if(!r._owner)throw Error(ge(290,t))}return t}function kh(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ij(t){var e=t._init;return e(t._payload)}function LC(t){function e(y,g){if(t){var w=y.deletions;w===null?(y.deletions=[g],y.flags|=16):w.push(g)}}function r(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function a(y,g){return y=Oi(y,g),y.index=0,y.sibling=null,y}function s(y,g,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<g?(y.flags|=2,g):w):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,g,w,E){return g===null||g.tag!==6?(g=Sx(w,y.mode,E),g.return=y,g):(g=a(g,w),g.return=y,g)}function c(y,g,w,E){var N=w.type;return N===kl?d(y,g,w.props.children,E,w.key):g!==null&&(g.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ui&&ij(N)===g.type)?(E=a(g,w.props),E.ref=Pu(y,g,w),E.return=y,E):(E=fp(w.type,w.key,w.props,null,y.mode,E),E.ref=Pu(y,g,w),E.return=y,E)}function u(y,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Ax(w,y.mode,E),g.return=y,g):(g=a(g,w.children||[]),g.return=y,g)}function d(y,g,w,E,N){return g===null||g.tag!==7?(g=Io(w,y.mode,E,N),g.return=y,g):(g=a(g,w),g.return=y,g)}function f(y,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Sx(""+g,y.mode,w),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case gh:return w=fp(g.type,g.key,g.props,null,y.mode,w),w.ref=Pu(y,null,g),w.return=y,w;case Al:return g=Ax(g,y.mode,w),g.return=y,g;case ui:var E=g._init;return f(y,E(g._payload),w)}if(Gu(g)||Au(g))return g=Io(g,y.mode,w,null),g.return=y,g;kh(y,g)}return null}function p(y,g,w,E){var N=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(y,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gh:return w.key===N?c(y,g,w,E):null;case Al:return w.key===N?u(y,g,w,E):null;case ui:return N=w._init,p(y,g,N(w._payload),E)}if(Gu(w)||Au(w))return N!==null?null:d(y,g,w,E,null);kh(y,w)}return null}function m(y,g,w,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(w)||null,l(g,y,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case gh:return y=y.get(E.key===null?w:E.key)||null,c(g,y,E,N);case Al:return y=y.get(E.key===null?w:E.key)||null,u(g,y,E,N);case ui:var k=E._init;return m(y,g,w,k(E._payload),N)}if(Gu(E)||Au(E))return y=y.get(w)||null,d(g,y,E,N,null);kh(g,E)}return null}function v(y,g,w,E){for(var N=null,k=null,S=g,b=g=0,A=null;S!==null&&b<w.length;b++){S.index>b?(A=S,S=null):A=S.sibling;var T=p(y,S,w[b],E);if(T===null){S===null&&(S=A);break}t&&S&&T.alternate===null&&e(y,S),g=s(T,g,b),k===null?N=T:k.sibling=T,k=T,S=A}if(b===w.length)return r(y,S),Xt&&po(y,b),N;if(S===null){for(;b<w.length;b++)S=f(y,w[b],E),S!==null&&(g=s(S,g,b),k===null?N=S:k.sibling=S,k=S);return Xt&&po(y,b),N}for(S=n(y,S);b<w.length;b++)A=m(S,y,b,w[b],E),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?b:A.key),g=s(A,g,b),k===null?N=A:k.sibling=A,k=A);return t&&S.forEach(function(I){return e(y,I)}),Xt&&po(y,b),N}function x(y,g,w,E){var N=Au(w);if(typeof N!="function")throw Error(ge(150));if(w=N.call(w),w==null)throw Error(ge(151));for(var k=N=null,S=g,b=g=0,A=null,T=w.next();S!==null&&!T.done;b++,T=w.next()){S.index>b?(A=S,S=null):A=S.sibling;var I=p(y,S,T.value,E);if(I===null){S===null&&(S=A);break}t&&S&&I.alternate===null&&e(y,S),g=s(I,g,b),k===null?N=I:k.sibling=I,k=I,S=A}if(T.done)return r(y,S),Xt&&po(y,b),N;if(S===null){for(;!T.done;b++,T=w.next())T=f(y,T.value,E),T!==null&&(g=s(T,g,b),k===null?N=T:k.sibling=T,k=T);return Xt&&po(y,b),N}for(S=n(y,S);!T.done;b++,T=w.next())T=m(S,y,b,T.value,E),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?b:T.key),g=s(T,g,b),k===null?N=T:k.sibling=T,k=T);return t&&S.forEach(function(O){return e(y,O)}),Xt&&po(y,b),N}function _(y,g,w,E){if(typeof w=="object"&&w!==null&&w.type===kl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case gh:e:{for(var N=w.key,k=g;k!==null;){if(k.key===N){if(N=w.type,N===kl){if(k.tag===7){r(y,k.sibling),g=a(k,w.props.children),g.return=y,y=g;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ui&&ij(N)===k.type){r(y,k.sibling),g=a(k,w.props),g.ref=Pu(y,k,w),g.return=y,y=g;break e}r(y,k);break}else e(y,k);k=k.sibling}w.type===kl?(g=Io(w.props.children,y.mode,E,w.key),g.return=y,y=g):(E=fp(w.type,w.key,w.props,null,y.mode,E),E.ref=Pu(y,g,w),E.return=y,y=E)}return o(y);case Al:e:{for(k=w.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){r(y,g.sibling),g=a(g,w.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else e(y,g);g=g.sibling}g=Ax(w,y.mode,E),g.return=y,y=g}return o(y);case ui:return k=w._init,_(y,g,k(w._payload),E)}if(Gu(w))return v(y,g,w,E);if(Au(w))return x(y,g,w,E);kh(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(r(y,g.sibling),g=a(g,w),g.return=y,y=g):(r(y,g),g=Sx(w,y.mode,E),g.return=y,y=g),o(y)):r(y,g)}return _}var cc=LC(!0),VC=LC(!1),Lp=Ji(null),Vp=null,Rl=null,Vw=null;function Fw(){Vw=Rl=Vp=null}function Uw(t){var e=Lp.current;Kt(Lp),t._currentValue=e}function Qv(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Kl(t,e){Vp=t,Vw=Rl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mn=!0),t.firstContext=null)}function ma(t){var e=t._currentValue;if(Vw!==t)if(t={context:t,memoizedValue:e,next:null},Rl===null){if(Vp===null)throw Error(ge(308));Rl=t,Vp.dependencies={lanes:0,firstContext:t}}else Rl=Rl.next=t;return e}var No=null;function Bw(t){No===null?No=[t]:No.push(t)}function FC(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,Bw(e)):(r.next=a.next,a.next=r),e.interleaved=r,Rs(t,n)}function Rs(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var di=!1;function zw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ts(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ci(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,wt&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,Rs(t,r)}return a=n.interleaved,a===null?(e.next=e,Bw(n)):(e.next=a.next,a.next=e),n.interleaved=e,Rs(t,r)}function ip(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ew(t,r)}}function oj(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Fp(t,e,r,n){var a=t.updateQueue;di=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=a.baseState;o=0,d=u=c=null,l=s;do{var p=l.lane,m=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,x=l;switch(p=e,m=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=ar({},f,p);break e;case 2:di=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=a.effects,p===null?a.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;p=l,l=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do o|=a.lane,a=a.next;while(a!==e)}else s===null&&(a.shared.lanes=0);Uo|=o,t.lanes=o,t.memoizedState=f}}function lj(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ge(191,a));a.call(n)}}}var Rf={},as=Ji(Rf),Dd=Ji(Rf),Rd=Ji(Rf);function jo(t){if(t===Rf)throw Error(ge(174));return t}function Ww(t,e){switch(Ft(Rd,e),Ft(Dd,t),Ft(as,Rf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pv(e,t)}Kt(as),Ft(as,e)}function uc(){Kt(as),Kt(Dd),Kt(Rd)}function BC(t){jo(Rd.current);var e=jo(as.current),r=Pv(e,t.type);e!==r&&(Ft(Dd,t),Ft(as,r))}function qw(t){Dd.current===t&&(Kt(as),Kt(Dd))}var rr=Ji(0);function Up(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bx=[];function Hw(){for(var t=0;t<bx.length;t++)bx[t]._workInProgressVersionPrimary=null;bx.length=0}var op=Hs.ReactCurrentDispatcher,yx=Hs.ReactCurrentBatchConfig,Fo=0,nr=null,Dr=null,Yr=null,Bp=!1,id=!1,Md=0,d3=0;function cn(){throw Error(ge(321))}function Gw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Fa(t[r],e[r]))return!1;return!0}function Kw(t,e,r,n,a,s){if(Fo=s,nr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,op.current=t===null||t.memoizedState===null?m3:g3,t=r(n,a),id){s=0;do{if(id=!1,Md=0,25<=s)throw Error(ge(301));s+=1,Yr=Dr=null,e.updateQueue=null,op.current=x3,t=r(n,a)}while(id)}if(op.current=zp,e=Dr!==null&&Dr.next!==null,Fo=0,Yr=Dr=nr=null,Bp=!1,e)throw Error(ge(300));return t}function Yw(){var t=Md!==0;return Md=0,t}function Ya(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yr===null?nr.memoizedState=Yr=t:Yr=Yr.next=t,Yr}function ga(){if(Dr===null){var t=nr.alternate;t=t!==null?t.memoizedState:null}else t=Dr.next;var e=Yr===null?nr.memoizedState:Yr.next;if(e!==null)Yr=e,Dr=t;else{if(t===null)throw Error(ge(310));Dr=t,t={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Yr===null?nr.memoizedState=Yr=t:Yr=Yr.next=t}return Yr}function $d(t,e){return typeof e=="function"?e(t):e}function wx(t){var e=ga(),r=e.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=t;var n=Dr,a=n.baseQueue,s=r.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}n.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,n=n.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Fo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,nr.lanes|=d,Uo|=d}u=u.next}while(u!==null&&u!==s);c===null?o=n:c.next=l,Fa(n,e.memoizedState)||(Mn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do s=a.lane,nr.lanes|=s,Uo|=s,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function _x(t){var e=ga(),r=e.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);Fa(s,e.memoizedState)||(Mn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function zC(){}function WC(t,e){var r=nr,n=ga(),a=e(),s=!Fa(n.memoizedState,a);if(s&&(n.memoizedState=a,Mn=!0),n=n.queue,Xw(GC.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Yr!==null&&Yr.memoizedState.tag&1){if(r.flags|=2048,Ld(9,HC.bind(null,r,n,a,e),void 0,null),Qr===null)throw Error(ge(349));Fo&30||qC(r,e,a)}return a}function qC(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function HC(t,e,r,n){e.value=r,e.getSnapshot=n,KC(e)&&YC(t)}function GC(t,e,r){return r(function(){KC(e)&&YC(t)})}function KC(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Fa(t,r)}catch{return!0}}function YC(t){var e=Rs(t,1);e!==null&&Ma(e,t,1,-1)}function cj(t){var e=Ya();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:t},e.queue=t,t=t.dispatch=p3.bind(null,nr,t),[e.memoizedState,t]}function Ld(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=nr.updateQueue,e===null?(e={lastEffect:null,stores:null},nr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function XC(){return ga().memoizedState}function lp(t,e,r,n){var a=Ya();nr.flags|=t,a.memoizedState=Ld(1|e,r,void 0,n===void 0?null:n)}function Ng(t,e,r,n){var a=ga();n=n===void 0?null:n;var s=void 0;if(Dr!==null){var o=Dr.memoizedState;if(s=o.destroy,n!==null&&Gw(n,o.deps)){a.memoizedState=Ld(e,r,s,n);return}}nr.flags|=t,a.memoizedState=Ld(1|e,r,s,n)}function uj(t,e){return lp(8390656,8,t,e)}function Xw(t,e){return Ng(2048,8,t,e)}function QC(t,e){return Ng(4,2,t,e)}function JC(t,e){return Ng(4,4,t,e)}function ZC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eP(t,e,r){return r=r!=null?r.concat([t]):null,Ng(4,4,ZC.bind(null,e,t),r)}function Qw(){}function tP(t,e){var r=ga();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Gw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function rP(t,e){var r=ga();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Gw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function nP(t,e,r){return Fo&21?(Fa(r,e)||(r=lC(),nr.lanes|=r,Uo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=r)}function f3(t,e){var r=Et;Et=r!==0&&4>r?r:4,t(!0);var n=yx.transition;yx.transition={};try{t(!1),e()}finally{Et=r,yx.transition=n}}function aP(){return ga().memoizedState}function h3(t,e,r){var n=Ii(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},sP(t))iP(e,r);else if(r=FC(t,e,r,n),r!==null){var a=kn();Ma(r,t,n,a),oP(r,e,n)}}function p3(t,e,r){var n=Ii(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(sP(t))iP(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,Fa(l,o)){var c=e.interleaved;c===null?(a.next=a,Bw(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=FC(t,e,a,n),r!==null&&(a=kn(),Ma(r,t,n,a),oP(r,e,n))}}function sP(t){var e=t.alternate;return t===nr||e!==null&&e===nr}function iP(t,e){id=Bp=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function oP(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ew(t,r)}}var zp={readContext:ma,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},m3={readContext:ma,useCallback:function(t,e){return Ya().memoizedState=[t,e===void 0?null:e],t},useContext:ma,useEffect:uj,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,lp(4194308,4,ZC.bind(null,e,t),r)},useLayoutEffect:function(t,e){return lp(4194308,4,t,e)},useInsertionEffect:function(t,e){return lp(4,2,t,e)},useMemo:function(t,e){var r=Ya();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ya();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=h3.bind(null,nr,t),[n.memoizedState,t]},useRef:function(t){var e=Ya();return t={current:t},e.memoizedState=t},useState:cj,useDebugValue:Qw,useDeferredValue:function(t){return Ya().memoizedState=t},useTransition:function(){var t=cj(!1),e=t[0];return t=f3.bind(null,t[1]),Ya().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=nr,a=Ya();if(Xt){if(r===void 0)throw Error(ge(407));r=r()}else{if(r=e(),Qr===null)throw Error(ge(349));Fo&30||qC(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,uj(GC.bind(null,n,s,t),[t]),n.flags|=2048,Ld(9,HC.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Ya(),e=Qr.identifierPrefix;if(Xt){var r=Ns,n=_s;r=(n&~(1<<32-Ra(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Md++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=d3++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g3={readContext:ma,useCallback:tP,useContext:ma,useEffect:Xw,useImperativeHandle:eP,useInsertionEffect:QC,useLayoutEffect:JC,useMemo:rP,useReducer:wx,useRef:XC,useState:function(){return wx($d)},useDebugValue:Qw,useDeferredValue:function(t){var e=ga();return nP(e,Dr.memoizedState,t)},useTransition:function(){var t=wx($d)[0],e=ga().memoizedState;return[t,e]},useMutableSource:zC,useSyncExternalStore:WC,useId:aP,unstable_isNewReconciler:!1},x3={readContext:ma,useCallback:tP,useContext:ma,useEffect:Xw,useImperativeHandle:eP,useInsertionEffect:QC,useLayoutEffect:JC,useMemo:rP,useReducer:_x,useRef:XC,useState:function(){return _x($d)},useDebugValue:Qw,useDeferredValue:function(t){var e=ga();return Dr===null?e.memoizedState=t:nP(e,Dr.memoizedState,t)},useTransition:function(){var t=_x($d)[0],e=ga().memoizedState;return[t,e]},useMutableSource:zC,useSyncExternalStore:WC,useId:aP,unstable_isNewReconciler:!1};function ka(t,e){if(t&&t.defaultProps){e=ar({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Jv(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ar({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var jg={isMounted:function(t){return(t=t._reactInternals)?rl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=kn(),a=Ii(t),s=Ts(n,a);s.payload=e,r!=null&&(s.callback=r),e=Ci(t,s,a),e!==null&&(Ma(e,t,a,n),ip(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=kn(),a=Ii(t),s=Ts(n,a);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=Ci(t,s,a),e!==null&&(Ma(e,t,a,n),ip(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=kn(),n=Ii(t),a=Ts(r,n);a.tag=2,e!=null&&(a.callback=e),e=Ci(t,a,n),e!==null&&(Ma(e,t,n,r),ip(e,t,n))}};function dj(t,e,r,n,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Cd(r,n)||!Cd(a,s):!0}function lP(t,e,r){var n=!1,a=zi,s=e.contextType;return typeof s=="object"&&s!==null?s=ma(s):(a=Vn(e)?Lo:xn.current,n=e.contextTypes,s=(n=n!=null)?oc(t,a):zi),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jg,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=s),e}function fj(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&jg.enqueueReplaceState(e,e.state,null)}function Zv(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},zw(t);var s=e.contextType;typeof s=="object"&&s!==null?a.context=ma(s):(s=Vn(e)?Lo:xn.current,a.context=oc(t,s)),a.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jv(t,e,s,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&jg.enqueueReplaceState(a,a.state,null),Fp(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function dc(t,e){try{var r="",n=e;do r+=q4(n),n=n.return;while(n);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:a,digest:null}}function Nx(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function eb(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var v3=typeof WeakMap=="function"?WeakMap:Map;function cP(t,e,r){r=Ts(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){qp||(qp=!0,ub=n),eb(t,e)},r}function uP(t,e,r){r=Ts(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){eb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){eb(t,e),typeof n!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function hj(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new v3;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=I3.bind(null,t,e,r),e.then(t,t))}function pj(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mj(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ts(-1,1),e.tag=2,Ci(r,e,1))),r.lanes|=1),t)}var b3=Hs.ReactCurrentOwner,Mn=!1;function Nn(t,e,r,n){e.child=t===null?VC(e,null,r,n):cc(e,t.child,r,n)}function gj(t,e,r,n,a){r=r.render;var s=e.ref;return Kl(e,a),n=Kw(t,e,r,n,s,a),r=Yw(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Ms(t,e,a)):(Xt&&r&&Mw(e),e.flags|=1,Nn(t,e,n,a),e.child)}function xj(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!s1(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,dP(t,e,s,n,a)):(t=fp(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Cd,r(o,n)&&t.ref===e.ref)return Ms(t,e,a)}return e.flags|=1,t=Oi(s,n),t.ref=e.ref,t.return=e,e.child=t}function dP(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(Cd(s,n)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=n=s,(t.lanes&a)!==0)t.flags&131072&&(Mn=!0);else return e.lanes=t.lanes,Ms(t,e,a)}return tb(t,e,r,n,a)}function fP(t,e,r){var n=e.pendingProps,a=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft($l,Hn),Hn|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft($l,Hn),Hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ft($l,Hn),Hn|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ft($l,Hn),Hn|=n;return Nn(t,e,a,r),e.child}function hP(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function tb(t,e,r,n,a){var s=Vn(r)?Lo:xn.current;return s=oc(e,s),Kl(e,a),r=Kw(t,e,r,n,s,a),n=Yw(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Ms(t,e,a)):(Xt&&n&&Mw(e),e.flags|=1,Nn(t,e,r,a),e.child)}function vj(t,e,r,n,a){if(Vn(r)){var s=!0;Rp(e)}else s=!1;if(Kl(e,a),e.stateNode===null)cp(t,e),lP(e,r,n),Zv(e,r,n,a),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ma(u):(u=Vn(r)?Lo:xn.current,u=oc(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&fj(e,o,n,u),di=!1;var p=e.memoizedState;o.state=p,Fp(e,n,o,a),c=e.memoizedState,l!==n||p!==c||Ln.current||di?(typeof d=="function"&&(Jv(e,r,d,n),c=e.memoizedState),(l=di||dj(e,r,l,n,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,UC(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ka(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ma(c):(c=Vn(r)?Lo:xn.current,c=oc(e,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&fj(e,o,n,c),di=!1,p=e.memoizedState,o.state=p,Fp(e,n,o,a);var v=e.memoizedState;l!==f||p!==v||Ln.current||di?(typeof m=="function"&&(Jv(e,r,m,n),v=e.memoizedState),(u=di||dj(e,r,u,n,p,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return rb(t,e,r,n,s,a)}function rb(t,e,r,n,a,s){hP(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return a&&nj(e,r,!1),Ms(t,e,s);n=e.stateNode,b3.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=cc(e,t.child,null,s),e.child=cc(e,null,l,s)):Nn(t,e,l,s),e.memoizedState=n.state,a&&nj(e,r,!0),e.child}function pP(t){var e=t.stateNode;e.pendingContext?rj(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rj(t,e.context,!1),Ww(t,e.containerInfo)}function bj(t,e,r,n,a){return lc(),Lw(a),e.flags|=256,Nn(t,e,r,n),e.child}var nb={dehydrated:null,treeContext:null,retryLane:0};function ab(t){return{baseLanes:t,cachePool:null,transitions:null}}function mP(t,e,r){var n=e.pendingProps,a=rr.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(a&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ft(rr,a&1),t===null)return Xv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kg(o,n,0,null),t=Io(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ab(r),e.memoizedState=nb,t):Jw(e,o));if(a=t.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return y3(t,e,o,n,l,a,r);if(s){s=n.fallback,o=e.mode,a=t.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Oi(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=Oi(l,s):(s=Io(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?ab(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=nb,n}return s=t.child,t=s.sibling,n=Oi(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Jw(t,e){return e=kg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eh(t,e,r,n){return n!==null&&Lw(n),cc(e,t.child,null,r),t=Jw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function y3(t,e,r,n,a,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Nx(Error(ge(422))),Eh(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,a=e.mode,n=kg({mode:"visible",children:n.children},a,0,null),s=Io(s,a,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&cc(e,t.child,null,o),e.child.memoizedState=ab(o),e.memoizedState=nb,s);if(!(e.mode&1))return Eh(t,e,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,s=Error(ge(419)),n=Nx(s,n,void 0),Eh(t,e,o,n)}if(l=(o&t.childLanes)!==0,Mn||l){if(n=Qr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,Rs(t,a),Ma(n,t,a,-1))}return a1(),n=Nx(Error(ge(421))),Eh(t,e,o,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=O3.bind(null,t),a._reactRetry=e,null):(t=s.treeContext,Yn=Ti(a.nextSibling),Qn=e,Xt=!0,Pa=null,t!==null&&(ia[oa++]=_s,ia[oa++]=Ns,ia[oa++]=Vo,_s=t.id,Ns=t.overflow,Vo=e),e=Jw(e,n.children),e.flags|=4096,e)}function yj(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Qv(t.return,e,r)}function jx(t,e,r,n,a){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=a)}function gP(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;if(Nn(t,e,n.children,r),n=rr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yj(t,r,e);else if(t.tag===19)yj(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ft(rr,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&Up(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),jx(e,!1,a,r,s);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Up(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}jx(e,!0,r,null,s);break;case"together":jx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ms(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Uo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,r=Oi(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Oi(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function w3(t,e,r){switch(e.tag){case 3:pP(e),lc();break;case 5:BC(e);break;case 1:Vn(e.type)&&Rp(e);break;case 4:Ww(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Ft(Lp,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ft(rr,rr.current&1),e.flags|=128,null):r&e.child.childLanes?mP(t,e,r):(Ft(rr,rr.current&1),t=Ms(t,e,r),t!==null?t.sibling:null);Ft(rr,rr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return gP(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ft(rr,rr.current),n)break;return null;case 22:case 23:return e.lanes=0,fP(t,e,r)}return Ms(t,e,r)}var xP,sb,vP,bP;xP=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};sb=function(){};vP=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,jo(as.current);var s=null;switch(r){case"input":a=kv(t,a),n=kv(t,n),s=[];break;case"select":a=ar({},a,{value:void 0}),n=ar({},n,{value:void 0}),s=[];break;case"textarea":a=Cv(t,a),n=Cv(t,n),s=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Op)}Iv(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Nd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Nd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&zt("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};bP=function(t,e,r,n){r!==n&&(e.flags|=4)};function Iu(t,e){if(!Xt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function _3(t,e,r){var n=e.pendingProps;switch($w(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Vn(e.type)&&Dp(),un(e),null;case 3:return n=e.stateNode,uc(),Kt(Ln),Kt(xn),Hw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ah(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pa!==null&&(hb(Pa),Pa=null))),sb(t,e),un(e),null;case 5:qw(e);var a=jo(Rd.current);if(r=e.type,t!==null&&e.stateNode!=null)vP(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ge(166));return un(e),null}if(t=jo(as.current),Ah(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Qa]=e,n[Od]=s,t=(e.mode&1)!==0,r){case"dialog":zt("cancel",n),zt("close",n);break;case"iframe":case"object":case"embed":zt("load",n);break;case"video":case"audio":for(a=0;a<Yu.length;a++)zt(Yu[a],n);break;case"source":zt("error",n);break;case"img":case"image":case"link":zt("error",n),zt("load",n);break;case"details":zt("toggle",n);break;case"input":TN(n,s),zt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},zt("invalid",n);break;case"textarea":PN(n,s),zt("invalid",n)}Iv(r,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?n.textContent!==l&&(s.suppressHydrationWarning!==!0&&Sh(n.textContent,l,t),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Sh(n.textContent,l,t),a=["children",""+l]):Nd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&zt("scroll",n)}switch(r){case"input":xh(n),CN(n,s,!0);break;case"textarea":xh(n),IN(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Op)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=G2(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Qa]=e,t[Od]=n,xP(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ov(r,n),r){case"dialog":zt("cancel",t),zt("close",t),a=n;break;case"iframe":case"object":case"embed":zt("load",t),a=n;break;case"video":case"audio":for(a=0;a<Yu.length;a++)zt(Yu[a],t);a=n;break;case"source":zt("error",t),a=n;break;case"img":case"image":case"link":zt("error",t),zt("load",t),a=n;break;case"details":zt("toggle",t),a=n;break;case"input":TN(t,n),a=kv(t,n),zt("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=ar({},n,{value:void 0}),zt("invalid",t);break;case"textarea":PN(t,n),a=Cv(t,n),zt("invalid",t);break;default:a=n}Iv(r,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?X2(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&K2(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&jd(t,c):typeof c=="number"&&jd(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Nd.hasOwnProperty(s)?c!=null&&s==="onScroll"&&zt("scroll",t):c!=null&&_w(t,s,c,o))}switch(r){case"input":xh(t),CN(t,n,!1);break;case"textarea":xh(t),IN(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Bi(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Wl(t,!!n.multiple,s,!1):n.defaultValue!=null&&Wl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Op)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)bP(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ge(166));if(r=jo(Rd.current),jo(as.current),Ah(e)){if(n=e.stateNode,r=e.memoizedProps,n[Qa]=e,(s=n.nodeValue!==r)&&(t=Qn,t!==null))switch(t.tag){case 3:Sh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sh(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qa]=e,e.stateNode=n}return un(e),null;case 13:if(Kt(rr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xt&&Yn!==null&&e.mode&1&&!(e.flags&128))$C(),lc(),e.flags|=98560,s=!1;else if(s=Ah(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(ge(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ge(317));s[Qa]=e}else lc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),s=!1}else Pa!==null&&(hb(Pa),Pa=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||rr.current&1?Rr===0&&(Rr=3):a1())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return uc(),sb(t,e),t===null&&Pd(e.stateNode.containerInfo),un(e),null;case 10:return Uw(e.type._context),un(e),null;case 17:return Vn(e.type)&&Dp(),un(e),null;case 19:if(Kt(rr),s=e.memoizedState,s===null)return un(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Iu(s,!1);else{if(Rr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Up(t),o!==null){for(e.flags|=128,Iu(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ft(rr,rr.current&1|2),e.child}t=t.sibling}s.tail!==null&&vr()>fc&&(e.flags|=128,n=!0,Iu(s,!1),e.lanes=4194304)}else{if(!n)if(t=Up(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Iu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Xt)return un(e),null}else 2*vr()-s.renderingStartTime>fc&&r!==1073741824&&(e.flags|=128,n=!0,Iu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vr(),e.sibling=null,r=rr.current,Ft(rr,n?r&1|2:r&1),e):(un(e),null);case 22:case 23:return n1(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Hn&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function N3(t,e){switch($w(e),e.tag){case 1:return Vn(e.type)&&Dp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uc(),Kt(Ln),Kt(xn),Hw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qw(e),null;case 13:if(Kt(rr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));lc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Kt(rr),null;case 4:return uc(),null;case 10:return Uw(e.type._context),null;case 22:case 23:return n1(),null;case 24:return null;default:return null}}var Th=!1,hn=!1,j3=typeof WeakSet=="function"?WeakSet:Set,De=null;function Ml(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){dr(t,e,n)}else r.current=null}function ib(t,e,r){try{r()}catch(n){dr(t,e,n)}}var wj=!1;function S3(t,e){if(zv=Cp,t=jC(),Rw(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==s||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===r&&++u===a&&(l=o),p===s&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wv={focusedElem:t,selectionRange:r},Cp=!1,De=e;De!==null;)if(e=De,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,De=t;else for(;De!==null;){e=De;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,_=v.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?x:ka(e.type,x),_);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(E){dr(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}return v=wj,wj=!1,v}function od(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var s=a.destroy;a.destroy=void 0,s!==void 0&&ib(e,r,s)}a=a.next}while(a!==n)}}function Sg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ob(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function yP(t){var e=t.alternate;e!==null&&(t.alternate=null,yP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qa],delete e[Od],delete e[Gv],delete e[o3],delete e[l3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wP(t){return t.tag===5||t.tag===3||t.tag===4}function _j(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lb(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Op));else if(n!==4&&(t=t.child,t!==null))for(lb(t,e,r),t=t.sibling;t!==null;)lb(t,e,r),t=t.sibling}function cb(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(cb(t,e,r),t=t.sibling;t!==null;)cb(t,e,r),t=t.sibling}var rn=null,Ea=!1;function oi(t,e,r){for(r=r.child;r!==null;)_P(t,e,r),r=r.sibling}function _P(t,e,r){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(xg,r)}catch{}switch(r.tag){case 5:hn||Ml(r,e);case 6:var n=rn,a=Ea;rn=null,oi(t,e,r),rn=n,Ea=a,rn!==null&&(Ea?(t=rn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):rn.removeChild(r.stateNode));break;case 18:rn!==null&&(Ea?(t=rn,r=r.stateNode,t.nodeType===8?xx(t.parentNode,r):t.nodeType===1&&xx(t,r),Ed(t)):xx(rn,r.stateNode));break;case 4:n=rn,a=Ea,rn=r.stateNode.containerInfo,Ea=!0,oi(t,e,r),rn=n,Ea=a;break;case 0:case 11:case 14:case 15:if(!hn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ib(r,e,o),a=a.next}while(a!==n)}oi(t,e,r);break;case 1:if(!hn&&(Ml(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){dr(r,e,l)}oi(t,e,r);break;case 21:oi(t,e,r);break;case 22:r.mode&1?(hn=(n=hn)||r.memoizedState!==null,oi(t,e,r),hn=n):oi(t,e,r);break;default:oi(t,e,r)}}function Nj(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new j3),e.forEach(function(n){var a=D3.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function _a(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:rn=l.stateNode,Ea=!1;break e;case 3:rn=l.stateNode.containerInfo,Ea=!0;break e;case 4:rn=l.stateNode.containerInfo,Ea=!0;break e}l=l.return}if(rn===null)throw Error(ge(160));_P(s,o,a),rn=null,Ea=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){dr(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NP(e,t),e=e.sibling}function NP(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_a(e,t),Ha(t),n&4){try{od(3,t,t.return),Sg(3,t)}catch(x){dr(t,t.return,x)}try{od(5,t,t.return)}catch(x){dr(t,t.return,x)}}break;case 1:_a(e,t),Ha(t),n&512&&r!==null&&Ml(r,r.return);break;case 5:if(_a(e,t),Ha(t),n&512&&r!==null&&Ml(r,r.return),t.flags&32){var a=t.stateNode;try{jd(a,"")}catch(x){dr(t,t.return,x)}}if(n&4&&(a=t.stateNode,a!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&q2(a,s),Ov(l,o);var u=Ov(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?X2(a,f):d==="dangerouslySetInnerHTML"?K2(a,f):d==="children"?jd(a,f):_w(a,d,f,u)}switch(l){case"input":Ev(a,s);break;case"textarea":H2(a,s);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Wl(a,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Wl(a,!!s.multiple,s.defaultValue,!0):Wl(a,!!s.multiple,s.multiple?[]:"",!1))}a[Od]=s}catch(x){dr(t,t.return,x)}}break;case 6:if(_a(e,t),Ha(t),n&4){if(t.stateNode===null)throw Error(ge(162));a=t.stateNode,s=t.memoizedProps;try{a.nodeValue=s}catch(x){dr(t,t.return,x)}}break;case 3:if(_a(e,t),Ha(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ed(e.containerInfo)}catch(x){dr(t,t.return,x)}break;case 4:_a(e,t),Ha(t);break;case 13:_a(e,t),Ha(t),a=t.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(t1=vr())),n&4&&Nj(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(hn=(u=hn)||d,_a(e,t),hn=u):_a(e,t),Ha(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(De=t,d=t.child;d!==null;){for(f=De=d;De!==null;){switch(p=De,m=p.child,p.tag){case 0:case 11:case 14:case 15:od(4,p,p.return);break;case 1:Ml(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){dr(n,r,x)}}break;case 5:Ml(p,p.return);break;case 22:if(p.memoizedState!==null){Sj(f);continue}}m!==null?(m.return=p,De=m):Sj(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Y2("display",o))}catch(x){dr(t,t.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){dr(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_a(e,t),Ha(t),n&4&&Nj(t);break;case 21:break;default:_a(e,t),Ha(t)}}function Ha(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(wP(r)){var n=r;break e}r=r.return}throw Error(ge(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(jd(a,""),n.flags&=-33);var s=_j(t);cb(t,s,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=_j(t);lb(t,l,o);break;default:throw Error(ge(161))}}catch(c){dr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function A3(t,e,r){De=t,jP(t)}function jP(t,e,r){for(var n=(t.mode&1)!==0;De!==null;){var a=De,s=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Th;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||hn;l=Th;var u=hn;if(Th=o,(hn=c)&&!u)for(De=a;De!==null;)o=De,c=o.child,o.tag===22&&o.memoizedState!==null?Aj(a):c!==null?(c.return=o,De=c):Aj(a);for(;s!==null;)De=s,jP(s),s=s.sibling;De=a,Th=l,hn=u}jj(t)}else a.subtreeFlags&8772&&s!==null?(s.return=a,De=s):jj(t)}}function jj(t){for(;De!==null;){var e=De;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||Sg(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!hn)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:ka(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&lj(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}lj(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Ed(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}hn||e.flags&512&&ob(e)}catch(p){dr(e,e.return,p)}}if(e===t){De=null;break}if(r=e.sibling,r!==null){r.return=e.return,De=r;break}De=e.return}}function Sj(t){for(;De!==null;){var e=De;if(e===t){De=null;break}var r=e.sibling;if(r!==null){r.return=e.return,De=r;break}De=e.return}}function Aj(t){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Sg(4,e)}catch(c){dr(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(c){dr(e,a,c)}}var s=e.return;try{ob(e)}catch(c){dr(e,s,c)}break;case 5:var o=e.return;try{ob(e)}catch(c){dr(e,o,c)}}}catch(c){dr(e,e.return,c)}if(e===t){De=null;break}var l=e.sibling;if(l!==null){l.return=e.return,De=l;break}De=e.return}}var k3=Math.ceil,Wp=Hs.ReactCurrentDispatcher,Zw=Hs.ReactCurrentOwner,ha=Hs.ReactCurrentBatchConfig,wt=0,Qr=null,jr=null,sn=0,Hn=0,$l=Ji(0),Rr=0,Vd=null,Uo=0,Ag=0,e1=0,ld=null,Dn=null,t1=0,fc=1/0,bs=null,qp=!1,ub=null,Pi=null,Ch=!1,Ni=null,Hp=0,cd=0,db=null,up=-1,dp=0;function kn(){return wt&6?vr():up!==-1?up:up=vr()}function Ii(t){return t.mode&1?wt&2&&sn!==0?sn&-sn:u3.transition!==null?(dp===0&&(dp=lC()),dp):(t=Et,t!==0||(t=window.event,t=t===void 0?16:mC(t.type)),t):1}function Ma(t,e,r,n){if(50<cd)throw cd=0,db=null,Error(ge(185));If(t,r,n),(!(wt&2)||t!==Qr)&&(t===Qr&&(!(wt&2)&&(Ag|=r),Rr===4&&gi(t,sn)),Fn(t,n),r===1&&wt===0&&!(e.mode&1)&&(fc=vr()+500,_g&&Zi()))}function Fn(t,e){var r=t.callbackNode;u5(t,e);var n=Tp(t,t===Qr?sn:0);if(n===0)r!==null&&RN(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&RN(r),e===1)t.tag===0?c3(kj.bind(null,t)):DC(kj.bind(null,t)),s3(function(){!(wt&6)&&Zi()}),r=null;else{switch(cC(n)){case 1:r=kw;break;case 4:r=iC;break;case 16:r=Ep;break;case 536870912:r=oC;break;default:r=Ep}r=IP(r,SP.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function SP(t,e){if(up=-1,dp=0,wt&6)throw Error(ge(327));var r=t.callbackNode;if(Yl()&&t.callbackNode!==r)return null;var n=Tp(t,t===Qr?sn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Gp(t,n);else{e=n;var a=wt;wt|=2;var s=kP();(Qr!==t||sn!==e)&&(bs=null,fc=vr()+500,Po(t,e));do try{C3();break}catch(l){AP(t,l)}while(!0);Fw(),Wp.current=s,wt=a,jr!==null?e=0:(Qr=null,sn=0,e=Rr)}if(e!==0){if(e===2&&(a=Lv(t),a!==0&&(n=a,e=fb(t,a))),e===1)throw r=Vd,Po(t,0),gi(t,n),Fn(t,vr()),r;if(e===6)gi(t,n);else{if(a=t.current.alternate,!(n&30)&&!E3(a)&&(e=Gp(t,n),e===2&&(s=Lv(t),s!==0&&(n=s,e=fb(t,s))),e===1))throw r=Vd,Po(t,0),gi(t,n),Fn(t,vr()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(ge(345));case 2:mo(t,Dn,bs);break;case 3:if(gi(t,n),(n&130023424)===n&&(e=t1+500-vr(),10<e)){if(Tp(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){kn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Hv(mo.bind(null,t,Dn,bs),e);break}mo(t,Dn,bs);break;case 4:if(gi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var o=31-Ra(n);s=1<<o,o=e[o],o>a&&(a=o),n&=~s}if(n=a,n=vr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*k3(n/1960))-n,10<n){t.timeoutHandle=Hv(mo.bind(null,t,Dn,bs),n);break}mo(t,Dn,bs);break;case 5:mo(t,Dn,bs);break;default:throw Error(ge(329))}}}return Fn(t,vr()),t.callbackNode===r?SP.bind(null,t):null}function fb(t,e){var r=ld;return t.current.memoizedState.isDehydrated&&(Po(t,e).flags|=256),t=Gp(t,e),t!==2&&(e=Dn,Dn=r,e!==null&&hb(e)),t}function hb(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function E3(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Fa(s(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gi(t,e){for(e&=~e1,e&=~Ag,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ra(e),n=1<<r;t[r]=-1,e&=~n}}function kj(t){if(wt&6)throw Error(ge(327));Yl();var e=Tp(t,0);if(!(e&1))return Fn(t,vr()),null;var r=Gp(t,e);if(t.tag!==0&&r===2){var n=Lv(t);n!==0&&(e=n,r=fb(t,n))}if(r===1)throw r=Vd,Po(t,0),gi(t,e),Fn(t,vr()),r;if(r===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mo(t,Dn,bs),Fn(t,vr()),null}function r1(t,e){var r=wt;wt|=1;try{return t(e)}finally{wt=r,wt===0&&(fc=vr()+500,_g&&Zi())}}function Bo(t){Ni!==null&&Ni.tag===0&&!(wt&6)&&Yl();var e=wt;wt|=1;var r=ha.transition,n=Et;try{if(ha.transition=null,Et=1,t)return t()}finally{Et=n,ha.transition=r,wt=e,!(wt&6)&&Zi()}}function n1(){Hn=$l.current,Kt($l)}function Po(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,a3(r)),jr!==null)for(r=jr.return;r!==null;){var n=r;switch($w(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dp();break;case 3:uc(),Kt(Ln),Kt(xn),Hw();break;case 5:qw(n);break;case 4:uc();break;case 13:Kt(rr);break;case 19:Kt(rr);break;case 10:Uw(n.type._context);break;case 22:case 23:n1()}r=r.return}if(Qr=t,jr=t=Oi(t.current,null),sn=Hn=e,Rr=0,Vd=null,e1=Ag=Uo=0,Dn=ld=null,No!==null){for(e=0;e<No.length;e++)if(r=No[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=a,n.next=o}r.pending=n}No=null}return t}function AP(t,e){do{var r=jr;try{if(Fw(),op.current=zp,Bp){for(var n=nr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Bp=!1}if(Fo=0,Yr=Dr=nr=null,id=!1,Md=0,Zw.current=null,r===null||r.return===null){Rr=1,Vd=e,jr=null;break}e:{var s=t,o=r.return,l=r,c=e;if(e=sn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=pj(o);if(m!==null){m.flags&=-257,mj(m,o,l,s,e),m.mode&1&&hj(s,u,e),e=m,c=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(c),e.updateQueue=x}else v.add(c);break e}else{if(!(e&1)){hj(s,u,e),a1();break e}c=Error(ge(426))}}else if(Xt&&l.mode&1){var _=pj(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),mj(_,o,l,s,e),Lw(dc(c,l));break e}}s=c=dc(c,l),Rr!==4&&(Rr=2),ld===null?ld=[s]:ld.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=cP(s,c,e);oj(s,y);break e;case 1:l=c;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Pi===null||!Pi.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=uP(s,l,e);oj(s,E);break e}}s=s.return}while(s!==null)}TP(r)}catch(N){e=N,jr===r&&r!==null&&(jr=r=r.return);continue}break}while(!0)}function kP(){var t=Wp.current;return Wp.current=zp,t===null?zp:t}function a1(){(Rr===0||Rr===3||Rr===2)&&(Rr=4),Qr===null||!(Uo&268435455)&&!(Ag&268435455)||gi(Qr,sn)}function Gp(t,e){var r=wt;wt|=2;var n=kP();(Qr!==t||sn!==e)&&(bs=null,Po(t,e));do try{T3();break}catch(a){AP(t,a)}while(!0);if(Fw(),wt=r,Wp.current=n,jr!==null)throw Error(ge(261));return Qr=null,sn=0,Rr}function T3(){for(;jr!==null;)EP(jr)}function C3(){for(;jr!==null&&!t5();)EP(jr)}function EP(t){var e=PP(t.alternate,t,Hn);t.memoizedProps=t.pendingProps,e===null?TP(t):jr=e,Zw.current=null}function TP(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=N3(r,e),r!==null){r.flags&=32767,jr=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rr=6,jr=null;return}}else if(r=_3(r,e,Hn),r!==null){jr=r;return}if(e=e.sibling,e!==null){jr=e;return}jr=e=t}while(e!==null);Rr===0&&(Rr=5)}function mo(t,e,r){var n=Et,a=ha.transition;try{ha.transition=null,Et=1,P3(t,e,r,n)}finally{ha.transition=a,Et=n}return null}function P3(t,e,r,n){do Yl();while(Ni!==null);if(wt&6)throw Error(ge(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(d5(t,s),t===Qr&&(jr=Qr=null,sn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ch||(Ch=!0,IP(Ep,function(){return Yl(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=ha.transition,ha.transition=null;var o=Et;Et=1;var l=wt;wt|=4,Zw.current=null,S3(t,r),NP(r,t),Q5(Wv),Cp=!!zv,Wv=zv=null,t.current=r,A3(r),r5(),wt=l,Et=o,ha.transition=s}else t.current=r;if(Ch&&(Ch=!1,Ni=t,Hp=a),s=t.pendingLanes,s===0&&(Pi=null),s5(r.stateNode),Fn(t,vr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(qp)throw qp=!1,t=ub,ub=null,t;return Hp&1&&t.tag!==0&&Yl(),s=t.pendingLanes,s&1?t===db?cd++:(cd=0,db=t):cd=0,Zi(),null}function Yl(){if(Ni!==null){var t=cC(Hp),e=ha.transition,r=Et;try{if(ha.transition=null,Et=16>t?16:t,Ni===null)var n=!1;else{if(t=Ni,Ni=null,Hp=0,wt&6)throw Error(ge(331));var a=wt;for(wt|=4,De=t.current;De!==null;){var s=De,o=s.child;if(De.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(De=u;De!==null;){var d=De;switch(d.tag){case 0:case 11:case 15:od(8,d,s)}var f=d.child;if(f!==null)f.return=d,De=f;else for(;De!==null;){d=De;var p=d.sibling,m=d.return;if(yP(d),d===u){De=null;break}if(p!==null){p.return=m,De=p;break}De=m}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}De=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,De=o;else e:for(;De!==null;){if(s=De,s.flags&2048)switch(s.tag){case 0:case 11:case 15:od(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,De=y;break e}De=s.return}}var g=t.current;for(De=g;De!==null;){o=De;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,De=w;else e:for(o=g;De!==null;){if(l=De,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sg(9,l)}}catch(N){dr(l,l.return,N)}if(l===o){De=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,De=E;break e}De=l.return}}if(wt=a,Zi(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(xg,t)}catch{}n=!0}return n}finally{Et=r,ha.transition=e}}return!1}function Ej(t,e,r){e=dc(r,e),e=cP(t,e,1),t=Ci(t,e,1),e=kn(),t!==null&&(If(t,1,e),Fn(t,e))}function dr(t,e,r){if(t.tag===3)Ej(t,t,r);else for(;e!==null;){if(e.tag===3){Ej(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Pi===null||!Pi.has(n))){t=dc(r,t),t=uP(e,t,1),e=Ci(e,t,1),t=kn(),e!==null&&(If(e,1,t),Fn(e,t));break}}e=e.return}}function I3(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=kn(),t.pingedLanes|=t.suspendedLanes&r,Qr===t&&(sn&r)===r&&(Rr===4||Rr===3&&(sn&130023424)===sn&&500>vr()-t1?Po(t,0):e1|=r),Fn(t,e)}function CP(t,e){e===0&&(t.mode&1?(e=yh,yh<<=1,!(yh&130023424)&&(yh=4194304)):e=1);var r=kn();t=Rs(t,e),t!==null&&(If(t,e,r),Fn(t,r))}function O3(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),CP(t,r)}function D3(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ge(314))}n!==null&&n.delete(e),CP(t,r)}var PP;PP=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ln.current)Mn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Mn=!1,w3(t,e,r);Mn=!!(t.flags&131072)}else Mn=!1,Xt&&e.flags&1048576&&RC(e,$p,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;cp(t,e),t=e.pendingProps;var a=oc(e,xn.current);Kl(e,r),a=Kw(null,e,n,t,a,r);var s=Yw();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vn(n)?(s=!0,Rp(e)):s=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,zw(e),a.updater=jg,e.stateNode=a,a._reactInternals=e,Zv(e,n,t,r),e=rb(null,e,n,!0,s,r)):(e.tag=0,Xt&&s&&Mw(e),Nn(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(cp(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=M3(n),t=ka(n,t),a){case 0:e=tb(null,e,n,t,r);break e;case 1:e=vj(null,e,n,t,r);break e;case 11:e=gj(null,e,n,t,r);break e;case 14:e=xj(null,e,n,ka(n.type,t),r);break e}throw Error(ge(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ka(n,a),tb(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ka(n,a),vj(t,e,n,a,r);case 3:e:{if(pP(e),t===null)throw Error(ge(387));n=e.pendingProps,s=e.memoizedState,a=s.element,UC(t,e),Fp(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){a=dc(Error(ge(423)),e),e=bj(t,e,n,r,a);break e}else if(n!==a){a=dc(Error(ge(424)),e),e=bj(t,e,n,r,a);break e}else for(Yn=Ti(e.stateNode.containerInfo.firstChild),Qn=e,Xt=!0,Pa=null,r=VC(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(lc(),n===a){e=Ms(t,e,r);break e}Nn(t,e,n,r)}e=e.child}return e;case 5:return BC(e),t===null&&Xv(e),n=e.type,a=e.pendingProps,s=t!==null?t.memoizedProps:null,o=a.children,qv(n,a)?o=null:s!==null&&qv(n,s)&&(e.flags|=32),hP(t,e),Nn(t,e,o,r),e.child;case 6:return t===null&&Xv(e),null;case 13:return mP(t,e,r);case 4:return Ww(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=cc(e,null,n,r):Nn(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ka(n,a),gj(t,e,n,a,r);case 7:return Nn(t,e,e.pendingProps,r),e.child;case 8:return Nn(t,e,e.pendingProps.children,r),e.child;case 12:return Nn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,s=e.memoizedProps,o=a.value,Ft(Lp,n._currentValue),n._currentValue=o,s!==null)if(Fa(s.value,o)){if(s.children===a.children&&!Ln.current){e=Ms(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Ts(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Qv(s.return,r,e),l.lanes|=r;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ge(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Qv(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nn(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,Kl(e,r),a=ma(a),n=n(a),e.flags|=1,Nn(t,e,n,r),e.child;case 14:return n=e.type,a=ka(n,e.pendingProps),a=ka(n.type,a),xj(t,e,n,a,r);case 15:return dP(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:ka(n,a),cp(t,e),e.tag=1,Vn(n)?(t=!0,Rp(e)):t=!1,Kl(e,r),lP(e,n,a),Zv(e,n,a,r),rb(null,e,n,!0,t,r);case 19:return gP(t,e,r);case 22:return fP(t,e,r)}throw Error(ge(156,e.tag))};function IP(t,e){return sC(t,e)}function R3(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function da(t,e,r,n){return new R3(t,e,r,n)}function s1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function M3(t){if(typeof t=="function")return s1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jw)return 11;if(t===Sw)return 14}return 2}function Oi(t,e){var r=t.alternate;return r===null?(r=da(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function fp(t,e,r,n,a,s){var o=2;if(n=t,typeof t=="function")s1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case kl:return Io(r.children,a,s,e);case Nw:o=8,a|=8;break;case Nv:return t=da(12,r,e,a|2),t.elementType=Nv,t.lanes=s,t;case jv:return t=da(13,r,e,a),t.elementType=jv,t.lanes=s,t;case Sv:return t=da(19,r,e,a),t.elementType=Sv,t.lanes=s,t;case B2:return kg(r,a,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F2:o=10;break e;case U2:o=9;break e;case jw:o=11;break e;case Sw:o=14;break e;case ui:o=16,n=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=da(o,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function Io(t,e,r,n){return t=da(7,t,n,e),t.lanes=r,t}function kg(t,e,r,n){return t=da(22,t,n,e),t.elementType=B2,t.lanes=r,t.stateNode={isHidden:!1},t}function Sx(t,e,r){return t=da(6,t,null,e),t.lanes=r,t}function Ax(t,e,r){return e=da(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $3(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ix(0),this.expirationTimes=ix(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ix(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function i1(t,e,r,n,a,s,o,l,c){return t=new $3(t,e,r,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=da(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zw(s),t}function L3(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Al,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function OP(t){if(!t)return zi;t=t._reactInternals;e:{if(rl(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var r=t.type;if(Vn(r))return OC(t,r,e)}return e}function DP(t,e,r,n,a,s,o,l,c){return t=i1(r,n,!0,t,a,s,o,l,c),t.context=OP(null),r=t.current,n=kn(),a=Ii(r),s=Ts(n,a),s.callback=e??null,Ci(r,s,a),t.current.lanes=a,If(t,a,n),Fn(t,n),t}function Eg(t,e,r,n){var a=e.current,s=kn(),o=Ii(a);return r=OP(r),e.context===null?e.context=r:e.pendingContext=r,e=Ts(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ci(a,e,o),t!==null&&(Ma(t,a,o,s),ip(t,a,o)),o}function Kp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tj(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function o1(t,e){Tj(t,e),(t=t.alternate)&&Tj(t,e)}function V3(){return null}var RP=typeof reportError=="function"?reportError:function(t){console.error(t)};function l1(t){this._internalRoot=t}Tg.prototype.render=l1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));Eg(t,e,null,null)};Tg.prototype.unmount=l1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bo(function(){Eg(null,t,null,null)}),e[Ds]=null}};function Tg(t){this._internalRoot=t}Tg.prototype.unstable_scheduleHydration=function(t){if(t){var e=fC();t={blockedOn:null,target:t,priority:e};for(var r=0;r<mi.length&&e!==0&&e<mi[r].priority;r++);mi.splice(r,0,t),r===0&&pC(t)}};function c1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cj(){}function F3(t,e,r,n,a){if(a){if(typeof n=="function"){var s=n;n=function(){var u=Kp(o);s.call(u)}}var o=DP(e,n,t,0,null,!1,!1,"",Cj);return t._reactRootContainer=o,t[Ds]=o.current,Pd(t.nodeType===8?t.parentNode:t),Bo(),o}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=Kp(c);l.call(u)}}var c=i1(t,0,!1,null,null,!1,!1,"",Cj);return t._reactRootContainer=c,t[Ds]=c.current,Pd(t.nodeType===8?t.parentNode:t),Bo(function(){Eg(e,c,r,n)}),c}function Pg(t,e,r,n,a){var s=r._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=Kp(o);l.call(c)}}Eg(e,o,t,a)}else o=F3(r,e,t,a,n);return Kp(o)}uC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ku(e.pendingLanes);r!==0&&(Ew(e,r|1),Fn(e,vr()),!(wt&6)&&(fc=vr()+500,Zi()))}break;case 13:Bo(function(){var n=Rs(t,1);if(n!==null){var a=kn();Ma(n,t,1,a)}}),o1(t,1)}};Tw=function(t){if(t.tag===13){var e=Rs(t,134217728);if(e!==null){var r=kn();Ma(e,t,134217728,r)}o1(t,134217728)}};dC=function(t){if(t.tag===13){var e=Ii(t),r=Rs(t,e);if(r!==null){var n=kn();Ma(r,t,e,n)}o1(t,e)}};fC=function(){return Et};hC=function(t,e){var r=Et;try{return Et=t,e()}finally{Et=r}};Rv=function(t,e,r){switch(e){case"input":if(Ev(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=wg(n);if(!a)throw Error(ge(90));W2(n),Ev(n,a)}}}break;case"textarea":H2(t,r);break;case"select":e=r.value,e!=null&&Wl(t,!!r.multiple,e,!1)}};Z2=r1;eC=Bo;var U3={usingClientEntryPoint:!1,Events:[Df,Pl,wg,Q2,J2,r1]},Ou={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B3={bundleType:Ou.bundleType,version:Ou.version,rendererPackageName:Ou.rendererPackageName,rendererConfig:Ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nC(t),t===null?null:t.stateNode},findFiberByHostInstance:Ou.findFiberByHostInstance||V3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{xg=Ph.inject(B3),ns=Ph}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U3;ea.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c1(e))throw Error(ge(200));return L3(t,e,null,r)};ea.createRoot=function(t,e){if(!c1(t))throw Error(ge(299));var r=!1,n="",a=RP;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=i1(t,1,!1,null,null,r,!1,n,a),t[Ds]=e.current,Pd(t.nodeType===8?t.parentNode:t),new l1(e)};ea.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=nC(e),t=t===null?null:t.stateNode,t};ea.flushSync=function(t){return Bo(t)};ea.hydrate=function(t,e,r){if(!Cg(e))throw Error(ge(200));return Pg(null,t,e,!0,r)};ea.hydrateRoot=function(t,e,r){if(!c1(t))throw Error(ge(405));var n=r!=null&&r.hydratedSources||null,a=!1,s="",o=RP;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=DP(e,null,t,1,r??null,a,!1,s,o),t[Ds]=e.current,Pd(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Tg(e)};ea.render=function(t,e,r){if(!Cg(e))throw Error(ge(200));return Pg(null,t,e,!1,r)};ea.unmountComponentAtNode=function(t){if(!Cg(t))throw Error(ge(40));return t._reactRootContainer?(Bo(function(){Pg(null,null,t,!1,function(){t._reactRootContainer=null,t[Ds]=null})}),!0):!1};ea.unstable_batchedUpdates=r1;ea.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Cg(r))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return Pg(t,e,r,!1,n)};ea.version="18.3.1-next-f1338f8080-20240426";function MP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MP)}catch(t){console.error(t)}}MP(),M2.exports=ea;var z3=M2.exports,$P,Pj=z3;$P=Pj.createRoot,Pj.hydrateRoot;var qe=(t=>(t.LOGIN="LOGIN",t.DASHBOARD="DASHBOARD",t.KANBAN="KANBAN",t.CLIENT_LIST="CLIENT_LIST",t.CLIENT_REGISTRATION="CLIENT_REGISTRATION",t.PROJECT_DETAILS="PROJECT_DETAILS",t.ASSISTANCE="ASSISTANCE",t.SETTINGS="SETTINGS",t.AGENDA="AGENDA",t.SUPER_ADMIN="SUPER_ADMIN",t.POST_ASSEMBLY="POST_ASSEMBLY",t.ASSEMBLY_SCHEDULER="ASSEMBLY_SCHEDULER",t))(qe||{});const W3="modulepreload",q3=function(t){return"/"+t},Ij={},ud=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=q3(c),c in Ij)return;Ij[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":W3,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},H3={"01-01":"Confraternizao Universal","04-21":"Tiradentes","05-01":"Dia do Trabalho","09-07":"Independncia do Brasil","10-12":"Nossa Senhora Aparecida","11-02":"Finados","11-15":"Proclamao da Repblica","12-25":"Natal"},G3=t=>{const e=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0");return`${e}-${r}`},LP=(t,e)=>{const r=G3(t);if(H3[r])return!0;if(e&&e.length>0){const n=t.getFullYear(),a=t.toISOString().split("T")[0];for(const s of e)if(s.type==="fixed"){const o=s.date.length===5?s.date:s.date.substring(5);if(r===o)return!0}else if(s.type==="movable"&&s.year===n&&a===s.date)return!0}return!1},pb=(t,e)=>{const r=t.getDay();return!(r===0||r===6||LP(t,e))},ts=(t,e,r)=>{const n=new Date(t);let a=0;if(e===0){for(;!pb(n,r);)n.setDate(n.getDate()+1);return n}for(;a<e;)n.setDate(n.getDate()+1),pb(n,r)&&a++;return n},zo=(t,e,r)=>{const n=new Date(t),a=new Date(e);if(n.setHours(0,0,0,0),a.setHours(0,0,0,0),n.getTime()===a.getTime())return 0;const s=n>a,o=s?a:n,l=s?n:a;let c=0,u=new Date(o);for(u.setDate(u.getDate()+1);u<=l;)pb(u,r)&&c++,u.setDate(u.getDate()+1);return s?-c:c},K3=()=>{};var Oj={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},Y3=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},FP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let p=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(p=64)),n.push(r[d],r[f],r[p],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Y3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const f=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||f==null)throw new X3;const p=s<<2|l>>4;if(n.push(p),u!==64){const m=l<<4&240|u>>2;if(n.push(m),f!==64){const v=u<<6&192|f;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class X3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Q3=function(t){const e=VP(t);return FP.encodeByteArray(e,!0)},UP=function(t){return Q3(t).replace(/\./g,"")},BP=function(t){try{return FP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=()=>J3().__FIREBASE_DEFAULTS__,eL=()=>{if(typeof process>"u"||typeof Oj>"u")return;const t=Oj.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BP(t[1]);return e&&JSON.parse(e)},Ig=()=>{try{return K3()||Z3()||eL()||tL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rL=t=>{var e,r;return(r=(e=Ig())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},zP=()=>{var t;return(t=Ig())==null?void 0:t.config},WP=t=>{var e;return(e=Ig())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qP(t){return(await fetch(t,{credentials:"include"})).ok}const dd={};function aL(){const t={prod:[],emulator:[]};for(const e of Object.keys(dd))dd[e]?t.emulator.push(e):t.prod.push(e);return t}function sL(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let Dj=!1;function iL(t,e){if(typeof window>"u"||typeof document>"u"||!Yc(window.location.host)||dd[t]===e||dd[t]||Dj)return;dd[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",s=aL().prod.length>0;function o(){const p=document.getElementById(n);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Dj=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=sL(n),m=r("text"),v=document.getElementById(m)||document.createElement("span"),x=r("learnmore"),_=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),g=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const w=p.element;l(w),d(_,x);const E=u();c(g,y),w.append(g,v,_,E),document.body.appendChild(w)}s?(v.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function lL(){var e;const t=(e=Ig())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fL(){const t=vn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hL(){return!lL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pL(){try{return typeof indexedDB=="object"}catch{return!1}}function mL(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="FirebaseError";class Gs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=gL,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mf.prototype.create)}}class Mf{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?xL(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new Gs(a,l,n)}}function xL(t,e){return t.replace(vL,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const vL=/\{\$([^}]+)}/g;function bL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wo(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(Rj(s)&&Rj(o)){if(!Wo(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function Rj(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function yL(t,e){const r=new wL(t,e);return r.subscribe.bind(r)}class wL{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");_L(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=kx),a.error===void 0&&(a.error=kx),a.complete===void 0&&(a.complete=kx);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _L(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function kx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(t){return t&&t._delegate?t._delegate:t}class qo{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new nL;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SL(e))try{this.getOrInitializeService({instanceIdentifier:go})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=go){return this.instances.has(e)}getOptions(e=go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:jL(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=go){return this.component?this.component.multipleInstances?e:go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jL(t){return t===go?void 0:t}function SL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new NL(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(mt||(mt={}));const kL={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},EL=mt.INFO,TL={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},CL=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=TL[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class u1{constructor(e){this.name=e,this._logLevel=EL,this._logHandler=CL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}const PL=(t,e)=>e.some(r=>t instanceof r);let Mj,$j;function IL(){return Mj||(Mj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OL(){return $j||($j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HP=new WeakMap,mb=new WeakMap,GP=new WeakMap,Ex=new WeakMap,d1=new WeakMap;function DL(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(Di(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&HP.set(r,t)}).catch(()=>{}),d1.set(e,t),e}function RL(t){if(mb.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});mb.set(t,e)}let gb={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return mb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GP.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Di(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ML(t){gb=t(gb)}function $L(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Tx(this),e,...r);return GP.set(n,e.sort?e.sort():[e]),Di(n)}:OL().includes(t)?function(...e){return t.apply(Tx(this),e),Di(HP.get(this))}:function(...e){return Di(t.apply(Tx(this),e))}}function LL(t){return typeof t=="function"?$L(t):(t instanceof IDBTransaction&&RL(t),PL(t,IL())?new Proxy(t,gb):t)}function Di(t){if(t instanceof IDBRequest)return DL(t);if(Ex.has(t))return Ex.get(t);const e=LL(t);return e!==t&&(Ex.set(t,e),d1.set(e,t)),e}const Tx=t=>d1.get(t);function VL(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),l=Di(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Di(o.result),c.oldVersion,c.newVersion,Di(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const FL=["get","getKey","getAll","getAllKeys","count"],UL=["put","add","delete","clear"],Cx=new Map;function Lj(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cx.get(e))return Cx.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=UL.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||FL.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return Cx.set(e,s),s}ML(t=>({...t,get:(e,r,n)=>Lj(e,r)||t.get(e,r,n),has:(e,r)=>!!Lj(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(zL(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function zL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xb="@firebase/app",Vj="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new u1("@firebase/app"),WL="@firebase/app-compat",qL="@firebase/analytics-compat",HL="@firebase/analytics",GL="@firebase/app-check-compat",KL="@firebase/app-check",YL="@firebase/auth",XL="@firebase/auth-compat",QL="@firebase/database",JL="@firebase/data-connect",ZL="@firebase/database-compat",e6="@firebase/functions",t6="@firebase/functions-compat",r6="@firebase/installations",n6="@firebase/installations-compat",a6="@firebase/messaging",s6="@firebase/messaging-compat",i6="@firebase/performance",o6="@firebase/performance-compat",l6="@firebase/remote-config",c6="@firebase/remote-config-compat",u6="@firebase/storage",d6="@firebase/storage-compat",f6="@firebase/firestore",h6="@firebase/ai",p6="@firebase/firestore-compat",m6="firebase",g6="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="[DEFAULT]",x6={[xb]:"fire-core",[WL]:"fire-core-compat",[HL]:"fire-analytics",[qL]:"fire-analytics-compat",[KL]:"fire-app-check",[GL]:"fire-app-check-compat",[YL]:"fire-auth",[XL]:"fire-auth-compat",[QL]:"fire-rtdb",[JL]:"fire-data-connect",[ZL]:"fire-rtdb-compat",[e6]:"fire-fn",[t6]:"fire-fn-compat",[r6]:"fire-iid",[n6]:"fire-iid-compat",[a6]:"fire-fcm",[s6]:"fire-fcm-compat",[i6]:"fire-perf",[o6]:"fire-perf-compat",[l6]:"fire-rc",[c6]:"fire-rc-compat",[u6]:"fire-gcs",[d6]:"fire-gcs-compat",[f6]:"fire-fst",[p6]:"fire-fst-compat",[h6]:"fire-vertex","fire-js":"fire-js",[m6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp=new Map,v6=new Map,bb=new Map;function Fj(t,e){try{t.container.addComponent(e)}catch(r){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function hc(t){const e=t.name;if(bb.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;bb.set(e,t);for(const r of Yp.values())Fj(r,t);for(const r of v6.values())Fj(r,t);return!0}function f1(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ja(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ri=new Mf("app","Firebase",b6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc=g6;function KP(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:vb,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Ri.create("bad-app-name",{appName:String(a)});if(r||(r=zP()),!r)throw Ri.create("no-options");const s=Yp.get(a);if(s){if(Wo(r,s.options)&&Wo(n,s.config))return s;throw Ri.create("duplicate-app",{appName:a})}const o=new AL(a);for(const c of bb.values())o.addComponent(c);const l=new y6(r,n,o);return Yp.set(a,l),l}function w6(t=vb){const e=Yp.get(t);if(!e&&t===vb&&zP())return KP();if(!e)throw Ri.create("no-app",{appName:t});return e}function Mi(t,e,r){let n=x6[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${e}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(o.join(" "));return}hc(new qo(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="firebase-heartbeat-database",N6=1,Fd="firebase-heartbeat-store";let Px=null;function YP(){return Px||(Px=VL(_6,N6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fd)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ri.create("idb-open",{originalErrorMessage:t.message})})),Px}async function j6(t){try{const r=(await YP()).transaction(Fd),n=await r.objectStore(Fd).get(XP(t));return await r.done,n}catch(e){if(e instanceof Gs)$s.warn(e.message);else{const r=Ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$s.warn(r.message)}}}async function Uj(t,e){try{const n=(await YP()).transaction(Fd,"readwrite");await n.objectStore(Fd).put(e,XP(t)),await n.done}catch(r){if(r instanceof Gs)$s.warn(r.message);else{const n=Ri.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});$s.warn(n.message)}}}function XP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=1024,A6=30;class k6{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new T6(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bj();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>A6){const o=C6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){$s.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Bj(),{heartbeatsToSend:n,unsentEntries:a}=E6(this._heartbeatsCache.heartbeats),s=UP(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return $s.warn(r),""}}}function Bj(){return new Date().toISOString().substring(0,10)}function E6(t,e=S6){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),zj(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),zj(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class T6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pL()?mL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await j6(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Uj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Uj(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function zj(t){return UP(JSON.stringify({version:2,heartbeats:t})).length}function C6(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){hc(new qo("platform-logger",e=>new BL(e),"PRIVATE")),hc(new qo("heartbeat",e=>new k6(e),"PRIVATE")),Mi(xb,Vj,t),Mi(xb,Vj,"esm2020"),Mi("fire-js","")}P6("");var I6="firebase",O6="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(I6,O6,"app");var Wj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $i,QP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,b){function A(){}A.prototype=b.prototype,S.F=b.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(T,I,O){for(var R=Array(arguments.length-2),G=2;G<arguments.length;G++)R[G-2]=arguments[G];return b.prototype[I].apply(T,R)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(S,b,A){A||(A=0);const T=Array(16);if(typeof b=="string")for(var I=0;I<16;++I)T[I]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(I=0;I<16;++I)T[I]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=S.g[0],A=S.g[1],I=S.g[2];let O=S.g[3],R;R=b+(O^A&(I^O))+T[0]+3614090360&4294967295,b=A+(R<<7&4294967295|R>>>25),R=O+(I^b&(A^I))+T[1]+3905402710&4294967295,O=b+(R<<12&4294967295|R>>>20),R=I+(A^O&(b^A))+T[2]+606105819&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(b^I&(O^b))+T[3]+3250441966&4294967295,A=I+(R<<22&4294967295|R>>>10),R=b+(O^A&(I^O))+T[4]+4118548399&4294967295,b=A+(R<<7&4294967295|R>>>25),R=O+(I^b&(A^I))+T[5]+1200080426&4294967295,O=b+(R<<12&4294967295|R>>>20),R=I+(A^O&(b^A))+T[6]+2821735955&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(b^I&(O^b))+T[7]+4249261313&4294967295,A=I+(R<<22&4294967295|R>>>10),R=b+(O^A&(I^O))+T[8]+1770035416&4294967295,b=A+(R<<7&4294967295|R>>>25),R=O+(I^b&(A^I))+T[9]+2336552879&4294967295,O=b+(R<<12&4294967295|R>>>20),R=I+(A^O&(b^A))+T[10]+4294925233&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(b^I&(O^b))+T[11]+2304563134&4294967295,A=I+(R<<22&4294967295|R>>>10),R=b+(O^A&(I^O))+T[12]+1804603682&4294967295,b=A+(R<<7&4294967295|R>>>25),R=O+(I^b&(A^I))+T[13]+4254626195&4294967295,O=b+(R<<12&4294967295|R>>>20),R=I+(A^O&(b^A))+T[14]+2792965006&4294967295,I=O+(R<<17&4294967295|R>>>15),R=A+(b^I&(O^b))+T[15]+1236535329&4294967295,A=I+(R<<22&4294967295|R>>>10),R=b+(I^O&(A^I))+T[1]+4129170786&4294967295,b=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(b^A))+T[6]+3225465664&4294967295,O=b+(R<<9&4294967295|R>>>23),R=I+(b^A&(O^b))+T[11]+643717713&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^b&(I^O))+T[0]+3921069994&4294967295,A=I+(R<<20&4294967295|R>>>12),R=b+(I^O&(A^I))+T[5]+3593408605&4294967295,b=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(b^A))+T[10]+38016083&4294967295,O=b+(R<<9&4294967295|R>>>23),R=I+(b^A&(O^b))+T[15]+3634488961&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^b&(I^O))+T[4]+3889429448&4294967295,A=I+(R<<20&4294967295|R>>>12),R=b+(I^O&(A^I))+T[9]+568446438&4294967295,b=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(b^A))+T[14]+3275163606&4294967295,O=b+(R<<9&4294967295|R>>>23),R=I+(b^A&(O^b))+T[3]+4107603335&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^b&(I^O))+T[8]+1163531501&4294967295,A=I+(R<<20&4294967295|R>>>12),R=b+(I^O&(A^I))+T[13]+2850285829&4294967295,b=A+(R<<5&4294967295|R>>>27),R=O+(A^I&(b^A))+T[2]+4243563512&4294967295,O=b+(R<<9&4294967295|R>>>23),R=I+(b^A&(O^b))+T[7]+1735328473&4294967295,I=O+(R<<14&4294967295|R>>>18),R=A+(O^b&(I^O))+T[12]+2368359562&4294967295,A=I+(R<<20&4294967295|R>>>12),R=b+(A^I^O)+T[5]+4294588738&4294967295,b=A+(R<<4&4294967295|R>>>28),R=O+(b^A^I)+T[8]+2272392833&4294967295,O=b+(R<<11&4294967295|R>>>21),R=I+(O^b^A)+T[11]+1839030562&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^b)+T[14]+4259657740&4294967295,A=I+(R<<23&4294967295|R>>>9),R=b+(A^I^O)+T[1]+2763975236&4294967295,b=A+(R<<4&4294967295|R>>>28),R=O+(b^A^I)+T[4]+1272893353&4294967295,O=b+(R<<11&4294967295|R>>>21),R=I+(O^b^A)+T[7]+4139469664&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^b)+T[10]+3200236656&4294967295,A=I+(R<<23&4294967295|R>>>9),R=b+(A^I^O)+T[13]+681279174&4294967295,b=A+(R<<4&4294967295|R>>>28),R=O+(b^A^I)+T[0]+3936430074&4294967295,O=b+(R<<11&4294967295|R>>>21),R=I+(O^b^A)+T[3]+3572445317&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^b)+T[6]+76029189&4294967295,A=I+(R<<23&4294967295|R>>>9),R=b+(A^I^O)+T[9]+3654602809&4294967295,b=A+(R<<4&4294967295|R>>>28),R=O+(b^A^I)+T[12]+3873151461&4294967295,O=b+(R<<11&4294967295|R>>>21),R=I+(O^b^A)+T[15]+530742520&4294967295,I=O+(R<<16&4294967295|R>>>16),R=A+(I^O^b)+T[2]+3299628645&4294967295,A=I+(R<<23&4294967295|R>>>9),R=b+(I^(A|~O))+T[0]+4096336452&4294967295,b=A+(R<<6&4294967295|R>>>26),R=O+(A^(b|~I))+T[7]+1126891415&4294967295,O=b+(R<<10&4294967295|R>>>22),R=I+(b^(O|~A))+T[14]+2878612391&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~b))+T[5]+4237533241&4294967295,A=I+(R<<21&4294967295|R>>>11),R=b+(I^(A|~O))+T[12]+1700485571&4294967295,b=A+(R<<6&4294967295|R>>>26),R=O+(A^(b|~I))+T[3]+2399980690&4294967295,O=b+(R<<10&4294967295|R>>>22),R=I+(b^(O|~A))+T[10]+4293915773&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~b))+T[1]+2240044497&4294967295,A=I+(R<<21&4294967295|R>>>11),R=b+(I^(A|~O))+T[8]+1873313359&4294967295,b=A+(R<<6&4294967295|R>>>26),R=O+(A^(b|~I))+T[15]+4264355552&4294967295,O=b+(R<<10&4294967295|R>>>22),R=I+(b^(O|~A))+T[6]+2734768916&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~b))+T[13]+1309151649&4294967295,A=I+(R<<21&4294967295|R>>>11),R=b+(I^(A|~O))+T[4]+4149444226&4294967295,b=A+(R<<6&4294967295|R>>>26),R=O+(A^(b|~I))+T[11]+3174756917&4294967295,O=b+(R<<10&4294967295|R>>>22),R=I+(b^(O|~A))+T[2]+718787259&4294967295,I=O+(R<<15&4294967295|R>>>17),R=A+(O^(I|~b))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+b&4294967295,S.g[1]=S.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+I&4294967295,S.g[3]=S.g[3]+O&4294967295}n.prototype.v=function(S,b){b===void 0&&(b=S.length);const A=b-this.blockSize,T=this.C;let I=this.h,O=0;for(;O<b;){if(I==0)for(;O<=A;)a(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<b;)if(T[I++]=S.charCodeAt(O++),I==this.blockSize){a(this,T),I=0;break}}else for(;O<b;)if(T[I++]=S[O++],I==this.blockSize){a(this,T),I=0;break}}this.h=I,this.o+=b},n.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var b=1;b<S.length-8;++b)S[b]=0;b=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=b&255,b/=256;for(this.v(S),S=Array(16),b=0,A=0;A<4;++A)for(let T=0;T<32;T+=8)S[b++]=this.g[A]>>>T&255;return S};function s(S,b){var A=l;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=b(S)}function o(S,b){this.h=b;const A=[];let T=!0;for(let I=S.length-1;I>=0;I--){const O=S[I]|0;T&&O==b||(A[I]=O,T=!1)}this.g=A}var l={};function c(S){return-128<=S&&S<128?s(S,function(b){return new o([b|0],b<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return _(u(-S));const b=[];let A=1;for(let T=0;S>=A;T++)b[T]=S/A|0,A*=4294967296;return new o(b,0)}function d(S,b){if(S.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(S.charAt(0)=="-")return _(d(S.substring(1),b));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=u(Math.pow(b,8));let T=f;for(let O=0;O<S.length;O+=8){var I=Math.min(8,S.length-O);const R=parseInt(S.substring(O,O+I),b);I<8?(I=u(Math.pow(b,I)),T=T.j(I).add(u(R))):(T=T.j(A),T=T.add(u(R)))}return T}var f=c(0),p=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-_(this).m();let S=0,b=1;for(let A=0;A<this.g.length;A++){const T=this.i(A);S+=(T>=0?T:4294967296+T)*b,b*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(x(this))return"-"+_(this).toString(S);const b=u(Math.pow(S,6));var A=this;let T="";for(;;){const I=E(A,b).g;A=y(A,I.j(b));let O=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=I,v(A))return O+T;for(;O.length<6;)O="0"+O;T=O+T}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(let b=0;b<S.g.length;b++)if(S.g[b]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=y(this,S),x(S)?-1:v(S)?0:1};function _(S){const b=S.g.length,A=[];for(let T=0;T<b;T++)A[T]=~S.g[T];return new o(A,~S.h).add(p)}t.abs=function(){return x(this)?_(this):this},t.add=function(S){const b=Math.max(this.g.length,S.g.length),A=[];let T=0;for(let I=0;I<=b;I++){let O=T+(this.i(I)&65535)+(S.i(I)&65535),R=(O>>>16)+(this.i(I)>>>16)+(S.i(I)>>>16);T=R>>>16,O&=65535,R&=65535,A[I]=R<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(S,b){return S.add(_(b))}t.j=function(S){if(v(this)||v(S))return f;if(x(this))return x(S)?_(this).j(_(S)):_(_(this).j(S));if(x(S))return _(this.j(_(S)));if(this.l(m)<0&&S.l(m)<0)return u(this.m()*S.m());const b=this.g.length+S.g.length,A=[];for(var T=0;T<2*b;T++)A[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<S.g.length;I++){const O=this.i(T)>>>16,R=this.i(T)&65535,G=S.i(I)>>>16,U=S.i(I)&65535;A[2*T+2*I]+=R*U,g(A,2*T+2*I),A[2*T+2*I+1]+=O*U,g(A,2*T+2*I+1),A[2*T+2*I+1]+=R*G,g(A,2*T+2*I+1),A[2*T+2*I+2]+=O*G,g(A,2*T+2*I+2)}for(S=0;S<b;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=b;S<2*b;S++)A[S]=0;return new o(A,0)};function g(S,b){for(;(S[b]&65535)!=S[b];)S[b+1]+=S[b]>>>16,S[b]&=65535,b++}function w(S,b){this.g=S,this.h=b}function E(S,b){if(v(b))throw Error("division by zero");if(v(S))return new w(f,f);if(x(S))return b=E(_(S),b),new w(_(b.g),_(b.h));if(x(b))return b=E(S,_(b)),new w(_(b.g),b.h);if(S.g.length>30){if(x(S)||x(b))throw Error("slowDivide_ only works with positive integers.");for(var A=p,T=b;T.l(S)<=0;)A=N(A),T=N(T);var I=k(A,1),O=k(T,1);for(T=k(T,2),A=k(A,2);!v(T);){var R=O.add(T);R.l(S)<=0&&(I=I.add(A),O=R),T=k(T,1),A=k(A,1)}return b=y(S,I.j(b)),new w(I,b)}for(I=f;S.l(b)>=0;){for(A=Math.max(1,Math.floor(S.m()/b.m())),T=Math.ceil(Math.log(A)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),O=u(A),R=O.j(b);x(R)||R.l(S)>0;)A-=T,O=u(A),R=O.j(b);v(O)&&(O=p),I=I.add(O),S=y(S,R)}return new w(I,S)}t.B=function(S){return E(this,S).h},t.and=function(S){const b=Math.max(this.g.length,S.g.length),A=[];for(let T=0;T<b;T++)A[T]=this.i(T)&S.i(T);return new o(A,this.h&S.h)},t.or=function(S){const b=Math.max(this.g.length,S.g.length),A=[];for(let T=0;T<b;T++)A[T]=this.i(T)|S.i(T);return new o(A,this.h|S.h)},t.xor=function(S){const b=Math.max(this.g.length,S.g.length),A=[];for(let T=0;T<b;T++)A[T]=this.i(T)^S.i(T);return new o(A,this.h^S.h)};function N(S){const b=S.g.length+1,A=[];for(let T=0;T<b;T++)A[T]=S.i(T)<<1|S.i(T-1)>>>31;return new o(A,S.h)}function k(S,b){const A=b>>5;b%=32;const T=S.g.length-A,I=[];for(let O=0;O<T;O++)I[O]=b>0?S.i(O+A)>>>b|S.i(O+A+1)<<32-b:S.i(O+A);return new o(I,S.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,QP=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,$i=o}).apply(typeof Wj<"u"?Wj:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JP,Xu,ZP,hp,yb,eI,tI,rI;(function(){var t,e=Object.defineProperty;function r(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var j=0;j<h.length;++j){var P=h[j];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var n=r(this);function a(h,j){if(j)e:{var P=n;h=h.split(".");for(var M=0;M<h.length-1;M++){var J=h[M];if(!(J in P))break e;P=P[J]}h=h[h.length-1],M=P[h],j=j(M),j!=M&&j!=null&&e(P,h,{configurable:!0,writable:!0,value:j})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(j){var P=[],M;for(M in j)Object.prototype.hasOwnProperty.call(j,M)&&P.push([M,j[M]]);return P}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(h){var j=typeof h;return j=="object"&&h!=null||j=="function"}function c(h,j,P){return h.call.apply(h.bind,arguments)}function u(h,j,P){return u=c,u.apply(null,arguments)}function d(h,j){var P=Array.prototype.slice.call(arguments,1);return function(){var M=P.slice();return M.push.apply(M,arguments),h.apply(this,M)}}function f(h,j){function P(){}P.prototype=j.prototype,h.Z=j.prototype,h.prototype=new P,h.prototype.constructor=h,h.Ob=function(M,J,ae){for(var we=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)we[ct-2]=arguments[ct];return j.prototype[J].apply(M,we)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function m(h){const j=h.length;if(j>0){const P=Array(j);for(let M=0;M<j;M++)P[M]=h[M];return P}return[]}function v(h,j){for(let M=1;M<arguments.length;M++){const J=arguments[M];var P=typeof J;if(P=P!="object"?P:J?Array.isArray(J)?"array":P:"null",P=="array"||P=="object"&&typeof J.length=="number"){P=h.length||0;const ae=J.length||0;h.length=P+ae;for(let we=0;we<ae;we++)h[P+we]=J[we]}else h.push(J)}}class x{constructor(j,P){this.i=j,this.j=P,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function _(h){o.setTimeout(()=>{throw h},0)}function y(){var h=S;let j=null;return h.g&&(j=h.g,h.g=h.g.next,h.g||(h.h=null),j.next=null),j}class g{constructor(){this.h=this.g=null}add(j,P){const M=w.get();M.set(j,P),this.h?this.h.next=M:this.g=M,this.h=M}}var w=new x(()=>new E,h=>h.reset());class E{constructor(){this.next=this.g=this.h=null}set(j,P){this.h=j,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let N,k=!1,S=new g,b=()=>{const h=Promise.resolve(void 0);N=()=>{h.then(A)}};function A(){for(var h;h=y();){try{h.h.call(h.g)}catch(P){_(P)}var j=w;j.j(h),j.h<100&&(j.h++,h.next=j.g,j.g=h)}k=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(h,j){this.type=h,this.g=this.target=j,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,j=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const P=()=>{};o.addEventListener("test",P,j),o.removeEventListener("test",P,j)}catch{}return h}();function R(h){return/^[\s\xa0]*$/.test(h)}function G(h,j){I.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,j)}f(G,I),G.prototype.init=function(h,j){const P=this.type=h.type,M=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=j,j=h.relatedTarget,j||(P=="mouseover"?j=h.fromElement:P=="mouseout"&&(j=h.toElement)),this.relatedTarget=j,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var U="closure_listenable_"+(Math.random()*1e6|0),Q=0;function te(h,j,P,M,J){this.listener=h,this.proxy=null,this.src=j,this.type=P,this.capture=!!M,this.ha=J,this.key=++Q,this.da=this.fa=!1}function K(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function X(h,j,P){for(const M in h)j.call(P,h[M],M,h)}function se(h,j){for(const P in h)j.call(void 0,h[P],P,h)}function Z(h){const j={};for(const P in h)j[P]=h[P];return j}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,j){let P,M;for(let J=1;J<arguments.length;J++){M=arguments[J];for(P in M)h[P]=M[P];for(let ae=0;ae<F.length;ae++)P=F[ae],Object.prototype.hasOwnProperty.call(M,P)&&(h[P]=M[P])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,j,P,M,J){const ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);const we=Me(h,j,M,J);return we>-1?(j=h[we],P||(j.fa=!1)):(j=new te(j,this.src,ae,!!M,J),j.fa=P,h.push(j)),j};function Ge(h,j){const P=j.type;if(P in h.g){var M=h.g[P],J=Array.prototype.indexOf.call(M,j,void 0),ae;(ae=J>=0)&&Array.prototype.splice.call(M,J,1),ae&&(K(j),h.g[P].length==0&&(delete h.g[P],h.h--))}}function Me(h,j,P,M){for(let J=0;J<h.length;++J){const ae=h[J];if(!ae.da&&ae.listener==j&&ae.capture==!!P&&ae.ha==M)return J}return-1}var ot="closure_lm_"+(Math.random()*1e6|0),Be={};function xe(h,j,P,M,J){if(Array.isArray(j)){for(let ae=0;ae<j.length;ae++)xe(h,j[ae],P,M,J);return null}return P=Oe(P),h&&h[U]?h.J(j,P,l(M)?!!M.capture:!1,J):ve(h,j,P,!1,M,J)}function ve(h,j,P,M,J,ae){if(!j)throw Error("Invalid event type");const we=l(J)?!!J.capture:!!J;let ct=Ae(h);if(ct||(h[ot]=ct=new me(h)),P=ct.add(j,P,M,we,ae),P.proxy)return P;if(M=be(),P.proxy=M,M.src=h,M.listener=P,h.addEventListener)O||(J=we),J===void 0&&(J=!1),h.addEventListener(j.toString(),M,J);else if(h.attachEvent)h.attachEvent(ie(j.toString()),M);else if(h.addListener&&h.removeListener)h.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return P}function be(){function h(P){return j.call(h.src,h.listener,P)}const j=Pe;return h}function le(h,j,P,M,J){if(Array.isArray(j))for(var ae=0;ae<j.length;ae++)le(h,j[ae],P,M,J);else M=l(M)?!!M.capture:!!M,P=Oe(P),h&&h[U]?(h=h.i,ae=String(j).toString(),ae in h.g&&(j=h.g[ae],P=Me(j,P,M,J),P>-1&&(K(j[P]),Array.prototype.splice.call(j,P,1),j.length==0&&(delete h.g[ae],h.h--)))):h&&(h=Ae(h))&&(j=h.g[j.toString()],h=-1,j&&(h=Me(j,P,M,J)),(P=h>-1?j[h]:null)&&Ze(P))}function Ze(h){if(typeof h!="number"&&h&&!h.da){var j=h.src;if(j&&j[U])Ge(j.i,h);else{var P=h.type,M=h.proxy;j.removeEventListener?j.removeEventListener(P,M,h.capture):j.detachEvent?j.detachEvent(ie(P),M):j.addListener&&j.removeListener&&j.removeListener(M),(P=Ae(j))?(Ge(P,h),P.h==0&&(P.src=null,j[ot]=null)):K(h)}}}function ie(h){return h in Be?Be[h]:Be[h]="on"+h}function Pe(h,j){if(h.da)h=!0;else{j=new G(j,this);const P=h.listener,M=h.ha||h.src;h.fa&&Ze(h),h=P.call(M,j)}return h}function Ae(h){return h=h[ot],h instanceof me?h:null}var Ee="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oe(h){return typeof h=="function"?h:(h[Ee]||(h[Ee]=function(j){return h.handleEvent(j)}),h[Ee])}function _e(){T.call(this),this.i=new me(this),this.M=this,this.G=null}f(_e,T),_e.prototype[U]=!0,_e.prototype.removeEventListener=function(h,j,P,M){le(this,h,j,P,M)};function Ke(h,j){var P,M=h.G;if(M)for(P=[];M;M=M.G)P.push(M);if(h=h.M,M=j.type||j,typeof j=="string")j=new I(j,h);else if(j instanceof I)j.target=j.target||h;else{var J=j;j=new I(M,h),de(j,J)}J=!0;let ae,we;if(P)for(we=P.length-1;we>=0;we--)ae=j.g=P[we],J=je(ae,M,!0,j)&&J;if(ae=j.g=h,J=je(ae,M,!0,j)&&J,J=je(ae,M,!1,j)&&J,P)for(we=0;we<P.length;we++)ae=j.g=P[we],J=je(ae,M,!1,j)&&J}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var h=this.i;for(const j in h.g){const P=h.g[j];for(let M=0;M<P.length;M++)K(P[M]);delete h.g[j],h.h--}}this.G=null},_e.prototype.J=function(h,j,P,M){return this.i.add(String(h),j,!1,P,M)},_e.prototype.K=function(h,j,P,M){return this.i.add(String(h),j,!0,P,M)};function je(h,j,P,M){if(j=h.i.g[String(j)],!j)return!0;j=j.concat();let J=!0;for(let ae=0;ae<j.length;++ae){const we=j[ae];if(we&&!we.da&&we.capture==P){const ct=we.listener,Pr=we.ha||we.src;we.fa&&Ge(h.i,we),J=ct.call(Pr,M)!==!1&&J}}return J&&!M.defaultPrevented}function tt(h,j){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:o.setTimeout(h,j||0)}function ht(h){h.g=tt(()=>{h.g=null,h.i&&(h.i=!1,ht(h))},h.l);const j=h.h;h.h=null,h.m.apply(null,j)}class pt extends T{constructor(j,P){super(),this.m=j,this.l=P,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:ht(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(h){T.call(this),this.h=h,this.g={}}f(Fe,T);var It=[];function Zt(h){X(h.g,function(j,P){this.g.hasOwnProperty(P)&&Ze(j)},h),h.g={}}Fe.prototype.N=function(){Fe.Z.N.call(this),Zt(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=o.JSON.stringify,Vr=o.JSON.parse,hr=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Fr(){}function bt(){}var ir={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function en(){I.call(this,"d")}f(en,I);function Ur(){I.call(this,"c")}f(Ur,I);var pr={},Er=null;function mr(){return Er=Er||new _e}pr.Ia="serverreachability";function Br(h){I.call(this,pr.Ia,h)}f(Br,I);function or(h){const j=mr();Ke(j,new Br(j))}pr.STAT_EVENT="statevent";function wr(h,j){I.call(this,pr.STAT_EVENT,h),this.stat=j}f(wr,I);function Nt(h){const j=mr();Ke(j,new wr(j,h))}pr.Ja="timingevent";function Yt(h,j){I.call(this,pr.Ja,h),this.size=j}f(Yt,I);function Ot(h,j){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},j)}function er(){this.g=!0}er.prototype.ua=function(){this.g=!1};function Bt(h,j,P,M,J,ae){h.info(function(){if(h.g)if(ae){var we="",ct=ae.split("&");for(let Dt=0;Dt<ct.length;Dt++){var Pr=ct[Dt].split("=");if(Pr.length>1){const Hr=Pr[0];Pr=Pr[1];const qa=Hr.split("_");we=qa.length>=2&&qa[1]=="type"?we+(Hr+"="+Pr+"&"):we+(Hr+"=redacted&")}}}else we=null;else we=ae;return"XMLHTTP REQ ("+M+") [attempt "+J+"]: "+j+`
`+P+`
`+we})}function bn(h,j,P,M,J,ae,we){h.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+J+"]: "+j+`
`+P+`
`+ae+" "+we})}function zr(h,j,P,M){h.info(function(){return"XMLHTTP TEXT ("+j+"): "+$e(h,P)+(M?" "+M:"")})}function re(h,j){h.info(function(){return"TIMEOUT: "+j})}er.prototype.info=function(){};function $e(h,j){if(!h.g)return j;if(!j)return null;try{const ae=JSON.parse(j);if(ae){for(h=0;h<ae.length;h++)if(Array.isArray(ae[h])){var P=ae[h];if(!(P.length<2)){var M=P[1];if(Array.isArray(M)&&!(M.length<1)){var J=M[0];if(J!="noop"&&J!="stop"&&J!="close")for(let we=1;we<M.length;we++)M[we]=""}}}}return he(ae)}catch{return j}}var z={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},q={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ne;function Se(){}f(Se,Fr),Se.prototype.g=function(){return new XMLHttpRequest},Ne=new Se;function Ue(h){return encodeURIComponent(String(h))}function st(h){var j=1;h=h.split(":");const P=[];for(;j>0&&h.length;)P.push(h.shift()),j--;return h.length&&P.push(h.join(":")),P}function it(h,j,P,M){this.j=h,this.i=j,this.l=P,this.S=M||1,this.V=new Fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lr}function lr(){this.i=null,this.g="",this.h=!1}var Cn={},tr={};function Wr(h,j,P){h.M=1,h.A=Zs(cr(j)),h.u=P,h.R=!0,qr(h,null)}function qr(h,j){h.F=Date.now(),wa(h),h.B=cr(h.A);var P=h.B,M=h.S;Array.isArray(M)||(M=[String(M)]),oh(P.i,"t",M),h.C=0,P=h.j.L,h.h=new lr,h.g=bN(h.j,P?j:null,!h.u),h.P>0&&(h.O=new pt(u(h.Y,h,h.g),h.P)),j=h.V,P=h.g,M=h.ba;var J="readystatechange";Array.isArray(J)||(J&&(It[0]=J.toString()),J=It);for(let ae=0;ae<J.length;ae++){const we=xe(P,J[ae],M||j.handleEvent,!1,j.h||j);if(!we)break;j.g[we.key]=we}j=h.J?Z(h.J):{},h.u?(h.v||(h.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,j)):(h.v="GET",h.g.ea(h.B,h.v,null,j)),or(),Bt(h.i,h.v,h.B,h.l,h.S,h.u)}it.prototype.ba=function(h){h=h.target;const j=this.O;j&&ai(h)==3?j.j():this.Y(h)},it.prototype.Y=function(h){try{if(h==this.g)e:{const ct=ai(this.g),Pr=this.g.ya(),Dt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||lN(this.g)))){this.K||ct!=4||Pr==7||(Pr==8||Dt<=0?or(3):or(2)),C(this);var j=this.g.ca();this.X=j;var P=yn(this);if(this.o=j==200,bn(this.i,this.v,this.B,this.l,this.S,ct,j),this.o){if(this.U&&!this.L){t:{if(this.g){var M,J=this.g;if((M=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(M)){var ae=M;break t}}ae=null}if(h=ae)zr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,B(this,h);else{this.o=!1,this.m=3,Nt(12),W(this),$(this);break e}}if(this.R){h=!0;let Hr;for(;!this.K&&this.C<P.length;)if(Hr=ya(this,P),Hr==tr){ct==4&&(this.m=4,Nt(14),h=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Hr==Cn){this.m=4,Nt(15),zr(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else zr(this.i,this.l,Hr,null),B(this,Hr);if(Tr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||P.length!=0||this.h.h||(this.m=1,Nt(16),h=!1),this.o=this.o&&h,!h)zr(this.i,this.l,P,"[Invalid Chunked Response]"),W(this),$(this);else if(P.length>0&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.aa&&!we.P&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Z0(we),we.P=!0,Nt(11))}}else zr(this.i,this.l,P,null),B(this,P);ct==4&&W(this),this.o&&!this.K&&(ct==4?mN(this.j,this):(this.o=!1,wa(this)))}else g4(this.g),j==400&&P.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),W(this),$(this)}}}catch{}finally{}};function yn(h){if(!Tr(h))return h.g.la();const j=lN(h.g);if(j==="")return"";let P="";const M=j.length,J=ai(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return W(h),$(h),"";h.h.i=new o.TextDecoder}for(let ae=0;ae<M;ae++)h.h.h=!0,P+=h.h.i.decode(j[ae],{stream:!(J&&ae==M-1)});return j.length=0,h.h.g+=P,h.C=0,h.h.g}function Tr(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ya(h,j){var P=h.C,M=j.indexOf(`
`,P);return M==-1?tr:(P=Number(j.substring(P,M)),isNaN(P)?Cn:(M+=1,M+P>j.length?tr:(j=j.slice(M,M+P),h.C=M+P,j)))}it.prototype.cancel=function(){this.K=!0,W(this)};function wa(h){h.T=Date.now()+h.H,V(h,h.H)}function V(h,j){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ot(u(h.aa,h),j)}function C(h){h.D&&(o.clearTimeout(h.D),h.D=null)}it.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(re(this.i,this.B),this.M!=2&&(or(),Nt(17)),W(this),this.m=2,$(this)):V(this,this.T-h)};function $(h){h.j.I==0||h.K||mN(h.j,h)}function W(h){C(h);var j=h.O;j&&typeof j.dispose=="function"&&j.dispose(),h.O=null,Zt(h.V),h.g&&(j=h.g,h.g=null,j.abort(),j.dispose())}function B(h,j){try{var P=h.j;if(P.I!=0&&(P.g==h||pe(P.h,h))){if(!h.L&&pe(P.h,h)&&P.I==3){try{var M=P.Ba.g.parse(j)}catch{M=null}if(Array.isArray(M)&&M.length==3){var J=M;if(J[0]==0){e:if(!P.v){if(P.g)if(P.g.F+3e3<h.F)dh(P),ch(P);else break e;J0(P),Nt(18)}}else P.xa=J[1],0<P.xa-P.K&&J[2]<37500&&P.F&&P.A==0&&!P.C&&(P.C=Ot(u(P.Va,P),6e3));ce(P.h)<=1&&P.ta&&(P.ta=void 0)}else lo(P,11)}else if((h.L||P.g==h)&&dh(P),!R(j))for(J=P.Ba.g.parse(j),j=0;j<J.length;j++){let Dt=J[j];const Hr=Dt[0];if(!(Hr<=P.K))if(P.K=Hr,Dt=Dt[1],P.I==2)if(Dt[0]=="c"){P.M=Dt[1],P.ba=Dt[2];const qa=Dt[3];qa!=null&&(P.ka=qa,P.j.info("VER="+P.ka));const co=Dt[4];co!=null&&(P.za=co,P.j.info("SVER="+P.za));const si=Dt[5];si!=null&&typeof si=="number"&&si>0&&(M=1.5*si,P.O=M,P.j.info("backChannelRequestTimeoutMs_="+M)),M=P;const ii=h.g;if(ii){const hh=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hh){var ae=M.h;ae.g||hh.indexOf("spdy")==-1&&hh.indexOf("quic")==-1&&hh.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Ce(ae,ae.h),ae.h=null))}if(M.G){const ex=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;ex&&(M.wa=ex,lt(M.J,M.G,ex))}}P.I=3,P.l&&P.l.ra(),P.aa&&(P.T=Date.now()-h.F,P.j.info("Handshake RTT: "+P.T+"ms")),M=P;var we=h;if(M.na=vN(M,M.L?M.ba:null,M.W),we.L){We(M.h,we);var ct=we,Pr=M.O;Pr&&(ct.H=Pr),ct.D&&(C(ct),wa(ct)),M.g=we}else hN(M);P.i.length>0&&uh(P)}else Dt[0]!="stop"&&Dt[0]!="close"||lo(P,7);else P.I==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?lo(P,7):Q0(P):Dt[0]!="noop"&&P.l&&P.l.qa(Dt),P.A=0)}}or(4)}catch{}}var ee=class{constructor(h,j){this.g=h,this.map=j}};function Y(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ne(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ce(h){return h.h?1:h.g?h.g.size:0}function pe(h,j){return h.h?h.h==j:h.g?h.g.has(j):!1}function Ce(h,j){h.g?h.g.add(j):h.h=j}function We(h,j){h.h&&h.h==j?h.h=null:h.g&&h.g.has(j)&&h.g.delete(j)}Y.prototype.cancel=function(){if(this.i=Ye(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ye(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let j=h.i;for(const P of h.g.values())j=j.concat(P.G);return j}return m(h.i)}var vt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wn(h,j){if(h){h=h.split("&");for(let P=0;P<h.length;P++){const M=h[P].indexOf("=");let J,ae=null;M>=0?(J=h[P].substring(0,M),ae=h[P].substring(M+1)):J=h[P],j(J,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function Cr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;h instanceof Cr?(this.l=h.l,_n(this,h.j),this.o=h.o,this.g=h.g,Js(this,h.u),this.h=h.h,ah(this,lh(h.i)),this.m=h.m):h&&(j=String(h).match(vt))?(this.l=!1,_n(this,j[1]||"",!0),this.o=za(j[2]||""),this.g=za(j[3]||"",!0),Js(this,j[4]),this.h=za(j[5]||"",!0),ah(this,j[6]||"",!0),this.m=za(j[7]||"")):(this.l=!1,this.i=new io(null,this.l))}Cr.prototype.toString=function(){const h=[];var j=this.j;j&&h.push(ei(j,mu,!0),":");var P=this.g;return(P||j=="file")&&(h.push("//"),(j=this.o)&&h.push(ei(j,mu,!0),"@"),h.push(Ue(P).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.u,P!=null&&h.push(":",String(P))),(P=this.h)&&(this.g&&P.charAt(0)!="/"&&h.push("/"),h.push(ei(P,P.charAt(0)=="/"?sh:gu,!0))),(P=this.i.toString())&&h.push("?",P),(P=this.m)&&h.push("#",ei(P,vu)),h.join("")},Cr.prototype.resolve=function(h){const j=cr(this);let P=!!h.j;P?_n(j,h.j):P=!!h.o,P?j.o=h.o:P=!!h.g,P?j.g=h.g:P=h.u!=null;var M=h.h;if(P)Js(j,h.u);else if(P=!!h.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var J=j.h.lastIndexOf("/");J!=-1&&(M=j.h.slice(0,J+1)+M)}if(J=M,J==".."||J==".")M="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){M=J.lastIndexOf("/",0)==0,J=J.split("/");const ae=[];for(let we=0;we<J.length;){const ct=J[we++];ct=="."?M&&we==J.length&&ae.push(""):ct==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),M&&we==J.length&&ae.push("")):(ae.push(ct),M=!0)}M=ae.join("/")}else M=J}return P?j.h=M:P=h.i.toString()!=="",P?ah(j,lh(h.i)):P=!!h.m,P&&(j.m=h.m),j};function cr(h){return new Cr(h)}function _n(h,j,P){h.j=P?za(j,!0):j,h.j&&(h.j=h.j.replace(/:$/,""))}function Js(h,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);h.u=j}else h.u=null}function ah(h,j,P){j instanceof io?(h.i=j,gr(h.i,h.l)):(P||(j=ei(j,xu)),h.i=new io(j,h.l))}function lt(h,j,P){h.i.set(j,P)}function Zs(h){return lt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function za(h,j){return h?j?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ei(h,j,P){return typeof h=="string"?(h=encodeURI(h).replace(j,dl),P&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var mu=/[#\/\?@]/g,gu=/[#\?:]/g,sh=/[#\?]/g,xu=/[#\?@]/g,vu=/#/g;function io(h,j){this.h=this.g=null,this.i=h||null,this.j=!!j}function xs(h){h.g||(h.g=new Map,h.h=0,h.i&&wn(h.i,function(j,P){h.add(decodeURIComponent(j.replace(/\+/g," ")),P)}))}t=io.prototype,t.add=function(h,j){xs(this),this.i=null,h=ti(this,h);let P=this.g.get(h);return P||this.g.set(h,P=[]),P.push(j),this.h+=1,this};function bu(h,j){xs(h),j=ti(h,j),h.g.has(j)&&(h.i=null,h.h-=h.g.get(j).length,h.g.delete(j))}function yu(h,j){return xs(h),j=ti(h,j),h.g.has(j)}t.forEach=function(h,j){xs(this),this.g.forEach(function(P,M){P.forEach(function(J){h.call(j,J,M,this)},this)},this)};function ih(h,j){xs(h);let P=[];if(typeof j=="string")yu(h,j)&&(P=P.concat(h.g.get(ti(h,j))));else for(h=Array.from(h.g.values()),j=0;j<h.length;j++)P=P.concat(h[j]);return P}t.set=function(h,j){return xs(this),this.i=null,h=ti(this,h),yu(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[j]),this.h+=1,this},t.get=function(h,j){return h?(h=ih(this,h),h.length>0?String(h[0]):j):j};function oh(h,j,P){bu(h,j),P.length>0&&(h.i=null,h.g.set(ti(h,j),m(P)),h.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],j=Array.from(this.g.keys());for(let M=0;M<j.length;M++){var P=j[M];const J=Ue(P);P=ih(this,P);for(let ae=0;ae<P.length;ae++){let we=J;P[ae]!==""&&(we+="="+Ue(P[ae])),h.push(we)}}return this.i=h.join("&")};function lh(h){const j=new io;return j.i=h.i,h.g&&(j.g=new Map(h.g),j.h=h.h),j}function ti(h,j){return j=String(j),h.j&&(j=j.toLowerCase()),j}function gr(h,j){j&&!h.j&&(xs(h),h.i=null,h.g.forEach(function(P,M){const J=M.toLowerCase();M!=J&&(bu(this,M),oh(this,J,P))},h)),h.j=j}function Y0(h,j){const P=new er;if(o.Image){const M=new Image;M.onload=d(Wa,P,"TestLoadImage: loaded",!0,j,M),M.onerror=d(Wa,P,"TestLoadImage: error",!1,j,M),M.onabort=d(Wa,P,"TestLoadImage: abort",!1,j,M),M.ontimeout=d(Wa,P,"TestLoadImage: timeout",!1,j,M),o.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=h}else j(!1)}function X0(h,j){const P=new er,M=new AbortController,J=setTimeout(()=>{M.abort(),Wa(P,"TestPingServer: timeout",!1,j)},1e4);fetch(h,{signal:M.signal}).then(ae=>{clearTimeout(J),ae.ok?Wa(P,"TestPingServer: ok",!0,j):Wa(P,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(J),Wa(P,"TestPingServer: error",!1,j)})}function Wa(h,j,P,M,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),M(P)}catch{}}function Ve(){this.g=new hr}function wu(h){this.i=h.Sb||null,this.h=h.ab||!1}f(wu,Fr),wu.prototype.g=function(){return new fl(this.i,this.h)};function fl(h,j){_e.call(this),this.H=h,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(fl,_e),t=fl.prototype,t.open=function(h,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=j,this.readyState=1,ni(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(j.body=h),(this.H||o).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_u(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function _u(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var j=h.value?h.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!h.done}))&&(this.response=this.responseText+=j)}h.done?ri(this):ni(this),this.readyState==3&&_u(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,ri(this))},t.Na=function(h){this.g&&(this.response=h,ri(this))},t.ga=function(){this.g&&ri(this)};function ri(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ni(h)}t.setRequestHeader=function(h,j){this.A.append(h,j)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],j=this.h.entries();for(var P=j.next();!P.done;)P=P.value,h.push(P[0]+": "+P[1]),P=j.next();return h.join(`\r
`)};function ni(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Nu(h){let j="";return X(h,function(P,M){j+=M,j+=":",j+=P,j+=`\r
`}),j}function hl(h,j,P){e:{for(M in P){var M=!1;break e}M=!0}M||(P=Nu(P),typeof h=="string"?P!=null&&Ue(P):lt(h,j,P))}function L(h){_e.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(L,_e);var ke=/^https?$/i,ze=["POST","PUT"];t=L.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,j,P,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);j=j?j.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ne.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(j,String(h),!0),this.B=!1}catch(ae){Mt(this,ae);return}if(h=P||"",P=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var J in M)P.set(J,M[J]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const ae of M.keys())P.set(ae,M.get(ae));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(P.keys()).find(ae=>ae.toLowerCase()=="content-type"),J=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(ze,j,void 0)>=0)||M||J||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,we]of P)this.g.setRequestHeader(ae,we);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ae){Mt(this,ae)}};function Mt(h,j){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=j,h.o=5,Pn(h),oo(h)}function Pn(h){h.A||(h.A=!0,Ke(h,"complete"),Ke(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ke(this,"complete"),Ke(this,"abort"),oo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oo(this,!0)),L.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ra(this):this.Xa())},t.Xa=function(){ra(this)};function ra(h){if(h.h&&typeof s<"u"){if(h.v&&ai(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ke(h,"readystatechange"),ai(h)==4){h.h=!1;try{const ae=h.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var P;if(!(P=j)){var M;if(M=ae===0){let we=String(h.D).match(vt)[1]||null;!we&&o.self&&o.self.location&&(we=o.self.location.protocol.slice(0,-1)),M=!ke.test(we?we.toLowerCase():"")}P=M}if(P)Ke(h,"complete"),Ke(h,"success");else{h.o=6;try{var J=ai(h)>2?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.ca()+"]",Pn(h)}}finally{oo(h)}}}}function oo(h,j){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const P=h.g;h.g=null,j||Ke(h,"ready");try{P.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ai(h){return h.g?h.g.readyState:0}t.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var j=this.g.responseText;return h&&j.indexOf(h)==0&&(j=j.substring(h.length)),Vr(j)}};function lN(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function g4(h){const j={};h=(h.g&&ai(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<h.length;M++){if(R(h[M]))continue;var P=st(h[M]);const J=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const ae=j[J]||[];j[J]=ae,ae.push(P)}se(j,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ju(h,j,P){return P&&P.internalChannelParams&&P.internalChannelParams[h]||j}function cN(h){this.za=0,this.i=[],this.j=new er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ju("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ju("baseRetryDelayMs",5e3,h),this.Za=ju("retryDelaySeedMs",1e4,h),this.Ta=ju("forwardChannelMaxRetries",2,h),this.va=ju("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Y(h&&h.concurrentRequestLimit),this.Ba=new Ve,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=cN.prototype,t.ka=8,t.I=1,t.connect=function(h,j,P,M){Nt(0),this.W=h,this.H=j||{},P&&M!==void 0&&(this.H.OSID=P,this.H.OAID=M),this.F=this.X,this.J=vN(this,null,this.W),uh(this)};function Q0(h){if(uN(h),h.I==3){var j=h.V++,P=cr(h.J);if(lt(P,"SID",h.M),lt(P,"RID",j),lt(P,"TYPE","terminate"),Su(h,P),j=new it(h,h.j,j),j.M=2,j.A=Zs(cr(P)),P=!1,o.navigator&&o.navigator.sendBeacon)try{P=o.navigator.sendBeacon(j.A.toString(),"")}catch{}!P&&o.Image&&(new Image().src=j.A,P=!0),P||(j.g=bN(j.j,null),j.g.ea(j.A)),j.F=Date.now(),wa(j)}xN(h)}function ch(h){h.g&&(Z0(h),h.g.cancel(),h.g=null)}function uN(h){ch(h),h.v&&(o.clearTimeout(h.v),h.v=null),dh(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function uh(h){if(!ne(h.h)&&!h.m){h.m=!0;var j=h.Ea;N||b(),k||(N(),k=!0),S.add(j,h),h.D=0}}function x4(h,j){return ce(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=j.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ot(u(h.Ea,h,j),gN(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const J=new it(this,this.j,h);let ae=this.o;if(this.U&&(ae?(ae=Z(ae),de(ae,this.U)):ae=this.U),this.u!==null||this.R||(J.J=ae,ae=null),this.S)e:{for(var j=0,P=0;P<this.i.length;P++){t:{var M=this.i[P];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(j+=M,j>4096){j=P;break e}if(j===4096||P===this.i.length-1){j=P+1;break e}}j=1e3}else j=1e3;j=fN(this,J,j),P=cr(this.J),lt(P,"RID",h),lt(P,"CVER",22),this.G&&lt(P,"X-HTTP-Session-Id",this.G),Su(this,P),ae&&(this.R?j="headers="+Ue(Nu(ae))+"&"+j:this.u&&hl(P,this.u,ae)),Ce(this.h,J),this.Ra&&lt(P,"TYPE","init"),this.S?(lt(P,"$req",j),lt(P,"SID","null"),J.U=!0,Wr(J,P,null)):Wr(J,P,j),this.I=2}}else this.I==3&&(h?dN(this,h):this.i.length==0||ne(this.h)||dN(this))};function dN(h,j){var P;j?P=j.l:P=h.V++;const M=cr(h.J);lt(M,"SID",h.M),lt(M,"RID",P),lt(M,"AID",h.K),Su(h,M),h.u&&h.o&&hl(M,h.u,h.o),P=new it(h,h.j,P,h.D+1),h.u===null&&(P.J=h.o),j&&(h.i=j.G.concat(h.i)),j=fN(h,P,1e3),P.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ce(h.h,P),Wr(P,M,j)}function Su(h,j){h.H&&X(h.H,function(P,M){lt(j,M,P)}),h.l&&X({},function(P,M){lt(j,M,P)})}function fN(h,j,P){P=Math.min(h.i.length,P);const M=h.l?u(h.l.Ka,h.l,h):null;e:{var J=h.i;let ct=-1;for(;;){const Pr=["count="+P];ct==-1?P>0?(ct=J[0].g,Pr.push("ofs="+ct)):ct=0:Pr.push("ofs="+ct);let Dt=!0;for(let Hr=0;Hr<P;Hr++){var ae=J[Hr].g;const qa=J[Hr].map;if(ae-=ct,ae<0)ct=Math.max(0,J[Hr].g-100),Dt=!1;else try{ae="req"+ae+"_"||"";try{var we=qa instanceof Map?qa:Object.entries(qa);for(const[co,si]of we){let ii=si;l(si)&&(ii=he(si)),Pr.push(ae+co+"="+encodeURIComponent(ii))}}catch(co){throw Pr.push(ae+"type="+encodeURIComponent("_badmap")),co}}catch{M&&M(qa)}}if(Dt){we=Pr.join("&");break e}}we=void 0}return h=h.i.splice(0,P),j.G=h,we}function hN(h){if(!h.g&&!h.v){h.Y=1;var j=h.Da;N||b(),k||(N(),k=!0),S.add(j,h),h.A=0}}function J0(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ot(u(h.Da,h),gN(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,pN(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ot(u(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),ch(this),pN(this))};function Z0(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function pN(h){h.g=new it(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var j=cr(h.na);lt(j,"RID","rpc"),lt(j,"SID",h.M),lt(j,"AID",h.K),lt(j,"CI",h.F?"0":"1"),!h.F&&h.ia&&lt(j,"TO",h.ia),lt(j,"TYPE","xmlhttp"),Su(h,j),h.u&&h.o&&hl(j,h.u,h.o),h.O&&(h.g.H=h.O);var P=h.g;h=h.ba,P.M=1,P.A=Zs(cr(j)),P.u=null,P.R=!0,qr(P,h)}t.Va=function(){this.C!=null&&(this.C=null,ch(this),J0(this),Nt(19))};function dh(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function mN(h,j){var P=null;if(h.g==j){dh(h),Z0(h),h.g=null;var M=2}else if(pe(h.h,j))P=j.G,We(h.h,j),M=1;else return;if(h.I!=0){if(j.o)if(M==1){P=j.u?j.u.length:0,j=Date.now()-j.F;var J=h.D;M=mr(),Ke(M,new Yt(M,P)),uh(h)}else hN(h);else if(J=j.m,J==3||J==0&&j.X>0||!(M==1&&x4(h,j)||M==2&&J0(h)))switch(P&&P.length>0&&(j=h.h,j.i=j.i.concat(P)),J){case 1:lo(h,5);break;case 4:lo(h,10);break;case 3:lo(h,6);break;default:lo(h,2)}}}function gN(h,j){let P=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(P*=2),P*j}function lo(h,j){if(h.j.info("Error code "+j),j==2){var P=u(h.bb,h),M=h.Ua;const J=!M;M=new Cr(M||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_n(M,"https"),Zs(M),J?Y0(M.toString(),P):X0(M.toString(),P)}else Nt(2);h.I=0,h.l&&h.l.pa(j),xN(h),uN(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function xN(h){if(h.I=0,h.ja=[],h.l){const j=Ye(h.h);(j.length!=0||h.i.length!=0)&&(v(h.ja,j),v(h.ja,h.i),h.h.i.length=0,m(h.i),h.i.length=0),h.l.oa()}}function vN(h,j,P){var M=P instanceof Cr?cr(P):new Cr(P);if(M.g!="")j&&(M.g=j+"."+M.g),Js(M,M.u);else{var J=o.location;M=J.protocol,j=j?j+"."+J.hostname:J.hostname,J=+J.port;const ae=new Cr(null);M&&_n(ae,M),j&&(ae.g=j),J&&Js(ae,J),P&&(ae.h=P),M=ae}return P=h.G,j=h.wa,P&&j&&lt(M,P,j),lt(M,"VER",h.ka),Su(h,M),M}function bN(h,j,P){if(j&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=h.Aa&&!h.ma?new L(new wu({ab:P})):new L(h.ma),j.Fa(h.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yN(){}t=yN.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function fh(){}fh.prototype.g=function(h,j){return new zn(h,j)};function zn(h,j){_e.call(this),this.g=new cN(j),this.l=h,this.h=j&&j.messageUrlParams||null,h=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(h?h["X-WebChannel-Content-Type"]=j.messageContentType:h={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(h?h["X-WebChannel-Client-Profile"]=j.sa:h={"X-WebChannel-Client-Profile":j.sa}),this.g.U=h,(h=j&&j.Qb)&&!R(h)&&(this.g.u=h),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!R(j)&&(this.g.G=j,h=this.h,h!==null&&j in h&&(h=this.h,j in h&&delete h[j])),this.j=new pl(this)}f(zn,_e),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){Q0(this.g)},zn.prototype.o=function(h){var j=this.g;if(typeof h=="string"){var P={};P.__data__=h,h=P}else this.v&&(P={},P.__data__=he(h),h=P);j.i.push(new ee(j.Ya++,h)),j.I==3&&uh(j)},zn.prototype.N=function(){this.g.l=null,delete this.j,Q0(this.g),delete this.g,zn.Z.N.call(this)};function wN(h){en.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var j=h.__sm__;if(j){e:{for(const P in j){h=P;break e}h=void 0}(this.i=h)&&(h=this.i,j=j!==null&&h in j?j[h]:void 0),this.data=j}else this.data=h}f(wN,en);function _N(){Ur.call(this),this.status=1}f(_N,Ur);function pl(h){this.g=h}f(pl,yN),pl.prototype.ra=function(){Ke(this.g,"a")},pl.prototype.qa=function(h){Ke(this.g,new wN(h))},pl.prototype.pa=function(h){Ke(this.g,new _N)},pl.prototype.oa=function(){Ke(this.g,"b")},fh.prototype.createWebChannel=fh.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,rI=function(){return new fh},tI=function(){return mr()},eI=pr,yb={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},z.NO_ERROR=0,z.TIMEOUT=8,z.HTTP_ERROR=6,hp=z,q.COMPLETE="complete",ZP=q,bt.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",_e.prototype.listen=_e.prototype.J,Xu=bt,L.prototype.listenOnce=L.prototype.K,L.prototype.getLastError=L.prototype.Ha,L.prototype.getLastErrorCode=L.prototype.ya,L.prototype.getStatus=L.prototype.ca,L.prototype.getResponseJson=L.prototype.La,L.prototype.getResponseText=L.prototype.la,L.prototype.send=L.prototype.ea,L.prototype.setWithCredentials=L.prototype.Fa,JP=L}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc="12.9.0";function D6(t){Qc=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new u1("@firebase/firestore");function wl(){return Ho.logLevel}function Ie(t,...e){if(Ho.logLevel<=mt.DEBUG){const r=e.map(h1);Ho.debug(`Firestore (${Qc}): ${t}`,...r)}}function Ls(t,...e){if(Ho.logLevel<=mt.ERROR){const r=e.map(h1);Ho.error(`Firestore (${Qc}): ${t}`,...r)}}function pc(t,...e){if(Ho.logLevel<=mt.WARN){const r=e.map(h1);Ho.warn(`Firestore (${Qc}): ${t}`,...r)}}function h1(t){if(typeof t=="string")return t;try{return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,nI(t,n,r)}function nI(t,e,r){let n=`FIRESTORE (${Qc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Ls(n),new Error(n)}function St(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||nI(e,a,n)}function at(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Gs{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(In.UNAUTHENTICATED))}shutdown(){}}class $6{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){St(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Li;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Li,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Li)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(St(typeof n.accessToken=="string",31837,{l:n}),new R6(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class L6{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=In.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class V6{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new L6(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F6{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ja(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){St(this.o===void 0,3512);const n=s=>{s.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Ie("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qj(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(St(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new qj(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=U6(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%62))}return n}}function gt(t,e){return t<e?-1:t>e?1:0}function wb(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),s=e.charAt(n);if(a!==s)return Ix(a)===Ix(s)?gt(a,s):Ix(a)?1:-1}return gt(t.length,e.length)}const B6=55296,z6=57343;function Ix(t){const e=t.charCodeAt(0);return e>=B6&&e<=z6}function mc(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="__name__";class Xa{constructor(e,r,n){r===void 0?r=0:r>e.length&&Qe(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Qe(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Xa.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Xa?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=Xa.compareSegments(e.get(a),r.get(a));if(s!==0)return s}return gt(e.length,r.length)}static compareSegments(e,r){const n=Xa.isNumericId(e),a=Xa.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Xa.extractNumericId(e).compare(Xa.extractNumericId(r)):wb(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $i.fromString(e.substring(4,e.length-2))}}class Vt extends Xa{construct(e,r,n){return new Vt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Te(ue.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Vt(r)}static emptyPath(){return new Vt([])}}const W6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Xa{construct(e,r,n){return new an(e,r,n)}static isValidIdentifier(e){return W6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hj}static keyField(){return new an([Hj])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new Te(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Te(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new Te(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(r)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.path=e}static fromPath(e){return new He(Vt.fromString(e))}static fromName(e){return new He(Vt.fromString(e).popFirst(5))}static empty(){return new He(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Vt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t,e,r){if(!r)throw new Te(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function q6(t,e,r,n){if(e===!0&&n===!0)throw new Te(ue.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Gj(t){if(!He.isDocumentKey(t))throw new Te(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Kj(t){if(He.isDocumentKey(t))throw new Te(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Og(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Qe(12329,{type:typeof t})}function $a(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Og(t);throw new Te(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){const r={typeString:t};return e&&(r.value=e),r}function Lf(t,e){if(!sI(t))throw new Te(ue.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Te(ue.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=-62135596800,Xj=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Xj);return new Gt(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Yj)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xj}_compareTo(e){return this.seconds===e.seconds?gt(this.nanoseconds,e.nanoseconds):gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lf(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yj;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:Ar("string",Gt._jsonSchemaVersion),seconds:Ar("number"),nanoseconds:Ar("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new Gt(0,0))}static max(){return new nt(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=-1;function H6(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=nt.fromTimestamp(n===1e9?new Gt(r+1,0):new Gt(r,n));return new Wi(a,He.empty(),e)}function G6(t){return new Wi(t.readTime,t.key,Ud)}class Wi{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Wi(nt.min(),He.empty(),Ud)}static max(){return new Wi(nt.max(),He.empty(),Ud)}}function K6(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=He.comparator(t.documentKey,e.documentKey),r!==0?r:gt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==Y6)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new fe((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof fe?r:fe.resolve(r)}catch(r){return fe.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):fe.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):fe.reject(r)}static resolve(e){return new fe((r,n)=>{r(e)})}static reject(e){return new fe((r,n)=>{n(e)})}static waitFor(e){return new fe((r,n)=>{let a=0,s=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(e){let r=fe.resolve(!1);for(const n of e)r=r.next(a=>a?fe.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new fe((n,a)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(e,r){return new fe((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}function Q6(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Zc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dg.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=-1;function Rg(t){return t==null}function Xp(t){return t===0&&1/t==-1/0}function J6(t){return typeof t=="number"&&Number.isInteger(t)&&!Xp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="";function Z6(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Qj(e)),e=eV(t.get(r),e);return Qj(e)}function eV(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case iI:r+="";break;default:r+=s}}return r}function Qj(t){return t+iI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function eo(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function oI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,r){this.comparator=e,this.root=r||nn.EMPTY}insert(e,r){return new sr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new sr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??nn.RED,this.left=a??nn.EMPTY,this.right=s??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new nn(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return nn.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,r,n,a,s){return this}insert(e,r,n){return new nn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.comparator=e,this.data=new sr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Zj(this.data.getIterator())}getIteratorFrom(e){return new Zj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof $r)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new $r(this.comparator);return r.data=e,r}}class Zj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Xn([])}unionWith(e){let r=new $r(an.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Xn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return mc(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new lI("Invalid base64 string: "+s):s}}(e);return new ln(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new ln(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const tV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(t){if(St(!!t,39018),typeof t=="string"){let e=0;const r=tV.exec(t);if(St(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:xr(t.seconds),nanos:xr(t.nanos)}}function xr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hi(t){return typeof t=="string"?ln.fromBase64String(t):ln.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="server_timestamp",uI="__type__",dI="__previous_value__",fI="__local_write_time__";function g1(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[uI])==null?void 0:n.stringValue)===cI}function Mg(t){const e=t.mapValue.fields[dI];return g1(e)?Mg(e):e}function Bd(t){const e=qi(t.mapValue.fields[fI].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,r,n,a,s,o,l,c,u,d,f){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d,this.apiKey=f}}const Qp="(default)";class zd{constructor(e,r){this.projectId=e,this.database=r||Qp}static empty(){return new zd("","")}get isDefaultDatabase(){return this.database===Qp}isEqual(e){return e instanceof zd&&e.projectId===this.projectId&&e.database===this.database}}function nV(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Te(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zd(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI="__type__",aV="__max__",Dh={mapValue:{}},pI="__vector__",Jp="value";function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?g1(t)?4:iV(t)?9007199254740991:sV(t)?10:11:Qe(28295,{value:t})}function fs(t,e){if(t===e)return!0;const r=Gi(t);if(r!==Gi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bd(t).isEqual(Bd(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=qi(a.timestampValue),l=qi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return Hi(a.bytesValue).isEqual(Hi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return xr(a.geoPointValue.latitude)===xr(s.geoPointValue.latitude)&&xr(a.geoPointValue.longitude)===xr(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return xr(a.integerValue)===xr(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=xr(a.doubleValue),l=xr(s.doubleValue);return o===l?Xp(o)===Xp(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return mc(t.arrayValue.values||[],e.arrayValue.values||[],fs);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(Jj(o)!==Jj(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!fs(o[c],l[c])))return!1;return!0}(t,e);default:return Qe(52216,{left:t})}}function Wd(t,e){return(t.values||[]).find(r=>fs(r,e))!==void 0}function gc(t,e){if(t===e)return 0;const r=Gi(t),n=Gi(e);if(r!==n)return gt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return gt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=xr(s.integerValue||s.doubleValue),c=xr(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return eS(t.timestampValue,e.timestampValue);case 4:return eS(Bd(t),Bd(e));case 5:return wb(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Hi(s),c=Hi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=gt(l[u],c[u]);if(d!==0)return d}return gt(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=gt(xr(s.latitude),xr(o.latitude));return l!==0?l:gt(xr(s.longitude),xr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tS(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,m,v,x;const l=s.fields||{},c=o.fields||{},u=(p=l[Jp])==null?void 0:p.arrayValue,d=(m=c[Jp])==null?void 0:m.arrayValue,f=gt(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:tS(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Dh.mapValue&&o===Dh.mapValue)return 0;if(s===Dh.mapValue)return 1;if(o===Dh.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const p=wb(c[f],d[f]);if(p!==0)return p;const m=gc(l[c[f]],u[d[f]]);if(m!==0)return m}return gt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Qe(23264,{he:r})}}function eS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return gt(t,e);const r=qi(t),n=qi(e),a=gt(r.seconds,n.seconds);return a!==0?a:gt(r.nanos,n.nanos)}function tS(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=gc(r[a],n[a]);if(s)return s}return gt(r.length,n.length)}function xc(t){return _b(t)}function _b(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=qi(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Hi(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return He.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=_b(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${_b(r.fields[o])}`;return a+"}"}(t.mapValue):Qe(61005,{value:t})}function pp(t){switch(Gi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mg(t);return e?16+pp(e):16;case 5:return 2*t.stringValue.length;case 6:return Hi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+pp(s),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return eo(n.fields,(s,o)=>{a+=s.length+pp(o)}),a}(t.mapValue);default:throw Qe(13486,{value:t})}}function rS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nb(t){return!!t&&"integerValue"in t}function x1(t){return!!t&&"arrayValue"in t}function nS(t){return!!t&&"nullValue"in t}function aS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mp(t){return!!t&&"mapValue"in t}function sV(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[hI])==null?void 0:n.stringValue)===pI}function fd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=fd(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=fd(t.arrayValue.values[r]);return e}return{...t}}function iV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===aV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.value=e}static empty(){return new Rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!mp(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(r)}setAll(e){let r=an.emptyPath(),n={},a=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=fd(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());mp(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return fs(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];mp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){eo(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new Rn(fd(this.value))}}function mI(t){const e=[];return eo(t.fields,(r,n)=>{const a=new an([r]);if(mp(n)){const s=mI(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,r,n,a,s,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new pn(e,0,nt.min(),nt.min(),nt.min(),Rn.empty(),0)}static newFoundDocument(e,r,n,a){return new pn(e,1,r,nt.min(),n,a,0)}static newNoDocument(e,r){return new pn(e,2,r,nt.min(),nt.min(),Rn.empty(),0)}static newUnknownDocument(e,r){return new pn(e,3,r,nt.min(),nt.min(),Rn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,r){this.position=e,this.inclusive=r}}function sS(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=He.comparator(He.fromName(o.referenceValue),r.key):n=gc(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function iS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!fs(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,r="asc"){this.field=e,this.dir=r}}function oV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{}class Sr extends gI{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new cV(e,r,n):r==="array-contains"?new fV(e,n):r==="in"?new hV(e,n):r==="not-in"?new pV(e,n):r==="array-contains-any"?new mV(e,n):new Sr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new uV(e,n):new dV(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(gc(r,this.value)):r!==null&&Gi(this.value)===Gi(r)&&this.matchesComparison(gc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ua extends gI{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Ua(e,r)}matches(e){return xI(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xI(t){return t.op==="and"}function vI(t){return lV(t)&&xI(t)}function lV(t){for(const e of t.filters)if(e instanceof Ua)return!1;return!0}function jb(t){if(t instanceof Sr)return t.field.canonicalString()+t.op.toString()+xc(t.value);if(vI(t))return t.filters.map(e=>jb(e)).join(",");{const e=t.filters.map(r=>jb(r)).join(",");return`${t.op}(${e})`}}function bI(t,e){return t instanceof Sr?function(n,a){return a instanceof Sr&&n.op===a.op&&n.field.isEqual(a.field)&&fs(n.value,a.value)}(t,e):t instanceof Ua?function(n,a){return a instanceof Ua&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&bI(o,a.filters[l]),!0):!1}(t,e):void Qe(19439)}function yI(t){return t instanceof Sr?function(r){return`${r.field.canonicalString()} ${r.op} ${xc(r.value)}`}(t):t instanceof Ua?function(r){return r.op.toString()+" {"+r.getFilters().map(yI).join(" ,")+"}"}(t):"Filter"}class cV extends Sr{constructor(e,r,n){super(e,r,n),this.key=He.fromName(n.referenceValue)}matches(e){const r=He.comparator(e.key,this.key);return this.matchesComparison(r)}}class uV extends Sr{constructor(e,r){super(e,"in",r),this.keys=wI("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class dV extends Sr{constructor(e,r){super(e,"not-in",r),this.keys=wI("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function wI(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>He.fromName(n.referenceValue))}class fV extends Sr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return x1(r)&&Wd(r.arrayValue,this.value)}}class hV extends Sr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Wd(this.value.arrayValue,r)}}class pV extends Sr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Wd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Wd(this.value.arrayValue,r)}}class mV extends Sr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!x1(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Wd(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,r=null,n=[],a=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function oS(t,e=null,r=[],n=[],a=null,s=null,o=null){return new gV(t,e,r,n,a,s,o)}function v1(t){const e=at(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>jb(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Rg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>xc(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>xc(n)).join(",")),e.Te=r}return e.Te}function b1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!oV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!bI(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iS(t.startAt,e.startAt)&&iS(t.endAt,e.endAt)}function Sb(t){return He.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function xV(t,e,r,n,a,s,o,l){return new Vf(t,e,r,n,a,s,o,l)}function y1(t){return new Vf(t)}function lS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vV(t){return He.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function _I(t){return t.collectionGroup!==null}function hd(t){const e=at(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new $r(an.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new em(s,n))}),r.has(an.keyField().canonicalString())||e.Ie.push(new em(an.keyField(),n))}return e.Ie}function ss(t){const e=at(t);return e.Ee||(e.Ee=bV(e,hd(t))),e.Ee}function bV(t,e){if(t.limitType==="F")return oS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new em(a.field,s)});const r=t.endAt?new Zp(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Zp(t.startAt.position,t.startAt.inclusive):null;return oS(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Ab(t,e){const r=t.filters.concat([e]);return new Vf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function kb(t,e,r){return new Vf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function $g(t,e){return b1(ss(t),ss(e))&&t.limitType===e.limitType}function NI(t){return`${v1(ss(t))}|lt:${t.limitType}`}function _l(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>yI(a)).join(", ")}]`),Rg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>xc(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>xc(a)).join(",")),`Target(${n})`}(ss(t))}; limitType=${t.limitType})`}function Lg(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):He.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of hd(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=sS(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,hd(n),a)||n.endAt&&!function(o,l,c){const u=sS(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,hd(n),a))}(t,e)}function yV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jI(t){return(e,r)=>{let n=!1;for(const a of hd(t)){const s=wV(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function wV(t,e,r){const n=t.field.isKeyField()?He.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?gc(c,u):Qe(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Qe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return oI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new sr(He.comparator);function Vs(){return _V}const SI=new sr(He.comparator);function Qu(...t){let e=SI;for(const r of t)e=e.insert(r.key,r);return e}function AI(t){let e=SI;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function So(){return pd()}function kI(){return pd()}function pd(){return new nl(t=>t.toString(),(t,e)=>t.isEqual(e))}const NV=new sr(He.comparator),jV=new $r(He.comparator);function xt(...t){let e=jV;for(const r of t)e=e.add(r);return e}const SV=new $r(gt);function AV(){return SV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xp(e)?"-0":e}}function EI(t){return{integerValue:""+t}}function kV(t,e){return J6(e)?EI(e):w1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this._=void 0}}function EV(t,e,r){return t instanceof tm?function(a,s){const o={fields:{[uI]:{stringValue:cI},[fI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&g1(s)&&(s=Mg(s)),s&&(o.fields[dI]=s),{mapValue:o}}(r,e):t instanceof qd?CI(t,e):t instanceof Hd?PI(t,e):function(a,s){const o=TI(a,s),l=cS(o)+cS(a.Ae);return Nb(o)&&Nb(a.Ae)?EI(l):w1(a.serializer,l)}(t,e)}function TV(t,e,r){return t instanceof qd?CI(t,e):t instanceof Hd?PI(t,e):r}function TI(t,e){return t instanceof rm?function(n){return Nb(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class tm extends Vg{}class qd extends Vg{constructor(e){super(),this.elements=e}}function CI(t,e){const r=II(e);for(const n of t.elements)r.some(a=>fs(a,n))||r.push(n);return{arrayValue:{values:r}}}class Hd extends Vg{constructor(e){super(),this.elements=e}}function PI(t,e){let r=II(e);for(const n of t.elements)r=r.filter(a=>!fs(a,n));return{arrayValue:{values:r}}}class rm extends Vg{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function cS(t){return xr(t.integerValue||t.doubleValue)}function II(t){return x1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CV(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof qd&&a instanceof qd||n instanceof Hd&&a instanceof Hd?mc(n.elements,a.elements,fs):n instanceof rm&&a instanceof rm?fs(n.Ae,a.Ae):n instanceof tm&&a instanceof tm}(t.transform,e.transform)}class PV{constructor(e,r){this.version=e,this.transformResults=r}}class Un{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fg{}function OI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ug(t.key,Un.none()):new Ff(t.key,t.data,Un.none());{const r=t.data,n=Rn.empty();let a=new $r(an.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new to(t.key,n,new Xn(a.toArray()),Un.none())}}function IV(t,e,r){t instanceof Ff?function(a,s,o){const l=a.value.clone(),c=dS(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof to?function(a,s,o){if(!gp(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=dS(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(DI(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function md(t,e,r,n){return t instanceof Ff?function(s,o,l,c){if(!gp(s.precondition,o))return l;const u=s.value.clone(),d=fS(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof to?function(s,o,l,c){if(!gp(s.precondition,o))return l;const u=fS(s.fieldTransforms,c,o),d=o.data;return d.setAll(DI(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(s,o,l){return gp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function OV(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=TI(n.transform,a||null);s!=null&&(r===null&&(r=Rn.empty()),r.set(n.field,s))}return r||null}function uS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&mc(n,a,(s,o)=>CV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ff extends Fg{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class to extends Fg{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function DI(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function dS(t,e,r){const n=new Map;St(t.length===r.length,32656,{Ve:r.length,de:t.length});for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,l=e.data.field(s.field);n.set(s.field,TV(o,l,r[a]))}return n}function fS(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,EV(s,o,e))}return n}class Ug extends Fg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DV extends Fg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&IV(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=md(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=md(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=kI();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=OI(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(nt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),xt())}isEqual(e){return this.batchId===e.batchId&&mc(this.mutations,e.mutations,(r,n)=>uS(r,n))&&mc(this.baseMutations,e.baseMutations,(r,n)=>uS(r,n))}}class _1{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){St(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return NV}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new _1(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _r,yt;function LV(t){switch(t){case ue.OK:return Qe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Qe(15467,{code:t})}}function RI(t){if(t===void 0)return Ls("GRPC error has no .code"),ue.UNKNOWN;switch(t){case _r.OK:return ue.OK;case _r.CANCELLED:return ue.CANCELLED;case _r.UNKNOWN:return ue.UNKNOWN;case _r.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case _r.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case _r.INTERNAL:return ue.INTERNAL;case _r.UNAVAILABLE:return ue.UNAVAILABLE;case _r.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case _r.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case _r.NOT_FOUND:return ue.NOT_FOUND;case _r.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case _r.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case _r.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case _r.ABORTED:return ue.ABORTED;case _r.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case _r.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case _r.DATA_LOSS:return ue.DATA_LOSS;default:return Qe(39323,{code:t})}}(yt=_r||(_r={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=new $i([4294967295,4294967295],0);function hS(t){const e=VV().encode(t),r=new QP;return r.update(e),new Uint8Array(r.digest())}function pS(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $i([r,n],0),new $i([a,s],0)]}class N1{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Ju(`Invalid padding: ${r}`);if(n<0)throw new Ju(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Ju(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Ju(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=$i.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply($i.fromNumber(n)));return a.compare(FV)===1&&(a=new $i([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=hS(e),[n,a]=pS(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new N1(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const r=hS(e),[n,a]=pS(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.be(o)}}be(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,Uf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Bg(nt.min(),a,new sr(gt),Vs(),xt())}}class Uf{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Uf(n,r,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,r,n,a){this.Se=e,this.removedTargetIds=r,this.key=n,this.De=a}}class MI{constructor(e,r){this.targetId=e,this.Ce=r}}class $I{constructor(e,r,n=ln.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class mS{constructor(){this.ve=0,this.Fe=gS(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),r=xt(),n=xt();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Qe(38017,{changeType:s})}}),new Uf(this.Me,this.xe,e,r,n)}Ke(){this.Oe=!1,this.Fe=gS()}qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class UV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vs(),this.He=Rh(),this.Je=Rh(),this.Ze=new sr(gt)}Xe(e){for(const r of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Qe(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const s=a.target;if(Sb(s))if(n===0){const o=new He(s.path);this.et(r,o,pn.newNoDocument(o,nt.min()))}else St(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=Hi(n).toUint8Array()}catch(c){if(c instanceof lI)return pc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new N1(o,a,s)}catch(c){return pc(c instanceof Ju?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Sb(l.target)){const c=new He(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,pn.newNoDocument(c,e))}s.Be&&(r.set(o,s.ke()),s.Ke())}});let n=xt();this.Je.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const a=new Bg(e,r,this.Ze,this.je,n);return this.je=Vs(),this.He=Rh(),this.Je=Rh(),this.Ze=new sr(gt),a}Ye(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).qe(r.key,n),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(e)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.qe(r,1):a.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(e)),this.Je=this.Je.insert(r,this.Rt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let r=this.ze.get(e);return r||(r=new mS,this.ze.set(e,r)),r}Rt(e){let r=this.Je.get(e);return r||(r=new $r(gt),this.Je=this.Je.insert(e,r)),r}It(e){let r=this.He.get(e);return r||(r=new $r(gt),this.He=this.He.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Ie("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mS),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Rh(){return new sr(He.comparator)}function gS(){return new sr(He.comparator)}const BV={asc:"ASCENDING",desc:"DESCENDING"},zV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WV={and:"AND",or:"OR"};class qV{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Eb(t,e){return t.useProto3Json||Rg(e)?e:{value:e}}function nm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HV(t,e){return nm(t,e.toTimestamp())}function is(t){return St(!!t,49232),nt.fromTimestamp(function(r){const n=qi(r);return new Gt(n.seconds,n.nanos)}(t))}function j1(t,e){return Tb(t,e).canonicalString()}function Tb(t,e){const r=function(a){return new Vt(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function VI(t){const e=Vt.fromString(t);return St(WI(e),10190,{key:e.toString()}),e}function Cb(t,e){return j1(t.databaseId,e.path)}function Ox(t,e){const r=VI(e);if(r.get(1)!==t.databaseId.projectId)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new He(UI(r))}function FI(t,e){return j1(t.databaseId,e)}function GV(t){const e=VI(t);return e.length===4?Vt.emptyPath():UI(e)}function Pb(t){return new Vt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function UI(t){return St(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xS(t,e,r){return{name:Cb(t,e),fields:r.value.mapValue.fields}}function KV(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Qe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(St(d===void 0||typeof d=="string",58123),ln.fromBase64String(d||"")):(St(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ln.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?ue.UNKNOWN:RI(u.code);return new Te(d,u.message||"")}(o);r=new $I(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=Ox(t,n.document.name),s=is(n.document.updateTime),o=n.document.createTime?is(n.document.createTime):nt.min(),l=new Rn({mapValue:{fields:n.document.fields}}),c=pn.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new xp(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=Ox(t,n.document),s=n.readTime?is(n.readTime):nt.min(),o=pn.newNoDocument(a,s),l=n.removedTargetIds||[];r=new xp([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=Ox(t,n.document),s=n.removedTargetIds||[];r=new xp([],s,a,null)}else{if(!("filter"in e))return Qe(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new $V(a,s),l=n.targetId;r=new MI(l,o)}}return r}function YV(t,e){let r;if(e instanceof Ff)r={update:xS(t,e.key,e.value)};else if(e instanceof Ug)r={delete:Cb(t,e.key)};else if(e instanceof to)r={update:xS(t,e.key,e.data),updateMask:a8(e.fieldMask)};else{if(!(e instanceof DV))return Qe(16599,{dt:e.type});r={verify:Cb(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof tm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof qd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rm)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Qe(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:HV(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Qe(27497)}(t,e.precondition)),r}function XV(t,e){return t&&t.length>0?(St(e!==void 0,14353),t.map(r=>function(a,s){let o=a.updateTime?is(a.updateTime):is(s);return o.isEqual(nt.min())&&(o=is(s)),new PV(o,a.transformResults||[])}(r,e))):[]}function QV(t,e){return{documents:[FI(t,e.path)]}}function JV(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=FI(t,a);const s=function(u){if(u.length!==0)return zI(Ua.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Nl(p.field),direction:t8(p.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Eb(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:a}}function ZV(t){let e=GV(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){St(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(f){const p=BI(f);return p instanceof Ua&&vI(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(p=>function(v){return new em(jl(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Rg(p)?null:p}(r.limit));let c=null;r.startAt&&(c=function(f){const p=!!f.before,m=f.values||[];return new Zp(m,p)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const p=!f.before,m=f.values||[];return new Zp(m,p)}(r.endAt)),xV(e,a,o,s,l,"F",c,u)}function e8(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function BI(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=jl(r.unaryFilter.field);return Sr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=jl(r.unaryFilter.field);return Sr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jl(r.unaryFilter.field);return Sr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jl(r.unaryFilter.field);return Sr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}}(t):t.fieldFilter!==void 0?function(r){return Sr.create(jl(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Ua.create(r.compositeFilter.filters.map(n=>BI(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}}(r.compositeFilter.op))}(t):Qe(30097,{filter:t})}function t8(t){return BV[t]}function r8(t){return zV[t]}function n8(t){return WV[t]}function Nl(t){return{fieldPath:t.canonicalString()}}function jl(t){return an.fromServerFormat(t.fieldPath)}function zI(t){return t instanceof Sr?function(r){if(r.op==="=="){if(aS(r.value))return{unaryFilter:{field:Nl(r.field),op:"IS_NAN"}};if(nS(r.value))return{unaryFilter:{field:Nl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(aS(r.value))return{unaryFilter:{field:Nl(r.field),op:"IS_NOT_NAN"}};if(nS(r.value))return{unaryFilter:{field:Nl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(r.field),op:r8(r.op),value:r.value}}}(t):t instanceof Ua?function(r){const n=r.getFilters().map(a=>zI(a));return n.length===1?n[0]:{compositeFilter:{op:n8(r.op),filters:n}}}(t):Qe(54877,{filter:t})}function a8(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function WI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function qI(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,r,n,a,s=nt.min(),o=nt.min(),l=ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e){this.yt=e}}function i8(t){const e=ZV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kb(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(){this.Sn=new l8}addToCollectionParentIndex(e,r){return this.Sn.add(r),fe.resolve()}getCollectionParents(e,r){return fe.resolve(this.Sn.getEntries(r))}addFieldIndex(e,r){return fe.resolve()}deleteFieldIndex(e,r){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,r){return fe.resolve()}getDocumentsMatchingTarget(e,r){return fe.resolve(null)}getIndexType(e,r){return fe.resolve(0)}getFieldIndexes(e,r){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,r){return fe.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,r){return fe.resolve(Wi.min())}updateCollectionGroup(e,r,n){return fe.resolve()}updateIndexEntries(e,r){return fe.resolve()}}class l8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new $r(Vt.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new $r(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HI=41943040;class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(HI,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new vc(0)}static ar(){return new vc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="LruGarbageCollector",GI=1048576;function yS([t,e],[r,n]){const a=gt(t,r);return a===0?gt(e,n):a}class c8{constructor(e){this.Pr=e,this.buffer=new $r(yS),this.Tr=0}Ir(){return++this.Tr}Er(e){const r=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();yS(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class u8{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(bS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Zc(r)?Ie(bS,"Ignoring IndexedDB error during garbage collection: ",r):await Jc(r)}await this.Ar(3e5)})}}class d8{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.dr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return fe.resolve(Dg.ce);const n=new c8(r);return this.Vr.forEachTarget(e,a=>n.Er(a.sequenceNumber)).next(()=>this.Vr.mr(e,a=>n.Er(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Vr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(vS)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vS):this.gr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,o=Date.now(),this.nthSequenceNumber(e,a))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(u=Date.now(),wl()<=mt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function f8(t,e){return new d8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this.changes=new nl(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?fe.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&md(n.mutation,a,Xn.empty(),Gt.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,xt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=xt()){const a=So();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=Qu();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=So();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,xt()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,a){let s=Vs();const o=pd(),l=function(){return pd()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof to)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),md(d.mutation,u,d.mutation.getFieldMask(),Gt.now())):o.set(u.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new p8(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,r){const n=pd();let a=new sr((o,l)=>o-l),s=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Xn.empty();d=l.applyToLocalView(u,d),n.set(c,d);const f=(a.get(l.batchId)||xt()).add(c);a=a.insert(l.batchId,f)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=kI();d.forEach(p=>{if(!s.has(p)){const m=OI(r.get(p),n.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return fe.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return vV(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):_I(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):fe.resolve(So());let l=Ud,c=s;return o.next(u=>fe.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?fe.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,xt())).next(d=>({batchId:l,changes:AI(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new He(r)).next(n=>{let a=Qu();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=Qu();return this.indexManager.getCollectionParents(e,s).next(l=>fe.forEach(l,c=>{const u=function(f,p){return new Vf(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,pn.newInvalidDocument(d)))});let l=Qu();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&md(d.mutation,u,Xn.empty(),Gt.now()),Lg(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,r){return fe.resolve(this.Nr.get(r))}saveBundleMetadata(e,r){return this.Nr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:is(a.createTime)}}(r)),fe.resolve()}getNamedQuery(e,r){return fe.resolve(this.Br.get(r))}saveNamedQuery(e,r){return this.Br.set(r.name,function(a){return{name:a.name,query:i8(a.bundledQuery),readTime:is(a.readTime)}}(r)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(){this.overlays=new sr(He.comparator),this.Lr=new Map}getOverlay(e,r){return fe.resolve(this.overlays.get(r))}getOverlays(e,r){const n=So();return fe.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.bt(e,r,s)}),fe.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Lr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(n)),fe.resolve()}getOverlaysForCollection(e,r,n){const a=So(),s=r.length+1,o=new He(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new sr((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=So(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=So(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return fe.resolve(l)}bt(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.Lr.get(a.largestBatchId).delete(n.key);this.Lr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new MV(r,n));let s=this.Lr.get(r);s===void 0&&(s=xt(),this.Lr.set(r,s)),this.Lr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.kr=new $r(Gr.Kr),this.qr=new $r(Gr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,r){const n=new Gr(e,r);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Wr(new Gr(e,r))}Qr(e,r){e.forEach(n=>this.removeReference(n,r))}Gr(e){const r=new He(new Vt([])),n=new Gr(r,e),a=new Gr(r,e+1),s=[];return this.qr.forEachInRange([n,a],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const r=new He(new Vt([])),n=new Gr(r,e),a=new Gr(r,e+1);let s=xt();return this.qr.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new Gr(e,0),n=this.kr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Gr{constructor(e,r){this.key=e,this.Hr=r}static Kr(e,r){return He.comparator(e.key,r.key)||gt(e.Hr,r.Hr)}static Ur(e,r){return gt(e.Hr,r.Hr)||He.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new $r(Gr.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RV(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.Jr=this.Jr.add(new Gr(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return fe.resolve(o)}lookupMutationBatch(e,r){return fe.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.Xr(n),s=a<0?0:a;return fe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?m1:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Gr(r,0),a=new Gr(r,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([n,a],o=>{const l=this.Zr(o.Hr);s.push(l)}),fe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new $r(gt);return r.forEach(a=>{const s=new Gr(a,0),o=new Gr(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],l=>{n=n.add(l.Hr)})}),fe.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;He.isDocumentKey(s)||(s=s.child(""));const o=new Gr(new He(s),0);let l=new $r(gt);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Hr)),!0)},o),fe.resolve(this.Yr(l))}Yr(e){const r=[];return e.forEach(n=>{const a=this.Zr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){St(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return fe.forEach(r.mutations,a=>{const s=new Gr(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Jr=n})}nr(e){}containsKey(e,r){const n=new Gr(r,0),a=this.Jr.firstAfterOrEqual(n);return fe.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.ti=e,this.docs=function(){return new sr(He.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ti(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return fe.resolve(n?n.document.mutableCopy():pn.newInvalidDocument(r))}getEntries(e,r){let n=Vs();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():pn.newInvalidDocument(a))}),fe.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Vs();const o=r.path,l=new He(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||K6(G6(d),n)<=0||(a.has(d.key)||Lg(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return fe.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Qe(9500)}ni(e,r){return fe.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new w8(this)}getSize(e){return fe.resolve(this.size)}}class w8 extends h8{constructor(e){super(),this.Mr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(n)}),fe.waitFor(r)}getFromCache(e,r){return this.Mr.getEntry(e,r)}getAllFromCache(e,r){return this.Mr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e){this.persistence=e,this.ri=new nl(r=>v1(r),b1),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.ii=0,this.si=new S1,this.targetCount=0,this.oi=vc._r()}forEachTarget(e,r){return this.ri.forEach((n,a)=>r(a)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.ii&&(this.ii=r),fe.resolve()}lr(e){this.ri.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.oi=new vc(r),this.highestTargetId=r),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,r){return this.lr(r),this.targetCount+=1,fe.resolve()}updateTargetData(e,r){return this.lr(r),fe.resolve()}removeTargetData(e,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),fe.waitFor(s).next(()=>a)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,r){const n=this.ri.get(r)||null;return fe.resolve(n)}addMatchingKeys(e,r,n){return this.si.$r(r,n),fe.resolve()}removeMatchingKeys(e,r,n){this.si.Qr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),fe.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this.si.Gr(r),fe.resolve()}getMatchingKeysForTargetId(e,r){const n=this.si.jr(r);return fe.resolve(n)}containsKey(e,r){return fe.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,r){this._i={},this.overlays={},this.ai=new Dg(0),this.ui=!1,this.ui=!0,this.ci=new v8,this.referenceDelegate=e(this),this.li=new _8(this),this.indexManager=new o8,this.remoteDocumentCache=function(a){return new y8(a)}(n=>this.referenceDelegate.hi(n)),this.serializer=new s8(r),this.Pi=new g8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new x8,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this._i[e.toKey()];return n||(n=new b8(r,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,r,n){Ie("MemoryPersistence","Starting transaction:",e);const a=new N8(this.ai.next());return this.referenceDelegate.Ti(),n(a).next(s=>this.referenceDelegate.Ii(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ei(e,r){return fe.or(Object.values(this._i).map(n=>()=>n.containsKey(e,r)))}}class N8 extends X6{constructor(e){super(),this.currentSequenceNumber=e}}class A1{constructor(e){this.persistence=e,this.Ri=new S1,this.Ai=null}static Vi(e){return new A1(e)}get di(){if(this.Ai)return this.Ai;throw Qe(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.di.delete(n.toString()),fe.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.di.add(n.toString()),fe.resolve()}markPotentiallyOrphaned(e,r){return this.di.add(r.toString()),fe.resolve()}removeTarget(e,r){this.Ri.Gr(r.targetId).forEach(a=>this.di.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.di.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ti(){this.Ai=new Set}Ii(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,n=>{const a=He.fromPath(n);return this.mi(e,a).next(s=>{s||r.removeEntry(a,nt.min())})}).next(()=>(this.Ai=null,r.apply(e)))}updateLimboDocument(e,r){return this.mi(e,r).next(n=>{n?this.di.delete(r.toString()):this.di.add(r.toString())})}hi(e){return 0}mi(e,r){return fe.or([()=>fe.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class am{constructor(e,r){this.persistence=e,this.fi=new nl(n=>Z6(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=f8(this,r)}static Vi(e,r){return new am(e,r)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}dr(e){const r=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}pr(e){let r=0;return this.mr(e,n=>{r++}).next(()=>r)}mr(e,r){return fe.forEach(this.fi,(n,a)=>this.wr(e,n,a).next(s=>s?fe.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ni(e,o=>this.wr(e,o,r).next(l=>{l||(n++,s.removeEntry(o,nt.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}removeReference(e,r,n){return this.fi.set(n,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,r){return this.fi.set(r,e.currentSequenceNumber),fe.resolve()}hi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=pp(e.data.value)),r}wr(e,r,n){return fe.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.fi.get(r);return fe.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Ts=n,this.Is=a}static Es(e,r){let n=xt(),a=xt();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new k1(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return hL()?8:Q6(vn())>0?6:4}()}initialize(e,r){this.fs=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.gs(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new j8;return this.ys(e,r,o).next(l=>{if(s.result=l,this.As)return this.ws(e,r,o,l.size)})}).next(()=>s.result)}ws(e,r,n,a){return n.documentReadCount<this.Vs?(wl()<=mt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",_l(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(wl()<=mt.DEBUG&&Ie("QueryEngine","Query:",_l(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.ds*a?(wl()<=mt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",_l(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(r))):fe.resolve())}gs(e,r){if(lS(r))return fe.resolve(null);let n=ss(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=kb(r,null,"F"),n=ss(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=xt(...s);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.bs(r,l);return this.Ss(r,u,o,c.readTime)?this.gs(e,kb(r,null,"F")):this.Ds(e,u,r,c)}))})))}ps(e,r,n,a){return lS(r)||a.isEqual(nt.min())?fe.resolve(null):this.fs.getDocuments(e,n).next(s=>{const o=this.bs(r,s);return this.Ss(r,o,n,a)?fe.resolve(null):(wl()<=mt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_l(r)),this.Ds(e,o,r,H6(a,Ud)).next(l=>l))})}bs(e,r){let n=new $r(jI(e));return r.forEach((a,s)=>{Lg(e,s)&&(n=n.add(s))}),n}Ss(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}ys(e,r,n){return wl()<=mt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",_l(r)),this.fs.getDocumentsMatchingQuery(e,r,Wi.min(),n)}Ds(e,r,n,a){return this.fs.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="LocalStore",A8=3e8;class k8{constructor(e,r,n,a){this.persistence=e,this.Cs=r,this.serializer=a,this.vs=new sr(gt),this.Fs=new nl(s=>v1(s),b1),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m8(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.vs))}}function E8(t,e,r,n){return new k8(t,e,r,n)}async function YI(t,e){const r=at(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Os(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=xt();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function T8(t,e){const r=at(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,p=f.keys();let m=fe.resolve();return p.forEach(v=>{m=m.next(()=>d.getEntry(c,v)).next(x=>{const _=u.docVersions.get(v);St(_!==null,48541),x.version.compareTo(_)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=xt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function XI(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.li.getLastRemoteSnapshotVersion(r))}function C8(t,e){const r=at(t),n=e.snapshotVersion;let a=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.xs.newChangeBuffer({trackRemovals:!0});a=r.vs;const l=[];e.targetChanges.forEach((d,f)=>{const p=a.get(f);if(!p)return;l.push(r.li.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.li.addMatchingKeys(s,d.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(ln.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),a=a.insert(f,m),function(x,_,y){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=A8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,m,d)&&l.push(r.li.updateTargetData(s,m))});let c=Vs(),u=xt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(P8(s,o,e.documentUpdates).next(d=>{c=d.Bs,u=d.Ls})),!n.isEqual(nt.min())){const d=r.li.getLastRemoteSnapshotVersion(s).next(f=>r.li.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return fe.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.vs=a,s))}function P8(t,e,r){let n=xt(),a=xt();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=Vs();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(nt.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):Ie(E1,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:a}})}function I8(t,e){const r=at(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=m1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function O8(t,e){const r=at(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.li.getTargetData(n,e).next(s=>s?(a=s,fe.resolve(a)):r.li.allocateTargetId(n).next(o=>(a=new ji(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.li.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.vs.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.vs=r.vs.insert(n.targetId,n),r.Fs.set(e,n.targetId)),n})}async function Ib(t,e,r){const n=at(t),a=n.vs.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!Zc(o))throw o;Ie(E1,`Failed to update sequence numbers for target ${e}: ${o}`)}n.vs=n.vs.remove(e),n.Fs.delete(a.target)}function wS(t,e,r){const n=at(t);let a=nt.min(),s=xt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=at(c),p=f.Fs.get(d);return p!==void 0?fe.resolve(f.vs.get(p)):f.li.getTargetData(u,d)}(n,o,ss(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Cs.getDocumentsMatchingQuery(o,e,r?a:nt.min(),r?s:xt())).next(l=>(D8(n,yV(e),l),{documents:l,ks:s})))}function D8(t,e,r){let n=t.Ms.get(e)||nt.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Ms.set(e,n)}class _S{constructor(){this.activeTargetIds=AV()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R8{constructor(){this.vo=new _S,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,r,n){this.Fo[e]=r}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new _S,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="ConnectivityMonitor";class jS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(NS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(NS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function Ob(){return Mh===null?Mh=function(){return 268435456+Math.round(2147483648*Math.random())}():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="RestConnection",$8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class L8{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+e.host,this.Uo=`projects/${n}/databases/${a}`,this.$o=this.databaseId.database===Qp?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Wo(e,r,n,a,s){const o=Ob(),l=this.Qo(e,r.toUriEncodedString());Ie(Dx,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,a,s);const{host:u}=new URL(l),d=Yc(u);return this.zo(e,l,c,n,d).then(f=>(Ie(Dx,`Received RPC '${e}' ${o}: `,f),f),f=>{throw pc(Dx,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",n),f})}jo(e,r,n,a,s,o){return this.Wo(e,r,n,a,s)}Go(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>e[s]=a),n&&n.headers.forEach((a,s)=>e[s]=a)}Qo(e,r){const n=$8[e];let a=`${this.qo}/v1/${r}:${n}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection",Du=(t,e,r)=>{t.listen(e,n=>{try{r(n)}catch(a){setTimeout(()=>{throw a},0)}})};class Xl extends L8{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Xl.c_){const e=tI();Du(e,eI.STAT_EVENT,r=>{r.stat===yb.PROXY?Ie(dn,"STAT_EVENT: detected buffering proxy"):r.stat===yb.NOPROXY&&Ie(dn,"STAT_EVENT: detected no buffering proxy")}),Xl.c_=!0}}zo(e,r,n,a,s){const o=Ob();return new Promise((l,c)=>{const u=new JP;u.setWithCredentials(!0),u.listenOnce(ZP.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hp.NO_ERROR:const f=u.getResponseJson();Ie(dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case hp.TIMEOUT:Ie(dn,`RPC '${e}' ${o} timed out`),c(new Te(ue.DEADLINE_EXCEEDED,"Request time out"));break;case hp.HTTP_ERROR:const p=u.getStatus();if(Ie(dn,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const x=function(y){const g=y.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(g)>=0?g:ue.UNKNOWN}(v.status);c(new Te(x,v.message))}else c(new Te(ue.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Te(ue.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ie(dn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(a);Ie(dn,`RPC '${e}' ${o} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(e,r,n){const a=Ob(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=s.join("");Ie(dn,`Creating RPC '${e}' stream ${a}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let f=!1,p=!1;const m=new V8({Ho:v=>{p?Ie(dn,`Not sending because RPC '${e}' stream ${a} is closed:`,v):(f||(Ie(dn,`Opening RPC '${e}' stream ${a} transport.`),d.open(),f=!0),Ie(dn,`RPC '${e}' stream ${a} sending:`,v),d.send(v))},Jo:()=>d.close()});return Du(d,Xu.EventType.OPEN,()=>{p||(Ie(dn,`RPC '${e}' stream ${a} transport opened.`),m.i_())}),Du(d,Xu.EventType.CLOSE,()=>{p||(p=!0,Ie(dn,`RPC '${e}' stream ${a} transport closed`),m.o_(),this.E_(d))}),Du(d,Xu.EventType.ERROR,v=>{p||(p=!0,pc(dn,`RPC '${e}' stream ${a} transport errored. Name:`,v.name,"Message:",v.message),m.o_(new Te(ue.UNAVAILABLE,"The operation could not be completed")))}),Du(d,Xu.EventType.MESSAGE,v=>{var x;if(!p){const _=v.data[0];St(!!_,16349);const y=_,g=(y==null?void 0:y.error)||((x=y[0])==null?void 0:x.error);if(g){Ie(dn,`RPC '${e}' stream ${a} received error:`,g);const w=g.status;let E=function(S){const b=_r[S];if(b!==void 0)return RI(b)}(w),N=g.message;w==="NOT_FOUND"&&N.includes("database")&&N.includes("does not exist")&&N.includes(this.databaseId.database)&&pc(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),E===void 0&&(E=ue.INTERNAL,N="Unknown error status: "+w+" with message "+g.message),p=!0,m.o_(new Te(E,N)),d.close()}else Ie(dn,`RPC '${e}' stream ${a} received:`,_),m.__(_)}}),Xl.u_(),setTimeout(()=>{m.s_()},0),m}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(r=>r===e)}Go(e,r,n){super.Go(e,r,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return rI()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(t){return new Xl(t)}function Rx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){return new qV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xl.c_=!1;class QI{constructor(e,r,n=1e3,a=1.5,s=6e4){this.Ci=e,this.timerId=r,this.R_=n,this.A_=a,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&Ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="PersistentStream";class JI{constructor(e,r,n,a,s,o,l,c){this.Ci=e,this.b_=n,this.S_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new QI(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===ue.RESOURCE_EXHAUSTED?(Ls(r.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(r)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new Te(ue.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.Q_(this.D_);this.stream=this.j_(e,r),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.Yo(()=>{n(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.H_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ie(SS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return r=>{this.Ci.enqueueAndForget(()=>this.D_===e?r():(Ie(SS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U8 extends JI{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=KV(this.serializer,e),n=function(s){if(!("targetChange"in s))return nt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?nt.min():o.readTime?is(o.readTime):nt.min()}(e);return this.listener.J_(r,n)}Z_(e){const r={};r.database=Pb(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=Sb(c)?{documents:QV(s,c)}:{query:JV(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=LI(s,o.resumeToken);const u=Eb(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(nt.min())>0){l.readTime=nm(s,o.snapshotVersion.toTimestamp());const u=Eb(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=e8(this.serializer,e);n&&(r.labels=n),this.K_(r)}X_(e){const r={};r.database=Pb(this.serializer),r.removeTarget=e,this.K_(r)}}class B8 extends JI{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}H_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=XV(e.writeResults,e.commitTime),n=is(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=Pb(this.serializer),this.K_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>YV(this.serializer,n))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{}class W8 extends z8{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Tb(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Te(ue.UNKNOWN,s.toString())})}jo(e,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,Tb(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ue.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function q8(t,e,r,n){return new W8(t,e,r,n)}class H8{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ls(r),this.aa=!1):Ie("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class G8{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{n.enqueueAndForget(async()=>{al(this)&&(Ie(Go,"Restarting streams for network reachability change."),await async function(c){const u=at(c);u.Ea.add(4),await Bf(u),u.Va.set("Unknown"),u.Ea.delete(4),await Wg(u)}(this))})}),this.Va=new H8(n,a)}}async function Wg(t){if(al(t))for(const e of t.Ra)await e(!0)}async function Bf(t){for(const e of t.Ra)await e(!1)}function ZI(t,e){const r=at(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),I1(r)?P1(r):eu(r).O_()&&C1(r,e))}function T1(t,e){const r=at(t),n=eu(r);r.Ia.delete(e),n.O_()&&eO(r,e),r.Ia.size===0&&(n.O_()?n.L_():al(r)&&r.Va.set("Unknown"))}function C1(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}eu(t).Z_(e)}function eO(t,e){t.da.$e(e),eu(t).X_(e)}function P1(t){t.da=new UV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),eu(t).start(),t.Va.ua()}function I1(t){return al(t)&&!eu(t).x_()&&t.Ia.size>0}function al(t){return at(t).Ea.size===0}function tO(t){t.da=void 0}async function K8(t){t.Va.set("Online")}async function Y8(t){t.Ia.forEach((e,r)=>{C1(t,e)})}async function X8(t,e){tO(t),I1(t)?(t.Va.ha(e),P1(t)):t.Va.set("Unknown")}async function Q8(t,e,r){if(t.Va.set("Online"),e instanceof $I&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.da.removeTarget(l))}(t,e)}catch(n){Ie(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await sm(t,n)}else if(e instanceof xp?t.da.Xe(e):e instanceof MI?t.da.st(e):t.da.tt(e),!r.isEqual(nt.min()))try{const n=await XI(t.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(ln.EMPTY_BYTE_STRING,d.snapshotVersion)),eO(s,c);const f=new ji(d.target,c,u,d.sequenceNumber);C1(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Ie(Go,"Failed to raise snapshot:",n),await sm(t,n)}}async function sm(t,e,r){if(!Zc(e))throw e;t.Ea.add(1),await Bf(t),t.Va.set("Offline"),r||(r=()=>XI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ie(Go,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Wg(t)})}function rO(t,e){return e().catch(r=>sm(t,r,e))}async function qg(t){const e=at(t),r=Ki(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:m1;for(;J8(e);)try{const a=await I8(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,Z8(e,a)}catch(a){await sm(e,a)}nO(e)&&aO(e)}function J8(t){return al(t)&&t.Ta.length<10}function Z8(t,e){t.Ta.push(e);const r=Ki(t);r.O_()&&r.Y_&&r.ea(e.mutations)}function nO(t){return al(t)&&!Ki(t).x_()&&t.Ta.length>0}function aO(t){Ki(t).start()}async function eF(t){Ki(t).ra()}async function tF(t){const e=Ki(t);for(const r of t.Ta)e.ea(r.mutations)}async function rF(t,e,r){const n=t.Ta.shift(),a=_1.from(n,e,r);await rO(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await qg(t)}async function nF(t,e){e&&Ki(t).Y_&&await async function(n,a){if(function(o){return LV(o)&&o!==ue.ABORTED}(a.code)){const s=n.Ta.shift();Ki(n).B_(),await rO(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await qg(n)}}(t,e),nO(t)&&aO(t)}async function AS(t,e){const r=at(t);r.asyncQueue.verifyOperationInProgress(),Ie(Go,"RemoteStore received new credentials");const n=al(r);r.Ea.add(3),await Bf(r),n&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Wg(r)}async function aF(t,e){const r=at(t);e?(r.Ea.delete(2),await Wg(r)):e||(r.Ea.add(2),await Bf(r),r.Va.set("Unknown"))}function eu(t){return t.ma||(t.ma=function(r,n,a){const s=at(r);return s.sa(),new U8(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Zo:K8.bind(null,t),Yo:Y8.bind(null,t),t_:X8.bind(null,t),J_:Q8.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),I1(t)?P1(t):t.Va.set("Unknown")):(await t.ma.stop(),tO(t))})),t.ma}function Ki(t){return t.fa||(t.fa=function(r,n,a){const s=at(r);return s.sa(),new B8(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:eF.bind(null,t),t_:nF.bind(null,t),ta:tF.bind(null,t),na:rF.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await qg(t)):(await t.fa.stop(),t.Ta.length>0&&(Ie(Go,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,l=new O1(e,r,o,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D1(t,e){if(Ls("AsyncQueue",`${e}: ${t}`),Zc(t))return new Te(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||He.comparator(r.key,n.key):(r,n)=>He.comparator(r.key,n.key),this.keyedMap=Qu(),this.sortedSet=new sr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ql;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.ga=new sr(He.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Qe(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class bc{constructor(e,r,n,a,s,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new bc(e,r,Ql.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$g(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class iF{constructor(){this.queries=ES(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=at(r),s=a.queries;a.queries=ES(),s.forEach((o,l)=>{for(const c of l.ba)c.onError(n)})})(this,new Te(ue.ABORTED,"Firestore shutting down"))}}function ES(){return new nl(t=>NI(t),$g)}async function sO(t,e){const r=at(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.Sa()&&e.Da()&&(n=2):(s=new sF,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=D1(o,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.ba.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&R1(r)}async function iO(t,e){const r=at(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?a=e.Da()?0:1:!s.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function oF(t,e){const r=at(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.ba)l.Fa(a)&&(n=!0);o.wa=a}}n&&R1(r)}function lF(t,e,r){const n=at(t),a=n.queries.get(e);if(a)for(const s of a.ba)s.onError(r);n.queries.delete(e)}function R1(t){t.Ca.forEach(e=>{e.next()})}var Db,TS;(TS=Db||(Db={})).Ma="default",TS.Cache="cache";class oO{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new bc(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=bc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Db.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.key=e}}class cO{constructor(e){this.key=e}}class cF{constructor(e,r){this.query=e,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=xt(),this.mutatedKeys=xt(),this.eu=jI(e),this.tu=new Ql(this.eu)}get nu(){return this.Za}ru(e,r){const n=r?r.iu:new kS,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,f)=>{const p=a.get(d),m=Lg(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),x=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let _=!1;p&&m?p.data.isEqual(m.data)?v!==x&&(n.track({type:3,doc:m}),_=!0):this.su(p,m)||(n.track({type:2,doc:m}),_=!0,(c&&this.eu(m,c)>0||u&&this.eu(m,u)<0)&&(l=!0)):!p&&m?(n.track({type:0,doc:m}),_=!0):p&&!m&&(n.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(m?(o=o.add(m),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Ss:l,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,f)=>function(m,v){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{Vt:_})}};return x(m)-x(v)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Ya.size===0&&this.current&&!a?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new bc(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Za=this.Za.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Za=this.Za.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=xt(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))});const r=[];return e.forEach(n=>{this.Ya.has(n)||r.push(new cO(n))}),this.Ya.forEach(n=>{e.has(n)||r.push(new lO(n))}),r}cu(e){this.Za=e.ks,this.Ya=xt();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return bc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const M1="SyncEngine";class uF{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class dF{constructor(e){this.key=e,this.hu=!1}}class fF{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new nl(l=>NI(l),$g),this.Iu=new Map,this.Eu=new Set,this.Ru=new sr(He.comparator),this.Au=new Map,this.Vu=new S1,this.du={},this.mu=new Map,this.fu=vc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hF(t,e,r=!0){const n=mO(t);let a;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await uO(n,e,r,!0),a}async function pF(t,e){const r=mO(t);await uO(r,e,!0,!1)}async function uO(t,e,r,n){const a=await O8(t.localStore,ss(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await mF(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&ZI(t.remoteStore,a),l}async function mF(t,e,r,n,a){t.pu=(f,p,m)=>async function(x,_,y,g){let w=_.view.ru(y);w.Ss&&(w=await wS(x.localStore,_.query,!1).then(({documents:S})=>_.view.ru(S,w)));const E=g&&g.targetChanges.get(_.targetId),N=g&&g.targetMismatches.get(_.targetId)!=null,k=_.view.applyChanges(w,x.isPrimaryClient,E,N);return PS(x,_.targetId,k.au),k.snapshot}(t,f,p,m);const s=await wS(t.localStore,e,!0),o=new cF(e,s.ks),l=o.ru(s.documents),c=Uf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=o.applyChanges(l,t.isPrimaryClient,c);PS(t,r,u.au);const d=new uF(e,r,o);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function gF(t,e,r){const n=at(t),a=n.Tu.get(e),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!$g(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Ib(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&T1(n.remoteStore,a.targetId),Rb(n,a.targetId)}).catch(Jc)):(Rb(n,a.targetId),await Ib(n.localStore,a.targetId,!0))}async function xF(t,e){const r=at(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),T1(r.remoteStore,n.targetId))}async function vF(t,e,r){const n=SF(t);try{const a=await function(o,l){const c=at(o),u=Gt.now(),d=l.reduce((m,v)=>m.add(v.key),xt());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Vs(),x=xt();return c.xs.getEntries(m,d).next(_=>{v=_,v.forEach((y,g)=>{g.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,v)).next(_=>{f=_;const y=[];for(const g of l){const w=OV(g,f.get(g.key).overlayedDocument);w!=null&&y.push(new to(g.key,w,mI(w.value.mapValue),Un.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,y,l)}).next(_=>{p=_;const y=_.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(m,_.batchId,y)})}).then(()=>({batchId:p.batchId,changes:AI(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new sr(gt)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(n,a.batchId,r),await zf(n,a.changes),await qg(n.remoteStore)}catch(a){const s=D1(a,"Failed to persist write");r.reject(s)}}async function dO(t,e){const r=at(t);try{const n=await C8(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(St(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?St(o.hu,14607):a.removedDocuments.size>0&&(St(o.hu,42227),o.hu=!1))}),await zf(r,n,e)}catch(n){await Jc(n)}}function CS(t,e,r){const n=at(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=at(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const p of f.ba)p.va(l)&&(u=!0)}),u&&R1(c)}(n.eventManager,e),a.length&&n.Pu.J_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function bF(t,e,r){const n=at(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),s=a&&a.key;if(s){let o=new sr(He.comparator);o=o.insert(s,pn.newNoDocument(s,nt.min()));const l=xt().add(s),c=new Bg(nt.min(),new Map,new sr(gt),o,l);await dO(n,c),n.Ru=n.Ru.remove(s),n.Au.delete(e),$1(n)}else await Ib(n.localStore,e,!1).then(()=>Rb(n,e,r)).catch(Jc)}async function yF(t,e){const r=at(t),n=e.batch.batchId;try{const a=await T8(r.localStore,e);hO(r,n,null),fO(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await zf(r,a)}catch(a){await Jc(a)}}async function wF(t,e,r){const n=at(t);try{const a=await function(o,l){const c=at(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(St(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);hO(n,e,r),fO(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await zf(n,a)}catch(a){await Jc(a)}}function fO(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function hO(t,e,r){const n=at(t);let a=n.du[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.du[n.currentUser.toKey()]=a}}function Rb(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(n=>{t.Vu.containsKey(n)||pO(t,n)})}function pO(t,e){t.Eu.delete(e.path.canonicalString());const r=t.Ru.get(e);r!==null&&(T1(t.remoteStore,r),t.Ru=t.Ru.remove(e),t.Au.delete(r),$1(t))}function PS(t,e,r){for(const n of r)n instanceof lO?(t.Vu.addReference(n.key,e),_F(t,n)):n instanceof cO?(Ie(M1,"Document no longer in limbo: "+n.key),t.Vu.removeReference(n.key,e),t.Vu.containsKey(n.key)||pO(t,n.key)):Qe(19791,{wu:n})}function _F(t,e){const r=e.key,n=r.path.canonicalString();t.Ru.get(r)||t.Eu.has(n)||(Ie(M1,"New document in limbo: "+r),t.Eu.add(n),$1(t))}function $1(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new He(Vt.fromString(e)),n=t.fu.next();t.Au.set(n,new dF(r)),t.Ru=t.Ru.insert(r,n),ZI(t.remoteStore,new ji(ss(y1(r.path)),n,"TargetPurposeLimboResolution",Dg.ce))}}async function zf(t,e,r){const n=at(t),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=k1.Es(c.targetId,u);s.push(f)}}))}),await Promise.all(o),n.Pu.J_(a),await async function(c,u){const d=at(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>fe.forEach(u,p=>fe.forEach(p.Ts,m=>d.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>fe.forEach(p.Is,m=>d.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Zc(f))throw f;Ie(E1,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const m=d.vs.get(p),v=m.snapshotVersion,x=m.withLastLimboFreeSnapshotVersion(v);d.vs=d.vs.insert(p,x)}}}(n.localStore,s))}async function NF(t,e){const r=at(t);if(!r.currentUser.isEqual(e)){Ie(M1,"User change. New user:",e.toKey());const n=await YI(r.localStore,e);r.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new Te(ue.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await zf(r,n.Ns)}}function jF(t,e){const r=at(t),n=r.Au.get(e);if(n&&n.hu)return xt().add(n.key);{let a=xt();const s=r.Iu.get(e);if(!s)return a;for(const o of s){const l=r.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function mO(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bF.bind(null,e),e.Pu.J_=oF.bind(null,e.eventManager),e.Pu.yu=lF.bind(null,e.eventManager),e}function SF(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wF.bind(null,e),e}class im{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return E8(this.persistence,new S8,e.initialUser,this.serializer)}Cu(e){return new KI(A1.Vi,this.serializer)}Du(e){return new R8}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}im.provider={build:()=>new im};class AF extends im{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){St(this.persistence.referenceDelegate instanceof am,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new u8(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new KI(n=>am.Vi(n,r),this.serializer)}}class Mb{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>CS(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=NF.bind(null,this.syncEngine),await aF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iF}()}createDatastore(e){const r=zg(e.databaseInfo.databaseId),n=F8(e.databaseInfo);return q8(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,l){return new G8(n,a,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>CS(this.syncEngine,r,0),function(){return jS.v()?new jS:new M8}())}createSyncEngine(e,r){return function(a,s,o,l,c,u,d){const f=new fF(a,s,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=at(a);Ie(Go,"RemoteStore shutting down."),s.Ea.add(5),await Bf(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}Mb.provider={build:()=>new Mb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="FirestoreClient";class kF{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this._databaseInfo=a,this.user=In.UNAUTHENTICATED,this.clientId=p1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{Ie(Yi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Ie(Yi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=D1(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Mx(t,e){t.asyncQueue.verifyOperationInProgress(),Ie(Yi,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await YI(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function IS(t,e){t.asyncQueue.verifyOperationInProgress();const r=await EF(t);Ie(Yi,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>AS(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>AS(e.remoteStore,a)),t._onlineComponents=e}async function EF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie(Yi,"Using user provided OfflineComponentProvider");try{await Mx(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===ue.FAILED_PRECONDITION||a.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;pc("Error using user provided cache. Falling back to memory cache: "+r),await Mx(t,new im)}}else Ie(Yi,"Using default OfflineComponentProvider"),await Mx(t,new AF(void 0));return t._offlineComponents}async function xO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie(Yi,"Using user provided OnlineComponentProvider"),await IS(t,t._uninitializedComponentsProvider._online)):(Ie(Yi,"Using default OnlineComponentProvider"),await IS(t,new Mb))),t._onlineComponents}function TF(t){return xO(t).then(e=>e.syncEngine)}async function $b(t){const e=await xO(t),r=e.eventManager;return r.onListen=hF.bind(null,e.syncEngine),r.onUnlisten=gF.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=pF.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=xF.bind(null,e.syncEngine),r}function CF(t,e,r,n){const a=new gO(n),s=new oO(e,a,r);return t.asyncQueue.enqueueAndForget(async()=>sO(await $b(t),s)),()=>{a.Nu(),t.asyncQueue.enqueueAndForget(async()=>iO(await $b(t),s))}}function PF(t,e,r={}){const n=new Li;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new gO({next:p=>{d.Nu(),o.enqueueAndForget(()=>iO(s,f)),p.fromCache&&c.source==="server"?u.reject(new Te(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new oO(l,d,{includeMetadataChanges:!0,Ka:!0});return sO(s,f)}(await $b(t),t.asyncQueue,e,r,n)),n.promise}function IF(t,e){const r=new Li;return t.asyncQueue.enqueueAndForget(async()=>vF(await TF(t),e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF="ComponentProvider",OS=new Map;function DF(t,e,r,n,a){return new rV(t,e,r,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,vO(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="firestore.googleapis.com",DS=!0;class RS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RF,this.ssl=DS}else this.host=e.host,this.ssl=e.ssl??DS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GI)throw new Te(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vO(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class L1{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new M6;switch(n.type){case"firstParty":return new V6(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Te(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=OS.get(r);n&&(Ie(OF,"Removing Datastore"),OS.delete(r),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class br{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new br(this.firestore,e,this._key)}toJSON(){return{type:br._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Lf(r,br._jsonSchema))return new br(e,n||null,new He(Vt.fromString(r.referencePath)))}}br._jsonSchemaVersion="firestore/documentReference/1.0",br._jsonSchema={type:Ar("string",br._jsonSchemaVersion),referencePath:Ar("string")};class Vi extends sl{constructor(e,r,n){super(e,r,y1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new br(this.firestore,null,new He(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function ja(t,e,...r){if(t=Jr(t),aI("collection","path",e),t instanceof L1){const n=Vt.fromString(e,...r);return Kj(n),new Vi(t,null,n)}{if(!(t instanceof br||t instanceof Vi))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Vt.fromString(e,...r));return Kj(n),new Vi(t.firestore,null,n)}}function Wt(t,e,...r){if(t=Jr(t),arguments.length===1&&(e=p1.newId()),aI("doc","path",e),t instanceof L1){const n=Vt.fromString(e,...r);return Gj(n),new br(t,null,new He(n))}{if(!(t instanceof br||t instanceof Vi))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Vt.fromString(e,...r));return Gj(n),new br(t.firestore,t instanceof Vi?t.converter:null,new He(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="AsyncQueue";class $S{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new QI(this,"async_queue_retry"),this._c=()=>{const n=Rx();n&&Ie(MS,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Rx();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Rx();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Li;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Zc(e))throw e;Ie(MS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Ls("INTERNAL UNHANDLED ERROR: ",LS(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=O1.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Qe(47125,{Pc:LS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function LS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Xi extends L1{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new $S,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $S(e),this._firestoreClient=void 0,await e}}}function MF(t,e,r){r||(r=Qp);const n=f1(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),s=n.getOptions(r);if(Wo(s,e))return a;throw new Te(ue.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Te(ue.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GI)throw new Te(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Yc(e.host)&&qP(e.host),n.initialize({options:e,instanceIdentifier:r})}function Hg(t){if(t._terminated)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$F(t),t._firestoreClient}function $F(t){var n,a,s,o;const e=t._freezeSettings(),r=DF(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,(a=t._app)==null?void 0:a.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new kF(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this._byteString=e}static fromBase64String(e){try{return new la(ln.fromBase64String(e))}catch(r){throw new Te(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new la(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:la._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lf(e,la._jsonSchema))return la.fromBase64String(e.bytes)}}la._jsonSchemaVersion="firestore/bytes/1.0",la._jsonSchema={type:Ar("string",la._jsonSchemaVersion),bytes:Ar("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Te(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Te(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Te(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return gt(this._lat,e._lat)||gt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:os._jsonSchemaVersion}}static fromJSON(e){if(Lf(e,os._jsonSchema))return new os(e.latitude,e.longitude)}}os._jsonSchemaVersion="firestore/geoPoint/1.0",os._jsonSchema={type:Ar("string",os._jsonSchemaVersion),latitude:Ar("number"),longitude:Ar("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lf(e,La._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new La(e.vectorValues);throw new Te(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:Ar("string",La._jsonSchemaVersion),vectorValues:Ar("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=/^__.*__$/;class VF{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ff(e,this.data,r,this.fieldTransforms)}}class bO{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new to(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function yO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{dataSource:t})}}class F1{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new F1({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return om(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(yO(this.dataSource)&&LF.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class FF{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||zg(e)}createContext(e,r,n,a=!1){return new F1({dataSource:e,methodName:r,targetDoc:n,path:an.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kg(t){const e=t._freezeSettings(),r=zg(t._databaseId);return new FF(t._databaseId,!!e.ignoreUndefinedProperties,r)}function wO(t,e,r,n,a,s={}){const o=t.createContext(s.merge||s.mergeFields?2:0,e,r,a);U1("Data must be an object, but it was:",o,n);const l=jO(n,o);let c,u;if(s.merge)c=new Xn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const p=yc(e,f,r);if(!o.contains(p))throw new Te(ue.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kO(d,p)||d.push(p)}c=new Xn(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new VF(new Rn(l),c,u)}class Wf extends V1{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wf}}function _O(t,e,r,n){const a=t.createContext(1,e,r);U1("Data must be an object, but it was:",a,n);const s=[],o=Rn.empty();eo(n,(c,u)=>{const d=AO(e,c,r);u=Jr(u);const f=a.childContextForFieldPath(d);if(u instanceof Wf)s.push(d);else{const p=qf(u,f);p!=null&&(s.push(d),o.set(d,p))}});const l=new Xn(s);return new bO(o,l,a.fieldTransforms)}function NO(t,e,r,n,a,s){const o=t.createContext(1,e,r),l=[yc(e,n,r)],c=[a];if(s.length%2!=0)throw new Te(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)l.push(yc(e,s[p])),c.push(s[p+1]);const u=[],d=Rn.empty();for(let p=l.length-1;p>=0;--p)if(!kO(u,l[p])){const m=l[p];let v=c[p];v=Jr(v);const x=o.childContextForFieldPath(m);if(v instanceof Wf)u.push(m);else{const _=qf(v,x);_!=null&&(u.push(m),d.set(m,_))}}const f=new Xn(u);return new bO(d,f,o.fieldTransforms)}function UF(t,e,r,n=!1){return qf(r,t.createContext(n?4:3,e))}function qf(t,e){if(SO(t=Jr(t)))return U1("Unsupported field value:",e,t),jO(t,e);if(t instanceof V1)return function(n,a){if(!yO(a.dataSource))throw a.createError(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=qf(l,a.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Jr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return kV(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Gt.fromDate(n);return{timestampValue:nm(a.serializer,s)}}if(n instanceof Gt){const s=new Gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:nm(a.serializer,s)}}if(n instanceof os)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof la)return{bytesValue:LI(a.serializer,n._byteString)};if(n instanceof br){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:j1(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof La)return function(o,l){const c=o instanceof La?o.toArray():o;return{mapValue:{fields:{[hI]:{stringValue:pI},[Jp]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return w1(l.serializer,d)})}}}}}}(n,a);if(qI(n))return n._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Og(n)}`)}(t,e)}function jO(t,e){const r={};return oI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(n,a)=>{const s=qf(a,e.childContextForField(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function SO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof os||t instanceof la||t instanceof br||t instanceof V1||t instanceof La||qI(t))}function U1(t,e,r){if(!SO(r)||!sI(r)){const n=Og(r);throw n==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+n)}}function yc(t,e,r){if((e=Jr(e))instanceof Gg)return e._internalPath;if(typeof e=="string")return AO(t,e);throw om("Field path arguments must be of type string or ",t,!1,void 0,r)}const BF=new RegExp("[~\\*/\\[\\]]");function AO(t,e,r){if(e.search(BF)>=0)throw om(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Gg(...e.split("."))._internalPath}catch{throw om(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function om(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new Te(ue.INVALID_ARGUMENT,l+t+c)}function kO(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{convertValue(e,r="none"){switch(Gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return eo(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,a,s;const r=(s=(a=(n=e.fields)==null?void 0:n[Jp].arrayValue)==null?void 0:a.values)==null?void 0:s.map(o=>xr(o.doubleValue));return new La(r)}convertGeoPoint(e){return new os(xr(e.latitude),xr(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Mg(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Bd(e));default:return null}}convertTimestamp(e){const r=qi(e);return new Gt(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Vt.fromString(e);St(WI(n),9688,{name:e});const a=new zd(n.get(1),n.get(3)),s=new He(n.popFirst(5));return a.isEqual(r)||Ls(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends zF{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new br(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(){return new Wf("deleteField")}const VS="@firebase/firestore",FS="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new br(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const r=this._document.data.field(yc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class qF extends EO{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z1{}class HF extends z1{}function Ka(t,e,...r){let n=[];e instanceof z1&&n.push(e),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof W1).length,l=s.filter(c=>c instanceof Yg).length;if(o>1||o>0&&l>0)throw new Te(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class Yg extends HF{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Yg(e,r,n)}_apply(e){const r=this._parse(e);return CO(e._query,r),new sl(e.firestore,e.converter,Ab(e._query,r))}_parse(e){const r=Kg(e.firestore);return function(s,o,l,c,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Te(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){zS(f,d);const v=[];for(const x of f)v.push(BS(c,s,x));p={arrayValue:{values:v}}}else p=BS(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||zS(f,d),p=UF(l,o,f,d==="in"||d==="not-in");return Sr.create(u,d,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Sa(t,e,r){const n=e,a=yc("where",t);return Yg._create(a,n,r)}class W1 extends z1{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new W1(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Ua.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)CO(o,c),o=Ab(o,c)}(e._query,r),new sl(e.firestore,e.converter,Ab(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function BS(t,e,r){if(typeof(r=Jr(r))=="string"){if(r==="")throw new Te(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_I(e)&&r.indexOf("/")!==-1)throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Vt.fromString(r));if(!He.isDocumentKey(n))throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rS(t,new He(n))}if(r instanceof br)return rS(t,r._key);throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Og(r)}.`)}function zS(t,e){if(!Array.isArray(t)||t.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CO(t,e){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Te(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function PO(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class Zu{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oo extends EO{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new vp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(yc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=Oo._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oo._jsonSchema={type:Ar("string",Oo._jsonSchemaVersion),bundleSource:Ar("string","DocumentSnapshot"),bundleName:Ar("string"),bundle:Ar("string")};class vp extends Oo{data(e={}){return super.data(e)}}class Do{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Zu(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new vp(this._firestore,this._userDataWriter,n.key,n,new Zu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Te(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new vp(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Zu(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new vp(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Zu(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:GF(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Do._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=p1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Do._jsonSchemaVersion="firestore/querySnapshot/1.0",Do._jsonSchema={type:Ar("string",Do._jsonSchemaVersion),bundleSource:Ar("string","QuerySnapshot"),bundleName:Ar("string"),bundle:Ar("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Kg(e)}set(e,r,n){this._verifyNotCommitted();const a=$x(e,this._firestore),s=PO(a.converter,r,n),o=wO(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(o.toMutation(a._key,Un.none())),this}update(e,r,n,...a){this._verifyNotCommitted();const s=$x(e,this._firestore);let o;return o=typeof(r=Jr(r))=="string"||r instanceof Gg?NO(this._dataReader,"WriteBatch.update",s._key,r,n,a):_O(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(o.toMutation(s._key,Un.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=$x(e,this._firestore);return this._mutations=this._mutations.concat(new Ug(r._key,Un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $x(t,e){if((t=Jr(t)).firestore!==e)throw new Te(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function YF(t){t=$a(t,sl);const e=$a(t.firestore,Xi),r=Hg(e),n=new B1(e);return TO(t._query),PF(r,t._query).then(a=>new Do(e,n,t,a))}function Aa(t,e,r){t=$a(t,br);const n=$a(t.firestore,Xi),a=PO(t.converter,e,r),s=Kg(n);return Xg(n,[wO(s,"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,Un.none())])}function Sl(t,e,r,...n){t=$a(t,br);const a=$a(t.firestore,Xi),s=Kg(a);let o;return o=typeof(e=Jr(e))=="string"||e instanceof Gg?NO(s,"updateDoc",t._key,e,r,n):_O(s,"updateDoc",t._key,e),Xg(a,[o.toMutation(t._key,Un.exists(!0))])}function bp(t){return Xg($a(t.firestore,Xi),[new Ug(t._key,Un.none())])}function fi(t,...e){var u,d,f;t=Jr(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||US(e[n])||(r=e[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(US(e[n])){const p=e[n];e[n]=(u=p.next)==null?void 0:u.bind(p),e[n+1]=(d=p.error)==null?void 0:d.bind(p),e[n+2]=(f=p.complete)==null?void 0:f.bind(p)}let s,o,l;if(t instanceof br)o=$a(t.firestore,Xi),l=y1(t._key.path),s={next:p=>{e[n]&&e[n](XF(o,t,p))},error:e[n+1],complete:e[n+2]};else{const p=$a(t,sl);o=$a(p.firestore,Xi),l=p._query;const m=new B1(o);s={next:v=>{e[n]&&e[n](new Do(o,m,p,v))},error:e[n+1],complete:e[n+2]},TO(t._query)}const c=Hg(o);return CF(c,l,a,s)}function Xg(t,e){const r=Hg(t);return IF(r,e)}function XF(t,e,r){const n=r.docs.get(e._key),a=new B1(t);return new Oo(t,a,e._key,n,new Zu(r.hasPendingWrites,r.fromCache),e.converter)}function QF(t){return t=$a(t,Xi),Hg(t),new KF(t,e=>Xg(t,e))}(function(e,r=!0){D6(Xc),hc(new qo("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Xi(new $6(n.getProvider("auth-internal")),new F6(o,n.getProvider("app-check-internal")),nV(o,a),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Mi(VS,FS,e),Mi(VS,FS,"esm2020")})();function IO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JF=IO,OO=new Mf("auth","Firebase",IO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=new u1("@firebase/auth");function ZF(t,...e){lm.logLevel<=mt.WARN&&lm.warn(`Auth (${Xc}): ${t}`,...e)}function yp(t,...e){lm.logLevel<=mt.ERROR&&lm.error(`Auth (${Xc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,...e){throw q1(t,...e)}function ls(t,...e){return q1(t,...e)}function DO(t,e,r){const n={...JF(),[e]:r};return new Mf("auth","Firebase",n).create(e,{appName:t.name})}function Ro(t){return DO(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return OO.create(t,...e)}function et(t,e,...r){if(!t)throw q1(e,...r)}function js(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yp(e),new Error(e)}function Us(t,e){t||js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function e9(){return WS()==="http:"||WS()==="https:"}function WS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e9()||uL()||"connection"in navigator)?navigator.onLine:!0}function r9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,r){this.shortDelay=e,this.longDelay=r,Us(r>e,"Short delay should be less than long delay!"),this.isMobile=oL()||dL()}get(){return t9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t,e){Us(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],s9=new Hf(3e4,6e4);function G1(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function tu(t,e,r,n,a={}){return MO(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const l=$f({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return cL()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Yc(t.emulatorConfig.host)&&(u.credentials="include"),RO.fetch()(await $O(t,t.config.apiHost,r,l),u)})}async function MO(t,e,r){t._canInitEmulator=!1;const n={...n9,...e};try{const a=new o9(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $h(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $h(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $h(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw DO(t,d,u);Fs(t,d)}}catch(a){if(a instanceof Gs)throw a;Fs(t,"network-request-failed",{message:String(a)})}}async function i9(t,e,r,n,a={}){const s=await tu(t,e,r,n,a);return"mfaPendingCredential"in s&&Fs(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function $O(t,e,r,n){const a=`${e}${r}?${n}`,s=t,o=s.config.emulator?H1(t.config,a):`${t.config.apiScheme}://${a}`;return a9.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class o9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ls(this.auth,"network-request-failed")),s9.get())})}}function $h(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=ls(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l9(t,e){return tu(t,"POST","/v1/accounts:delete",e)}async function cm(t,e){return tu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c9(t,e=!1){const r=Jr(t),n=await r.getIdToken(e),a=K1(n);et(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:gd(Lx(a.auth_time)),issuedAtTime:gd(Lx(a.iat)),expirationTime:gd(Lx(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Lx(t){return Number(t)*1e3}function K1(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return yp("JWT malformed, contained fewer than 3 sections"),null;try{const a=BP(r);return a?JSON.parse(a):(yp("Failed to decode base64 JWT payload"),null)}catch(a){return yp("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function qS(t){const e=K1(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gd(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Gs&&u9(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function u9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=gd(this.lastLoginAt),this.creationTime=gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function um(t){var f;const e=t.auth,r=await t.getIdToken(),n=await Gd(t,cm(e,{idToken:r}));et(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?LO(a.providerUserInfo):[],o=h9(t.providerData,s),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Vb(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function f9(t){const e=Jr(t);await um(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h9(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function LO(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e){const r=await MO(t,{},async()=>{const n=$f({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=await $O(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&Yc(t.emulatorConfig.host)&&(c.credentials="include"),RO.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function m9(t,e){return tu(t,"POST","/v2/accounts:revokeToken",G1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){et(e.length!==0,"internal-error");const r=qS(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await p9(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new Jl;return n&&(et(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(et(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(et(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jl,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Oa{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new d9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Vb(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Gd(this,this.stsTokenManager.getToken(this.auth,e));return et(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return c9(this,e)}reload(){return f9(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Oa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await um(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ja(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await Gd(this,l9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:m,providerData:v,stsTokenManager:x}=r;et(f&&x,e,"internal-error");const _=Jl.fromJSON(this.name,x);et(typeof f=="string",e,"internal-error"),li(n,e.name),li(a,e.name),et(typeof p=="boolean",e,"internal-error"),et(typeof m=="boolean",e,"internal-error"),li(s,e.name),li(o,e.name),li(l,e.name),li(c,e.name),li(u,e.name),li(d,e.name);const y=new Oa({uid:f,auth:e,email:a,emailVerified:p,displayName:n,isAnonymous:m,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:d});return v&&Array.isArray(v)&&(y.providerData=v.map(g=>({...g}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,r,n=!1){const a=new Jl;a.updateFromServerResponse(r);const s=new Oa({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await um(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];et(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?LO(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new Jl;l.updateFromIdToken(n);const c=new Oa({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Vb(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new Map;function Ss(t){Us(t instanceof Function,"Expected a class definition");let e=HS.get(t);return e?(Us(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}VO.type="NONE";const GS=VO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t,e,r){return`firebase:${t}:${e}:${r}`}class Zl{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=wp(this.userKey,a.apiKey,s),this.fullPersistenceKey=wp("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await cm(this.auth,{idToken:e}).catch(()=>{});return r?Oa._fromGetAccountInfoResponse(this.auth,r,e):null}return Oa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Zl(Ss(GS),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Ss(GS);const o=wp(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const p=await cm(e,{idToken:d}).catch(()=>{});if(!p)break;f=await Oa._fromGetAccountInfoResponse(e,p,d)}else f=Oa._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Zl(s,e,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Zl(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qO(e))return"Blackberry";if(HO(e))return"Webos";if(UO(e))return"Safari";if((e.includes("chrome/")||BO(e))&&!e.includes("edge/"))return"Chrome";if(WO(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function FO(t=vn()){return/firefox\//i.test(t)}function UO(t=vn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BO(t=vn()){return/crios\//i.test(t)}function zO(t=vn()){return/iemobile/i.test(t)}function WO(t=vn()){return/android/i.test(t)}function qO(t=vn()){return/blackberry/i.test(t)}function HO(t=vn()){return/webos/i.test(t)}function Y1(t=vn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function g9(t=vn()){var e;return Y1(t)&&!!((e=window.navigator)!=null&&e.standalone)}function x9(){return fL()&&document.documentMode===10}function GO(t=vn()){return Y1(t)||WO(t)||HO(t)||qO(t)||/windows phone/i.test(t)||zO(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t,e=[]){let r;switch(t){case"Browser":r=KS(vn());break;case"Worker":r=`${KS(vn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Xc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b9(t,e={}){return tu(t,"GET","/v2/passwordPolicy",G1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=6;class w9{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??y9,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YS(this),this.idTokenSubscription=new YS(this),this.beforeStateQueue=new v9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Ss(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await Zl.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await cm(this,{idToken:e}),n=await Oa._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ja(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await um(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ja(this.app))return Promise.reject(Ro(this));const r=e?Jr(e):null;return r&&et(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ja(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ja(this.app)?Promise.reject(Ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await b9(this),r=new w9(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mf("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await m9(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Ss(e)||this._popupRedirectResolver;et(r,this,"argument-error"),this.redirectPersistenceManager=await Zl.create(this,[Ss(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Ja(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&ZF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function X1(t){return Jr(t)}class YS{constructor(e){this.auth=e,this.observer=null,this.addObserver=yL(r=>this.observer=r)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N9(t){Q1=t}function j9(t){return Q1.loadJS(t)}function S9(){return Q1.gapiScript}function A9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k9(t,e){const r=f1(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(Wo(s,e??{}))return a;Fs(a,"already-initialized")}return r.initialize({options:e})}function E9(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Ss);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function T9(t,e,r){const n=X1(t);et(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=YO(e),{host:o,port:l}=C9(e),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){et(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),et(Wo(u,n.config.emulator)&&Wo(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Yc(o)?(qP(`${s}//${o}${c}`),iL("Auth",!0)):P9()}function YO(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function C9(t){const e=YO(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:XS(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:XS(o)}}}function XS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function P9(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return js("not implemented")}_getIdTokenResponse(e){return js("not implemented")}_linkToIdToken(e,r){return js("not implemented")}_getReauthenticationResolver(e){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(t,e){return i9(t,"POST","/v1/accounts:signInWithIdp",G1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="http://localhost";class Ko extends XO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Fs("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new Ko(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return ec(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,ec(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,ec(e,r)}buildRequest(){const e={requestUri:I9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=$f(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends QO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Gf{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Gf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ko._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return vi.credential(r,n)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Gf{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Gf{constructor(){super("twitter.com")}static credential(e,r){return Ko._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return yi.credential(r,n)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await Oa._fromIdTokenResponse(e,n,a),o=QS(n);return new wc({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=QS(n);return new wc({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function QS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm extends Gs{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,dm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new dm(e,r,n,a)}}function JO(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?dm._fromErrorAndOperation(t,s,e,n):s})}async function O9(t,e,r=!1){const n=await Gd(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return wc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D9(t,e,r=!1){const{auth:n}=t;if(Ja(n.app))return Promise.reject(Ro(n));const a="reauthenticate";try{const s=await Gd(t,JO(n,a,e,t),r);et(s.idToken,n,"internal-error");const o=K1(s.idToken);et(o,n,"internal-error");const{sub:l}=o;return et(t.uid===l,n,"user-mismatch"),wc._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fs(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R9(t,e,r=!1){if(Ja(t.app))return Promise.reject(Ro(t));const n="signIn",a=await JO(t,n,e),s=await wc._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}function M9(t,e,r,n){return Jr(t).onIdTokenChanged(e,r,n)}function $9(t,e,r){return Jr(t).beforeAuthStateChanged(e,r)}const fm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(fm,"1"),this.storage.removeItem(fm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=1e3,V9=10;class eD extends ZO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);x9()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,V9):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},L9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}eD.type="LOCAL";const F9=eD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD extends ZO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}tD.type="SESSION";const rD=tD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new Qg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await U9(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=J1("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(){return window}function z9(t){cs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(){return typeof cs().WorkerGlobalScope<"u"&&typeof cs().importScripts=="function"}async function W9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function q9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function H9(){return nD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="firebaseLocalStorageDb",G9=1,hm="firebaseLocalStorage",sD="fbase_key";class Kf{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Jg(t,e){return t.transaction([hm],e?"readwrite":"readonly").objectStore(hm)}function K9(){const t=indexedDB.deleteDatabase(aD);return new Kf(t).toPromise()}function Fb(){const t=indexedDB.open(aD,G9);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(hm,{keyPath:sD})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(hm)?e(n):(n.close(),await K9(),e(await Fb()))})})}async function JS(t,e,r){const n=Jg(t,!0).put({[sD]:e,value:r});return new Kf(n).toPromise()}async function Y9(t,e){const r=Jg(t,!1).get(e),n=await new Kf(r).toPromise();return n===void 0?null:n.value}function ZS(t,e){const r=Jg(t,!0).delete(e);return new Kf(r).toPromise()}const X9=800,Q9=3;class iD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fb(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Q9)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qg._getInstance(H9()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await W9(),!this.activeServiceWorker)return;this.sender=new B9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||q9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fb();return await JS(e,fm,"1"),await ZS(e,fm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>JS(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Y9(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>ZS(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=Jg(a,!1).getAll();return new Kf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iD.type="LOCAL";const J9=iD;new Hf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t,e){return e?Ss(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1 extends XO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ec(e,this._buildIdpRequest())}_linkToIdToken(e,r){return ec(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return ec(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function eU(t){return R9(t.auth,new Z1(t),t.bypassAuthState)}function tU(t){const{auth:e,user:r}=t;return et(r,e,"internal-error"),D9(r,new Z1(t),t.bypassAuthState)}async function rU(t){const{auth:e,user:r}=t;return et(r,e,"internal-error"),O9(r,new Z1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eU;case"linkViaPopup":case"linkViaRedirect":return rU;case"reauthViaPopup":case"reauthViaRedirect":return tU;default:Fs(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=new Hf(2e3,1e4);class Ll extends oD{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){Us(this.filter.length===1,"Popup operations only handle one event");const e=J1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ls(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ls(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ls(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nU.get())};e()}}Ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU="pendingRedirect",_p=new Map;class sU extends oD{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=_p.get(this.auth._key());if(!e){try{const n=await iU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}_p.set(this.auth._key(),e)}return this.bypassAuthState||_p.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iU(t,e){const r=cU(e),n=lU(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function oU(t,e){_p.set(t._key(),e)}function lU(t){return Ss(t._redirectPersistence)}function cU(t){return wp(aU,t.config.apiKey,t.name)}async function uU(t,e,r=!1){if(Ja(t.app))return Promise.reject(Ro(t));const n=X1(t),a=Z9(n,e),o=await new sU(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=10*60*1e3;class fU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hU(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!lD(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(ls(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dU&&this.cachedEventUids.clear(),this.cachedEventUids.has(eA(e))}saveEventToCache(e){this.cachedEventUids.add(eA(e)),this.lastProcessedEventTime=Date.now()}}function eA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(t,e={}){return tu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gU=/^https?/;async function xU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pU(t);for(const r of e)try{if(vU(r))return}catch{}Fs(t,"unauthorized-domain")}function vU(t){const e=Lb(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!gU.test(r))return!1;if(mU.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=new Hf(3e4,6e4);function tA(){const t=cs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function yU(t){return new Promise((e,r)=>{var a,s,o;function n(){tA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tA(),r(ls(t,"network-request-failed"))},timeout:bU.get()})}if((s=(a=cs().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=cs().gapi)!=null&&o.load)n();else{const l=A9("iframefcb");return cs()[l]=()=>{gapi.load?n():r(ls(t,"network-request-failed"))},j9(`${S9()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw Np=null,e})}let Np=null;function wU(t){return Np=Np||yU(t),Np}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=new Hf(5e3,15e3),NU="__/auth/iframe",jU="emulator/auth/iframe",SU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kU(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?H1(e,jU):`https://${t.config.authDomain}/${NU}`,n={apiKey:e.apiKey,appName:t.name,v:Xc},a=AU.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${$f(n).slice(1)}`}async function EU(t){const e=await wU(t),r=cs().gapi;return et(r,t,"internal-error"),e.open({where:document.body,url:kU(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SU,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=ls(t,"network-request-failed"),l=cs().setTimeout(()=>{s(o)},_U.get());function c(){cs().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CU=500,PU=600,IU="_blank",OU="http://localhost";class rA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DU(t,e,r,n=CU,a=PU){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...TU,width:n.toString(),height:a.toString(),top:s,left:o},u=vn().toLowerCase();r&&(l=BO(u)?IU:r),FO(u)&&(e=e||OU,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[m,v])=>`${p}${m}=${v},`,"");if(g9(u)&&l!=="_self")return RU(e||"",l),new rA(null);const f=window.open(e||"",l,d);et(f,t,"popup-blocked");try{f.focus()}catch{}return new rA(f)}function RU(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="__/auth/handler",$U="emulator/auth/handler",LU=encodeURIComponent("fac");async function nA(t,e,r,n,a,s){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Xc,eventId:a};if(e instanceof QO){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Gf){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${LU}=${encodeURIComponent(c)}`:"";return`${VU(t)}?${$f(l).slice(1)}${u}`}function VU({config:t}){return t.emulator?H1(t,$U):`https://${t.authDomain}/${MU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="webStorageSupport";class FU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rD,this._completeRedirectFn=uU,this._overrideRedirectResult=oU}async _openPopup(e,r,n,a){var o;Us((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await nA(e,r,n,Lb(),a);return DU(e,s,J1())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await nA(e,r,n,Lb(),a);return z9(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(Us(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await EU(e),n=new fU(e);return r.register("authEvent",a=>(et(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Vx,{type:Vx},a=>{var o;const s=(o=a==null?void 0:a[0])==null?void 0:o[Vx];s!==void 0&&r(!!s),Fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=xU(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return GO()||UO()||Y1()}}const UU=FU;var aA="@firebase/auth",sA="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WU(t){hc(new qo("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;et(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KO(t)},u=new _9(n,a,s,c);return E9(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),hc(new qo("auth-internal",e=>{const r=X1(e.getProvider("auth").getImmediate());return(n=>new BU(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(aA,sA,zU(t)),Mi(aA,sA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=5*60,HU=WP("authIdTokenMaxAge")||qU;let iA=null;const GU=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>HU)return;const a=r==null?void 0:r.token;iA!==a&&(iA=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function KU(t=w6()){const e=f1(t,"auth");if(e.isInitialized())return e.getImmediate();const r=k9(t,{popupRedirectResolver:UU,persistence:[J9,F9,rD]}),n=WP("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=GU(s.toString());$9(r,o,()=>o(r.currentUser)),M9(r,l=>o(l))}}const a=rL("auth");return a&&T9(r,`http://${a}`),r}function YU(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}N9({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=ls("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",YU().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WU("Browser");const XU={},gl=XU??{},Fx={apiKey:gl.VITE_FIREBASE_API_KEY,authDomain:gl.VITE_FIREBASE_AUTH_DOMAIN,projectId:gl.VITE_FIREBASE_PROJECT_ID,storageBucket:gl.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:gl.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:gl.VITE_FIREBASE_APP_ID};let Le=null,QU=null;if(Fx.apiKey&&Fx.projectId)try{const t=KP(Fx);Le=MF(t,{ignoreUndefinedProperties:!0}),QU=KU(t),console.log("Firebase initialized successfully")}catch(t){console.error("Error initializing Firebase:",t)}else console.warn("Firebase config missing. Running in LocalStorage mode.");const Ux="fluxo_erp_user",JU=!!Le,cD=D.createContext(void 0),ZU=({children:t})=>{const[e,r]=D.useState(()=>{try{const a=localStorage.getItem(Ux);return a?JSON.parse(a):null}catch{return null}}),n=a=>{r(a),a?localStorage.setItem(Ux,JSON.stringify(a)):localStorage.removeItem(Ux)};return i.jsx(cD.Provider,{value:{currentUser:e,setCurrentUser:n,useCloud:JU},children:t})},eB=()=>{const t=D.useContext(cD);if(!t)throw new Error("useAuth deve ser usado dentro de <AuthProvider>");return t},Ub={"1.1":{id:"1.1",label:"Briefing",ownerRole:"Vendedor",sla:1,stage:1},"1.2":{id:"1.2",label:"Visita Showroom",ownerRole:"Vendedor",sla:1,stage:1},"1.3":{id:"1.3",label:"Follow Up (Pr-Venda)",ownerRole:"Vendedor",sla:3,stage:1},"2.1":{id:"2.1",label:"Projetar Ambientes",ownerRole:"Projetista",sla:2,stage:2},"2.2":{id:"2.2",label:"Projetar Mobilirio",ownerRole:"Projetista",sla:5,stage:2},"2.3":{id:"2.3",label:"Oramento",ownerRole:"Projetista",sla:1,stage:2},"2.4":{id:"2.4",label:"Montagem da Apresentao",ownerRole:"Projetista",sla:1,stage:2},"2.5":{id:"2.5",label:"Reunio Primeira Apresentao",ownerRole:"Vendedor",sla:0,stage:2},"2.6":{id:"2.6",label:"Ajuste de Proposta",ownerRole:"Projetista",sla:2,stage:2},"2.7":{id:"2.7",label:"Follow Up (Venda)",ownerRole:"Vendedor",sla:3,stage:2},"2.8":{id:"2.8",label:"Reunio de Fechamento",ownerRole:"Vendedor",sla:0,stage:2},"2.9":{id:"2.9",label:"Contrato e Detalhamento",ownerRole:"Vendedor",sla:1,stage:2},"2.10":{id:"2.10",label:"Aprovao Detalhamento Contrato",ownerRole:"Vendedor",sla:1,stage:2},"3.1":{id:"3.1",label:"Avaliao para Medio",ownerRole:"Medidor",sla:1,stage:3},"3.2":{id:"3.2",label:"Medio",ownerRole:"Medidor",sla:2,stage:3},"4.1":{id:"4.1",label:"Construo de Mobilirio",ownerRole:"Liberador",sla:3,stage:4},"4.2":{id:"4.2",label:"Conferncia Tcnica",ownerRole:"Liberador",sla:2,stage:4},"4.3":{id:"4.3",label:"Aprovao Financeira",ownerRole:"Financeiro",sla:1,stage:4},"4.4":{id:"4.4",label:"Detalhamento Executivo",ownerRole:"Liberador",sla:3,stage:4},"4.5":{id:"4.5",label:"Aprovao do Executivo",ownerRole:"Vendedor",sla:1,stage:4},"4.6":{id:"4.6",label:"Solicitao de Correo",ownerRole:"Liberador",sla:2,stage:4},"5.1":{id:"5.1",label:"Pedido  Fbrica",ownerRole:"Logistica",sla:1,stage:5},"5.2":{id:"5.2",label:"Pagamento  Fbrica",ownerRole:"Financeiro",sla:2,stage:5},"6.1":{id:"6.1",label:"Conferir Pedido",ownerRole:"Logistica",sla:1,stage:6},"6.2":{id:"6.2",label:"Agendar Carreto",ownerRole:"Logistica",sla:1,stage:6},"6.3":{id:"6.3",label:"Entrega",ownerRole:"Logistica",sla:1,stage:6},"7.1":{id:"7.1",label:"Montagem",ownerRole:"Montador",sla:5,stage:7},"7.2":{id:"7.2",label:"Vistoria Montagem",ownerRole:"Coordenador de Montagem",sla:1,stage:7},"8.1":{id:"8.1",label:"Levantamento",ownerRole:"Montador",sla:2,stage:8},"8.2":{id:"8.2",label:"Solicitao de Ps Montagem",ownerRole:"Liberador",sla:2,stage:8},"8.3":{id:"8.3",label:"Aprovao Financeira e Implantao",ownerRole:"Financeiro",sla:2,stage:8},"8.4":{id:"8.4",label:"Fabricao Ps Montagem",ownerRole:"Industria",sla:15,stage:8},"8.5":{id:"8.5",label:"Transporte Ps Montagem",ownerRole:"Logistica",sla:5,stage:8},"8.6":{id:"8.6",label:"Ps Montagem",ownerRole:"Montador",sla:4,stage:8},"8.7":{id:"8.7",label:"Vistoria Ps Montagem",ownerRole:"Coordenador de Montagem",sla:1,stage:8},"8.8":{id:"8.8",label:"Concludo",ownerRole:"Gerente",sla:0,stage:8},"9.0":{id:"9.0",label:"Projeto Entregue",ownerRole:"Gerente",sla:0,stage:9},"9.1":{id:"9.1",label:"Projeto Perdido",ownerRole:"Vendedor",sla:0,stage:9}},oA=["1.1","1.2","1.3","2.1","2.2","2.3","2.4","2.5","2.6","2.7","2.8","2.9","2.10","3.1","3.2","4.1","4.2","4.3","4.4","4.5","4.6","5.1","5.2","6.1","6.2","6.3","7.1","7.2","8.1","8.2","8.3","8.4","8.5","8.6","8.7","8.8","9.0","9.1"],Ru=[{id:"10.1",label:"Levantamento",sla:3,ownerRole:"Montador"},{id:"10.2",label:"Solicitao de Assistncia Tcnica",sla:2,ownerRole:"Liberador"},{id:"10.3",label:"Aprovao Financeira e Implantao",sla:2,ownerRole:"Financeiro"},{id:"10.4",label:"Fabricao Assistncia Tcnica",sla:15,ownerRole:"Industria"},{id:"10.5",label:"Transporte Assistncia Tcnica",sla:5,ownerRole:"Logistica"},{id:"10.6",label:"Assistncia Tcnica",sla:4,ownerRole:"Montador"},{id:"10.7",label:"Vistoria Assistncia Tcnica",sla:1,ownerRole:"Coordenador de Montagem"},{id:"10.8",label:"Concludo",sla:0,ownerRole:"Gerente"}],Da="store-modelo",Kd={name:"FluxoPlanejados Modelo",cnpj:"00.000.000/0001-00",corporateName:"Fluxo Modelo Ltda",address:"Av. Moveleira, 1000",phone:"(11) 99999-9999",socialMedia:"@fluxomodelo",evolutionApi:{instanceUrl:"https://evolutionapi.digicasa.com.br/",token:"",globalEnabled:!1,settings:{stageChange:{enabled:!0,notifyClient:!0,notifySeller:!0,notifyManager:!0},newObservation:{enabled:!0,notifySeller:!0,notifyManager:!0},assistanceUpdate:{enabled:!0,notifyClient:!0,notifySeller:!0,notifyManager:!0},postAssemblyUpdate:{enabled:!0,notifyClient:!0,notifySeller:!0,notifyManager:!0},slaAlert:{enabled:!0,notifySeller:!0,notifyManager:!0,preventive:!0}}},whatsappClientTemplates:[{stepId:"3.1",label:"Avaliao para Medio",message:"Ol {nomeCliente}! Recebemos seu projeto para avaliao de medio. Em breve agendaremos a visita tcnica.",enabled:!1},{stepId:"3.2",label:"Medio",message:"Ol {nomeCliente}! A medio do seu ambiente foi realizada com sucesso! Agora seu projeto segue para a fase de engenharia.",enabled:!0},{stepId:"4.1",label:"Construo de Mobilirio",message:"Ol {nomeCliente}! Seu projeto est na fase de construo do mobilirio em nosso sistema.",enabled:!1},{stepId:"4.2",label:"Conferncia Tcnica",message:"Ol {nomeCliente}! Seu projeto est em conferncia tcnica pela nossa equipe de engenharia.",enabled:!1},{stepId:"4.3",label:"Aprovao Financeira",message:"Ol {nomeCliente}! Seu projeto est em fase de aprovao financeira.",enabled:!1},{stepId:"4.4",label:"Detalhamento Executivo",message:"Ol {nomeCliente}! Seu projeto est em detalhamento executivo. Estamos finalizando os ltimos ajustes!",enabled:!1},{stepId:"4.5",label:"Aprovao do Executivo",message:"Ol {nomeCliente}! O detalhamento executivo do seu projeto foi aprovado!",enabled:!1},{stepId:"4.6",label:"Solicitao de Correo",message:"Ol {nomeCliente}! Identificamos um ajuste necessrio no seu projeto. Estamos corrigindo.",enabled:!1},{stepId:"5.1",label:"Pedido  Fbrica",message:"Ol {nomeCliente}! Seu pedido foi enviado para a fbrica e est em produo! Prazo estimado: {prazo} dias teis.",enabled:!0},{stepId:"5.2",label:"Pagamento  Fbrica",message:"Ol {nomeCliente}! O pagamento  fbrica foi confirmado. Seu pedido est garantido na produo.",enabled:!1},{stepId:"6.1",label:"Conferir Pedido",message:"Ol {nomeCliente}! Seu pedido chegou da fbrica e est sendo conferido pela nossa equipe.",enabled:!0},{stepId:"6.2",label:"Agendar Carreto",message:"Ol {nomeCliente}! Estamos agendando o transporte do seu mobilirio.",enabled:!1},{stepId:"6.3",label:"Entrega",message:"Ol {nomeCliente}! Seu mobilirio foi entregue! Agora vamos agendar a montagem.",enabled:!0},{stepId:"assembly_scheduled",label:"Montagem Agendada",message:"Ol {nomeCliente}! Sua montagem foi agendada para {data}. Nossa equipe estar no local. Qualquer dvida estamos  disposio!",enabled:!0},{stepId:"7.1",label:"Montagem",message:"Ol {nomeCliente}! A montagem do seu mobilirio est em andamento! Nossa equipe est trabalhando no local.",enabled:!0},{stepId:"7.2",label:"Vistoria Montagem",message:"Ol {nomeCliente}! A vistoria da montagem foi realizada com sucesso.",enabled:!0},{stepId:"8.1",label:"Levantamento (Ps)",message:"Ol {nomeCliente}! Registramos uma necessidade de ps-montagem no seu projeto. Estamos trabalhando nisso.",enabled:!1},{stepId:"8.2",label:"Solicitao Ps Montagem",message:"Ol {nomeCliente}! Sua solicitao de ps-montagem est sendo processada.",enabled:!1},{stepId:"8.3",label:"Aprovao Financeira Ps",message:"Ol {nomeCliente}! A parte financeira da sua ps-montagem foi aprovada.",enabled:!1},{stepId:"8.4",label:"Fabricao Ps Montagem",message:"Ol {nomeCliente}! As peas da ps-montagem esto em fabricao.",enabled:!1},{stepId:"8.5",label:"Transporte Ps Montagem",message:"Ol {nomeCliente}! As peas da ps-montagem esto em transporte.",enabled:!1},{stepId:"8.6",label:"Ps Montagem",message:"Ol {nomeCliente}! A equipe est realizando a ps-montagem no seu ambiente.",enabled:!0},{stepId:"8.7",label:"Vistoria Ps Montagem",message:"Ol {nomeCliente}! A vistoria da ps-montagem foi concluda!",enabled:!1},{stepId:"8.8",label:"Concludo (Ps)",message:"Ol {nomeCliente}! Sua ps-montagem foi finalizada com sucesso!",enabled:!0},{stepId:"9.0",label:"Projeto Entregue",message:"Ol {nomeCliente}! Seu projeto foi concludo com sucesso! Foi um prazer atend-lo. Agradecemos a confiana!",enabled:!0},{stepId:"10.1",label:"Assistncia - Levantamento",message:"Ol {nomeCliente}! Sua assistncia tcnica {codigoAss} foi registrada. Nossa equipe est analisando.",enabled:!0},{stepId:"10.2",label:"Solicitao de Assistncia",message:"Ol {nomeCliente}! Sua assistncia tcnica {codigoAss} est sendo processada.",enabled:!1},{stepId:"10.3",label:"Aprovao Financeira Assist.",message:"Ol {nomeCliente}! A parte financeira da assistncia tcnica {codigoAss} foi aprovada.",enabled:!1},{stepId:"10.4",label:"Fabricao Assistncia",message:"Ol {nomeCliente}! As peas da assistncia tcnica {codigoAss} esto em fabricao.",enabled:!1},{stepId:"10.5",label:"Transporte Assistncia",message:"Ol {nomeCliente}! As peas da assistncia tcnica {codigoAss} esto em transporte.",enabled:!1},{stepId:"10.6",label:"Assistncia Tcnica",message:"Ol {nomeCliente}! A equipe de assistncia est realizando o servio no seu ambiente.",enabled:!1},{stepId:"10.7",label:"Vistoria Assistncia",message:"Ol {nomeCliente}! A vistoria da assistncia tcnica {codigoAss} foi concluda!",enabled:!1},{stepId:"10.8",label:"Assistncia Concluda",message:"Ol {nomeCliente}! Sua assistncia tcnica {codigoAss} foi finalizada com sucesso!",enabled:!0}],whatsappTeamTemplates:[{type:"sla_d1",label:"SLA vence amanh (D-1)",message:"{nomeResponsavel}, o projeto {nomeProjeto} ({nomeCliente}) vence o SLA amanh na etapa {etapa}. Acesse o sistema!",enabled:!0},{type:"sla_d0",label:"SLA vence hoje (D-0)",message:"URGENTE {nomeResponsavel}! Projeto {nomeProjeto} ({nomeCliente}) vence SLA HOJE na etapa {etapa}. Ao imediata!",enabled:!0}],whatsappLogs:[]},tB=Kd.whatsappClientTemplates,rB=Kd.whatsappTeamTemplates,Lh=["Captao (Vendedor)","Porta de Loja","Indicao Cliente","Recompra","Google Ads","Arquiteto","Engenheiro","Instagram","Facebook","Captao (Gerente)","Captao (Proprietario)","Construtora","Corretor"],Bx=Object.keys(Ub),zx=[1,2,3,4,5,6,7,8,9],Wx=[{role:"Admin",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!0,canDeleteClient:!0,canViewSettings:!0,canManageUsers:!0,canEditProject:!0,canChangeSeller:!0,viewableStages:zx,actionableSteps:Bx,canViewAssembly:!0,canEditAssembly:!0,canViewPostAssembly:!0,canEditPostAssembly:!0,canDeletePostAssembly:!0,canViewAssistance:!0,canEditAssistance:!0,canDeleteAssistance:!0},{role:"Proprietario",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!0,canDeleteClient:!0,canViewSettings:!0,canManageUsers:!0,canEditProject:!0,canChangeSeller:!0,viewableStages:zx,actionableSteps:Bx,canViewAssembly:!0,canEditAssembly:!0,canViewPostAssembly:!0,canEditPostAssembly:!0,canDeletePostAssembly:!0,canViewAssistance:!0,canEditAssistance:!0,canDeleteAssistance:!0},{role:"Gerente",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!0,canDeleteClient:!1,canViewSettings:!0,canManageUsers:!1,canEditProject:!0,canChangeSeller:!0,viewableStages:zx,actionableSteps:Bx,canViewAssembly:!0,canEditAssembly:!0,canViewPostAssembly:!0,canEditPostAssembly:!0,canDeletePostAssembly:!1,canViewAssistance:!0,canEditAssistance:!0,canDeleteAssistance:!1},{role:"Vendedor",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!0,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!0,canChangeSeller:!1,viewableStages:[1,2,4,8,9],actionableSteps:["1.1","1.2","1.3","2.5","2.7","2.8","2.9","2.10","4.5","8.7","8.8"],canViewAssembly:!0,canEditAssembly:!1,canViewPostAssembly:!0,canEditPostAssembly:!1,canDeletePostAssembly:!1,canViewAssistance:!0,canEditAssistance:!1,canDeleteAssistance:!1},{role:"Projetista",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!1,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!0,canChangeSeller:!1,viewableStages:[1,2,3,4],actionableSteps:["2.1","2.2","2.3","2.4","2.6","4.1"],canViewAssembly:!1,canEditAssembly:!1,canViewPostAssembly:!1,canEditPostAssembly:!1,canDeletePostAssembly:!1,canViewAssistance:!1,canEditAssistance:!1,canDeleteAssistance:!1},{role:"Medidor",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!1,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!1,canChangeSeller:!1,viewableStages:[3],actionableSteps:["3.1","3.2"],canViewAssembly:!1,canEditAssembly:!1,canViewPostAssembly:!1,canEditPostAssembly:!1,canDeletePostAssembly:!1,canViewAssistance:!1,canEditAssistance:!1,canDeleteAssistance:!1},{role:"Coordenador de Montagem",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!1,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!0,canChangeSeller:!1,viewableStages:[6,7,8],actionableSteps:["7.2","8.5"],canViewAssembly:!0,canEditAssembly:!0,canViewPostAssembly:!0,canEditPostAssembly:!0,canDeletePostAssembly:!1,canViewAssistance:!0,canEditAssistance:!0,canDeleteAssistance:!1},{role:"Montador",canViewDashboard:!0,canViewKanban:!1,canViewClients:!1,canEditClient:!1,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!1,canChangeSeller:!1,viewableStages:[7,8],actionableSteps:["7.1","8.1","8.4"],canViewAssembly:!1,canEditAssembly:!1,canViewPostAssembly:!0,canEditPostAssembly:!1,canDeletePostAssembly:!1,canViewAssistance:!0,canEditAssistance:!1,canDeleteAssistance:!1},{role:"Logistica",canViewDashboard:!0,canViewKanban:!0,canViewClients:!1,canEditClient:!1,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!1,canChangeSeller:!1,viewableStages:[5,6,8],actionableSteps:["5.1","6.1","6.2","6.3","8.3"],canViewAssembly:!0,canEditAssembly:!0,canViewPostAssembly:!0,canEditPostAssembly:!0,canDeletePostAssembly:!1,canViewAssistance:!0,canEditAssistance:!0,canDeleteAssistance:!1},{role:"Liberador",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!1,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!0,canChangeSeller:!1,viewableStages:[4,8,9],actionableSteps:["4.2","4.4","4.6","8.2"],canViewAssembly:!1,canEditAssembly:!1,canViewPostAssembly:!1,canEditPostAssembly:!1,canDeletePostAssembly:!1,canViewAssistance:!1,canEditAssistance:!1,canDeleteAssistance:!1},{role:"Financeiro",canViewDashboard:!0,canViewKanban:!0,canViewClients:!0,canEditClient:!1,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!1,canChangeSeller:!1,viewableStages:[4,5],actionableSteps:["4.3","5.2"],canViewAssembly:!0,canEditAssembly:!1,canViewPostAssembly:!0,canEditPostAssembly:!1,canDeletePostAssembly:!1,canViewAssistance:!0,canEditAssistance:!1,canDeleteAssistance:!1},{role:"Industria",canViewDashboard:!0,canViewKanban:!0,canViewClients:!1,canEditClient:!1,canDeleteClient:!1,canViewSettings:!1,canManageUsers:!1,canEditProject:!1,canChangeSeller:!1,viewableStages:[5,8],actionableSteps:[],canViewAssembly:!1,canEditAssembly:!1,canViewPostAssembly:!1,canEditPostAssembly:!1,canDeletePostAssembly:!1,canViewAssistance:!1,canEditAssistance:!1,canDeleteAssistance:!1}],lA=[{id:Da,name:"FluxoPlanejados Modelo",slug:"modelo",createdAt:"2024-01-01T00:00:00",settings:Kd,status:"active"}],cA=[{id:"u1",storeId:Da,name:"Otton Silva",username:"ottonsilva",password:"123456",role:"Admin",isSystemUser:!0,contractType:"PJ"},{id:"u2",storeId:Da,name:"Carlos Vendedor",username:"carlos",password:"123",role:"Vendedor",isSystemUser:!0,contractType:"CLT"}],uA=[{id:"c1",storeId:Da,name:"Ana Silva",phone:"11999999999",email:"ana@email.com",address:"Rua A, 123",status:"Ativo",origin:"Instagram",budget_expectation:15e4,time_move_in:"2024-12-20",profile_pains:"Precisa de muito espao de armazenamento.",property_type:"Reforma"},{id:"c2",storeId:Da,name:"Joo Souza",phone:"11988888888",email:"joao@email.com",address:"Av Paulista, 100",status:"Ativo",origin:"Indicao Arquiteto",budget_expectation:3e5,property_type:"Construo Nova"}],dA=[{id:"p1",storeId:Da,client:uA[0],sellerName:"Otton Silva",created_at:"2024-10-10",environments:[{id:"e1",name:"Sala de Estar",area_sqm:25,urgency_level:"Mdia",estimated_value:45e3,observations:"",status:"InBatch",version:1},{id:"e2",name:"Cozinha",area_sqm:12,urgency_level:"Alta",estimated_value:32e3,observations:"",status:"InBatch",version:1}],notes:[{id:"n1",storeId:Da,content:"Projeto criado no sistema.",authorId:"sys",authorName:"Sistema",createdAt:"2024-10-10T10:00:00",type:"SYSTEM"}],factoryOrders:[]},{id:"p2",storeId:Da,client:uA[1],sellerName:"Carlos Vendedor",created_at:"2024-09-15",environments:[{id:"e3",name:"Sute Master",area_sqm:30,urgency_level:"Alta",estimated_value:55e3,observations:"",status:"InBatch",version:1}],notes:[{id:"n2",storeId:Da,content:"Cliente solicitou mudana no acabamento da sute.",authorId:"t1",authorName:"Carlos Silva",createdAt:"2024-10-15T14:30:00",type:"MANUAL"}],factoryOrders:[]}],fA=[{id:"b1",storeId:Da,projectId:"p1",name:"Projeto Completo",phase:"1.2",environmentIds:["e1","e2"],createdAt:"2024-10-10",lastUpdated:"2024-10-12",status:"Active"},{id:"b2",storeId:Da,projectId:"p2",name:"Lote 1",phase:"4.5",environmentIds:["e3"],createdAt:"2024-09-15",lastUpdated:"2024-10-18",status:"Active"}],uD=D.createContext(void 0),hA="fluxo_erp_stores_data",pA="fluxo_erp_users_list",mA="fluxo_erp_projects",gA="fluxo_erp_batches",nB=({children:t})=>{const{currentUser:e,setCurrentUser:r,useCloud:n}=eB(),[a,s]=D.useState(()=>{try{const C=localStorage.getItem(hA);return(C?JSON.parse(C):lA).map(W=>({...W,status:W.status||"active"}))}catch{return lA}}),[o,l]=D.useState(()=>{if(n)return[];try{const C=localStorage.getItem(pA);return C?JSON.parse(C):cA}catch{return cA}}),[c,u]=D.useState(()=>{if(n)return[];try{const C=localStorage.getItem(mA);return C?JSON.parse(C):dA}catch{return dA}}),[d,f]=D.useState(()=>{if(n)return[];try{const C=localStorage.getItem(gA);return C?JSON.parse(C):fA}catch{return fA}});D.useEffect(()=>{if(!n||!Le)return;const C=fi(ja(Le,"stores"),Y=>{const ne=Y.docs.map(ce=>({id:ce.id,...ce.data()}));s(ne)});let $=Ka(ja(Le,"users"));e&&e.role!=="SuperAdmin"&&($=Ka(ja(Le,"users"),Sa("storeId","==",e.storeId)));let W=()=>{};e&&(W=fi($,Y=>{const ne=Y.docs.map(ce=>({id:ce.id,...ce.data()}));l(ne)}));let B=()=>{},ee=()=>{};if(e){let Y=Ka(ja(Le,"projects")),ne=Ka(ja(Le,"batches"));e.role!=="SuperAdmin"&&(Y=Ka(ja(Le,"projects"),Sa("storeId","==",e.storeId)),ne=Ka(ja(Le,"batches"),Sa("storeId","==",e.storeId)),e.role==="Vendedor"&&(Y=Ka(ja(Le,"projects"),Sa("storeId","==",e.storeId),Sa("sellerId","==",e.id)))),B=fi(Y,Ce=>{const We=Ce.docs.map(Ye=>({id:Ye.id,...Ye.data()}));u(We)}),ee=fi(ne,Ce=>{const We=Ce.docs.map(Ye=>({id:Ye.id,...Ye.data()}));f(We)});let ce=Ka(ja(Le,"assistance_tickets"),Sa("storeId","==",e.storeId));const pe=fi(ce,Ce=>{const We=Ce.docs.map(Ye=>({id:Ye.id,...Ye.data()}));te(We)});return()=>{C(),W(),B(),ee(),pe()}}else u([]),f([]),n&&l([]);return()=>{C(),W(),B(),ee()}},[n,e]);const[p,m]=D.useState(Ub),[v,x]=D.useState(oA),[_,y]=D.useState(Wx),[g,w]=D.useState(Lh),[E,N]=D.useState(Ru),[k,S]=D.useState(0),[b,A]=D.useState(0),[T,I]=D.useState([]),O=D.useMemo(()=>e&&a.find(C=>C.id===e.storeId)||null,[e,a]),R=async()=>{if(!O||!Le)return!1;try{const C=Wt(Le,"store_configs",O.id);return await Aa(C,{storeId:O.id,workflowConfig:p,workflowOrder:v,assistanceWorkflow:E,origins:g,permissions:_,lastPostAssemblyNumber:k,lastAssistanceNumber:b,updatedAt:new Date().toISOString()},{merge:!0}),!0}catch(C){return console.error("Error saving config:",C),!1}};D.useEffect(()=>{if(!O||!Le)return;const C=Wt(Le,"store_configs",O.id),$=fi(C,W=>{if(W.exists()){const B=W.data();if(B.workflowConfig&&m(B.workflowConfig),B.workflowOrder&&x(B.workflowOrder),B.assistanceWorkflow){const ee=B.assistanceWorkflow.map(Y=>{const ne=Ru.find(ce=>ce.id===Y.id);return{...ne,...Y,ownerRole:Y.ownerRole||(ne==null?void 0:ne.ownerRole)}});N(ee)}if(B.origins&&w(B.origins),B.permissions){const ee=B.permissions.map(Y=>({...Wx.find(ce=>ce.role===Y.role),...Y}));y(ee)}B.lastPostAssemblyNumber!==void 0&&S(B.lastPostAssemblyNumber),B.lastAssistanceNumber!==void 0&&A(B.lastAssistanceNumber),B.assemblyTeams&&I(B.assemblyTeams)}else console.log("No remote config found, using defaults.")});return()=>$()},[O==null?void 0:O.id]),D.useEffect(()=>{e||(m(Ub),x(oA),y(Wx),w(Lh),N(Ru),S(0),A(0),I([]))},[e]);const[G,U]=D.useState(null),[Q,te]=D.useState([]),K=D.useMemo(()=>o.filter(C=>C.storeId===(e==null?void 0:e.storeId)),[o,e]),X=D.useMemo(()=>{if(!e)return[];let C=c.filter($=>$.storeId===e.storeId);return e.role==="Vendedor"?C.filter($=>$.sellerName===e.name):C},[c,e]),se=D.useMemo(()=>{if(!e)return[];let C=d.filter($=>$.storeId===e.storeId);if(e.role==="Vendedor"){const $=X.map(W=>W.id);return C.filter(W=>$.includes(W.projectId))}return C},[d,e,X]),Z=D.useMemo(()=>(O==null?void 0:O.settings)||Kd,[O]);D.useEffect(()=>{n||localStorage.setItem(hA,JSON.stringify(a))},[a,n]),D.useEffect(()=>{n||localStorage.setItem(pA,JSON.stringify(o))},[o,n]),D.useEffect(()=>{n||localStorage.setItem(mA,JSON.stringify(c))},[c,n]),D.useEffect(()=>{n||localStorage.setItem(gA,JSON.stringify(d))},[d,n]);const F=async(C,$,W)=>{n&&Le&&await Aa(Wt(Le,C,$),W,{merge:!0})},de=async(C,$,W)=>{if(C.toLowerCase()==="admin"&&$.toLowerCase()==="admin"&&W==="Dell@7567")return r({id:"super-admin",storeId:"admin-dashboard",name:"Gestor Global",username:"admin",role:"SuperAdmin",isSystemUser:!0}),!0;const B=a.find(Y=>Y.slug.toLowerCase()===C.toLowerCase());if(!B)return!1;if(B.status==="suspended")return"suspended";let ee;if(n&&Le)try{const Y=ja(Le,"users"),ne=Ka(Y,Sa("storeId","==",B.id),Sa("username","==",$),Sa("password","==",W),Sa("isSystemUser","==",!0)),ce=await YF(ne);ce.empty||(ee={id:ce.docs[0].id,...ce.docs[0].data()})}catch(Y){return console.error("Login Error",Y),!1}else ee=o.find(Y=>Y.storeId===B.id&&Y.username.toLowerCase()===$.toLowerCase()&&Y.password===W&&Y.isSystemUser);return ee?(r(ee),!0):!1},me=()=>{r(null)},Ge=(C,$,W,B,ee)=>{const Y=`store-${Date.now()}`;if(a.some(pe=>pe.slug===$)){alert("ID de loja (slug) j existe.");return}const ne={id:Y,name:C,slug:$,createdAt:new Date().toISOString(),settings:{...Kd,name:C,corporateName:C},status:"active"},ce={id:`u-${Date.now()}`,storeId:Y,name:W,username:B,password:ee,role:"Admin",isSystemUser:!0,contractType:"PJ"};n?(F("stores",Y,ne),F("users",ce.id,ce)):(s(pe=>[...pe,ne]),l(pe=>[...pe,ce]))},Me=(C,$)=>{const W=a.find(ee=>ee.id===C);if(!W)return;const B={...W,...$};$.settings&&$.settings.name&&(B.name=$.settings.name),n?F("stores",C,B):s(ee=>ee.map(Y=>Y.id===C?B:Y))},ot=C=>{const $=a.find(B=>B.id===C);if(!$)return;const W=$.status==="active"?"suspended":"active";n?F("stores",C,{status:W}):s(B=>B.map(ee=>ee.id===C?{...ee,status:W}:ee))},Be=C=>{if(!e)return;const $={...C,storeId:e.storeId};n?F("users",C.id,$):l(W=>[...W,$])},xe=C=>{n?F("users",C.id,C):l($=>$.map(W=>W.id===C.id?C:W)),(e==null?void 0:e.id)===C.id&&r(C)},ve=C=>{n?alert("Contact support to hard delete users in SaaS mode."):l($=>$.filter(W=>W.id!==C))},be=C=>{y(C)},le=C=>{w(C)},Ze=C=>{e&&(n?F("stores",e.storeId,{settings:C}):s($=>$.map(W=>W.id===e.storeId?{...W,settings:C}:W)))},ie=C=>{m($=>({...$,[C.id]:C})),x($=>[...$,C.id])},Pe=(C,$)=>{m(W=>({...W,[C]:{...W[C],...$}}))},Ae=C=>{const{[C]:$,...W}=p;m(W),x(B=>B.filter(ee=>ee!==C))},Ee=(C,$)=>{const W=Array.from(v),[B]=W.splice(C,1);W.splice($,0,B),x(W)},Oe=C=>{N($=>[...$,C])},_e=(C,$)=>{N(W=>{const B=W.map(ee=>ee.id===C?{...ee,...$}:ee);if(n&&Le&&O){const ee=Wt(Le,"store_configs",O.id);Aa(ee,{assistanceWorkflow:B,updatedAt:new Date().toISOString()},{merge:!0})}return B})},Ke=C=>{N($=>$.filter(W=>W.id!==C))},je=(C,$)=>{const W=Array.from(E),[B]=W.splice(C,1);W.splice($,0,B),N(W)},tt=C=>X.find($=>$.id===C),ht=async(C,$)=>{if(!e)return;const W={id:`p-${Date.now()}`,storeId:e.storeId,client:{...C,storeId:e.storeId},sellerId:e.id,sellerName:e.name||"Vendedor",created_at:new Date().toISOString(),environments:$.map(ee=>({...ee,id:`env-${Date.now()}-${Math.random().toString(36).substr(2,9)}`})),notes:[{id:`n-${Date.now()}`,storeId:e.storeId,content:"Projeto iniciado.",authorId:"sys",authorName:"Sistema",createdAt:new Date().toISOString(),type:"SYSTEM"}],factoryOrders:[]},B={id:`b-${Date.now()}`,storeId:e.storeId,projectId:W.id,name:"Projeto Completo",phase:v[0]||"1.1",environmentIds:W.environments.map(ee=>ee.id),status:"Active",createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()};if(n&&Le){const ee=QF(Le);ee.set(Wt(Le,"projects",W.id),W),ee.set(Wt(Le,"batches",B.id),B),await ee.commit()}else u(ee=>[...ee,W]),f(ee=>[...ee,B]);V(C)},pt=async C=>{if(!e)return;const $=d.filter(W=>W.projectId===C);if(n&&Le)try{await bp(Wt(Le,"projects",C));for(const W of $)await bp(Wt(Le,"batches",W.id));console.log(`Project ${C} and associated data deleted.`)}catch(W){console.error("Error deleting project:",W),alert("Erro ao excluir projeto via nuvem.")}else u(W=>W.filter(B=>B.id!==C)),f(W=>W.filter(B=>B.projectId!==C))},Fe=(C,$,W)=>{if(!e)return;const B=W==="sys"?{name:"Sistema"}:K.find(ce=>ce.id===W),ee={id:`n-${Date.now()}-${Math.random()}`,storeId:e.storeId,content:$,authorId:W,authorName:B?B.name:"Desconhecido",createdAt:new Date().toISOString(),type:W==="sys"?"SYSTEM":"MANUAL"},Y=c.find(ce=>ce.id===C);if(!Y)return;const ne=[ee,...Y.notes];if(n?F("projects",C,{notes:ne}):u(ce=>ce.map(pe=>pe.id===C?{...pe,notes:ne}:pe)),W!=="sys"){const ce=` *Nova observao* no projeto de *${Y.client.name}*

"${$}"

_Enviado por: ${(B==null?void 0:B.name)||"Vendedor"}_`;Tr(Y,ce,"newObservation")}},It=C=>C==="9.0"||C==="9.1",Zt=C=>{if(!e)return!1;const $=_.find(W=>W.role===e.role);return $?$.actionableSteps.includes(C):!1},he=C=>{if(!e)return!1;const $=_.find(W=>W.role===e.role);return $?$.viewableStages.includes(C):!1},Vr=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canEditAssistance)??!1},hr=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canDeleteAssistance)??!1},Fr=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canViewAssembly)??!1},bt=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canEditAssembly)??!1},ir=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canViewPostAssembly)??!1},en=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canEditPostAssembly)??!1},Ur=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canDeletePostAssembly)??!1},pr=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canEditClient)??!1},Er=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canDeleteClient)??!1},mr=()=>{if(!e)return!1;const C=_.find($=>$.role===e.role);return(C==null?void 0:C.canManageUsers)??!1},Br=(C,$)=>{var Ce,We;const W=d.find(Ye=>Ye.id===C);if(!W)return;if(!(e&&["Admin","Proprietario","Gerente"].includes(e.role))&&!Zt(W.phase)){alert("Voc no tem permisso para concluir esta etapa.");return}const ee=((Ce=p[W.phase])==null?void 0:Ce.label)||W.phase,Y=((We=p[$])==null?void 0:We.label)||$;Fe(W.projectId,`Movimentao direta: ${ee}  ${Y}`,(e==null?void 0:e.id)||"sys");const ne=new Date().toISOString(),ce={phase:$,lastUpdated:ne};W.phase==="4.5"&&(ce.phase45CompletedAt=ne,ce.assemblyDeadline=ts(new Date,45).toISOString()),n?F("batches",C,ce):f(Ye=>Ye.map(vt=>vt.id!==C?vt:{...vt,...ce}));const pe=p[$];if(pe){const Ye=c.find(vt=>vt.id===W.projectId);Ye&&(wa(Ye,pe.label),ya(Ye,$))}},or=C=>{const $=d.find(We=>We.id===C);if(!$)return;if(!(e&&["Admin","Proprietario","Gerente"].includes(e.role))&&!Zt($.phase)){alert("Voc no tem permisso para concluir esta etapa.");return}let B=v.indexOf($.phase);if(B===-1&&(B=0),B>=v.length-1)return;let Y=v[B+1];Y==="9.1"&&v.indexOf("9.0")!==-1&&(Y="9.0");const ne=p[$.phase],ce=p[Y];Fe($.projectId,`Etapa concluda: ${(ne==null?void 0:ne.label)||$.phase}  ${(ce==null?void 0:ce.label)||"Finalizado"}`,(e==null?void 0:e.id)||"sys");const pe=new Date().toISOString(),Ce={phase:Y,lastUpdated:pe};if($.phase==="4.5"&&(Ce.phase45CompletedAt=pe,Ce.assemblyDeadline=ts(new Date,45).toISOString()),n?F("batches",C,Ce):f(We=>We.map(Ye=>Ye.id!==C?Ye:{...Ye,...Ce})),ce){const We=c.find(Ye=>Ye.id===$.projectId);We&&(wa(We,ce.label),ya(We,Y))}},wr=(C,$)=>{var ee;const W=d.filter(Y=>Y.projectId===C),B={phase:"9.1",lastUpdated:new Date().toISOString()};n?(W.forEach(Y=>F("batches",Y.id,B)),F("projects",C,{client:{...(ee=tt(C))==null?void 0:ee.client,status:"Perdido"}})):(f(Y=>Y.map(ne=>ne.projectId!==C?ne:{...ne,...B})),u(Y=>Y.map(ne=>ne.id!==C?ne:{...ne,client:{...ne.client,status:"Perdido"}}))),Fe(C,`Projeto marcado como PERDIDO. Motivo: ${$}`,(e==null?void 0:e.id)||"sys")},Nt=C=>{var B;const $=d.filter(ee=>ee.projectId===C),W={phase:"1.1",lastUpdated:new Date().toISOString()};n?($.forEach(ee=>F("batches",ee.id,W)),F("projects",C,{client:{...(B=tt(C))==null?void 0:B.client,status:"Ativo"}})):(f(ee=>ee.map(Y=>Y.projectId!==C?Y:{...Y,...W})),u(ee=>ee.map(Y=>Y.id!==C?Y:{...Y,client:{...Y.client,status:"Ativo"}}))),Fe(C,"Projeto reativado manualmente. Reiniciado para etapa 1.1",(e==null?void 0:e.id)||"sys")},Yt=(C,$,W)=>{const B=se.find(We=>We.id===C);if(!B||!e)return;const ee=W||B.phase,Y=se.filter(We=>We.projectId===B.projectId).length;let ne=`Lote ${Y}`,ce="Lote Restante";Y===1&&(ne="Lote 1");const pe={id:`b-${Date.now()}`,storeId:e.storeId,projectId:B.projectId,name:ne,phase:ee,environmentIds:$,status:"Active",createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()},Ce={environmentIds:(B.environmentIds||[]).filter(We=>!$.includes(We)),name:ce,lastUpdated:new Date().toISOString()};if(n&&Le)Aa(Wt(Le,"batches",pe.id),pe),Sl(Wt(Le,"batches",B.id),Ce);else{const We={...B,...Ce};f(Ye=>[...Ye.filter(vt=>vt.id!==C),pe,We].filter(vt=>(vt.environmentIds||[]).length>0))}return Fe(B.projectId,`Lote parcial criado na etapa ${ee} com ${$.length} ambientes.`,(e==null?void 0:e.id)||"sys"),pe.id},Ot=(C,$)=>{Pe(C,{sla:$})},er=(C,$,W)=>{Bt(C,$,{status:W})},Bt=(C,$,W)=>{const B=c.find(Y=>Y.id===C);if(!B)return;const ee=B.environments.map(Y=>Y.id===$?{...Y,...W}:Y);n?F("projects",C,{environments:ee}):u(Y=>Y.map(ne=>ne.id!==C?ne:{...ne,environments:ee}))},bn=(C,$)=>{const W=c.find(ne=>ne.id===C);if(!W)return;const B={id:`env-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:$,status:"Pending",version:1,valueHistory:[],observations:""},ee=[...W.environments,B];n?F("projects",C,{environments:ee}):u(ne=>ne.map(ce=>ce.id!==C?ce:{...ce,environments:ee}));const Y=d.filter(ne=>ne.projectId===C);if(Y.length>0){const ne=Y.find(pe=>pe.name==="Projeto Completo"||pe.name==="Lote Restante")||Y[0],ce={...ne,environmentIds:[...ne.environmentIds||[],B.id]};n&&Le?Sl(Wt(Le,"batches",ne.id),{environmentIds:ce.environmentIds}):f(pe=>pe.map(Ce=>Ce.id!==ne.id?Ce:ce))}},zr=(C,$)=>{const W=c.find(Y=>Y.id===C);if(!W)return;const B=W.environments.filter(Y=>Y.id!==$);n?F("projects",C,{environments:B}):u(Y=>Y.map(ne=>ne.id!==C?ne:{...ne,environments:B})),d.filter(Y=>Y.projectId===C&&(Y.environmentIds||[]).includes($)).forEach(Y=>{const ne=(Y.environmentIds||[]).filter(ce=>ce!==$);n&&Le?Sl(Wt(Le,"batches",Y.id),{environmentIds:ne}):f(ce=>ce.map(pe=>pe.id!==Y.id?pe:{...pe,environmentIds:ne}))})},re=(C,$,W)=>{const B=c.find(Y=>Y.id===C);if(!B)return;const ee={...B.client,...$};n?F("projects",C,{client:ee}):u(Y=>Y.map(ne=>ne.id!==C?ne:{...ne,client:ee})),W!==null&&Fe(C,W||"Dados cadastrais do cliente atualizados.",(e==null?void 0:e.id)||"sys")},$e=(C,$)=>{const W=c.find(ce=>ce.id===C);if(!W)return;const B=Object.keys($).filter(ce=>{const pe=ce;return $[pe]!==W.client[pe]}),ee={budget_expectation:"Expectativa do Cliente",payment_preference:"Forma de Pagamento",project_has_architect_project:"Possui Projeto Arquitet.",commissioned_specifier:"Especificador Comissionado",time_measurement_ready:"Previso Medio",time_decision_expectation:"Expectativa Deciso",project_materials:"Materiais",specialNeeds:"Necessidades Especiais",appliances:"Eletrodomsticos",profile_residents:"Quem vai morar",profile_routine:"Rotina da Casa",profile_pains:"Dores / Expectativas",propertyType:"Tipo de Imvel",property_location:"Localizao",time_move_in:"Mudana Prevista",architect_name:"Arquiteto"},Y=B.map(ce=>ee[ce]||ce),ne=Y.length>0?`Briefing atualizado (${Y.join(", ")})`:"Dados do Briefing atualizados.";re(C,$,ne)},z=(C,$,W,B)=>{if(!c.find(ne=>ne.id===C))return;const Y={environments:$,contractValue:W,contractDate:B,contractSigned:!0};n?F("projects",C,Y):u(ne=>ne.map(ce=>ce.id!==C?ce:{...ce,...Y})),Fe(C,`Contrato formalizado. Valor Final: R$ ${W.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,(e==null?void 0:e.id)||"sys")},q=(C,$,W)=>{const B=c.find(ne=>ne.id===C);if(!B)return;const ee={sellerId:$,sellerName:W},Y={consultant_name:W};n?F("projects",C,{...ee,client:{...B.client,...Y}}):u(ne=>ne.map(ce=>ce.id!==C?ce:{...ce,...ee,client:{...ce.client,...Y}})),Fe(C,`Vendedor responsvel alterado para: ${W}`,(e==null?void 0:e.id)||"sys")},Ne=(C,$,W)=>{var ne,ce;const B={id:`fo-${Date.now()}`,environmentId:$,environmentName:((ce=(ne=c.find(pe=>pe.id===C))==null?void 0:ne.environments.find(pe=>pe.id===$))==null?void 0:ce.name)||"Ambiente",partDescription:W,status:"Solicitado",createdAt:new Date().toISOString()},ee=c.find(pe=>pe.id===C);if(!ee)return;const Y=[...ee.factoryOrders,B];n?F("projects",C,{factoryOrders:Y}):u(pe=>pe.map(Ce=>Ce.id===C?{...Ce,factoryOrders:Y}:Ce)),Fe(C,`Pea solicitada para fbrica: ${W}`,(e==null?void 0:e.id)||"sys")},Se=(C,$)=>{n?F("projects",C,{postAssembly:$}):u(W=>W.map(B=>B.id===C?{...B,postAssembly:$}:B)),Fe(C,`Avaliao Ps-Montagem registrada. Nota: ${$.rating}/5`,(e==null?void 0:e.id)||"sys")},Ue=async(C,$)=>{const W=c.find(ee=>ee.id===C);if(!W)return;const B={postAssemblyItems:$.items!==void 0?$.items:W.postAssemblyItems,postAssemblyEvents:$.events!==void 0?$.events:W.postAssemblyEvents,postAssemblyPriority:$.priority!==void 0?$.priority:W.postAssemblyPriority,postAssemblyStartedAt:$.startedAt!==void 0?$.startedAt:W.postAssemblyStartedAt};if(!W.postAssemblyCode&&O&&Le){const ee=k+1,Y=`POS-${String(ee).padStart(5,"0")}`;B.postAssemblyCode=Y,S(ee);const ne=Wt(Le,"store_configs",O.id);await Aa(ne,{lastPostAssemblyNumber:ee},{merge:!0})}if(n?F("projects",C,B):u(ee=>ee.map(Y=>Y.id===C?{...Y,...B}:Y)),$.startedAt||B.postAssemblyCode){const ee=` *Ps-Montagem Iniciada*

Cliente: *${W.client.name}*
Cdigo: *${B.postAssemblyCode||W.postAssemblyCode}*
Prioridade: *${$.priority||W.postAssemblyPriority||"Normal"}*`;Tr(W,ee,"postAssemblyUpdate")}},st=async C=>{var ne;if(!e||!O)return;const $=b+1,W=`ASS-${String($).padStart(5,"0")}`,B={id:`t-${Date.now()}`,storeId:e.storeId,code:W,...C,events:C.events||[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(n&&Le){await Aa(Wt(Le,"assistance_tickets",B.id),B),A($);const ce=Wt(Le,"store_configs",O.id);await Aa(ce,{lastAssistanceNumber:$},{merge:!0})}else te(ce=>[...ce,B]);const ee=` *Novo Chamado de Assistncia*

Cliente: *${C.clientName}*
Cdigo: *${W}*
Prioridade: *${C.priority}*

Status Inicial: ${((ne=E.find(ce=>ce.id===C.status))==null?void 0:ne.label)||C.status}`,Y=c.find(ce=>ce.client.id===C.clientId);Y?Tr(Y,ee,"assistanceUpdate"):Z.phone&&yn(Z.phone,ee)},it=async C=>{var B;const $={...C,updatedAt:new Date().toISOString()};n&&Le?await Aa(Wt(Le,"assistance_tickets",C.id),$):te(ee=>ee.map(Y=>Y.id===C.id?$:Y));const W=Q.find(ee=>ee.id===C.id);if(W&&W.status!==C.status){const ee=((B=E.find(ce=>ce.id===C.status))==null?void 0:B.label)||C.status,Y=` *Atualizao Assistncia - ${C.code}*

O status do seu chamado foi alterado para: *${ee}*`,ne=c.find(ce=>ce.client.id===C.clientId);ne&&(Tr(ne,Y,"assistanceUpdate"),ya(ne,C.status,{codigoAss:C.code||""}))}},lr=async C=>{n&&Le?await bp(Wt(Le,"assistance_tickets",C)):te($=>$.filter(W=>W.id!==C))},Cn=async C=>{if(!O)return!1;let $={};if((C==="origins"||C==="all")&&(w(Lh),$.origins=Lh),(C==="assistance"||C==="all")&&(N(Ru),$.assistanceWorkflow=Ru),n&&Le&&Object.keys($).length>0)try{const W=Wt(Le,"stores",O.id);return await Sl(W,$),!0}catch(W){return console.error("Error resetting defaults:",W),!1}return!0},tr=(C,$)=>{const W=new Date().toISOString();f(B=>B.map(ee=>{if(ee.id!==C)return ee;if($===null){const{assemblySchedule:Y,...ne}=ee;return{...ne,lastUpdated:W}}return{...ee,assemblySchedule:$,lastUpdated:W}})),n&&Le&&($===null?Sl(Wt(Le,"batches",C),{assemblySchedule:WF(),lastUpdated:W}).catch(B=>console.error("Error deleting assembly schedule:",B)):F("batches",C,{assemblySchedule:$,lastUpdated:W}))},Wr=async C=>{if(I(C),!O||!Le)return!1;try{const $=Wt(Le,"store_configs",O.id);return await Aa($,{assemblyTeams:C,updatedAt:new Date().toISOString()},{merge:!0}),!0}catch($){return console.error("Error saving assembly teams:",$),!1}},qr=C=>C==="1.1"?[{label:"Visita Showroom",description:"Cliente far visita presencial.",targetStepId:"1.2",color:"emerald",icon:"storefront"},{label:"Follow Up Pr-Venda",description:"Manter contato ativo.",targetStepId:"1.3",color:"primary",icon:"phone_in_talk"},{label:"Projetar Ambientes",description:"Avanar para projeto.",targetStepId:"2.1",color:"emerald",icon:"architecture"}]:C==="1.2"?[{label:"Follow Up Pr-Venda",description:"Manter contato ativo.",targetStepId:"1.3",color:"primary",icon:"phone_in_talk"},{label:"Projetar Ambientes",description:"Avanar para projeto.",targetStepId:"2.1",color:"emerald",icon:"architecture"}]:C==="1.3"?[{label:"Projetar Ambientes",description:"Avanar para projeto.",targetStepId:"2.1",color:"emerald",icon:"architecture"}]:C==="2.3"?[{label:"Aprovar Oramento",description:"Avanar para montagem da apresentao.",targetStepId:"2.4",color:"emerald",icon:"check_circle"},{label:"Revisar / Ajustar",description:"Retornar para rascunho (Projetar Mobilirio).",targetStepId:"2.2",color:"orange",icon:"edit"}]:C==="2.5"?[{label:"Aprovado",description:"Prosseguir para Contrato e Detalhamento.",targetStepId:"2.9",color:"emerald",icon:"verified"},{label:"Ajuste Solicitado",description:"Retornar para ajustes de proposta.",targetStepId:"2.6",color:"orange",icon:"edit"},{label:"Follow Up",description:"Manter contato ativo.",targetStepId:"2.7",color:"primary",icon:"running_with_errors"}]:C==="2.6"?[{label:"Ajuste Concludo",description:"Proceder para Reunio de Fechamento.",targetStepId:"2.8",color:"emerald",icon:"check_circle"},{label:"Follow Up",description:"Manter em acompanhamento de vendas.",targetStepId:"2.7",color:"primary",icon:"phone_in_talk"}]:C==="2.7"?[{label:"Reunio de Fechamento",description:"Agendar fechamento.",targetStepId:"2.8",color:"emerald",icon:"handshake"},{label:"Novo Ajuste",description:"Voltar para ajustes se necessrio.",targetStepId:"2.6",color:"orange",icon:"edit"},{label:"Venda Perdida",description:"Marcar como perdido.",targetStepId:"9.1",color:"rose",icon:"cancel"}]:C==="2.8"?[{label:"Venda Fechada",description:"Avanar para Contrato e Detalhamento.",targetStepId:"2.9",color:"emerald",icon:"verified"},{label:"Ajuste Solicitado",description:"Retornar para ajustes na proposta.",targetStepId:"2.6",color:"orange",icon:"edit_square"},{label:"Ir para Follow-up",description:"Voltar para acompanhamento.",targetStepId:"2.7",color:"primary",icon:"event_repeat"}]:C==="4.3"?[{label:"Aprovado Financeiro",description:"Pagamento OK. Liberar para engenharia.",targetStepId:"4.4",color:"emerald",icon:"fact_check"},{label:"Pendncia Financeira",description:"Aguardar regularizao.",targetStepId:"4.2",color:"rose",icon:"block"}]:C==="4.5"?[{label:"Avanar para Implantao",description:"Projeto aprovado, ir para implantao.",targetStepId:"5.1",color:"emerald",icon:"check_circle"},{label:"Correo",description:"Devolver para o liberador corrigir.",targetStepId:"4.6",color:"rose",icon:"build"}]:C==="4.6"?[{label:"Reviso Concluda",description:"Retornar projeto revisado para o Vendedor.",targetStepId:"4.5",color:"emerald",icon:"check_circle"}]:C==="7.2"?[{label:"Avanar para Assistncia",description:"Iniciar levantamento de itens pendentes.",targetStepId:"8.1",color:"orange",icon:"handyman"},{label:"Concludo",description:"Montagem aprovada sem assistncia.",targetStepId:"9.0",color:"emerald",icon:"verified"}]:C==="8.1"?[{label:"Concluir Levantamento",description:"Avanar para Solicitao.",targetStepId:"8.2",color:"primary",icon:"arrow_forward"}]:C==="8.2"?[{label:"Solicitao Enviada",description:"Avanar para Aprovao e Implantao.",targetStepId:"8.3",color:"primary",icon:"arrow_forward"}]:C==="8.3"?[{label:"Aprovado e Implantado",description:"Avanar para Fabricao.",targetStepId:"8.4",color:"primary",icon:"arrow_forward"}]:C==="8.4"?[{label:"Fabricao Concluda",description:"Avanar para Transporte.",targetStepId:"8.5",color:"primary",icon:"arrow_forward"}]:C==="8.5"?[{label:"Transporte Concludo",description:"Avanar para Ps Montagem.",targetStepId:"8.6",color:"primary",icon:"arrow_forward"}]:C==="8.6"?[{label:"Ps Montagem Concluda",description:"Avanar para Vistoria.",targetStepId:"8.7",color:"primary",icon:"arrow_forward"}]:C==="8.7"?[{label:"Vistoria Concluda",description:"Avanar para Concludo.",targetStepId:"8.8",color:"primary",icon:"arrow_forward"}]:C==="8.8"?[{label:"Encerrar Processo",description:"Avanar para Projeto Entregue.",targetStepId:"9.0",color:"emerald",icon:"check_circle"}]:C==="10.1"?[{label:"Concluir Levantamento",description:"Avanar para Solicitao.",targetStepId:"10.2",color:"primary",icon:"arrow_forward"}]:C==="10.2"?[{label:"Solicitao Enviada",description:"Avanar para Aprovao e Implantao.",targetStepId:"10.3",color:"primary",icon:"arrow_forward"}]:C==="10.3"?[{label:"Aprovado e Implantado",description:"Avanar para Fabricao.",targetStepId:"10.4",color:"primary",icon:"arrow_forward"}]:C==="10.4"?[{label:"Fabricao Concluda",description:"Avanar para Transporte.",targetStepId:"10.5",color:"primary",icon:"arrow_forward"}]:C==="10.5"?[{label:"Transporte Concludo",description:"Avanar para Assistncia.",targetStepId:"10.6",color:"primary",icon:"arrow_forward"}]:C==="10.6"?[{label:"Assistncia Concluda",description:"Avanar para Vistoria.",targetStepId:"10.7",color:"primary",icon:"arrow_forward"}]:C==="10.7"?[{label:"Vistoria Concluda",description:"Processo Concludo.",targetStepId:"10.8",color:"emerald",icon:"check_circle"}]:[],yn=async(C,$)=>{var B,ee,Y;if(!C||!((B=Z.evolutionApi)!=null&&B.instanceUrl)||!((ee=Z.evolutionApi)!=null&&ee.instanceName)||!((Y=Z.evolutionApi)!=null&&Y.token)||!Z.evolutionApi.globalEnabled)return;const{EvolutionApi:W}=await ud(async()=>{const{EvolutionApi:ne}=await import("./evolutionApi-BtEDgQmG.js");return{EvolutionApi:ne}},[]);await W.sendText({instanceUrl:Z.evolutionApi.instanceUrl,instanceName:Z.evolutionApi.instanceName,token:Z.evolutionApi.token,phone:C,message:$})},Tr=async(C,$,W)=>{var ne;const B=Z.evolutionApi;if(!(B!=null&&B.globalEnabled)||!B.settings)return;const ee=B.settings;if(!((ne=ee[W])!=null&&ne.enabled))return;const Y=ee[W];if("notifyClient"in Y&&Y.notifyClient&&await yn(C.client.phone,$),Y.notifySeller&&C.sellerId){const ce=o.find(pe=>pe.id===C.sellerId);ce!=null&&ce.phone&&await yn(ce.phone,`[NOTIFICAO VENDEDOR]
${$}`)}Y.notifyManager&&Z.phone&&await yn(Z.phone,`[GESTO]
${$}`)},ya=async(C,$,W)=>{var pe;if(!Z.whatsappClientTemplates||!((pe=Z.evolutionApi)!=null&&pe.instanceUrl))return;const{sendClientNotification:ee,addWhatsAppLog:Y}=await ud(async()=>{const{sendClientNotification:Ce,addWhatsAppLog:We}=await import("./communicationService-C1eVLKVU.js");return{sendClientNotification:Ce,addWhatsAppLog:We}},__vite__mapDeps([0,1])),ne={nomeCliente:C.client.name,vendedor:C.sellerName||"",etapa:$,prazo:"30",...W||{}},{log:ce}=await ee($,C.client.phone,C.client.name,ne,Z);if(ce.phone){const Ce=Y(Z.whatsappLogs||[],ce);Ze({...Z,whatsappLogs:Ce})}},wa=async(C,$)=>{const W=`Ol ${C.client.name}, seu projeto *${C.environments.map(B=>B.name).join(", ")}* mudou de status para: *${$}*. 

Acompanhe o progresso com a gente! 
*${Z.name}*`;await Tr(C,W,"stageChange")},V=async C=>{var W,B,ee;if(!((W=Z.evolutionApi)!=null&&W.globalEnabled)||!((B=Z.evolutionApi)!=null&&B.instanceUrl)||!((ee=Z.evolutionApi)!=null&&ee.instanceName)||!Z.phone)return;const $=` *Novo Lead Cadastrado*

 Nome: ${C.name}
 Telefone: ${C.phone}
 Origem: ${C.origin||"No informado"}

Acesse o sistema para mais detalhes.`;await ud(async()=>{const{EvolutionApi:Y}=await import("./evolutionApi-BtEDgQmG.js");return{EvolutionApi:Y}},[]).then(({EvolutionApi:Y})=>{Y.sendText({instanceUrl:Z.evolutionApi.instanceUrl,instanceName:Z.evolutionApi.instanceName,token:Z.evolutionApi.token,phone:Z.phone,message:$})})};return D.useEffect(()=>{if(typeof window>"u")return;const C=async()=>{var Y;if(!((Y=Z.evolutionApi)!=null&&Y.instanceUrl)||!Z.evolutionApi.token)return;const ee=new Date;for(const ne of d){if(ne.slaNotificationSent||["9.0","9.1"].includes(ne.phase))continue;const ce=p[ne.phase];if(!ce||!ce.sla)continue;const pe=new Date(ne.lastUpdated),Ce=ce.sla*24*60*60*1e3,We=new Date(pe.getTime()+Ce),Ye=We.getTime()-ee.getTime();if(ee>We&&!ne.slaNotificationSent){console.log(`SLA Breach detected for Batch ${ne.name} (Project ${ne.projectId}) in step ${ce.label}`);const vt=c.find(cr=>cr.id===ne.projectId);if(!vt)continue;const wn=` *Alerta de Atraso (SLA)*

O projeto *${vt.client.name}* - *${ne.name}* est atrasado na etapa: *${ce.label}*.

Prazo era: ${We.toLocaleDateString()}
Status: ATRASADO`;await $(ne,vt,ce,wn);const Cr={slaNotificationSent:!0};n&&Le?F("batches",ne.id,Cr):f(cr=>cr.map(_n=>_n.id===ne.id?{..._n,...Cr}:_n))}else if(Ye>0&&Ye<24*60*60*1e3&&!ne.slaPreventiveSent){const vt=c.find(cr=>cr.id===ne.projectId);if(!vt)continue;const wn=` *Alerta Preventivo (SLA)*

O projeto *${vt.client.name}* vencer em menos de 24h na etapa: *${ce.label}*.

Prazo: ${We.toLocaleString()}`;await $(ne,vt,ce,wn);const Cr={slaPreventiveSent:!0};n&&Le?F("batches",ne.id,Cr):f(cr=>cr.map(_n=>_n.id===ne.id?{..._n,...Cr}:_n))}}},$=async(ee,Y,ne,ce)=>{const pe=Z.evolutionApi;if(!(pe!=null&&pe.globalEnabled)||!pe.settings.slaAlert.enabled)return;let Ce=[];if(ne.ownerRole==="Vendedor"&&Y.sellerId&&pe.settings.slaAlert.notifySeller){const Ye=o.find(vt=>vt.id===Y.sellerId);Ye&&Ce.push(Ye)}if(pe.settings.slaAlert.notifyManager){const Ye=o.filter(vt=>vt.storeId===ee.storeId&&["Admin","Proprietario","Gerente"].includes(vt.role));Ce=[...Ce,...Ye]}const We=Ce.filter((Ye,vt,wn)=>vt===wn.findIndex(Cr=>Cr.id===Ye.id));for(const Ye of We)Ye.phone&&await yn(Ye.phone,ce);Z.phone&&pe.settings.slaAlert.notifyManager&&await yn(Z.phone,`[GESTO-SLA]
${ce}`)},W=setInterval(C,60*60*1e3),B=setTimeout(C,5e3);return()=>{clearInterval(W),clearTimeout(B)}},[d,c,o,p,Z,n]),i.jsx(uD.Provider,{value:{currentUser:e,currentStore:O,users:K,stores:a,allUsers:o,projects:X,batches:se,workflowConfig:p,workflowOrder:v,permissions:_,currentProjectId:G,origins:g,assistanceTickets:Q,companySettings:Z,assistanceWorkflow:E,login:de,createStore:Ge,updateStore:Me,logout:me,toggleStoreStatus:ot,addUser:Be,updateUser:xe,deleteUser:ve,updatePermissions:be,updateOrigins:le,updateCompanySettings:Ze,addWorkflowStep:ie,updateWorkflowStep:Pe,deleteWorkflowStep:Ae,reorderWorkflowSteps:Ee,addAssistanceStep:Oe,updateAssistanceStep:_e,deleteAssistanceStep:Ke,reorderAssistanceSteps:je,addProject:ht,deleteProject:pt,advanceBatch:or,moveBatchToStep:Br,markProjectAsLost:wr,reactivateProject:Nt,isLastStep:It,splitBatch:Yt,getProjectById:tt,addNote:Fe,updateWorkflowSla:Ot,setCurrentProjectId:U,updateEnvironmentStatus:er,requestFactoryPart:Ne,updateEnvironmentDetails:Bt,addEnvironment:bn,removeEnvironment:zr,updateClientData:re,updateProjectBriefing:$e,formalizeContract:z,updateProjectSeller:q,updateProjectPostAssembly:Se,updateProjectPostAssemblyItems:Ue,addAssistanceTicket:st,updateAssistanceTicket:it,deleteAssistanceTicket:lr,canUserAdvanceStep:Zt,canUserViewStage:he,canUserEditAssistance:Vr,canUserDeleteAssistance:hr,canUserViewAssembly:Fr,canUserEditAssembly:bt,canUserViewPostAssembly:ir,canUserEditPostAssembly:en,canUserDeletePostAssembly:Ur,canUserEditClient:pr,canUserDeleteClient:Er,canUserManageUsers:mr,saveStoreConfig:R,resetStoreDefaults:Cn,getBranchingOptions:qr,assemblyTeams:T,updateBatchAssemblySchedule:tr,saveAssemblyTeams:Wr},children:t})},yr=()=>{const t=D.useContext(uD);if(!t)throw new Error("useProjects must be used within a ProjectProvider");return t},aB=({isOpen:t,onClose:e})=>t?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-slate-900/20 backdrop-blur-[1px] z-40 transition-opacity animate-fade-in",onClick:e,"aria-hidden":"true"}),i.jsxs("aside",{className:"absolute top-0 right-0 h-full w-full max-w-md bg-white dark:bg-slate-900 shadow-2xl z-50 flex flex-col transform transition-transform duration-300 ease-in-out border-l border-slate-200 dark:border-slate-800 animate-slide-in-right",children:[i.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 dark:border-slate-800 flex flex-col gap-1 bg-white dark:bg-slate-900 z-10",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 text-primary dark:text-blue-400",children:[i.jsx("span",{className:"material-symbols-outlined text-xl",children:"history"}),i.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Histrico de Auditoria"})]}),i.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white leading-tight mt-1",children:"Projeto - Res. Jardins"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Timeline completa de atividades e alteraes."})]}),i.jsx("div",{className:"px-6 py-4 bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-800",children:i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[20px]",children:"search"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2.5 border-none rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm font-medium transition-all",placeholder:"Filtrar eventos por tipo ou usurio..."})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar px-6 py-6 bg-white dark:bg-slate-900",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-[19px] top-2 bottom-4 w-[2px] bg-slate-100 dark:bg-slate-800"}),i.jsxs("div",{className:"space-y-8 relative",children:[i.jsxs("div",{className:"group relative flex gap-4",children:[i.jsx("div",{className:"flex flex-col items-center",children:i.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-50 dark:bg-blue-900/20 border-2 border-blue-100 dark:border-blue-800 text-primary dark:text-blue-400 flex items-center justify-center z-10 shadow-sm group-hover:scale-110 transition-transform duration-200 bg-white dark:bg-slate-900",children:i.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"edit_note"})})}),i.jsxs("div",{className:"flex-1 pt-1 pb-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"text-xs font-semibold text-primary dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 rounded-full",children:"Edio"}),i.jsx("span",{className:"text-xs text-slate-400 font-medium whitespace-nowrap",children:"18 Out  10:30"})]}),i.jsx("h3",{className:"text-slate-900 dark:text-white font-bold text-base leading-snug mb-1",children:"Vendedor alterou prazo da etapa"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-[10px] font-bold text-slate-600 dark:text-slate-300",children:"CS"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Carlos Silva ",i.jsx("span",{className:"text-slate-300 mx-1",children:""})," ",i.jsx("span",{className:"italic text-xs",children:"Vendas"})]})]}),i.jsxs("div",{className:"mt-3 bg-slate-50 dark:bg-slate-800/50 rounded p-3 text-xs text-slate-600 dark:text-slate-400 border border-slate-100 dark:border-slate-800",children:[i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Alterao:"})," Prazo final movido de ",i.jsx("span",{className:"line-through decoration-slate-400 decoration-2",children:"20/Out"})," para ",i.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-bold",children:"25/Out"}),"."]})]})]}),i.jsxs("div",{className:"group relative flex gap-4",children:[i.jsx("div",{className:"flex flex-col items-center",children:i.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-100 dark:border-amber-800 text-amber-600 dark:text-amber-400 flex items-center justify-center z-10 shadow-sm group-hover:scale-110 transition-transform duration-200 bg-white dark:bg-slate-900",children:i.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"location_on"})})}),i.jsxs("div",{className:"flex-1 pt-1 pb-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"text-xs font-semibold text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/30 px-2 py-0.5 rounded-full",children:"Visita Tcnica"}),i.jsx("span",{className:"text-xs text-slate-400 font-medium whitespace-nowrap",children:"15 Out  09:00"})]}),i.jsx("h3",{className:"text-slate-900 dark:text-white font-bold text-base leading-snug mb-1",children:"Medidor realizou visita"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-100 dark:bg-amber-800 flex items-center justify-center text-[10px] font-bold text-amber-700 dark:text-amber-300",children:"RS"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Roberto Santos ",i.jsx("span",{className:"text-slate-300 mx-1",children:""})," ",i.jsx("span",{className:"italic text-xs",children:"Medio"})]})]}),i.jsxs("div",{className:"mt-3 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700 relative h-32 w-full group/map cursor-pointer bg-slate-100 dark:bg-slate-800",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400",children:i.jsx("span",{className:"material-symbols-outlined text-4xl opacity-20",children:"map"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-2",children:i.jsxs("p",{className:"text-white text-xs font-medium flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"near_me"})," Rua das Flores, 123"]})})]})]})]}),i.jsxs("div",{className:"group relative flex gap-4",children:[i.jsx("div",{className:"flex flex-col items-center",children:i.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-100 dark:border-emerald-800 text-emerald-600 dark:text-emerald-400 flex items-center justify-center z-10 shadow-sm group-hover:scale-110 transition-transform duration-200 bg-white dark:bg-slate-900",children:i.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"})})}),i.jsxs("div",{className:"flex-1 pt-1 pb-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"text-xs font-semibold text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-900/30 px-2 py-0.5 rounded-full",children:"Aprovao"}),i.jsx("span",{className:"text-xs text-slate-400 font-medium whitespace-nowrap",children:"12 Out  14:00"})]}),i.jsx("h3",{className:"text-slate-900 dark:text-white font-bold text-base leading-snug mb-1",children:"Liberador aprovou Executivo"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[i.jsx("div",{className:"w-5 h-5 rounded-full bg-emerald-100 dark:bg-emerald-800 flex items-center justify-center text-[10px] font-bold text-emerald-700 dark:text-emerald-300",children:"AC"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Ana Costa ",i.jsx("span",{className:"text-slate-300 mx-1",children:""})," ",i.jsx("span",{className:"italic text-xs",children:"Gerncia"})]})]})]})]})]})]})}),i.jsx("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 bg-slate-50/80 dark:bg-slate-900/80 backdrop-blur-sm z-10",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{className:"flex-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 font-bold py-2.5 px-4 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-sm",children:"Exportar PDF"}),i.jsx("button",{onClick:e,className:"flex-1 bg-primary text-white font-bold py-2.5 px-4 rounded-lg hover:bg-primary-600 transition-colors shadow-lg shadow-primary/20 text-sm",children:"Fechar Histrico"})]})})]})]}):null,dD=({isOpen:t,onClose:e,batchId:r})=>{const{batches:n,getProjectById:a,splitBatch:s,workflowConfig:o,workflowOrder:l,advanceBatch:c}=yr(),[u,d]=D.useState([]),f=D.useMemo(()=>n.find(g=>g.id===r),[n,r]),p=D.useMemo(()=>f?a(f.projectId):void 0,[f,a]),m=D.useMemo(()=>!p||!f?[]:p.environments.filter(g=>(f.environmentIds||[]).includes(g.id)),[p,f]),v=D.useMemo(()=>f?o[f.phase]:null,[f,o]),x=D.useMemo(()=>{if(!f)return null;const g=l.indexOf(f.phase),w=l[g+1];return o[w]||null},[f,l,o]),_=g=>{d(w=>w.includes(g)?w.filter(E=>E!==g):[...w,g])},y=async()=>{if(u.length!==0){if(u.length===m.length)await c(r);else{const g=s(r,u);g&&await c(g)}e(),d([])}};return!t||!f||!p?null:i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-5xl h-[85vh] rounded-xl shadow-2xl flex flex-col overflow-hidden animate-scale-up",onClick:g=>g.stopPropagation(),children:[i.jsxs("div",{className:"px-8 py-5 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between bg-white dark:bg-slate-900 shrink-0",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"px-2.5 py-0.5 rounded-full bg-blue-50 dark:bg-blue-900/30 text-primary dark:text-blue-400 text-xs font-bold uppercase tracking-wide",children:["Etapa ",v==null?void 0:v.id,"  ",(x==null?void 0:x.id)||"?"]}),i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Criar Lote de Produo (",(x==null?void 0:x.label)||"Avanar",")"]})]}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Cliente: ",i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:p.client.name}),"  Selecione os ambientes para avanar para a prxima etapa."]})]}),i.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 rounded-full hover:bg-slate-50 dark:hover:bg-slate-800",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"flex-1 overflow-hidden p-8 bg-slate-50 dark:bg-[#101922] grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] gap-6",children:[i.jsxs("div",{className:"flex flex-col bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden h-full",children:[i.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 flex justify-between items-center",children:[i.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"inventory_2"}),"Ambientes na Etapa ",v==null?void 0:v.label]}),i.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-semibold px-2 py-0.5 rounded-full",children:m.length})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-2",children:m.map(g=>i.jsxs("label",{className:`group flex items-start gap-3 p-3 rounded-lg border transition-all cursor-pointer select-none ${u.includes(g.id)?"border-primary/50 bg-primary/5":"border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[i.jsx("div",{className:"pt-0.5",children:i.jsx("input",{type:"checkbox",checked:u.includes(g.id),onChange:()=>_(g.id),className:"w-5 h-5 rounded border-slate-300 dark:border-slate-600 text-primary focus:ring-primary/20 bg-white dark:bg-slate-800"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"font-semibold text-slate-800 dark:text-white",children:g.name}),i.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded border ${g.urgency_level==="Alta"?"bg-rose-50 text-rose-600 border-rose-100":"bg-slate-100 text-slate-500 border-slate-200"}`,children:g.urgency_level})]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[g.area_sqm,"m"]})]})]},g.id))})]}),i.jsx("div",{className:"hidden md:flex flex-col justify-center items-center gap-4 text-slate-300",children:i.jsx("span",{className:"material-symbols-outlined text-3xl",children:"arrow_forward"})}),i.jsxs("div",{className:"flex flex-col bg-white dark:bg-slate-900 rounded-lg border-2 border-primary/10 shadow-sm overflow-hidden h-full relative",children:[i.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-primary"}),i.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 flex justify-between items-center",children:[i.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"check_circle"}),"Novo Lote (Vai p/ ",(x==null?void 0:x.label)||"...",")"]}),i.jsxs("span",{className:"bg-primary/10 text-primary text-xs font-bold px-2 py-0.5 rounded-full",children:[u.length," Selecionados"]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 space-y-2 bg-slate-50/30 dark:bg-slate-900/30",children:u.map(g=>{const w=m.find(E=>E.id===g);return w?i.jsxs("div",{className:"group relative flex items-start gap-3 p-3 rounded-lg border border-primary/20 bg-white dark:bg-slate-800 shadow-sm transition-all select-none animate-fade-in",children:[i.jsx("div",{className:"pt-0.5",children:i.jsx("div",{className:"w-5 h-5 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:i.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"check"})})}),i.jsx("div",{className:"flex-1",children:i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:w.name})}),i.jsx("button",{onClick:()=>_(g),className:"text-slate-300 hover:text-red-500",children:i.jsx("span",{className:"material-symbols-outlined",children:"do_not_disturb_on"})})]},g):null})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 border-t border-slate-100 dark:border-slate-800 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"material-symbols-outlined text-lg text-slate-400",children:"info"}),i.jsxs("p",{children:["Ambientes no selecionados permanecero na fase de ",i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:v==null?void 0:v.label}),"."]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:e,className:"px-6 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold text-sm hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-800 transition-colors",children:"Cancelar"}),i.jsxs("button",{onClick:y,disabled:u.length===0,className:"px-6 py-2.5 rounded-lg bg-primary text-white font-bold text-sm shadow-md shadow-primary/20 hover:bg-primary/90 transition-all flex items-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx("span",{children:"Criar Lote e Avanar"}),i.jsx("span",{className:"material-symbols-outlined text-lg group-hover:translate-x-0.5 transition-transform",children:"arrow_forward"})]})]})]})]})})},fD=({isOpen:t,onClose:e,batchName:r,currentStep:n,options:a,onSelect:s})=>t?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] w-full max-w-lg rounded-2xl shadow-xl overflow-hidden animate-slide-up",children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Deciso de Fluxo"}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Defina o prximo passo para: ",i.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-300",children:r})]})]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-400 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800",children:[i.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Etapa Atual"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-2 py-0.5 rounded bg-primary/10 text-primary text-xs font-bold",children:n.id}),i.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:n.label})]})]}),i.jsx("div",{className:"grid grid-cols-1 gap-3",children:a.map(o=>i.jsxs("button",{onClick:()=>s(o.targetStepId),className:`flex items-center gap-4 p-4 rounded-xl border-2 border-transparent bg-slate-50 dark:bg-slate-800/50 hover:border-${o.color}-500/50 hover:bg-${o.color}-50 dark:hover:bg-${o.color}-900/10 transition-all group text-left`,children:[i.jsx("div",{className:`w-12 h-12 rounded-full bg-${o.color}-100 dark:bg-${o.color}-900/30 flex items-center justify-center shrink-0`,children:i.jsx("span",{className:`material-symbols-outlined text-${o.color}-600 dark:text-${o.color}-400`,children:o.icon})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white group-hover:text-slate-900",children:o.label}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:o.description})]}),i.jsx("span",{className:"material-symbols-outlined text-slate-300 group-hover:text-primary transition-colors",children:"chevron_right"})]},o.targetStepId))})]}),i.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-100 dark:border-slate-800 flex justify-end",children:i.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 transition-colors",children:"Cancelar"})})]})}):null,hD=({isOpen:t,onClose:e,onConfirm:r,project:n})=>{const[a,s]=D.useState(()=>Object.fromEntries(n.environments.map(p=>[p.id,p.estimated_value||0]))),[o,l]=D.useState(!1);if(!t)return null;const c=Object.values(a).reduce((p,m)=>p+(Number(m)||0),0),u=new Set(n.environments.filter(p=>!a[p.id]||a[p.id]<=0).map(p=>p.id)),d=u.size===0,f=()=>{l(!0),d&&r(a)};return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",onClick:e,children:i.jsxs("div",{className:"bg-white dark:bg-[#1e2936] w-full max-w-2xl flex flex-col max-h-[90dvh] rounded-2xl shadow-2xl overflow-hidden animate-scale-up",onClick:p=>p.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center shrink-0",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"request_quote"}),i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Valores do Oramento"})]}),i.jsx("p",{className:"text-sm text-slate-500",children:n.client.name})]}),i.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:"Cancelar",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"px-6 py-3 bg-primary/5 border-b border-primary/10 flex items-start gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-primary text-sm shrink-0 mt-0.5",children:"info"}),i.jsxs("p",{className:"text-xs text-primary font-medium",children:["Preencha o valor estimado de ",i.jsx("strong",{children:"todos"})," os ambientes para concluir esta etapa. Cada confirmao registra uma nova verso (V1, V2...) e preserva o histrico completo."]})]}),o&&!d&&i.jsxs("div",{className:"px-6 py-2.5 bg-rose-50 dark:bg-rose-900/20 border-b border-rose-100 dark:border-rose-800 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-rose-500 text-sm",children:"warning"}),i.jsx("p",{className:"text-xs text-rose-600 dark:text-rose-400 font-bold",children:"Todos os ambientes devem ter um valor maior que zero."})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-3",children:n.environments.map(p=>{const v=(p.version||0)+1,x=o&&u.has(p.id);return i.jsx("div",{className:`rounded-xl p-4 border transition-colors ${x?"bg-rose-50 dark:bg-rose-900/10 border-rose-300 dark:border-rose-700":"bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700"}`,children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5 flex-wrap",children:[i.jsx("span",{className:"font-bold text-slate-800 dark:text-white truncate",children:p.name}),i.jsxs("span",{className:"text-[11px] px-2 py-0.5 rounded-full bg-primary/10 text-primary font-bold shrink-0",children:[" V",v]})]}),p.valueHistory&&p.valueHistory.length>0?i.jsx("div",{className:"flex gap-1 flex-wrap",children:p.valueHistory.map(_=>i.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-200 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-mono",children:["V",_.version,": R$",_.value.toLocaleString("pt-BR")]},_.version))}):i.jsx("span",{className:"text-[11px] text-slate-400 italic",children:"Sem histrico  ser V1"})]}),i.jsxs("div",{className:"flex flex-col items-end gap-1 shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"text-sm font-bold text-slate-500",children:"R$"}),i.jsx("input",{type:"number",min:"1",step:"100",value:a[p.id]||"",onChange:_=>s(y=>({...y,[p.id]:Number(_.target.value)})),className:`w-36 border rounded-lg px-3 py-2 text-sm font-mono text-slate-800 dark:text-slate-200 bg-white dark:bg-slate-800 focus:ring-1 outline-none transition-colors ${x?"border-rose-500 focus:border-rose-500 focus:ring-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-200 dark:border-slate-600 focus:border-primary focus:ring-primary"}`,placeholder:"0,00"})]}),x&&i.jsx("p",{className:"text-[10px] text-rose-500 font-bold",children:"Valor obrigatrio"})]})]})},p.id)})}),i.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-[#1a2632] flex items-center justify-between shrink-0",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:"Total do Oramento"}),i.jsxs("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400 font-mono",children:["R$ ",c.toLocaleString("pt-BR")]})]}),i.jsxs("button",{onClick:f,className:"px-6 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary-600 shadow-lg shadow-primary/20 transition-colors flex items-center gap-2 disabled:opacity-50",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Confirmar Alteraes"]})]})]})})},pD=D.createContext(void 0),sB=({children:t})=>{const[e,r]=D.useState([]),n=D.useCallback((a,s="success")=>{const o=Date.now();r(l=>[...l,{id:o,message:a,type:s}]),setTimeout(()=>{r(l=>l.filter(c=>c.id!==o))},3e3)},[]);return i.jsxs(pD.Provider,{value:{showToast:n},children:[t,i.jsx("div",{className:"fixed bottom-20 md:bottom-6 right-4 md:right-6 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(a=>i.jsxs("div",{className:`
                            flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl text-white text-sm font-semibold
                            pointer-events-auto animate-scale-up
                            ${a.type==="success"?"bg-emerald-600":a.type==="error"?"bg-rose-600":"bg-sky-600"}
                        `,children:[i.jsx("span",{className:"material-symbols-outlined text-[18px]",children:a.type==="success"?"check_circle":a.type==="error"?"error":"info"}),a.message]},a.id))})]})},iB=()=>{const t=D.useContext(pD);if(!t)throw new Error("useToast deve ser usado dentro de <ToastProvider>");return t},oB=[{id:1,title:"1. Pr-Venda"},{id:2,title:"2. Venda / Projeto"},{id:3,title:"3. Medio"},{id:4,title:"4. Executivo"},{id:5,title:"5. Fabricao"},{id:6,title:"6. Entrega"},{id:7,title:"7. Montagem"},{id:8,title:"8. Ps-Montagem"},{id:90,title:"Concludo"},{id:91,title:"Perdido"}],lB=()=>{var Ze;const[t,e]=D.useState(!1),[r,n]=D.useState(!1),[a,s]=D.useState(4),[o,l]=D.useState(null),[c,u]=D.useState(null),[d,f]=D.useState(null),[p,m]=D.useState(null),[v,x]=D.useState(!1),[_,y]=D.useState(!1),[g,w]=D.useState(""),[E,N]=D.useState(""),[k,S]=D.useState(!1),{batches:b,projects:A,workflowConfig:T,workflowOrder:I,setCurrentProjectId:O,canUserViewStage:R,splitBatch:G,advanceBatch:U,moveBatchToStep:Q,canUserAdvanceStep:te,getBranchingOptions:K,currentUser:X,updateEnvironmentDetails:se,companySettings:Z}=yr(),{showToast:F}=iB(),de=(ie,Pe,Ae)=>{O(Ae)},me=async ie=>{d&&(await Q(d.batch.id,ie),f(null))},Ge=async(ie,Pe)=>{var Ee;if(ie.stopPropagation(),Pe.phase==="2.3"){const Oe=A.find(_e=>_e.id===Pe.projectId);if(Oe){m({batch:Pe,project:Oe});return}}if(K(Pe.phase).length>0)f({batch:Pe,step:T[Pe.phase]});else{await U(Pe.id);const Oe=((Ee=T[Pe.phase])==null?void 0:Ee.label)||"Etapa";F(` ${Oe} concluda`)}},Me=ie=>{if(!p)return;const{batch:Pe,project:Ae}=p;for(const[Ee,Oe]of Object.entries(ie)){const _e=Ae.environments.find(tt=>tt.id===Ee);if(!_e||!Oe||Oe<=0)continue;const Ke=(_e.version||0)+1,je={version:Ke,value:Oe,date:new Date().toISOString()};se(Ae.id,Ee,{estimated_value:Oe,version:Ke,valueHistory:[..._e.valueHistory||[],je]})}m(null),f({batch:Pe,step:T[Pe.phase]})},ot=D.useMemo(()=>{const ie=new Set;return A.forEach(Pe=>{Pe.sellerName&&ie.add(Pe.sellerName)}),Array.from(ie).sort()},[A]),Be=D.useMemo(()=>oB.filter(ie=>{const Pe=ie.id>=90?9:ie.id;return!(!R(Pe)||ie.id===90&&!v||ie.id===91&&!_)}),[R,v,_]);D.useEffect(()=>{Be.length>0&&a&&(Be.some(Pe=>Pe.id===a)||s(Be[0].id))},[Be]);const xe=D.useMemo(()=>Be.map(ie=>{let Pe=[];ie.id===90?Pe=b.filter(Ee=>Ee.phase==="9.0"):ie.id===91?Pe=b.filter(Ee=>Ee.phase==="9.1"):Pe=b.filter(Ee=>{var _e;return((_e=T[Ee.phase])==null?void 0:_e.stage)===ie.id});let Ae=ie.id===a&&c?Pe.filter(Ee=>Ee.phase===c):Pe;if(g.trim()){const Ee=g.toLowerCase();Ae=Ae.filter(Oe=>{var Ke;const _e=A.find(je=>je.id===Oe.projectId);return(_e==null?void 0:_e.client.name.toLowerCase().includes(Ee))||((Ke=Oe.name)==null?void 0:Ke.toLowerCase().includes(Ee))})}return E&&(Ae=Ae.filter(Ee=>{const Oe=A.find(_e=>_e.id===Ee.projectId);return(Oe==null?void 0:Oe.sellerName)===E})),k&&X&&(Ae=Ae.filter(Ee=>te(Ee.phase))),{...ie,cards:Ae.map(Ee=>{var It,Zt;const Oe=A.find(he=>he.id===Ee.projectId),_e=T[Ee.phase],Ke=new Date,je=new Date(Ee.lastUpdated),tt=ts(je,_e.sla,Z==null?void 0:Z.holidays),ht=zo(Ke,tt,Z==null?void 0:Z.holidays);let pt="No Prazo",Fe="emerald";return ht<0?(pt="Atrasado",Fe="rose"):ht<=2&&ht>=0&&(pt="Ateno",Fe="orange"),{id:Ee.id,title:Ee.name,subtitle:((It=Oe==null?void 0:Oe.client)==null?void 0:It.name)||"Projeto Desconhecido",clientName:(Oe==null?void 0:Oe.client.name)||"Cliente",stepLabel:(_e==null?void 0:_e.label)||"Desconhecido",owner:(_e==null?void 0:_e.ownerRole)||"N/A",sellerName:Oe==null?void 0:Oe.sellerName,slaStatus:pt,slaColor:Fe,daysDiff:ht,date:Ee.lastUpdated,environmentCount:((Zt=Ee.environmentIds)==null?void 0:Zt.length)||0,phase:Ee.phase,projectId:Ee.projectId}})}}),[Be,b,A,T,c,a,g,E,k,X,te]),ve=D.useMemo(()=>a?a===90?[T["9.0"]].filter(Boolean):a===91?[T["9.1"]].filter(Boolean):I.map(ie=>T[ie]).filter(ie=>!!ie&&ie.stage===a):[],[a,T,I]),[be,le]=D.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex h-full overflow-hidden",children:[be&&i.jsx("div",{className:"md:hidden fixed inset-0 z-30 bg-black/40",onClick:()=>le(!1)}),i.jsxs("div",{className:`
        fixed md:relative inset-y-0 left-0 z-40 md:z-10
        w-64 bg-white dark:bg-[#1a2632] border-r border-slate-200 dark:border-slate-800 flex flex-col shrink-0
        transform transition-transform duration-200 ease-out
        ${be?"translate-x-0":"-translate-x-full md:translate-x-0"}
      `,children:[i.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Etapa Atual"}),i.jsx("h2",{className:"text-lg md:text-xl font-bold text-slate-800 dark:text-white",children:((Ze=Be.find(ie=>ie.id===a))==null?void 0:Ze.title)||"Geral"})]}),i.jsx("button",{className:"md:hidden text-slate-400",onClick:()=>le(!1),children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[i.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-slate-400",children:"Fluxo de Trabalho"}),i.jsx("button",{onClick:()=>{u(null),le(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c?"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800":"bg-primary/10 text-primary"}`,children:"Todos os Itens"}),ve.sort((ie,Pe)=>ie.id.localeCompare(Pe.id)).map(ie=>i.jsx("button",{onClick:()=>{u(ie.id),le(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex justify-between items-center group ${c===ie.id?"bg-primary/10 text-primary font-bold":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800"}`,children:i.jsxs("span",{children:[ie.id," ",ie.label]})},ie.id))]}),i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-[#15202b]",children:i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," No Prazo",i.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500 ml-2"})," Atrasado"]})})]}),i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-slate-50 dark:bg-[#101922]",children:[i.jsxs("div",{className:"flex flex-col border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2 px-3 md:px-4 py-2 flex-wrap",children:[i.jsx("button",{onClick:()=>le(!0),className:"md:hidden flex items-center gap-1 text-sm font-bold text-slate-600 hover:text-primary transition-colors shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:"tune"})}),i.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-800 rounded-lg px-3 py-1.5 flex-1 min-w-[160px] max-w-xs",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[16px]",children:"search"}),i.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:g,onChange:ie=>w(ie.target.value),className:"bg-transparent text-xs w-full focus:ring-0 border-none p-0 text-slate-700 dark:text-slate-200 outline-none placeholder-slate-400"}),g&&i.jsx("button",{onClick:()=>w(""),className:"text-slate-400 hover:text-slate-600",children:i.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-slate-100 dark:bg-slate-800 rounded-lg px-3 py-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[16px]",children:"sell"}),i.jsxs("select",{value:E,onChange:ie=>N(ie.target.value),className:"bg-transparent text-xs text-slate-700 dark:text-slate-200 border-none focus:ring-0 p-0 outline-none cursor-pointer",children:[i.jsx("option",{value:"",children:"Todos os vendedores"}),ot.map(ie=>i.jsx("option",{value:ie,children:ie},ie))]})]}),i.jsxs("button",{onClick:()=>S(ie=>!ie),className:`hidden md:flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${k?"bg-primary text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-primary/10 hover:text-primary"}`,children:[i.jsx("span",{className:"material-symbols-outlined text-[15px]",children:"person_check"}),"Minhas tarefas"]}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[i.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[i.jsx("input",{type:"checkbox",checked:!v,onChange:ie=>x(!ie.target.checked),className:"rounded text-emerald-600 focus:ring-emerald-500 border-slate-300 dark:border-slate-600"}),i.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"Ocultar Concludos"})]}),i.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[i.jsx("input",{type:"checkbox",checked:!_,onChange:ie=>y(!ie.target.checked),className:"rounded text-slate-600 focus:ring-slate-500 border-slate-300 dark:border-slate-600"}),i.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"Ocultar Perdidos"})]})]}),i.jsxs("span",{className:"text-xs text-slate-400 shrink-0",children:[b.length," lotes"]}),i.jsx("button",{onClick:()=>e(!0),className:"text-slate-500 hover:text-primary transition-colors shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-xl",children:"history"})})]}),i.jsxs("div",{className:"md:hidden flex items-center gap-3 px-3 py-1.5 border-t border-slate-100 dark:border-slate-800",children:[i.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[i.jsx("input",{type:"checkbox",checked:!v,onChange:ie=>x(!ie.target.checked),className:"rounded text-emerald-600 focus:ring-emerald-500 border-slate-300 dark:border-slate-600"}),i.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"Ocultar Concludos"})]}),i.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer select-none",children:[i.jsx("input",{type:"checkbox",checked:!_,onChange:ie=>y(!ie.target.checked),className:"rounded text-slate-600 focus:ring-slate-500 border-slate-300 dark:border-slate-600"}),i.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"Ocultar Perdidos"})]}),i.jsxs("button",{onClick:()=>S(ie=>!ie),className:`flex items-center gap-1 px-2 py-1 rounded text-xs font-bold ${k?"bg-primary text-white":"bg-slate-100 dark:bg-slate-800 text-slate-600"}`,children:[i.jsx("span",{className:"material-symbols-outlined text-[13px]",children:"person_check"}),"Minhas"]})]})]}),i.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden p-3 md:p-6 custom-scrollbar",children:i.jsx("div",{className:"flex h-full gap-2 md:gap-3 w-max",children:xe.map((ie,Pe)=>i.jsxs("div",{onClick:()=>{s(ie.id),u(null)},className:`flex flex-col w-60 md:w-72 h-full shrink-0 transition-opacity duration-300 ${a&&a!==ie.id?"opacity-60 hover:opacity-100":"opacity-100"} ${Pe<xe.length-1?"border-r border-slate-300 dark:border-slate-600 pr-2 md:pr-3":""}`,children:[i.jsxs("div",{className:`
                    flex items-center justify-between mb-3 px-3 py-2 rounded-lg cursor-pointer border
                    ${a===ie.id?"bg-white dark:bg-slate-800 shadow-sm ring-1 ring-slate-200 dark:ring-slate-700":""}
                    ${ie.id===90?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800":ie.id===91?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700":"border-transparent"}
                `,children:[i.jsx("h3",{className:`font-bold ${ie.id===90?"text-emerald-700 dark:text-emerald-400":ie.id===91?"text-slate-600 dark:text-slate-400":a===ie.id?"text-primary":"text-slate-700 dark:text-slate-200"}`,children:ie.title}),i.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${ie.id===90?"bg-emerald-200 dark:bg-emerald-800 text-emerald-800 dark:text-emerald-200":ie.id===91?"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300":"bg-slate-200 dark:bg-slate-700 text-slate-400"}`,children:ie.cards.length})]}),i.jsx("div",{className:`
                    flex-1 rounded-xl p-2.5 flex flex-col gap-2 overflow-y-auto custom-scrollbar border
                    ${a===ie.id?"bg-slate-100 dark:bg-[#1a2632] border-primary/20 dark:border-primary/30 shadow-[inset_0_0_20px_rgba(19,127,236,0.05)]":"bg-slate-100 dark:bg-[#111824] border-slate-300 dark:border-slate-700"}
                `,children:(()=>{const Ae=new Map;return ie.cards.forEach(Oe=>{const _e=Oe.stepLabel||"Sem Etapa";Ae.has(_e)||Ae.set(_e,[]),Ae.get(_e).push(Oe)}),Array.from(Ae.entries()).sort((Oe,_e)=>{var pt,Fe;const Ke=((pt=Oe[1][0])==null?void 0:pt.phase)||"",je=((Fe=_e[1][0])==null?void 0:Fe.phase)||"",tt=parseFloat(Ke),ht=parseFloat(je);return tt-ht}).map(([Oe,_e],Ke)=>i.jsxs("div",{className:"flex flex-col gap-2",children:[Ke>0&&i.jsx("div",{className:"h-px bg-slate-300 dark:bg-slate-600 my-1"}),i.jsxs("div",{className:"px-2 py-1.5 bg-slate-200/50 dark:bg-slate-700/50 rounded-lg flex items-center justify-between",children:[i.jsx("span",{className:"text-[9px] font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:Oe}),i.jsx("span",{className:"text-[8px] px-2 py-0.5 rounded-full bg-slate-300/70 dark:bg-slate-600/70 text-slate-700 dark:text-slate-200 font-semibold",children:_e.length})]}),_e.map(je=>{var tt;return i.jsxs("div",{onClick:ht=>{ht.stopPropagation(),de(je.id,je.phase,je.projectId)},className:`
                        bg-white dark:bg-[#1e2936] p-3 rounded-lg shadow-sm hover:shadow-md transition-all cursor-pointer group border border-slate-300 dark:border-slate-700 relative overflow-hidden
                        ${je.slaStatus==="Atrasado"?"border-l-4 border-l-rose-500":""}
                        ${je.slaStatus==="Perdido"?"opacity-70 grayscale":""}
                        ${je.slaStatus==="Concluido"?"border-l-4 border-l-emerald-500":""}
                        `,children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[i.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:je.subtitle}),je.slaStatus==="Perdido"?i.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-slate-200 text-slate-600",children:"PERDIDO"}):je.slaStatus==="Concluido"?i.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-emerald-100 text-emerald-700",children:"OK"}):i.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${je.daysDiff<0?"bg-rose-100 text-rose-700":je.daysDiff<2?"bg-orange-100 text-orange-700":"bg-emerald-100 text-emerald-700"}`,children:je.daysDiff>0?`+${je.daysDiff} dias`:`${je.daysDiff} dias`})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[15px]",children:"person"}),i.jsx("h4",{className:`text-[14.4px] font-extrabold leading-tight ${je.slaStatus==="Perdido"?"text-slate-500 line-through decoration-2 decoration-rose-500/50":"text-slate-900 dark:text-white"}`,children:je.clientName})]}),i.jsx("p",{className:"text-[11px] text-slate-500 dark:text-slate-400 font-medium mb-2 pl-[23px]",children:je.title}),i.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-slate-300 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 dark:bg-slate-700/50 px-2 py-1 rounded",children:[i.jsx("span",{className:"material-symbols-outlined text-[12px] text-slate-400",children:"sell"}),i.jsx("span",{className:"text-[10px] font-bold text-slate-600 dark:text-slate-300",children:je.sellerName})]}),i.jsxs("div",{className:"flex gap-1.5",children:[((tt=T[je.phase])==null?void 0:tt.stage)>=4&&je.phase!=="9.0"&&je.phase!=="9.1"?i.jsxs("button",{onClick:ht=>{ht.stopPropagation();const pt=b.find(Fe=>Fe.id===je.id);pt&&(l(pt.id),n(!0))},className:"flex items-center gap-1 px-2 py-1 text-[10px] font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 border border-blue-100 dark:border-blue-800 rounded transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"call_split"}),"Dividir"]}):i.jsx("div",{}),te(je.phase)&&i.jsxs("button",{onClick:ht=>{const pt=b.find(Fe=>Fe.id===je.id);pt&&Ge(ht,pt)},className:"flex items-center gap-1 px-3 py-1 text-[10px] font-bold text-white bg-primary hover:bg-primary-600 rounded shadow-sm transition-all active:scale-95",children:[i.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"done_all"}),"Concluir"]})]})]})]},je.id)})]},Oe))})()})]},ie.id))})})]})]}),i.jsx(aB,{isOpen:t,onClose:()=>e(!1)}),p&&i.jsx(hD,{isOpen:!0,onClose:()=>m(null),onConfirm:Me,project:p.project}),o&&i.jsx(dD,{isOpen:r,onClose:()=>{n(!1),l(null)},batchId:o}),d&&i.jsx(fD,{isOpen:!!d,onClose:()=>f(null),batchName:`Lote ${d.batch.id.substring(0,4)}`,currentStep:d.step,options:K(d.batch.phase),onSelect:me})]})},mD=t=>t.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1"),gD=t=>t.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),xD=t=>t.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{3})\d+?$/,"$1"),cB=t=>t.replace(/\D/g,"");async function vD(t){const e=t.replace(/\D/g,"");if(e.length!==8)throw new Error("CEP invlido. Digite 8 nmeros.");const r=new AbortController,n=setTimeout(()=>r.abort(),5e3);try{const a=await fetch(`https://viacep.com.br/ws/${e}/json/`,{signal:r.signal});if(clearTimeout(n),!a.ok)throw new Error(`Erro ao buscar CEP (HTTP ${a.status}).`);const s=await a.json();return s.erro?null:{street:s.logradouro||"",neighborhood:s.bairro||"",city:s.localidade||"",state:s.uf||""}}catch(a){throw clearTimeout(n),a.name==="AbortError"?new Error("Tempo de resposta excedido ao buscar CEP. Tente novamente."):a}}const uB=({onComplete:t})=>{const{addProject:e,currentUser:r,origins:n}=yr(),[a,s]=D.useState(1),[o,l]=D.useState({cep:"",street:"",number:"",complement:"",condominium:"",neighborhood:"",city:"",state:"",country:"Brasil"}),[c,u]=D.useState({name:"",email:"",phone:"",address:"",condominium:"",cpf:"",rg:"",cod_efinance:"",origin:n[0]||"Indicao",consultant_name:(r==null?void 0:r.name)||"",briefing_date:new Date().toISOString().split("T")[0],sellerId:(r==null?void 0:r.id)||"",property_type:"Reforma",payment_preference:" vista",project_has_architect_project:"No",property_location:"",property_area:0,profile_residents:"",profile_routine:"",profile_pains:"",time_move_in:"",time_measurement_ready:"",time_decision_expectation:"",architect_name:"",commissioned_specifier:"",budget_expectation:0}),[d,f]=D.useState([]),[p,m]=D.useState(""),v=(b,A)=>{let T=A;b==="phone"&&(T=mD(A)),b==="cpf"&&(T=gD(A)),b==="cod_efinance"&&(T=A.replace(/\D/g,"").slice(0,5)),u(I=>({...I,[b]:T}))},x=(b,A)=>{let T=A;b==="cep"&&(T=xD(A)),l(I=>({...I,[b]:T}))},[_,y]=D.useState(!1),g=async()=>{y(!0);try{const b=await vD(o.cep);b===null?alert("CEP no encontrado."):l(A=>({...A,street:b.street,neighborhood:b.neighborhood,city:b.city,state:b.state,country:"Brasil"}))}catch(b){console.error("Erro ao buscar CEP:",b),alert(b.message||"Erro ao buscar CEP. Tente novamente mais tarde.")}finally{y(!1)}},w=()=>{if(!p.trim())return;const b={id:crypto.randomUUID(),name:p.trim(),area_sqm:0,urgency_level:"Mdia",estimated_value:0,observations:"",status:"Pending"};f([...d,b]),m("")},E=()=>!c.name||!c.phone?(alert("Por favor, preencha Nome e WhatsApp."),!1):!o.street||!o.number||!o.neighborhood||!o.city||!o.state?(alert("Por favor, preencha todos os campos do endereo."),!1):!c.cod_efinance||c.cod_efinance.length!==5?(alert("O Cd. EFinance  obrigatrio e deve ter 5 dgitos numricos."),!1):!0,N=()=>c.property_type?!0:(alert("Por favor, selecione o tipo de imvel."),!1),k=()=>{if(a===1){if(!E())return;s(2)}else if(a===2){if(!N())return;s(3)}},S=async()=>{if(d.length===0){alert("Adicione pelo menos um ambiente.");return}const A=[o.street,o.number,o.complement,o.neighborhood,o.city,o.state,o.country,`CEP: ${o.cep}`].filter(Boolean).join(", "),T={...c,condominium:o.condominium,address:A};try{await e(T,d),alert("Cliente cadastrado com sucesso!"),t&&t()}catch(I){console.error(I),alert("Erro ao salvar cliente. Tente novamente.")}};return i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Novo Projeto"}),i.jsxs("div",{className:"flex items-center mb-8",children:[i.jsxs("div",{className:`flex items-center gap-2 ${a>=1?"text-primary":"text-slate-400"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${a>=1?"bg-primary text-white":"bg-slate-100 dark:bg-slate-800"}`,children:"1"}),i.jsx("span",{className:"text-sm font-bold",children:"Cliente"})]}),i.jsx("div",{className:"w-12 h-px bg-slate-200 dark:bg-slate-700 mx-2"}),i.jsxs("div",{className:`flex items-center gap-2 ${a>=2?"text-primary":"text-slate-400"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${a>=2?"bg-primary text-white":"bg-slate-100 dark:bg-slate-800"}`,children:"2"}),i.jsx("span",{className:"text-sm font-bold",children:"Briefing"})]}),i.jsx("div",{className:"w-12 h-px bg-slate-200 dark:bg-slate-700 mx-2"}),i.jsxs("div",{className:`flex items-center gap-2 ${a>=3?"text-primary":"text-slate-400"}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${a>=3?"bg-primary text-white":"bg-slate-100 dark:bg-slate-800"}`,children:"3"}),i.jsx("span",{className:"text-sm font-bold",children:"Ambientes"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 custom-scrollbar",children:i.jsxs("div",{className:"max-w-3xl mx-auto",children:[a===1&&i.jsxs("div",{className:"space-y-4 animate-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Cd. EFinance*"}),i.jsx("input",{type:"text",value:c.cod_efinance||"",onChange:b=>v("cod_efinance",b.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"00000",maxLength:5})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nome Completo*"}),i.jsx("input",{type:"text",value:c.name,onChange:b=>v("name",b.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"Ex: Ana Silva"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"WhatsApp*"}),i.jsx("input",{type:"text",value:c.phone,onChange:b=>v("phone",b.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"(00) 00000-0000"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Email"}),i.jsx("input",{type:"email",value:c.email,onChange:b=>v("email",b.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"cliente@email.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Origem"}),i.jsx("select",{value:c.origin,onChange:b=>v("origin",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary",children:n.map(b=>i.jsx("option",{value:b,children:b},b))})]})]}),i.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-100 mb-3",children:"Endereo"}),i.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[i.jsxs("div",{className:"col-span-12 md:col-span-4",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"CEP"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.cep,onChange:b=>x("cep",b.target.value),placeholder:"00000-000",onBlur:b=>{cB(b.target.value).length===8&&g()}}),i.jsx("button",{onClick:g,disabled:_,className:"px-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors flex items-center justify-center disabled:opacity-50",title:"Buscar CEP",children:_?i.jsx("span",{className:"material-symbols-outlined text-sm animate-spin",children:"sync"}):i.jsx("span",{className:"material-symbols-outlined text-sm",children:"search"})})]})]}),i.jsxs("div",{className:"col-span-12 md:col-span-6",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Endereo (Rua/Av)*"}),i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.street,onChange:b=>x("street",b.target.value),placeholder:"Ex: Av. Paulista"})]}),i.jsxs("div",{className:"col-span-12 md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nmero*"}),i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.number,onChange:b=>x("number",b.target.value),placeholder:"123"})]}),i.jsxs("div",{className:"col-span-12 md:col-span-4",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Complemento"}),i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.complement,onChange:b=>x("complement",b.target.value),placeholder:"Ex: Apto 101, Bloco B"})]}),i.jsxs("div",{className:"col-span-12 md:col-span-4",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nome do Condomnio"}),i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.condominium,onChange:b=>x("condominium",b.target.value),placeholder:"Condomnio..."})]}),i.jsxs("div",{className:"col-span-12 md:col-span-4",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Bairro*"}),i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.neighborhood,onChange:b=>x("neighborhood",b.target.value)})]}),i.jsxs("div",{className:"col-span-12 md:col-span-5",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Cidade*"}),i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.city,onChange:b=>x("city",b.target.value)})]}),i.jsxs("div",{className:"col-span-12 md:col-span-3",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Estado (UF)*"}),i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.state,onChange:b=>x("state",b.target.value),placeholder:"Ex: SP",maxLength:2})]}),i.jsxs("div",{className:"col-span-12 md:col-span-4",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Pas*"}),i.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",value:o.country,onChange:b=>x("country",b.target.value),placeholder:"Brasil"})]})]})]})]}),a===2&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"border-b border-slate-100 dark:border-slate-800 pb-2 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"size-6 rounded bg-amber-100 text-amber-600 flex items-center justify-center font-bold text-xs",children:"I"}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Dados do Imvel (Obrigatrio)"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Tipo de Projeto *"}),i.jsx("div",{className:"flex gap-4",children:["Reforma","Construo Nova"].map(b=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"propType",checked:c.property_type===b,onChange:()=>v("property_type",b),className:"text-primary focus:ring-primary"}),i.jsx("span",{className:"text-sm",children:b})]},b))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Localizao (Bairro/Cidade) *"}),i.jsx("input",{type:"text",value:c.property_location,onChange:b=>v("property_location",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800"})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"rea Aprox. (m)"}),i.jsx("input",{type:"number",value:c.property_area,onChange:b=>v("property_area",Number(b.target.value)),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800"})]})})]})]}),i.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800 w-full"}),i.jsxs("div",{children:[i.jsxs("div",{className:"pb-2 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"size-6 rounded bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-xs",children:"P"}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Perfil e Necessidades (Briefing)"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Quem utilizar os ambientes?"}),i.jsx("input",{type:"text",value:c.profile_residents,onChange:b=>v("profile_residents",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary",placeholder:"Ex: Casal com filhos, pessoa que mora sozinha..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Qual a rotina principal da casa?"}),i.jsx("textarea",{value:c.profile_routine,onChange:b=>v("profile_routine",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:'Principais "dores" ou expectativas?'}),i.jsx("textarea",{value:c.profile_pains,onChange:b=>v("profile_pains",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-primary",rows:3})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"pb-2 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"size-6 rounded bg-purple-100 text-purple-600 flex items-center justify-center font-bold text-xs",children:"T"}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Tempo e Prazos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Previso de Mudana"}),i.jsx("input",{type:"date",value:c.time_move_in,onChange:b=>v("time_move_in",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Pronto p/ medio?"}),i.jsx("input",{type:"text",value:c.time_measurement_ready,onChange:b=>v("time_measurement_ready",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Expectativa Fechamento"}),i.jsx("input",{type:"text",value:c.time_decision_expectation,onChange:b=>v("time_decision_expectation",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"pb-2 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"size-6 rounded bg-pink-100 text-pink-600 flex items-center justify-center font-bold text-xs",children:"P"}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Projeto e Parcerias"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Projeto de Arquiteto?"}),i.jsx("div",{className:"flex flex-col gap-2",children:["Sim","No","Cliente Ir Fornecer"].map(b=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"archProj",checked:c.project_has_architect_project===b,onChange:()=>v("project_has_architect_project",b),className:"text-primary focus:ring-primary"}),i.jsx("span",{className:"text-sm",children:b})]},b))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Nome do Arquiteto"}),i.jsx("input",{type:"text",value:c.architect_name,onChange:b=>v("architect_name",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800",placeholder:"Se houver"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Especificador Comissionado (RT)"}),i.jsx("input",{type:"text",value:c.commissioned_specifier,onChange:b=>v("commissioned_specifier",b.target.value),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800",placeholder:"Nome do profissional parceiro"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"pb-2 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"size-6 rounded bg-emerald-100 text-emerald-600 flex items-center justify-center font-bold text-xs",children:"P"}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Oramento (Estimativa)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Oramento disponvel (Estimativa R$)"}),i.jsx("input",{type:"number",value:c.budget_expectation,onChange:b=>v("budget_expectation",Number(b.target.value)),className:"w-full rounded-xl border-slate-200 dark:border-slate-700 dark:bg-slate-800 text-lg font-medium text-emerald-600"})]})]})]}),a===3&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-4",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Definio de Escopo"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Adicione os ambientes que sero projetados."})]})}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-6 rounded-xl border border-slate-200 dark:border-slate-700 flex gap-4 items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Nome do Ambiente"}),i.jsx("input",{type:"text",value:p,onChange:b=>m(b.target.value),className:"w-full rounded-lg border-slate-200 dark:border-slate-700 dark:bg-slate-800",placeholder:"Ex: Cozinha, Home Theater..."})]}),i.jsxs("button",{onClick:w,className:"bg-primary text-white px-4 py-2.5 rounded-lg font-bold hover:bg-primary-600 flex items-center gap-2 shadow-lg shadow-primary/20",children:[i.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"}),"Adicionar"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.length===0?i.jsx("div",{className:"col-span-2 p-12 text-center border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-xl text-slate-400",children:"Nenhum ambiente adicionado ao escopo."}):d.map((b,A)=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700 flex justify-between items-center shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"size-10 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center font-bold text-slate-500",children:A+1}),i.jsx("div",{children:i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white",children:b.name})})]}),i.jsx("button",{onClick:()=>f(T=>T.filter(I=>I.id!==b.id)),className:"text-rose-400 hover:text-rose-600 p-2",children:i.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]},A))})]})]})}),i.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-[#1a2632] flex items-center justify-between",children:[i.jsx("button",{onClick:()=>{a>1&&s(b=>b-1)},className:`px-6 py-2.5 font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors ${a===1?"invisible":""}`,children:"Voltar"}),i.jsx("div",{className:"flex gap-4",children:a<3?i.jsxs("button",{onClick:k,className:"px-8 py-3 bg-slate-900 dark:bg-slate-700 text-white font-bold rounded-lg hover:bg-slate-800 transition-all flex items-center gap-2",children:["Prximo Passo",i.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]}):i.jsxs("button",{onClick:S,className:"px-8 py-3 bg-primary text-white font-bold rounded-lg shadow-lg shadow-primary/20 hover:bg-primary-600 transition-all flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"rocket_launch"}),"Finalizar Cadastro"]})})]})]})},dB=()=>{const{assistanceTickets:t,updateAssistanceTicket:e,addAssistanceTicket:r,deleteAssistanceTicket:n,projects:a,assistanceWorkflow:s,canUserEditAssistance:o,canUserDeleteAssistance:l,currentUser:c,companySettings:u,assemblyTeams:d}=yr(),[f,p]=D.useState(!1),[m,v]=D.useState(""),[x,_]=D.useState(""),[y,g]=D.useState(""),[w,E]=D.useState(""),[N,k]=D.useState(""),[S,b]=D.useState(!1),[A,T]=D.useState(!1),[I,O]=D.useState(null),[R,G]=D.useState("DETAILS"),[U,Q]=D.useState(""),te=I?s.find(q=>q.id===I.status):null,K=()=>{if(!I||!U.trim())return;const q={id:`evt-${Date.now()}`,description:U,date:new Date().toISOString(),authorName:(c==null?void 0:c.name)||"Sistema",type:"NOTE"},Ne={...I,events:[...I.events||[],q]};e(Ne),O(Ne),Q("")},[X,se]=D.useState(""),[Z,F]=D.useState(""),[de,me]=D.useState(""),[Ge,Me]=D.useState("Normal"),[ot,Be]=D.useState([]),[xe,ve]=D.useState(""),[be,le]=D.useState(""),[Ze,ie]=D.useState("Custo Loja"),[Pe,Ae]=D.useState("Trabalho Equipe"),[Ee,Oe]=D.useState(""),[_e,Ke]=D.useState(""),[je,tt]=D.useState(""),[ht,pt]=D.useState(null),[Fe,It]=D.useState({}),Zt=()=>{if(!xe||!be){alert("Ambiente e Problema so obrigatrios para adicionar o item.");return}Be(q=>[...q,{id:`item-${Date.now()}`,environmentName:xe,problemDescription:be,costType:Ze,workType:Pe,supplier:Ee,supplierDeadline:_e,observations:je}]),ve(""),le(""),ie("Custo Loja"),Ae("Trabalho Equipe"),Oe(""),Ke(""),tt("")},he=()=>{var Se;if(!X||!de||ot.length===0){alert("Preencha o cliente, ttulo e adicione pelo menos um item.");return}const q=((Se=a.find(Ue=>Ue.client.id===X))==null?void 0:Se.client.name)||"Cliente",Ne=Z?d.find(Ue=>Ue.id===Z):null;r({clientId:X,clientName:q,title:de,status:"10.1",priority:Ge,items:ot,assemblerName:"",teamId:Z||void 0,events:[{id:`evt-${Date.now()}`,description:`Chamado aberto${Ne?` e atribudo para ${Ne.name}`:""} com ${ot.length} itens.`,date:new Date().toISOString(),authorName:(c==null?void 0:c.name)||"Sistema",type:"STATUS_CHANGE"}]}),b(!1),me(""),Be([]),se(""),F("")},Vr=q=>{O(q),T(!0),G("DETAILS"),pt(null)},[hr,Fr]=D.useState(""),[bt,ir]=D.useState(""),[en,Ur]=D.useState("Custo Loja"),[pr,Er]=D.useState("Trabalho Equipe"),[mr,Br]=D.useState(""),[or,wr]=D.useState(""),[Nt,Yt]=D.useState(""),Ot=()=>{if(!I||!hr||!bt)return;const q={id:`item-${Date.now()}`,environmentName:hr,problemDescription:bt,costType:en,workType:pr,supplier:mr,supplierDeadline:or,observations:Nt},Ne={id:`evt-${Date.now()}`,description:`Novo item adicionado: ${hr} - ${bt}`,date:new Date().toISOString(),authorName:(c==null?void 0:c.name)||"Sistema",type:"ITEM_ADD"},Se={...I,items:[...I.items,q],events:[...I.events||[],Ne]};e(Se),O(Se),Fr(""),ir(""),Ur("Custo Loja"),Er("Trabalho Equipe"),Br(""),wr(""),Yt("")},er=()=>{if(!I)return;const q=s.findIndex(Ne=>Ne.id===I.status);if(q>-1&&q<s.length-1){const Ne=s[q+1].id,Se=s[q+1].label,Ue={id:`evt-${Date.now()}`,description:`Status alterado para: ${Se}`,date:new Date().toISOString(),authorName:(c==null?void 0:c.name)||"Sistema",type:"STATUS_CHANGE"};e({...I,status:Ne,events:[...I.events||[],Ue]}),T(!1),O(null)}},Bt=q=>{pt(q.id),It({...q})},bn=()=>{if(!I||!ht)return;const q=I.items.map(Ue=>Ue.id===ht?{...Ue,...Fe}:Ue),Ne={id:`evt-${Date.now()}`,description:`Item editado: ${Fe.environmentName}. Observao atualizada.`,date:new Date().toISOString(),authorName:(c==null?void 0:c.name)||"Sistema",type:"ITEM_EDIT"},Se={...I,items:q,events:[...I.events||[],Ne]};e(Se),O(Se),pt(null),It({})},zr=()=>{if(!I)return;const q=a.find(it=>it.client.id===I.clientId),Ne=(q==null?void 0:q.client.address)||"Endereo no cadastrado",Se=(q==null?void 0:q.client.phone)||"Telefone no cadastrado",Ue=`
            <html>
            <head>
                <title>Ordem de Servio - ${I.title}</title>
                <style>
                    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; font-size: 12px; }
                    .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ccc; padding-bottom: 15px; margin-bottom: 20px; }
                    .logo { font-size: 24px; font-weight: bold; color: #333; }
                    .title { text-align: right; }
                    .section { margin-bottom: 20px; border: 1px solid #eee; border-radius: 5px; padding: 10px; }
                    .section-title { font-weight: bold; background: #f5f5f5; padding: 5px 10px; margin: -10px -10px 10px -10px; border-bottom: 1px solid #eee; }
                    .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; }
                    .signatures { display: flex; justify-content: space-between; margin-top: 50px; }
                    .sig-line { width: 40%; border-top: 1px solid #000; text-align: center; padding-top: 5px; }
                </style>
            </head>
            <body>
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                <div style="flex: 1;">
                    <h1 style="margin: 0; color: #0f172a; font-size: 24px;">Ordem de Servio: Assistncia Tcnica</h1>
                    <p style="margin: 5px 0; color: #64748b; font-size: 14px;">${u.name}</p>
                    ${I.code?`<p style="margin: 5px 0; font-weight: bold; color: #ea580c; font-size: 16px;">CDIGO: ${I.code}</p>`:""}
                </div>
                <div style="text-align: right; min-width: 150px;">
                    <p style="margin: 0; font-size: 18px; font-weight: bold; color: #333;">#${I.id.slice(-6).toUpperCase()}</p>
                    <p style="margin: 5px 0; color: #64748b;">Data: ${new Date().toLocaleDateString()}</p>
                </div>
            </div>

                <div class="section">
                    <div class="section-title">Dados do Cliente</div>
                    <div class="info-grid">
                        <p><strong>Cliente:</strong> ${I.clientName}</p>
                        <p><strong>Telefone:</strong> ${Se}</p>
                        <p><strong>Endereo:</strong> ${Ne}</p>
                        <p><strong>Data de Abertura:</strong> ${new Date(I.createdAt).toLocaleDateString()}</p>
                        <p><strong>Montador Responsvel:</strong> ${I.assemblerName||"__________________"}</p>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Itens de Assistncia / Reparo</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ambiente</th>
                                <th>Descrio do Problema</th>
                                <th>Fornecedor/Pea</th>
                                <th>Observaes Tcnicas</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${I.items.map(it=>`
                                <tr>
                                    <td><strong>${it.environmentName}</strong></td>
                                    <td>${it.problemDescription}</td>
                                    <td>${it.supplier||"-"}</td>
                                    <td>${it.observations||""}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>

                <div class="section">
                    <div class="section-title">Observaes Gerais</div>
                    <p style="min-height: 50px;">${I.notes||""}</p>
                </div>

                <div class="signatures">
                    <div class="sig-line">
                        Assinatura do Tcnico / Montador
                    </div>
                    <div class="sig-line">
                        De acordo (Cliente)
                    </div>
                </div>
                
                <script>
                    window.onload = function() { window.print(); }
                <\/script>
            </body>
            </html>
        `,st=window.open("","_blank");st&&(st.document.write(Ue),st.document.close())},re=()=>{I&&confirm(`Tem certeza que deseja excluir o chamado "${I.title}"? Esta ao no pode ser desfeita.`)&&(n(I.id),T(!1),O(null))},$e=q=>q?{"Ferragens/Acessrios Local":"bg-amber-50 text-amber-700 border-amber-200","Pea Fbrica":"bg-blue-50 text-blue-700 border-blue-200","Trabalho Equipe":"bg-emerald-50 text-emerald-700 border-emerald-200"}[q]||"bg-slate-50 text-slate-600 border-slate-200":"",z=o();return i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#101922] overflow-hidden",children:[i.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] flex flex-col px-6 py-4 shrink-0 z-20 gap-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"size-10 bg-orange-100 dark:bg-orange-900/30 text-orange-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined",children:"handyman"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Assistncia Tcnica"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Fluxo de resoluo de no-conformidades."})]})]}),z&&i.jsxs("button",{onClick:()=>b(!0),className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-orange-600/20",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})," Novo Chamado"]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-slate-50 dark:bg-slate-800/50 p-2 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5 flex-1 min-w-[160px]",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"search"}),i.jsx("input",{type:"text",placeholder:"Filtrar por Cliente...",value:m,onChange:q=>v(q.target.value),className:"bg-transparent border-none text-sm w-full focus:ring-0 p-0 text-slate-700 dark:text-slate-200"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5 flex-1 min-w-[160px]",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"person"}),i.jsx("input",{type:"text",placeholder:"Filtrar por Montador...",value:x,onChange:q=>_(q.target.value),className:"bg-transparent border-none text-sm w-full focus:ring-0 p-0 text-slate-700 dark:text-slate-200"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"flag"}),i.jsxs("select",{value:y,onChange:q=>g(q.target.value),className:"bg-transparent border-none text-sm focus:ring-0 p-0 text-slate-700 dark:text-slate-200 cursor-pointer",children:[i.jsx("option",{value:"",children:"Todas as prioridades"}),i.jsx("option",{value:"Normal",children:"Normal"}),i.jsx("option",{value:"Urgente",children:"Urgente"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"calendar_today"}),i.jsx("input",{type:"date",value:w,onChange:q=>E(q.target.value),title:"Data de abertura  de",className:"bg-transparent border-none text-sm focus:ring-0 p-0 text-slate-700 dark:text-slate-200 cursor-pointer"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"event"}),i.jsx("input",{type:"date",value:N,onChange:q=>k(q.target.value),title:"Data de abertura  at",className:"bg-transparent border-none text-sm focus:ring-0 p-0 text-slate-700 dark:text-slate-200 cursor-pointer"})]}),(m||x||y||w||N)&&i.jsxs("button",{onClick:()=>{v(""),_(""),g(""),E(""),k("")},className:"flex items-center gap-1 px-2 py-1.5 text-xs font-bold text-rose-500 hover:text-rose-600 transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"filter_alt_off"}),"Limpar"]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none px-2 ml-auto",children:[i.jsx("input",{type:"checkbox",checked:f,onChange:q=>p(q.target.checked),className:"rounded text-orange-600 focus:ring-orange-600 border-slate-300 dark:border-slate-600"}),i.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-400",children:"Ocultar Concludos"})]})]})]}),i.jsx("div",{className:"flex-1 overflow-x-auto p-6 custom-scrollbar",children:i.jsx("div",{className:"flex h-full gap-4 w-max",children:s.map(q=>{const Ne=q.id===s[s.length-1].id;if(f&&Ne)return null;const Se=t.filter(Ue=>{var qr;if(Ue.status!==q.id)return!1;const st=Ue.clientName.toLowerCase().includes(m.toLowerCase()),it=x?(qr=Ue.assemblerName)==null?void 0:qr.toLowerCase().includes(x.toLowerCase()):!0,lr=y?Ue.priority===y:!0,Cn=new Date(Ue.createdAt),tr=w?Cn>=new Date(w):!0,Wr=N?Cn<=new Date(N+"T23:59:59"):!0;return st&&it&&lr&&tr&&Wr});return i.jsxs("div",{className:"flex flex-col w-80 h-full shrink-0",children:[i.jsxs("div",{className:"flex flex-col gap-1 mb-3 px-3 py-2 bg-slate-100 dark:bg-[#15202b] rounded-lg border border-slate-200 dark:border-slate-800",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-200 text-sm",children:[q.id," - ",q.label]}),i.jsx("span",{className:"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-bold px-2 py-0.5 rounded-full border border-slate-200 dark:border-slate-600",children:Se.length})]}),q.ownerRole&&i.jsxs("div",{className:"flex items-center gap-1.5 opacity-60",children:[i.jsx("span",{className:"material-symbols-outlined text-xs",children:"account_circle"}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:q.ownerRole})]})]}),i.jsx("div",{className:"flex-1 bg-slate-100/30 dark:bg-[#15202b]/50 rounded-xl p-2 border border-slate-200/50 dark:border-slate-800 overflow-y-auto custom-scrollbar flex flex-col gap-3",children:Se.map(Ue=>{const st=zo(Ue.createdAt,new Date,u==null?void 0:u.holidays);return i.jsxs("div",{onClick:()=>Vr(Ue),className:"bg-white dark:bg-[#1e2936] p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 group hover:shadow-md transition-all cursor-pointer relative overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:`text-[10px] w-fit font-bold px-1.5 py-0.5 rounded border ${Ue.priority==="Urgente"?"bg-rose-50 text-rose-600 border-rose-100":"bg-blue-50 text-blue-600 border-blue-100"}`,children:Ue.priority}),Ue.code&&i.jsx("span",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400",children:Ue.code})]}),i.jsxs("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${st>15?"text-slate-400":st>=0?"text-amber-600 bg-amber-50":"text-rose-600 bg-rose-50"}`,children:[st," d.."]})]}),i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1 truncate",children:Ue.clientName}),i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 truncate",children:Ue.title}),Ue.assemblerName&&i.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[i.jsx("span",{className:"material-symbols-outlined text-xs text-slate-400",children:"person"}),i.jsx("span",{className:"text-xs text-slate-500",children:Ue.assemblerName})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[i.jsx("span",{className:"material-symbols-outlined text-sm text-slate-400",children:"format_list_bulleted"}),i.jsxs("span",{className:"text-xs text-slate-500",children:[Ue.items.length," itens"]})]})]},Ue.id)})})]},q.id)})})}),S&&i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>b(!1),children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",onClick:q=>q.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-800",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Abertura de Chamado"}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Inicia na etapa: ",i.jsx("span",{className:"font-bold text-orange-600",children:"Visita de Levantamento"})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Cliente"}),i.jsxs("select",{value:X,onChange:q=>se(q.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{value:"",children:"Selecione..."}),a.map(q=>i.jsx("option",{value:q.client.id,children:q.client.name},q.client.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Prioridade"}),i.jsxs("select",{value:Ge,onChange:q=>Me(q.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{children:"Normal"}),i.jsx("option",{children:"Urgente"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Equipe Responsvel"}),i.jsxs("select",{value:Z,onChange:q=>F(q.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{value:"",children:"Sem atribuio"}),d.filter(q=>{var Ne;return((Ne=q.serviceTypes)==null?void 0:Ne.includes("assistance"))!==!1}).map(q=>i.jsx("option",{value:q.id,children:q.name},q.id))]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Ttulo do Chamado"}),i.jsx("input",{type:"text",value:de,onChange:q=>me(q.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"Ex: Ajuste de Portas e Gavetas"})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-[#101922] p-4 rounded-lg border border-slate-200 dark:border-slate-800",children:[i.jsxs("h3",{className:"font-bold text-slate-700 dark:text-white mb-3 text-sm flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add_circle"}),"Adicionar Item ao Chamado"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Ambiente"}),i.jsx("input",{type:"text",value:xe,onChange:q=>ve(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Problema"}),i.jsx("input",{type:"text",value:be,onChange:q=>le(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Tipo de Custo"}),i.jsxs("select",{value:Ze,onChange:q=>ie(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{children:"Custo Loja"}),i.jsx("option",{children:"Custo Fbrica"}),i.jsx("option",{children:"Custo Cliente"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Tipo de Trabalho"}),i.jsx("div",{className:"flex flex-col gap-1 mt-1",children:["Ferragens/Acessrios Local","Pea Fbrica","Trabalho Equipe"].map(q=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("input",{type:"radio",name:"tempWorkType",value:q,checked:Pe===q,onChange:()=>Ae(q),className:"text-orange-600 focus:ring-orange-600"}),q]},q))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Fornecedor"}),i.jsx("input",{type:"text",value:Ee,onChange:q=>Oe(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Prazo Fornecedor"}),i.jsx("input",{type:"date",value:_e,onChange:q=>Ke(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Observaes"}),i.jsx("textarea",{value:je,onChange:q=>tt(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm",rows:2})]}),i.jsx("div",{className:"md:col-span-2 flex justify-end",children:i.jsx("button",{onClick:Zt,className:"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-4 py-2 rounded font-bold hover:bg-slate-300",children:"Adicionar Item"})})]})]}),i.jsx("div",{className:"border rounded-lg border-slate-200 dark:border-slate-800 overflow-hidden",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Ambiente"}),i.jsx("th",{className:"p-3",children:"Problema"}),i.jsx("th",{className:"p-3",children:"Custo"}),i.jsx("th",{className:"p-3",children:"Fornecedor"}),i.jsx("th",{className:"p-3",children:"Obs"})]})}),i.jsxs("tbody",{children:[ot.map((q,Ne)=>i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-800",children:[i.jsx("td",{className:"p-3 font-medium",children:q.environmentName}),i.jsx("td",{className:"p-3 text-slate-500",children:q.problemDescription}),i.jsx("td",{className:"p-3 text-slate-500 text-xs",children:q.costType}),i.jsx("td",{className:"p-3 text-slate-500 text-xs",children:q.supplier}),i.jsx("td",{className:"p-3 text-slate-500 text-xs truncate max-w-[100px]",children:q.observations})]},Ne)),ot.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center text-slate-400 italic",children:"Nenhum item adicionado."})})]})]})})]}),i.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-800 flex justify-end gap-3 bg-slate-50 dark:bg-slate-900",children:[i.jsx("button",{onClick:()=>b(!1),className:"px-6 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 font-bold text-sm",children:"Cancelar"}),i.jsx("button",{onClick:he,className:"px-6 py-2.5 rounded-lg bg-orange-600 text-white font-bold text-sm hover:bg-orange-700",children:"Abrir Chamado"})]})]})}),A&&I&&i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>{T(!1),O(null)},children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-4xl rounded-xl shadow-2xl overflow-hidden flex flex-col h-[90vh]",onClick:q=>q.stopPropagation(),children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-slate-900",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[i.jsxs("span",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-[10px] font-bold uppercase tracking-wider text-slate-500",children:["Etapa: ",te==null?void 0:te.label]}),(te==null?void 0:te.ownerRole)&&i.jsxs("span",{className:"px-2 py-0.5 bg-primary/10 text-primary rounded text-[10px] font-bold uppercase tracking-wider flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"account_circle"}),"Resp: ",te.ownerRole]}),I.priority==="Urgente"&&i.jsx("span",{className:"px-2 py-0.5 bg-rose-100 text-rose-600 rounded text-[10px] font-bold uppercase",children:"URGENTE"}),I.code&&i.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded text-[10px] font-bold tracking-wider",children:I.code})]}),i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:[I.clientName," - ",I.title]})]}),i.jsxs("div",{className:"flex gap-2 items-center",children:[l()&&i.jsx("button",{onClick:re,className:"p-2 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-full text-rose-500 hover:text-rose-600 transition-colors",title:"Excluir chamado",children:i.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),i.jsx("button",{onClick:zr,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-600 dark:text-slate-300",title:"Imprimir Ordem de Servio",children:i.jsx("span",{className:"material-symbols-outlined",children:"print"})}),i.jsx("button",{onClick:()=>{T(!1),O(null)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),i.jsxs("div",{className:"px-6 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex gap-6",children:[i.jsx("button",{onClick:()=>G("DETAILS"),className:`py-3 text-sm font-bold border-b-2 transition-colors ${R==="DETAILS"?"border-orange-600 text-orange-600":"border-transparent text-slate-500"}`,children:"Detalhes e Itens"}),i.jsx("button",{onClick:()=>G("HISTORY"),className:`py-3 text-sm font-bold border-b-2 transition-colors ${R==="HISTORY"?"border-orange-600 text-orange-600":"border-transparent text-slate-500"}`,children:"Histrico do Chamado"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 dark:bg-[#101922]",children:[R==="DETAILS"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-4",children:I.items.map((q,Ne)=>i.jsx("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col gap-4",children:ht===q.id?i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex justify-between items-center mb-2",children:i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Editando Item"})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Ambiente"}),i.jsx("input",{type:"text",value:Fe.environmentName,onChange:Se=>It({...Fe,environmentName:Se.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Problema"}),i.jsx("input",{type:"text",value:Fe.problemDescription,onChange:Se=>It({...Fe,problemDescription:Se.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Fornecedor"}),i.jsx("input",{type:"text",value:Fe.supplier||"",onChange:Se=>It({...Fe,supplier:Se.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Prazo"}),i.jsx("input",{type:"date",value:Fe.supplierDeadline||"",onChange:Se=>It({...Fe,supplierDeadline:Se.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Observaes"}),i.jsx("textarea",{value:Fe.observations||"",onChange:Se=>It({...Fe,observations:Se.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm",rows:2})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{onClick:()=>pt(null),className:"px-3 py-1.5 rounded text-xs font-bold border border-slate-200 dark:border-slate-700 text-slate-500",children:"Cancelar"}),i.jsx("button",{onClick:bn,className:"px-3 py-1.5 rounded text-xs font-bold bg-green-600 text-white hover:bg-green-700",children:"Salvar Alteraes"})]})]}):i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded",children:q.environmentName}),q.costType&&i.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded border border-slate-200 text-slate-500",children:q.costType}),q.workType&&i.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${$e(q.workType)}`,children:q.workType})]}),z&&i.jsx("button",{onClick:()=>Bt(q),className:"p-1 text-slate-400 hover:text-blue-500 rounded hover:bg-blue-50",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})})]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300 font-medium mb-3",children:q.problemDescription}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-500 bg-slate-50 dark:bg-slate-800 p-3 rounded",children:[q.supplier&&i.jsxs("p",{children:["Fornecedor: ",i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:q.supplier})]}),q.supplierDeadline&&i.jsxs("p",{children:["Prazo Forn.: ",i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:q.supplierDeadline})]}),q.observations&&i.jsxs("p",{className:"col-span-2",children:["Obs: ",i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:q.observations})]})]})]})},q.id))}),I.status==="10.1"&&z&&i.jsxs("div",{className:"mt-8 bg-orange-50 dark:bg-orange-900/10 border border-orange-100 dark:border-orange-900/30 p-4 rounded-xl",children:[i.jsxs("h3",{className:"font-bold text-orange-800 dark:text-orange-400 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),"Adicionar Item (Vistoria)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Ambiente"}),i.jsx("input",{type:"text",value:hr,onChange:q=>Fr(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Problema"}),i.jsx("input",{type:"text",value:bt,onChange:q=>ir(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Tipo de Custo"}),i.jsxs("select",{value:en,onChange:q=>Ur(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{children:"Custo Loja"}),i.jsx("option",{children:"Custo Fbrica"}),i.jsx("option",{children:"Custo Cliente"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Tipo de Trabalho"}),i.jsx("div",{className:"flex flex-col gap-1 mt-1",children:["Ferragens/Acessrios Local","Pea Fbrica","Trabalho Equipe"].map(q=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("input",{type:"radio",name:"inspectWorkType",value:q,checked:pr===q,onChange:()=>Er(q),className:"text-orange-600 focus:ring-orange-600"}),q]},q))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Fornecedor"}),i.jsx("input",{type:"text",value:mr,onChange:q=>Br(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Prazo Forn."}),i.jsx("input",{type:"date",value:or,onChange:q=>wr(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Observaes"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:Nt,onChange:q=>Yt(q.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"}),i.jsx("button",{onClick:Ot,className:"bg-orange-600 text-white font-bold py-1 px-4 rounded text-sm hover:bg-orange-700",children:"Add"})]})]})]})]}),I.status!=="10.1"&&i.jsxs("div",{className:"mt-6 flex items-center gap-2 text-xs text-slate-400 bg-slate-100 dark:bg-slate-800 px-4 py-3 rounded-lg",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"}),"Adio de itens bloqueada  o chamado j avanou da etapa de Levantamento. Para novos itens, abra um novo chamado."]})]}),R==="HISTORY"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 mb-6",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Adicionar Nota ao Histrico"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{value:U,onChange:q=>Q(q.target.value),placeholder:"Digite uma observao...",className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm py-2 px-3 focus:ring-orange-500 focus:border-orange-500",rows:2}),i.jsx("button",{onClick:K,disabled:!U.trim(),className:"bg-orange-600 text-white font-bold px-4 rounded-lg text-sm hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:"Enviar"})]})]}),i.jsxs("div",{className:"relative pl-4 space-y-6",children:[i.jsx("div",{className:"absolute left-[27px] top-4 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700"}),I.events&&I.events.length>0?I.events.slice().reverse().map(q=>i.jsxs("div",{className:"relative flex gap-4 animate-fade-in",children:[i.jsx("div",{className:`size-10 rounded-full flex items-center justify-center shrink-0 z-10 border-4 border-slate-50 dark:border-[#101922] ${q.type==="STATUS_CHANGE"?"bg-blue-500 text-white":q.type==="ITEM_ADD"?"bg-emerald-500 text-white":q.type==="NOTE"?"bg-amber-500 text-white":"bg-slate-200 text-slate-600"}`,children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:q.type==="STATUS_CHANGE"?"sync_alt":q.type==="ITEM_ADD"?"add":q.type==="NOTE"?"description":"edit"})}),i.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 p-3 rounded-lg border border-slate-100 dark:border-slate-800 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"font-bold text-xs text-slate-700 dark:text-slate-300",children:q.authorName}),i.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(q.date).toLocaleString()})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:q.description})]})]},q.id)):i.jsx("div",{className:"text-center text-slate-400 py-4",children:"Nenhum evento registrado ainda."})]})]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-between items-center",children:[i.jsxs("p",{className:"text-xs text-slate-500",children:[I.items.length," itens registrados."]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{T(!1),O(null)},className:"px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 font-bold text-sm",children:"Fechar"}),I.status!==s[s.length-1].id&&z&&i.jsxs("button",{onClick:er,className:"px-6 py-2 rounded-lg bg-green-600 text-white font-bold text-sm hover:bg-green-700 flex items-center gap-2 shadow-lg shadow-green-600/20",children:[i.jsx("span",{children:"Concluir Etapa"}),i.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})]})]})]})]})})]})},fB=()=>{const{projects:t,batches:e,workflowConfig:r,setCurrentProjectId:n,currentUser:a,deleteProject:s,assistanceTickets:o,canUserDeleteClient:l,canUserEditClient:c}=yr(),[u,d]=D.useState("Todos"),[f,p]=D.useState(""),m=t.filter(x=>{if(!(x.client.name.toLowerCase().includes(f.toLowerCase())||x.client.email.toLowerCase().includes(f.toLowerCase())))return!1;if(u==="Todos")return!0;if(u==="Perdidos")return x.client.status==="Perdido";if(u==="Concluidos")return x.client.status==="Concluido";const y=e.filter(w=>w.projectId===x.id);let g=0;return y.length>0?g=Math.max(...y.map(w=>{var k;const E=(k=r[w.phase])==null?void 0:k.stage;if(E!==void 0)return E;const N=Math.floor(parseFloat(w.phase));return isNaN(N)?1:N})):g=1,u==="Ativos"?x.client.status!=="Ativo"?!1:g<=2:u==="EmAndamento"?x.client.status==="Ativo"?g>2:x.client.status!=="Perdido"&&g>9:!1}),v=m.reduce((x,_)=>{const y=_.environments.reduce((g,w)=>g+(w.estimated_value||0),0);return x+y},0);return i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#101922]",children:[i.jsxs("div",{className:"px-6 py-4 bg-white dark:bg-[#1a2632] border-b border-slate-200 dark:border-slate-800 flex flex-col md:flex-row gap-4 justify-between items-center",children:[i.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 dark:bg-slate-800 rounded-lg overflow-x-auto custom-scrollbar",children:[{id:"Todos",label:"Todos"},{id:"Ativos",label:"Ativos"},{id:"EmAndamento",label:"Vendidos (Em Andamento)"},{id:"Concluidos",label:"Vendidos (Concludos)"},{id:"Perdidos",label:"Perdidos"}].map(x=>i.jsx("button",{onClick:()=>d(x.id),className:`px-4 py-2 rounded-md text-sm font-bold transition-all whitespace-nowrap ${u===x.id?"bg-white dark:bg-slate-700 shadow text-primary":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:x.label},x.id))}),i.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[i.jsxs("div",{className:"relative flex-1 md:w-64",children:[i.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"search"}),i.jsx("input",{type:"text",placeholder:"Buscar cliente...",value:f,onChange:x=>p(x.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border-slate-200 dark:border-slate-700 dark:bg-slate-800 text-sm focus:ring-primary focus:border-primary"})]}),i.jsxs("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate-registration")),className:"bg-primary text-white font-bold py-2 px-4 rounded-lg shadow-lg shadow-primary/20 hover:bg-primary-600 transition-colors flex items-center gap-2 whitespace-nowrap",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})," Novo Cliente"]})]})]}),i.jsxs("div",{className:"px-6 py-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Valor Total (Filtro)"}),i.jsxs("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:["R$ ",v.toLocaleString()]})]}),i.jsx("div",{className:"size-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-600",children:i.jsx("span",{className:"material-symbols-outlined",children:"payments"})})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Clientes Listados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:m.length})]}),i.jsx("div",{className:"size-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600",children:i.jsx("span",{className:"material-symbols-outlined",children:"groups"})})]})]}),i.jsx("div",{className:"flex-1 overflow-auto px-6 pb-6",children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-800 sticky top-0 z-10",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Cliente"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Contato"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Vendedor"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Etapa Atual"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ambientes"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Investimento"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ao"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:m.map(x=>{const _=x.environments.reduce((S,b)=>S+(b.estimated_value||0),0),y=e.filter(S=>S.projectId===x.id),g=y.length>0?y[0].phase:"1.1",w=r[g];let E=0;y.length>0?E=Math.max(...y.map(S=>{var T;const b=(T=r[S.phase])==null?void 0:T.stage;if(b!==void 0)return b;const A=Math.floor(parseFloat(S.phase));return isNaN(A)?1:A})):E=1;let N=x.client.status,k="bg-slate-100 text-slate-600";return x.client.status==="Perdido"?(N="Perdido",k="bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400"):x.client.status==="Concluido"?(N="Concludo",k="bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400"):E>2?(N="Em Andamento",k="bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"):(N="Ativo",k="bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400"),i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"size-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold overflow-hidden",children:x.client.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:x.client.name}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Origem: ",x.client.origin||"N/A"]})]})]})}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx("p",{children:x.client.email}),i.jsx("p",{className:"text-xs text-slate-400",children:x.client.phone})]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 px-2.5 py-1 rounded",children:x.sellerName||"N/A"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${k}`,children:N})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 font-medium",children:w?`${w.id} ${w.label}`:"N/A"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("span",{className:"px-2.5 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs font-semibold text-slate-600 dark:text-slate-300",children:[x.environments.length," Ambientes"]})}),i.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-slate-700 dark:text-slate-200",children:["R$ ",_.toLocaleString()]}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>n(x.id),className:"text-primary font-bold text-sm hover:underline flex items-center gap-1",children:["Ver Detalhes ",i.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})]}),l()&&i.jsx("button",{onClick:S=>{S.stopPropagation(),confirm(`Tem certeza que deseja excluir o cliente ${x.client.name}? Esta ao no pode ser desfeita.`)&&s(x.id)},className:"text-slate-400 hover:text-red-600 transition-colors",title:"Excluir Cliente",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})})]},x.id)})})]}),m.length===0&&i.jsx("div",{className:"p-12 text-center text-slate-400",children:"Nenhum cliente encontrado com este filtro."})]})})]})},hB=()=>{const{projects:t,batches:e,moveBatchToStep:r,workflowConfig:n,currentUser:a,updateProjectPostAssemblyItems:s,companySettings:o,workflowOrder:l,canUserEditPostAssembly:c,canUserDeletePostAssembly:u}=yr(),d=c(),f=D.useMemo(()=>l.filter(re=>re.startsWith("8.")),[l]),[p,m]=D.useState(""),[v,x]=D.useState(!1),[_,y]=D.useState(""),[g,w]=D.useState(""),[E,N]=D.useState(""),[k,S]=D.useState(!1),[b,A]=D.useState(!1),[T,I]=D.useState(null),[O,R]=D.useState("DETAILS"),[G,U]=D.useState(""),[Q,te]=D.useState("Normal"),[K,X]=D.useState([]),[se,Z]=D.useState(""),[F,de]=D.useState(""),[me,Ge]=D.useState("Custo Loja"),[Me,ot]=D.useState("Trabalho Equipe"),[Be,xe]=D.useState(""),[ve,be]=D.useState(""),[le,Ze]=D.useState(""),[ie,Pe]=D.useState(null),[Ae,Ee]=D.useState({}),[Oe,_e]=D.useState(""),[Ke,je]=D.useState(""),[tt,ht]=D.useState("Custo Loja"),[pt,Fe]=D.useState("Trabalho Equipe"),[It,Zt]=D.useState(""),[he,Vr]=D.useState(""),[hr,Fr]=D.useState(""),bt=re=>e.find($e=>$e.projectId===re),ir=t.filter(re=>{const $e=bt(re.id);if(!$e)return!1;const z=n[$e.phase];return z&&(z.id==="7.1"||z.id==="7.2")}),en=()=>{if(!se||!F){alert("Ambiente e Problema so obrigatrios para adicionar o item.");return}X(re=>[...re,{id:`item-${Date.now()}`,environmentName:se,problemDescription:F,costType:me,workType:Me,supplier:Be,supplierDeadline:ve,observations:le}]),Z(""),de(""),Ge("Custo Loja"),ot("Trabalho Equipe"),xe(""),be(""),Ze("")},Ur=async()=>{if(!G){alert("Selecione um projeto.");return}const re=t.find($e=>$e.id===G);if(re){const $e=bt(re.id);if($e){await r($e.id,"8.1");const z={id:`evt-${Date.now()}`,description:`Ps-Montagem iniciada com ${K.length} itens pendentes.`,date:new Date().toISOString(),authorName:(a==null?void 0:a.name)||"Sistema",type:"STATUS_CHANGE"};s(re.id,{items:K,priority:Q,events:[z],startedAt:new Date().toISOString()})}}S(!1),U(""),X([])},pr=re=>{I(re),A(!0),R("DETAILS"),Pe(null)},Er=()=>{if(!T||!Oe||!Ke)return;const re={id:`item-${Date.now()}`,environmentName:Oe,problemDescription:Ke,costType:tt,workType:pt,supplier:It,supplierDeadline:he,observations:hr},$e={id:`evt-${Date.now()}`,description:`Novo item adicionado: ${Oe} - ${Ke}`,date:new Date().toISOString(),authorName:(a==null?void 0:a.name)||"Sistema",type:"ITEM_ADD"},z=T.postAssemblyItems||[],q=T.postAssemblyEvents||[];s(T.id,{items:[...z,re],events:[...q,$e]}),_e(""),je(""),ht("Custo Loja"),Fe("Trabalho Equipe"),Zt(""),Vr(""),Fr("")},mr=re=>{Pe(re.id),Ee({...re})},Br=re=>{if(!T||!confirm("Tem certeza que deseja excluir este item?"))return;const $e=(T.postAssemblyItems||[]).filter(z=>z.id!==re);s(T.id,{items:$e})},or=(re,$e)=>{if(!T)return;const z=[...T.postAssemblyItems||[]],q=z.findIndex(Se=>Se.id===re);if($e==="up"&&q===0||$e==="down"&&q===z.length-1)return;const Ne=$e==="up"?q-1:q+1;[z[q],z[Ne]]=[z[Ne],z[q]],s(T.id,{items:z})},wr=()=>{if(!T||!ie)return;const $e=(T.postAssemblyItems||[]).map(q=>q.id===ie?{...q,...Ae}:q),z={id:`evt-${Date.now()}`,description:`Item editado: ${Ae.environmentName}. Observao atualizada.`,date:new Date().toISOString(),authorName:(a==null?void 0:a.name)||"Sistema",type:"ITEM_EDIT"};s(T.id,{items:$e,events:[...T.postAssemblyEvents||[],z]}),Pe(null),Ee({})},Nt=async()=>{var q;if(!T)return;const re=bt(T.id);if(!re)return;const $e=re.phase,z=f.indexOf($e);if(z!==-1&&z<f.length-1){const Ne=f[z+1],Se=((q=n[Ne])==null?void 0:q.label)||Ne;await r(re.id,Ne);const Ue={id:`evt-${Date.now()}`,description:`Status alterado para: ${Se}`,date:new Date().toISOString(),authorName:(a==null?void 0:a.name)||"Sistema",type:"STATUS_CHANGE"};s(T.id,{events:[...T.postAssemblyEvents||[],Ue]}),A(!1),I(null)}},[Yt,Ot]=D.useState(""),er=()=>{if(!T||!Yt.trim())return;const re={id:`evt-${Date.now()}`,description:Yt,date:new Date().toISOString(),authorName:(a==null?void 0:a.name)||"Sistema",type:"NOTE"},$e=T.postAssemblyEvents||[];s(T.id,{events:[...$e,re]}),Ot("")},Bt=()=>{if(!T||!confirm(`Tem certeza que deseja excluir o Ps-Montagem de "${T.client.name}"? Esta ao no pode ser desfeita.`))return;const re=bt(T.id);re&&r(re.id,"7.2"),s(T.id,{items:[],events:[]}),A(!1),I(null)},bn=re=>re?{"Ferragens/Acessrios Local":"bg-amber-50 text-amber-700 border-amber-200","Pea Fbrica":"bg-blue-50 text-blue-700 border-blue-200","Trabalho Equipe":"bg-emerald-50 text-emerald-700 border-emerald-200"}[re]||"bg-slate-50 text-slate-600 border-slate-200":"",zr=()=>{if(!T)return;const re=T.client.address||"Endereo no cadastrado",$e=T.client.phone||"Telefone no cadastrado",z=T.postAssemblyItems||[],q=`
            <html>
            <head>
                <title>Ordem de Servio (Ps-Montagem) - ${T.client.name}</title>
                <style>
                    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; font-size: 12px; }
                    .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ccc; padding-bottom: 15px; margin-bottom: 20px; }
                    .logo { font-size: 24px; font-weight: bold; color: #333; }
                    .title { text-align: right; }
                    .section { margin-bottom: 20px; border: 1px solid #eee; border-radius: 5px; padding: 10px; }
                    .section-title { font-weight: bold; background: #f5f5f5; padding: 5px 10px; margin: -10px -10px 10px -10px; border-bottom: 1px solid #eee; }
                    .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
                    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; }
                    .signatures { display: flex; justify-content: space-between; margin-top: 50px; }
                    .sig-line { width: 40%; border-top: 1px solid #000; text-align: center; padding-top: 5px; }
                </style>
            </head>
            <body>
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                    <div>
                        <h1 style="margin: 0; color: #0f172a;">Ordem de Servio: Ps-Montagem</h1>
                        <p style="margin: 5px 0; color: #64748b;">${o.name}</p>
                        ${T.postAssemblyCode?`<p style="margin: 5px 0; font-weight: bold; color: #059669;">CDIGO: ${T.postAssemblyCode}</p>`:""}
                    </div>
                    <div style="text-align: right;">
                        <p style="margin: 0; font-size: 18px; font-weight: bold; color: #333;">#${T.id.slice(-6).toUpperCase()}</p>
                        <p style="margin: 5px 0; color: #64748b;">Data: ${new Date().toLocaleDateString()}</p>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Dados do Cliente</div>
                    <div class="info-grid">
                        <p><strong>Cliente:</strong> ${T.client.name}</p>
                        <p><strong>Telefone:</strong> ${$e}</p>
                        <p><strong>Endereo:</strong> ${re}</p>
                        <p><strong>Data de Referncia:</strong> ${new Date().toLocaleDateString()}</p>
                    </div>
                </div>

                <div class="section">
                    <div class="section-title">Itens de Ajuste / Pendncia</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Ambiente</th>
                                <th>Descrio do Problema</th>
                                <th>Fornecedor/Pea</th>
                                <th>Observaes Tcnicas</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${z.map(Se=>`
                                <tr>
                                    <td><strong>${Se.environmentName}</strong></td>
                                    <td>${Se.problemDescription}</td>
                                    <td>${Se.supplier||"-"}</td>
                                    <td>${Se.observations||""}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>

                <div class="signatures">
                    <div class="sig-line">
                        Assinatura do Tcnico / Montador
                    </div>
                    <div class="sig-line">
                        De acordo (Cliente)
                    </div>
                </div>
                
                <script>
                    window.onload = function() { window.print(); }
                <\/script>
            </body>
            </html>
        `,Ne=window.open("","_blank");Ne&&(Ne.document.write(q),Ne.document.close())};return i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#101922] overflow-hidden",children:[i.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] flex flex-col px-6 py-4 shrink-0 z-20 gap-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"size-10 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"material-symbols-outlined",children:"checklist"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Ps-Montagem"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Fluxo de resoluo e qualidade (Etapa 8)."})]})]}),d&&i.jsxs("button",{onClick:()=>S(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 shadow-lg shadow-emerald-600/20",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"play_arrow"})," Iniciar Ps-Montagem"]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-slate-50 dark:bg-slate-800/50 p-2 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5 flex-1 min-w-[160px]",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"search"}),i.jsx("input",{type:"text",placeholder:"Filtrar por Cliente...",value:p,onChange:re=>m(re.target.value),className:"bg-transparent border-none text-sm w-full focus:ring-0 p-0 text-slate-700 dark:text-slate-200"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"flag"}),i.jsxs("select",{value:_,onChange:re=>y(re.target.value),className:"bg-transparent border-none text-sm focus:ring-0 p-0 text-slate-700 dark:text-slate-200 cursor-pointer",children:[i.jsx("option",{value:"",children:"Todas as prioridades"}),i.jsx("option",{value:"Normal",children:"Normal"}),i.jsx("option",{value:"Urgente",children:"Urgente"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"calendar_today"}),i.jsx("input",{type:"date",value:g,onChange:re=>w(re.target.value),title:"ltima atualizao  de",className:"bg-transparent border-none text-sm focus:ring-0 p-0 text-slate-700 dark:text-slate-200 cursor-pointer"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"event"}),i.jsx("input",{type:"date",value:E,onChange:re=>N(re.target.value),title:"ltima atualizao  at",className:"bg-transparent border-none text-sm focus:ring-0 p-0 text-slate-700 dark:text-slate-200 cursor-pointer"})]}),(p||_||g||E)&&i.jsxs("button",{onClick:()=>{m(""),y(""),w(""),N("")},className:"flex items-center gap-1 px-2 py-1.5 text-xs font-bold text-rose-500 hover:text-rose-600 transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"filter_alt_off"}),"Limpar"]})]})]}),i.jsx("div",{className:"flex-1 overflow-x-auto p-6 custom-scrollbar",children:i.jsx("div",{className:"flex h-full gap-4 w-max",children:f.map(re=>{const $e=n[re],z=$e?`${$e.id} - ${$e.label}`:re,q=t.filter(Ne=>{const Se=bt(Ne.id);if(!Se||Se.phase!==re)return!1;const Ue=Ne.client.name.toLowerCase().includes(p.toLowerCase()),st=_?(Ne.postAssemblyPriority||"Normal")===_:!0,it=new Date(Se.lastUpdated),lr=g?it>=new Date(g):!0,Cn=E?it<=new Date(E+"T23:59:59"):!0;return Ue&&st&&lr&&Cn});return i.jsxs("div",{className:"flex flex-col w-80 h-full shrink-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 px-3 py-2 bg-slate-100 dark:bg-[#15202b] rounded-lg border border-slate-200 dark:border-slate-800",children:[i.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 text-sm",children:z}),i.jsx("span",{className:"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 text-xs font-bold px-2 py-0.5 rounded-full border border-slate-200 dark:border-slate-600",children:q.length})]}),i.jsx("div",{className:"flex-1 bg-slate-100/30 dark:bg-[#15202b]/50 rounded-xl p-2 border border-slate-200/50 dark:border-slate-800 overflow-y-auto custom-scrollbar flex flex-col gap-3",children:q.map(Ne=>{var it;const Se=bt(Ne.id),Ue=((it=Ne.postAssemblyItems)==null?void 0:it.length)||0,st=Ne.postAssemblyPriority||"Normal";return i.jsxs("div",{onClick:()=>pr(Ne),className:"bg-white dark:bg-[#1e2936] p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 group hover:shadow-md transition-all cursor-pointer relative overflow-hidden",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("span",{className:`text-[10px] w-fit font-bold px-1.5 py-0.5 rounded border ${st==="Urgente"?"bg-rose-50 text-rose-600 border-rose-100":"bg-blue-50 text-blue-600 border-blue-100"}`,children:st}),Ne.postAssemblyCode&&i.jsx("span",{className:"text-[10px] font-bold text-orange-600 dark:text-orange-400",children:Ne.postAssemblyCode})]}),i.jsxs("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${(()=>{const lr=zo(Ne.postAssemblyStartedAt||(Se==null?void 0:Se.lastUpdated)||Ne.created_at,new Date,o==null?void 0:o.holidays);return lr>15?"text-slate-400":lr>=0?"text-amber-600 bg-amber-50":"text-rose-600 bg-rose-50"})()}`,children:[zo(Ne.postAssemblyStartedAt||(Se==null?void 0:Se.lastUpdated)||Ne.created_at,new Date,o==null?void 0:o.holidays)," d.."]})]}),i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-1 truncate",children:Ne.client.name}),i.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-100 dark:border-slate-700",children:[i.jsx("span",{className:"material-symbols-outlined text-sm text-slate-400",children:"format_list_bulleted"}),i.jsxs("span",{className:"text-xs text-slate-500",children:[Ue," itens"]})]})]},Ne.id)})})]},re)})})}),k&&i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>S(!1),children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",onClick:re=>re.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-800",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Iniciar Ps-Montagem"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Selecione um projeto da etapa de Montagem (7.x)."})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Projeto / Cliente"}),i.jsxs("select",{value:G,onChange:re=>U(re.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{value:"",children:"Selecione..."}),ir.map(re=>{const $e=bt(re.id);return i.jsxs("option",{value:re.id,children:[re.client.name," (",$e==null?void 0:$e.phase,")"]},re.id)})]}),ir.length===0&&i.jsx("p",{className:"text-xs text-amber-500 mt-2",children:"Nenhum projeto nas etapas 7.1/7.2."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Prioridade"}),i.jsxs("select",{value:Q,onChange:re=>te(re.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{children:"Normal"}),i.jsx("option",{children:"Urgente"})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-[#101922] p-4 rounded-lg border border-slate-200 dark:border-slate-800",children:[i.jsxs("h3",{className:"font-bold text-slate-700 dark:text-white mb-3 text-sm flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add_circle"}),"Adicionar Item (Pendncia)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-end",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Ambiente"}),i.jsx("input",{type:"text",value:se,onChange:re=>Z(re.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Problema"}),i.jsx("input",{type:"text",value:F,onChange:re=>de(re.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Tipo de Custo"}),i.jsxs("select",{value:me,onChange:re=>Ge(re.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{children:"Custo Loja"}),i.jsx("option",{children:"Custo Fbrica"}),i.jsx("option",{children:"Custo Cliente"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Tipo de Trabalho"}),i.jsx("div",{className:"flex flex-col gap-1 mt-1",children:["Ferragens/Acessrios Local","Pea Fbrica","Trabalho Equipe"].map(re=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("input",{type:"radio",name:"tempWorkTypePA",value:re,checked:Me===re,onChange:()=>ot(re),className:"text-emerald-600 focus:ring-emerald-600"}),re]},re))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Fornecedor"}),i.jsx("input",{type:"text",value:Be,onChange:re=>xe(re.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Prazo Fornecedor"}),i.jsx("input",{type:"date",value:ve,onChange:re=>be(re.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Observaes"}),i.jsx("textarea",{value:le,onChange:re=>Ze(re.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm",rows:2})]}),i.jsx("div",{className:"md:col-span-2 flex justify-end",children:i.jsx("button",{onClick:en,className:"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 px-4 py-2 rounded font-bold hover:bg-slate-300",children:"Adicionar Item"})})]})]}),i.jsx("div",{className:"border rounded-lg border-slate-200 dark:border-slate-800 overflow-hidden",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Ambiente"}),i.jsx("th",{className:"p-3",children:"Problema"}),i.jsx("th",{className:"p-3",children:"Custo"}),i.jsx("th",{className:"p-3",children:"Fornecedor"}),i.jsx("th",{className:"p-3",children:"Obs"})]})}),i.jsxs("tbody",{children:[K.map((re,$e)=>i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-800",children:[i.jsx("td",{className:"p-3 font-medium",children:re.environmentName}),i.jsx("td",{className:"p-3 text-slate-500",children:re.problemDescription}),i.jsx("td",{className:"p-3 text-slate-500 text-xs",children:re.costType}),i.jsx("td",{className:"p-3 text-slate-500 text-xs",children:re.supplier}),i.jsx("td",{className:"p-3 text-slate-500 text-xs truncate max-w-[100px]",children:re.observations})]},$e)),K.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-4 text-center text-slate-400 italic",children:"Nenhum item adicionado."})})]})]})})]}),i.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-800 flex justify-end gap-3 bg-slate-50 dark:bg-slate-900",children:[i.jsx("button",{onClick:()=>S(!1),className:"px-6 py-2.5 rounded-lg border border-slate-200 dark:border-slate-700 font-bold text-sm",children:"Cancelar"}),i.jsx("button",{onClick:Ur,disabled:!G,className:"px-6 py-2.5 rounded-lg bg-emerald-600 text-white font-bold text-sm hover:bg-emerald-700 disabled:opacity-50",children:"Iniciar"})]})]})}),b&&T&&i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/40 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>{A(!1),I(null)},children:i.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-4xl rounded-xl shadow-2xl overflow-hidden flex flex-col h-[90vh]",onClick:re=>re.stopPropagation(),children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-slate-900",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("span",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-[10px] font-bold uppercase tracking-wider text-slate-500",children:["Etapa: ",(()=>{var $e;const re=bt(T.id);return re?(($e=n[re.phase])==null?void 0:$e.label)||re.phase:"N/A"})()]}),T.postAssemblyPriority==="Urgente"&&i.jsx("span",{className:"px-2 py-0.5 bg-rose-100 text-rose-600 rounded text-[10px] font-bold uppercase",children:"URGENTE"}),T.postAssemblyCode&&i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded text-[10px] font-bold tracking-wider",children:T.postAssemblyCode})]}),i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:T.client.name})]}),i.jsxs("div",{className:"flex gap-2 items-center",children:[u()&&i.jsx("button",{onClick:Bt,className:"p-2 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-full text-rose-500 hover:text-rose-600 transition-colors",title:"Excluir ps-montagem",children:i.jsx("span",{className:"material-symbols-outlined",children:"delete"})}),i.jsx("button",{onClick:zr,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-600 dark:text-slate-300",title:"Imprimir",children:i.jsx("span",{className:"material-symbols-outlined",children:"print"})}),i.jsx("button",{onClick:()=>{A(!1),I(null)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),i.jsxs("div",{className:"px-6 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex gap-6",children:[i.jsx("button",{onClick:()=>R("DETAILS"),className:`py-3 text-sm font-bold border-b-2 transition-colors ${O==="DETAILS"?"border-emerald-600 text-emerald-600":"border-transparent text-slate-500"}`,children:"Detalhes e Itens"}),i.jsx("button",{onClick:()=>R("HISTORY"),className:`py-3 text-sm font-bold border-b-2 transition-colors ${O==="HISTORY"?"border-emerald-600 text-emerald-600":"border-transparent text-slate-500"}`,children:"Histrico"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 dark:bg-[#101922]",children:[O==="DETAILS"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-4",children:[(T.postAssemblyItems||[]).map(re=>i.jsx("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex flex-col gap-4",children:ie===re.id?i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex justify-between items-center mb-2",children:i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Editando Item"})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Ambiente"}),i.jsx("input",{type:"text",value:Ae.environmentName,onChange:$e=>Ee({...Ae,environmentName:$e.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Problema"}),i.jsx("input",{type:"text",value:Ae.problemDescription,onChange:$e=>Ee({...Ae,problemDescription:$e.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Fornecedor"}),i.jsx("input",{type:"text",value:Ae.supplier||"",onChange:$e=>Ee({...Ae,supplier:$e.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Prazo"}),i.jsx("input",{type:"date",value:Ae.supplierDeadline||"",onChange:$e=>Ee({...Ae,supplierDeadline:$e.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase mb-1",children:"Observaes"}),i.jsx("textarea",{value:Ae.observations||"",onChange:$e=>Ee({...Ae,observations:$e.target.value}),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm",rows:2})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[i.jsx("button",{onClick:()=>Pe(null),className:"px-3 py-1.5 rounded text-xs font-bold border border-slate-200 dark:border-slate-700 text-slate-500",children:"Cancelar"}),i.jsx("button",{onClick:wr,className:"px-3 py-1.5 rounded text-xs font-bold bg-green-600 text-white hover:bg-green-700",children:"Salvar Alteraes"})]})]}):i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded",children:re.environmentName}),re.costType&&i.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded border border-slate-200 text-slate-500",children:re.costType}),re.workType&&i.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${bn(re.workType)}`,children:re.workType})]}),d&&i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>mr(re),className:"p-1 text-slate-400 hover:text-blue-500 rounded hover:bg-blue-50 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),i.jsx("button",{onClick:()=>Br(re.id),className:"p-1 text-slate-400 hover:text-rose-500 rounded hover:bg-rose-50 transition-colors",title:"Excluir item",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})}),i.jsx("button",{onClick:()=>or(re.id,"up"),className:"p-1 text-slate-400 hover:text-emerald-500 rounded hover:bg-emerald-50 transition-colors",title:"Mover para cima",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_upward"})}),i.jsx("button",{onClick:()=>or(re.id,"down"),className:"p-1 text-slate-400 hover:text-emerald-500 rounded hover:bg-emerald-50 transition-colors",title:"Mover para baixo",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_downward"})})]})]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300 font-medium mb-3",children:re.problemDescription}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-500 bg-slate-50 dark:bg-slate-800 p-3 rounded",children:[re.supplier&&i.jsxs("p",{children:["Fornecedor: ",i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:re.supplier})]}),re.supplierDeadline&&i.jsxs("p",{children:["Prazo Forn.: ",i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:re.supplierDeadline})]}),re.observations&&i.jsxs("p",{className:"col-span-2",children:["Obs: ",i.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:re.observations})]})]})]})},re.id)),(T.postAssemblyItems||[]).length===0&&i.jsx("div",{className:"text-center text-slate-400 py-4 italic",children:"Nenhum item registrado."})]}),(()=>{const re=bt(T.id);return(re==null?void 0:re.phase)==="8.1"?i.jsxs("div",{className:"mt-8 bg-emerald-50 dark:bg-emerald-900/10 border border-emerald-100 dark:border-emerald-900/30 p-4 rounded-xl",children:[i.jsxs("h3",{className:"font-bold text-emerald-800 dark:text-emerald-400 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"add_circle"}),"Adicionar Item (Extra)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Ambiente"}),i.jsx("input",{type:"text",value:Oe,onChange:z=>_e(z.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Problema"}),i.jsx("input",{type:"text",value:Ke,onChange:z=>je(z.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Tipo de Custo"}),i.jsxs("select",{value:tt,onChange:z=>ht(z.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{children:"Custo Loja"}),i.jsx("option",{children:"Custo Fbrica"}),i.jsx("option",{children:"Custo Cliente"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Tipo de Trabalho"}),i.jsx("div",{className:"flex flex-col gap-1 mt-1",children:["Ferragens/Acessrios Local","Pea Fbrica","Trabalho Equipe"].map(z=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("input",{type:"radio",name:"inspectWorkTypePA",value:z,checked:pt===z,onChange:()=>Fe(z),className:"text-emerald-600 focus:ring-emerald-600"}),z]},z))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Fornecedor"}),i.jsx("input",{type:"text",value:It,onChange:z=>Zt(z.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Prazo Forn."}),i.jsx("input",{type:"date",value:he,onChange:z=>Vr(z.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Observaes"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:hr,onChange:z=>Fr(z.target.value),className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm"}),i.jsx("button",{onClick:Er,className:"bg-emerald-600 text-white font-bold py-1 px-4 rounded text-sm hover:bg-emerald-700",children:"Add"})]})]})]})]}):i.jsxs("div",{className:"mt-6 flex items-center gap-2 text-xs text-slate-400 bg-slate-100 dark:bg-slate-800 px-4 py-3 rounded-lg",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"}),"Adio de itens bloqueada  o ps-montagem j avanou da etapa inicial. Para novos itens, abra um novo ps-montagem."]})})()]}),O==="HISTORY"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 mb-6",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Adicionar Nota ao Histrico"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{value:Yt,onChange:re=>Ot(re.target.value),placeholder:"Digite uma observao...",className:"w-full rounded border-slate-200 dark:bg-slate-800 text-sm py-2 px-3 focus:ring-emerald-500 focus:border-emerald-500",rows:2}),i.jsx("button",{onClick:er,disabled:!Yt.trim(),className:"bg-emerald-600 text-white font-bold px-4 rounded-lg text-sm hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:"Enviar"})]})]}),i.jsxs("div",{className:"relative pl-4 space-y-6",children:[i.jsx("div",{className:"absolute left-[27px] top-4 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700"}),T.postAssemblyEvents&&T.postAssemblyEvents.length>0?T.postAssemblyEvents.slice().reverse().map(re=>i.jsxs("div",{className:"relative flex gap-4 animate-fade-in",children:[i.jsx("div",{className:`size-10 rounded-full flex items-center justify-center shrink-0 z-10 border-4 border-slate-50 dark:border-[#101922] ${re.type==="STATUS_CHANGE"?"bg-blue-500 text-white":re.type==="ITEM_ADD"?"bg-emerald-500 text-white":re.type==="NOTE"?"bg-amber-500 text-white":"bg-slate-200 text-slate-600"}`,children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:re.type==="STATUS_CHANGE"?"sync_alt":re.type==="ITEM_ADD"?"add":re.type==="NOTE"?"description":"edit"})}),i.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-900 p-3 rounded-lg border border-slate-100 dark:border-slate-800 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-start mb-1",children:[i.jsx("span",{className:"font-bold text-xs text-slate-700 dark:text-slate-300",children:re.authorName}),i.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(re.date).toLocaleString()})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:re.description})]})]},re.id)):i.jsx("div",{className:"text-center text-slate-400 py-4",children:"Nenhum evento registrado."})]})]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-between items-center",children:[i.jsxs("p",{className:"text-xs text-slate-500",children:[(T.postAssemblyItems||[]).length," itens."]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{A(!1),I(null)},className:"px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 font-bold text-sm",children:"Fechar"}),d&&(()=>{const re=bt(T.id);return re&&re.phase!=="8.7"?i.jsxs("button",{onClick:Nt,className:"px-6 py-2 rounded-lg bg-emerald-600 text-white font-bold text-sm hover:bg-emerald-700 flex items-center gap-2 shadow-lg shadow-emerald-600/20",children:[i.jsx("span",{children:"Avanar Etapa"}),i.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})]}):null})()]})]})]})})]})},bD=D.createContext(void 0),pB=({children:t})=>{const{currentUser:e}=yr(),r=!!(e&&Le),n=[{id:"outro",name:"Outro",color:"#64748b",requireClient:!1},{id:"vistoria_assist",name:"Vistoria Assistncia",color:"#f59e0b",requireClient:!0},{id:"ligacao",name:"Ligao",color:"#3b82f6",requireClient:!0},{id:"medicao",name:"Medio",color:"#ec4899",requireClient:!0},{id:"prospeccao",name:"Prospeco",color:"#10b981",requireClient:!1},{id:"vistoria_montagem",name:"Vistoria Montagem",color:"#f97316",requireClient:!0},{id:"visita_comercial",name:"Visita Comercial",color:"#8b5cf6",requireClient:!1},{id:"enviar_mensagem",name:"Enviar Mensagem",color:"#06b6d4",requireClient:!0},{id:"vistoria_pos",name:"Vistoria Ps Montagem",color:"#eab308",requireClient:!0},{id:"visita_tecnica",name:"Visita Tcnica",color:"#ef4444",requireClient:!0}],[a,s]=D.useState([]),o=n,[l,c]=D.useState([]);D.useEffect(()=>{if(r&&Le){const y=Ka(ja(Le,"appointments"),Sa("storeId","==",e.storeId)),g=fi(y,E=>{const N=E.docs.map(k=>({id:k.id,...k.data()}));s(N)},E=>{console.error("AgendaContext: Error in appointments snapshot",E)}),w=fi(Wt(Le,"agenda_settings","users"),E=>{E.exists()?c(E.data().userIds||[]):c([])});return()=>{g(),w()}}else{const y=localStorage.getItem("fluxo_agenda_appointments"),g=localStorage.getItem("fluxo_agenda_users");y&&s(JSON.parse(y)),g&&c(JSON.parse(g))}},[r]),D.useEffect(()=>{r||(localStorage.setItem("fluxo_agenda_appointments",JSON.stringify(a)),localStorage.setItem("fluxo_agenda_users",JSON.stringify(l)))},[a,l,r]);const u=()=>{try{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID()}catch{}return Date.now().toString(36)+Math.random().toString(36).substring(2)},d=async y=>{if(e)try{const g={...y,id:u(),storeId:e.storeId};if(console.log("AgendaContext: Adding appointment",g),r&&Le)await Aa(Wt(Le,"appointments",g.id),g),console.log("AgendaContext: Appointment added to Firestore");else{const w=[...a,g];s(w),r||localStorage.setItem("fluxo_agenda_appointments",JSON.stringify(w))}}catch(g){throw console.error("Error adding appointment:",g),g}},f=async(y,g)=>{try{if(r&&Le)await Sl(Wt(Le,"appointments",y),g);else{const w=a.map(E=>E.id===y?{...E,...g}:E);s(w),r||localStorage.setItem("fluxo_agenda_appointments",JSON.stringify(w))}}catch(w){throw console.error("Error updating appointment:",w),w}},p=async y=>{try{if(r&&Le)await bp(Wt(Le,"appointments",y));else{const g=a.filter(w=>w.id!==y);s(g),r||localStorage.setItem("fluxo_agenda_appointments",JSON.stringify(g))}}catch(g){throw console.error("Error deleting appointment:",g),g}},m=async y=>{},v=async(y,g)=>{},x=async y=>{},_=async y=>{let g;l.includes(y)?g=l.filter(w=>w!==y):g=[...l,y],r&&Le?await Aa(Wt(Le,"agenda_settings","users"),{userIds:g}):c(g)};return i.jsx(bD.Provider,{value:{appointments:a,appointmentTypes:o,addAppointment:d,updateAppointment:f,deleteAppointment:p,addAppointmentType:m,updateAppointmentType:v,deleteAppointmentType:x,agendaUsers:l,toggleAgendaUser:_},children:t})},e_=()=>{const t=D.useContext(bD);if(!t)throw new Error("useAgenda must be used within an AgendaProvider");return t},mB=()=>{var _u,ri,ni,Nu,hl;const{users:t,addUser:e,updateUser:r,deleteUser:n,permissions:a,updatePermissions:s,workflowConfig:o,workflowOrder:l,addWorkflowStep:c,updateWorkflowStep:u,deleteWorkflowStep:d,reorderWorkflowSteps:f,assistanceWorkflow:p,addAssistanceStep:m,updateAssistanceStep:v,deleteAssistanceStep:x,reorderAssistanceSteps:_,origins:y,updateOrigins:g,companySettings:w,updateCompanySettings:E,currentStore:N,saveStoreConfig:k,resetStoreDefaults:S,canUserManageUsers:b}=yr(),{appointmentTypes:A,addAppointmentType:T,updateAppointmentType:I,deleteAppointmentType:O,agendaUsers:R,toggleAgendaUser:G}=e_(),[U,Q]=D.useState("COMPANY"),[te,K]=D.useState(()=>localStorage.getItem("fluxo_erp_theme")||"auto"),X=L=>{K(L),localStorage.setItem("fluxo_erp_theme",L);const ke=L==="dark"||L==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",ke)},se=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],Z=L=>{var Mt;const ke=(Mt=L.target.files)==null?void 0:Mt[0];if(!ke)return;if(!se.includes(ke.type)){alert("Apenas imagens so permitidas (JPG, PNG, GIF, WEBP, SVG).");return}if(ke.size>500*1024){alert("A imagem deve ter no mximo 500KB.");return}const ze=new FileReader;ze.onload=Pn=>{var oo;const ra=(oo=Pn.target)==null?void 0:oo.result;ne(ra)},ze.readAsDataURL(ke)},[F,de]=D.useState(!1),[me,Ge]=D.useState(null),[Me,ot]=D.useState("Vendedor"),[Be,xe]=D.useState(""),[ve,be]=D.useState(""),[le,Ze]=D.useState("Vendedor"),[ie,Pe]=D.useState(1),[Ae,Ee]=D.useState(1),[Oe,_e]=D.useState(""),[Ke,je]=D.useState(""),[tt,ht]=D.useState(1),[pt,Fe]=D.useState(""),[It,Zt]=D.useState(""),[he,Vr]=D.useState(""),[hr,Fr]=D.useState(""),[bt,ir]=D.useState("Vendedor"),[en,Ur]=D.useState(""),[pr,Er]=D.useState(""),[mr,Br]=D.useState(""),[or,wr]=D.useState(""),[Nt,Yt]=D.useState("CLT"),[Ot,er]=D.useState(!0),[Bt,bn]=D.useState(""),[zr,re]=D.useState(""),[$e,z]=D.useState("#3b82f6"),[q,Ne]=D.useState(!1),[Se,Ue]=D.useState(""),[st,it]=D.useState(""),[lr,Cn]=D.useState("fixed"),[tr,Wr]=D.useState(!1),[qr,yn]=D.useState(null),Tr=async()=>{Wr(!0),yn(null),await E({...w,evolutionApi:{...w.evolutionApi,instanceUrl:Ce,instanceName:Ye,token:wn,globalEnabled:cr,settings:Js}});const L=await k();Wr(!1),yn(L?" Configuraes salvas com sucesso!":" Erro ao salvar. Tente novamente."),setTimeout(()=>yn(null),3e3)},[ya,wa]=D.useState(w.name),[V,C]=D.useState(w.cnpj),[$,W]=D.useState(w.address),[B,ee]=D.useState(w.phone),[Y,ne]=D.useState(w.logoUrl||""),[ce,pe]=D.useState(w.socialMedia||""),[Ce,We]=D.useState(((_u=w.evolutionApi)==null?void 0:_u.instanceUrl)||""),[Ye,vt]=D.useState(((ri=w.evolutionApi)==null?void 0:ri.instanceName)||""),[wn,Cr]=D.useState(((ni=w.evolutionApi)==null?void 0:ni.token)||""),[cr,_n]=D.useState(((Nu=w.evolutionApi)==null?void 0:Nu.globalEnabled)??!1),[Js,ah]=D.useState(((hl=w.evolutionApi)==null?void 0:hl.settings)||{stageChange:{enabled:!0,notifyClient:!0,notifySeller:!0,notifyManager:!0},newObservation:{enabled:!0,notifySeller:!0,notifyManager:!0},assistanceUpdate:{enabled:!0,notifyClient:!0,notifySeller:!0,notifyManager:!0},postAssemblyUpdate:{enabled:!0,notifyClient:!0,notifySeller:!0,notifyManager:!0},slaAlert:{enabled:!0,notifySeller:!0,notifyManager:!0,preventive:!0}}),[lt,Zs]=D.useState("idle"),[za,ei]=D.useState(()=>{const L=w.whatsappClientTemplates;return L&&L.length>0?L:tB}),[dl,mu]=D.useState(()=>{const L=w.whatsappTeamTemplates;return L&&L.length>0?L:rB}),[gu]=D.useState(w.whatsappLogs||[]),[sh,xu]=D.useState(null),[vu,io]=D.useState(null),xs=async()=>{Wr(!0),xu(null),await E({...w,evolutionApi:{...w.evolutionApi,instanceUrl:Ce,instanceName:Ye,token:wn,globalEnabled:cr,settings:Js},whatsappClientTemplates:za,whatsappTeamTemplates:dl});const L=await k();Wr(!1),xu(L?" Comunicaes salvas com sucesso!":" Erro ao salvar."),setTimeout(()=>xu(null),3e3)},bu=async()=>{Zs("testing");const{EvolutionApi:L}=await ud(async()=>{const{EvolutionApi:ze}=await import("./evolutionApi-BtEDgQmG.js");return{EvolutionApi:ze}},[]),ke=await L.checkConnection(Ce,Ye,wn);Zs(ke?"success":"error"),setTimeout(()=>Zs("idle"),3e3)},yu=L=>{L?(Ge(L),Fe(L.name),Zt(L.username||""),Vr(L.email||""),Fr(L.password||""),ir(L.role),Ur(L.phone||""),Er(L.cpf||""),Br(L.rg||""),wr(L.address||""),Yt(L.contractType||"CLT"),er(L.isSystemUser)):(Ge(null),Fe(""),Zt(""),Vr(""),Fr(""),ir("Vendedor"),Ur(""),Er(""),Br(""),wr(""),Yt("CLT"),er(!0)),de(!0)},ih=()=>{if(!pt){alert("Nome  obrigatrio");return}if(Ot&&(!It||!me&&!hr)){alert("Para usurios do sistema, Usurio e Senha so obrigatrios.");return}const L={id:me?me.id:`u-${Date.now()}`,storeId:(N==null?void 0:N.id)||"",name:pt,username:It,email:he,password:hr,role:bt,phone:en,cpf:pr,rg:mr,address:or,contractType:Nt,isSystemUser:Ot};me?r(L):e(L),de(!1)},oh=()=>{E({...w,name:ya,cnpj:V,address:$,phone:B,logoUrl:Y,socialMedia:ce}),alert("Dados da empresa salvos com sucesso!")},lh=()=>{!Bt||y.includes(Bt)||(g([...y,Bt]),bn(""))},ti=L=>{g(y.filter(ke=>ke!==L))},gr=(L,ke,ze)=>{const Mt=a.map(Pn=>Pn.role===L?{...Pn,[ke]:ze}:Pn);s(Mt)},Y0=(L,ke)=>{const ze=a.find(ra=>ra.role===L);if(!ze)return;const Mt=ze.viewableStages||[],Pn=Mt.includes(ke)?Mt.filter(ra=>ra!==ke):[...Mt,ke];gr(L,"viewableStages",Pn)},X0=(L,ke)=>{const ze=a.find(ra=>ra.role===L);if(!ze)return;const Mt=ze.actionableSteps||[],Pn=Mt.includes(ke)?Mt.filter(ra=>ra!==ke):[...Mt,ke];gr(L,"actionableSteps",Pn)},Wa=D.useMemo(()=>{const L={};return l.forEach(ke=>{const ze=o[ke];ze&&(L[ze.stage]||(L[ze.stage]=[]),L[ze.stage].push(ze))}),L},[o,l]),Ve=a.find(L=>L.role===Me),wu=async()=>{if(!Se||!st){alert("Data e nome do feriado so obrigatrios.");return}const L={date:Se,name:st,type:lr,year:lr==="movable"?new Date().getFullYear():void 0},ke=w.holidays||[];if(ke.some(Mt=>Mt.date===Se&&Mt.type===lr&&Mt.year===L.year)){alert("Este feriado j est cadastrado.");return}Wr(!0),await E({...w,holidays:[...ke,L]}),Wr(!1),Ue(""),it(""),Cn("fixed")},fl=async L=>{if(!confirm("Tem certeza que deseja remover este feriado?"))return;const ze=(w.holidays||[]).filter((Mt,Pn)=>Pn!==L);Wr(!0),await E({...w,holidays:ze}),Wr(!1)};return i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#101922] overflow-y-auto",children:[i.jsxs("div",{className:"max-w-6xl mx-auto w-full p-8",children:[i.jsxs("h2",{className:"text-3xl font-extrabold text-slate-900 dark:text-white mb-8",children:["Configuraes - ",N==null?void 0:N.name]}),i.jsxs("div",{className:"flex gap-4 mb-8 border-b border-slate-200 dark:border-slate-800 overflow-x-auto scrollbar-hide",children:[i.jsx("button",{onClick:()=>Q("COMPANY"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="COMPANY"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Dados da Empresa"}),i.jsx("button",{onClick:()=>Q("USERS"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="USERS"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Gesto de Usurios"}),i.jsx("button",{onClick:()=>Q("PERMISSIONS"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="PERMISSIONS"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Cargos e Permisses"}),i.jsx("button",{onClick:()=>Q("WORKFLOW"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="WORKFLOW"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Fluxo Principal"}),i.jsx("button",{onClick:()=>Q("POST_ASSEMBLY"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="POST_ASSEMBLY"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Ps-Montagem"}),i.jsx("button",{onClick:()=>Q("ORIGINS"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="ORIGINS"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Origem do Cliente"}),i.jsx("button",{onClick:()=>Q("ASSISTANCE"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="ASSISTANCE"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Assistncia"}),i.jsx("button",{onClick:()=>Q("COMMUNICATIONS"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="COMMUNICATIONS"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Comunicaes"}),i.jsx("button",{onClick:()=>Q("APPEARANCE"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="APPEARANCE"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Aparncia"}),i.jsx("button",{onClick:()=>Q("HOLIDAYS"),className:`pb-4 px-2 font-bold text-sm transition-colors border-b-2 whitespace-nowrap ${U==="HOLIDAYS"?"border-primary text-primary":"border-transparent text-slate-500"}`,children:"Feriados"})]}),U==="COMPANY"&&i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 animate-fade-in space-y-6",children:[i.jsxs("div",{className:"flex gap-6 items-start",children:[i.jsxs("div",{className:"w-32 h-32 bg-slate-100 dark:bg-slate-800 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600 flex items-center justify-center shrink-0 overflow-hidden relative group cursor-pointer",onClick:()=>{var L;return(L=document.getElementById("logo-upload"))==null?void 0:L.click()},children:[Y?i.jsx("img",{src:Y,className:"w-full h-full object-cover"}):i.jsx("span",{className:"text-slate-400 font-bold text-4xl",children:ya.charAt(0)}),i.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("span",{className:"material-symbols-outlined text-white text-2xl",children:"upload"})}),i.jsx("input",{id:"logo-upload",type:"file",accept:"image/*",className:"hidden",onChange:Z})]}),i.jsxs("div",{className:"flex-1 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Logo da Empresa"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>{var L;return(L=document.getElementById("logo-upload"))==null?void 0:L.click()},className:"bg-primary/10 text-primary font-bold py-2 px-4 rounded-lg text-sm hover:bg-primary/20 transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"upload"}),"Enviar Imagem"]}),Y&&i.jsxs("button",{onClick:()=>ne(""),className:"bg-rose-50 text-rose-500 font-bold py-2 px-4 rounded-lg text-sm hover:bg-rose-100 transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"Remover"]})]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Formatos aceitos: JPG, PNG, SVG. Mximo 500KB."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"ID de Login (Slug)"}),i.jsx("input",{type:"text",value:(N==null?void 0:N.slug)||"",disabled:!0,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm bg-slate-100 dark:bg-slate-900 text-slate-500"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Este identificador  nico e usado para login. No pode ser alterado."})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Nome Fantasia"}),i.jsx("input",{type:"text",value:ya,onChange:L=>wa(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"CNPJ"}),i.jsx("input",{type:"text",value:V,onChange:L=>C(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Endereo Completo"}),i.jsx("input",{type:"text",value:$,onChange:L=>W(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Telefone Comercial"}),i.jsx("input",{type:"text",value:B,onChange:L=>ee(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Redes Sociais"}),i.jsx("input",{type:"text",value:ce,onChange:L=>pe(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"@instagram, facebook..."})]})]}),i.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-100 dark:border-slate-800",children:i.jsx("button",{onClick:oh,className:"bg-primary text-white font-bold py-2.5 px-6 rounded-lg text-sm hover:bg-primary-600",children:"Salvar Alteraes"})})]}),U==="USERS"&&i.jsxs("div",{className:"space-y-8 animate-fade-in",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Colaboradores"}),b()&&i.jsxs("button",{onClick:()=>yu(),className:"bg-primary text-white font-bold py-2 px-4 rounded-lg text-sm hover:bg-primary-600 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"person_add"}),"Novo Colaborador"]})]}),i.jsx("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase",children:"Nome"}),i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase",children:"Funo"}),i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase",children:"Usurio"}),i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase",children:"Aes"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:t.map(L=>i.jsxs("tr",{className:"group hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[i.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[i.jsx("div",{className:"size-8 rounded-full overflow-hidden bg-slate-200 flex items-center justify-center font-bold text-slate-600",children:L.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white leading-none",children:L.name}),i.jsx("p",{className:"text-xs text-slate-500",children:L.email||L.phone||"Sem contato"})]})]}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-300",children:[L.role," ",i.jsxs("span",{className:"text-xs text-slate-400",children:["(",L.contractType,")"]})]}),i.jsx("td",{className:"px-6 py-4",children:L.isSystemUser?i.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-bold rounded",children:["@",L.username]}):i.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-500 text-xs font-bold rounded",children:"No"})}),i.jsx("td",{className:"px-6 py-4 flex gap-2",children:b()&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>yu(L),className:"p-1 text-slate-400 hover:text-primary transition-colors",title:"Editar",children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit"})}),i.jsx("button",{onClick:()=>{window.confirm("Excluir usurio?")&&n(L.id)},className:"p-1 text-slate-400 hover:text-rose-500 transition-colors",title:"Excluir",children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})})]},L.id))})]})})]}),U==="PERMISSIONS"&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 animate-fade-in h-[calc(100vh-200px)]",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col",children:[i.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800",children:i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Selecionar Cargo"})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:a.map(L=>i.jsxs("button",{onClick:()=>ot(L.role),className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors flex justify-between items-center ${Me===L.role?"bg-primary text-white shadow-md":"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[L.role,i.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"})]},L.role))})]}),i.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 flex flex-col overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:["Configurando: ",Me]}),i.jsx("p",{className:"text-sm text-slate-500",children:"Defina o que este cargo pode ver e fazer no sistema."})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-bold text-primary uppercase tracking-wider border-b border-slate-100 dark:border-slate-800 pb-2",children:"Acesso Global"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Ve==null?void 0:Ve.canViewDashboard,onChange:L=>gr(Me,"canViewDashboard",L.target.checked),className:"rounded text-primary focus:ring-primary w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Dashboard"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Ver viso geral e estatsticas"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Ve==null?void 0:Ve.canViewKanban,onChange:L=>gr(Me,"canViewKanban",L.target.checked),className:"rounded text-primary focus:ring-primary w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Kanban (Produo)"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Acessar quadro de lotes"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Ve==null?void 0:Ve.canViewClients,onChange:L=>gr(Me,"canViewClients",L.target.checked),className:"rounded text-primary focus:ring-primary w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Visualizar Clientes"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Ver lista completa de clientes"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canEditClient)??!1,onChange:L=>gr(Me,"canEditClient",L.target.checked),className:"rounded text-primary focus:ring-primary w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Editar Clientes"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Alterar dados cadastrais de clientes"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canDeleteClient)??!1,onChange:L=>gr(Me,"canDeleteClient",L.target.checked),className:"rounded text-rose-500 focus:ring-rose-500 w-5 h-5"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:["Excluir Clientes ",i.jsx("span",{className:"text-[10px] text-rose-500 font-bold ml-1",children:"DESTRUTIVO"})]}),i.jsx("p",{className:"text-xs text-slate-500",children:"Remover clientes permanentemente"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Ve==null?void 0:Ve.canEditProject,onChange:L=>gr(Me,"canEditProject",L.target.checked),className:"rounded text-primary focus:ring-primary w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Editar Projetos"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Alterar dados de projetos"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Ve==null?void 0:Ve.canChangeSeller,onChange:L=>gr(Me,"canChangeSeller",L.target.checked),className:"rounded text-primary focus:ring-primary w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Alterar Vendedor"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Reatribuir projetos a outros vendedores"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Ve==null?void 0:Ve.canViewSettings,onChange:L=>gr(Me,"canViewSettings",L.target.checked),className:"rounded text-primary focus:ring-primary w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Configuraes"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Acesso  tela de configuraes"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canManageUsers)??!1,onChange:L=>gr(Me,"canManageUsers",L.target.checked),className:"rounded text-primary focus:ring-primary w-5 h-5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Gerenciar Usurios"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Criar, editar e excluir usurios"})]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-bold text-primary uppercase tracking-wider border-b border-slate-100 dark:border-slate-800 pb-2",children:"Visibilidade de Etapas (Kanban)"}),i.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Selecione quais colunas do Kanban este cargo pode visualizar."}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:[1,2,3,4,5,6,7,8,9].map(L=>i.jsxs("label",{className:`flex items-center gap-2 p-2 rounded border cursor-pointer select-none transition-all ${Ve!=null&&Ve.viewableStages.includes(L)?"bg-primary/5 border-primary/30 text-primary":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-500"}`,children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.viewableStages.includes(L))||!1,onChange:()=>Y0(Me,L),className:"rounded text-primary focus:ring-primary"}),i.jsxs("span",{className:"text-sm font-bold",children:["Etapa ",L]})]},L))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-sm font-bold text-primary uppercase tracking-wider border-b border-slate-100 dark:border-slate-800 pb-2",children:"Permisses de Execuo (Concluir Tarefas)"}),i.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Marque as tarefas especficas que este cargo tem autorizao para concluir/avanar."}),i.jsx("div",{className:"space-y-6",children:Object.entries(Wa).map(([L,ke])=>i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4 border border-slate-100 dark:border-slate-800",children:[i.jsxs("h5",{className:"font-bold text-slate-700 dark:text-slate-300 text-sm mb-3",children:["Etapa ",L]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ke.map(ze=>i.jsxs("label",{className:"flex items-start gap-3 p-2 hover:bg-white dark:hover:bg-slate-800 rounded cursor-pointer transition-colors",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.actionableSteps.includes(ze.id))||!1,onChange:()=>X0(Me,ze.id),className:"mt-1 rounded text-primary focus:ring-primary"}),i.jsxs("div",{children:[i.jsxs("span",{className:"block text-sm font-medium text-slate-800 dark:text-white",children:[ze.id," - ",ze.label]}),i.jsxs("span",{className:"block text-[10px] text-slate-400",children:["Responsvel padro: ",ze.ownerRole]})]})]},ze.id))})]},L))})]}),i.jsxs("div",{className:"space-y-4 mt-6",children:[i.jsx("h4",{className:"text-sm font-bold text-primary uppercase tracking-wider border-b border-slate-100 dark:border-slate-800 pb-2",children:"Mdulos Especiais"}),i.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Controle o acesso aos mdulos de Montagens, Ps-Montagem e Assistncia Tcnica."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[18px]",children:"construction"}),i.jsx("span",{className:"font-medium text-sm text-slate-800 dark:text-white",children:"Montagens"})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canViewAssembly)??!1,onChange:L=>gr(Me,"canViewAssembly",L.target.checked),className:"rounded text-primary focus:ring-primary"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Visualizar"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canEditAssembly)??!1,onChange:L=>gr(Me,"canEditAssembly",L.target.checked),className:"rounded text-primary focus:ring-primary"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Editar"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[18px]",children:"checklist"}),i.jsx("span",{className:"font-medium text-sm text-slate-800 dark:text-white",children:"Ps-Montagem"})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canViewPostAssembly)??!1,onChange:L=>gr(Me,"canViewPostAssembly",L.target.checked),className:"rounded text-primary focus:ring-primary"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Visualizar"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canEditPostAssembly)??!1,onChange:L=>gr(Me,"canEditPostAssembly",L.target.checked),className:"rounded text-primary focus:ring-primary"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Editar"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canDeletePostAssembly)??!1,onChange:L=>gr(Me,"canDeletePostAssembly",L.target.checked),className:"rounded text-rose-500 focus:ring-rose-500"}),i.jsx("span",{className:"text-rose-500 font-semibold",children:"Excluir"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[18px]",children:"handyman"}),i.jsx("span",{className:"font-medium text-sm text-slate-800 dark:text-white",children:"Assistncia Tcnica"})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canViewAssistance)??!1,onChange:L=>gr(Me,"canViewAssistance",L.target.checked),className:"rounded text-primary focus:ring-primary"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Visualizar"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canEditAssistance)??!1,onChange:L=>gr(Me,"canEditAssistance",L.target.checked),className:"rounded text-primary focus:ring-primary"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"Editar"})]}),i.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:(Ve==null?void 0:Ve.canDeleteAssistance)??!1,onChange:L=>gr(Me,"canDeleteAssistance",L.target.checked),className:"rounded text-rose-500 focus:ring-rose-500"}),i.jsx("span",{className:"text-rose-500 font-semibold",children:"Excluir"})]})]})]})]})]})]})]}),i.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[i.jsxs("button",{onClick:Tr,disabled:tr,className:"bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-sm hover:bg-green-700 disabled:opacity-50 flex items-center gap-2 shadow-lg",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),tr?"Salvando...":"Salvar Alteraes"]}),qr&&i.jsx("span",{className:"text-sm font-medium",children:qr})]})]}),U==="WORKFLOW"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Fluxo Principal de Produo"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Defina as etapas, prazos (SLA em dias teis) e responsveis."})]})}),i.jsx("div",{className:"space-y-3",children:l.map(L=>{const ke=o[L];return!ke||ke.stage===8?null:i.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[i.jsx("div",{className:"col-span-1",children:i.jsx("span",{className:"font-mono text-xs font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded",children:ke.id})}),i.jsxs("div",{className:"col-span-4",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Nome da Etapa"}),i.jsx("input",{readOnly:!0,value:ke.label,onChange:ze=>u(ke.id,{label:ze.target.value}),className:"w-full text-sm font-bold bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary opacity-70 cursor-not-allowed"})]}),i.jsxs("div",{className:"col-span-3",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Responsvel"}),i.jsx("select",{value:ke.ownerRole,onChange:ze=>u(ke.id,{ownerRole:ze.target.value}),className:"w-full text-sm bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary",children:a.map(ze=>i.jsx("option",{value:ze.role,children:ze.role},ze.role))})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"SLA (Dias teis)"}),i.jsx("input",{type:"number",min:"0",value:ke.sla,onChange:ze=>u(ke.id,{sla:parseInt(ze.target.value)||0}),className:"w-full text-sm font-bold bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary"})]}),i.jsx("div",{className:"col-span-2 flex justify-end"})]},ke.id)})})]}),i.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[i.jsxs("button",{onClick:Tr,disabled:tr,className:"bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-sm hover:bg-green-700 disabled:opacity-50 flex items-center gap-2 shadow-lg",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),tr?"Salvando...":"Salvar Alteraes"]}),qr&&i.jsx("span",{className:"text-sm font-medium",children:qr})]})]}),U==="POST_ASSEMBLY"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Fluxo de Ps-Montagem"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Etapas de finalizao e avaliao de qualidade (8.x)."})]})}),i.jsx("div",{className:"space-y-3",children:l.map(L=>{const ke=o[L];return!ke||ke.stage!==8?null:i.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[i.jsx("div",{className:"col-span-1",children:i.jsx("span",{className:"font-mono text-xs font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded",children:ke.id})}),i.jsxs("div",{className:"col-span-4",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Nome da Etapa"}),i.jsx("input",{type:"text",readOnly:!0,value:ke.label,className:"w-full text-sm font-bold bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary opacity-70 cursor-not-allowed"})]}),i.jsxs("div",{className:"col-span-3",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Responsvel"}),i.jsx("select",{value:ke.ownerRole,onChange:ze=>u(ke.id,{ownerRole:ze.target.value}),className:"w-full text-sm bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary",children:a.map(ze=>i.jsx("option",{value:ze.role,children:ze.role},ze.role))})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"SLA (Dias teis)"}),i.jsx("input",{type:"number",min:"0",value:ke.sla,onChange:ze=>u(ke.id,{sla:parseInt(ze.target.value)||0}),className:"w-full text-sm font-bold bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary"})]})]},ke.id)})})]}),i.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[i.jsxs("button",{onClick:Tr,disabled:tr,className:"bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-sm hover:bg-green-700 disabled:opacity-50 flex items-center gap-2 shadow-lg",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),tr?"Salvando...":"Salvar Alteraes"]}),qr&&i.jsx("span",{className:"text-sm font-medium",children:qr})]})]}),U==="ORIGINS"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Adicionar Nova Origem"}),i.jsxs("div",{className:"flex gap-4 items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Descrio"}),i.jsx("input",{type:"text",value:Bt,onChange:L=>bn(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"Ex: Feira de Imveis 2024"})]}),i.jsx("button",{onClick:lh,className:"bg-primary text-white font-bold py-2.5 px-6 rounded-lg text-sm hover:bg-primary-600",children:"Adicionar"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Origens Cadastradas"}),i.jsx("button",{onClick:async()=>{window.confirm("Tem certeza? Isso redefinir as origens para o padro do sistema.")&&(await S("origins"),alert("Origens restauradas!"))},className:"text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 px-3 py-1 rounded text-xs font-bold border border-rose-200 dark:border-rose-800 transition-colors",children:"Restaurar Padro"})]}),i.jsx("div",{className:"flex flex-wrap gap-3",children:y.map(L=>i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[L,i.jsx("button",{onClick:()=>ti(L),className:"text-slate-400 hover:text-rose-500",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]},L))})]})]}),U==="INTEGRATIONS"&&i.jsx("div",{className:"space-y-6 animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"material-symbols-outlined text-4xl text-green-500",children:"chat"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:"Evolution API (WhatsApp)"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Configure a conexo com a Evolution API para envio de mensagens automticas."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"URL da Instncia"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-3 text-slate-400 material-symbols-outlined text-sm",children:"link"}),i.jsx("input",{type:"text",value:Ce,onChange:L=>We(L.target.value),className:"w-full pl-9 rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"https://api.evolution.com/instance/minha-empresa"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"API Token (API Key)"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-3 top-3 text-slate-400 material-symbols-outlined text-sm",children:"key"}),i.jsx("input",{type:"password",value:wn,onChange:L=>Cr(L.target.value),className:"w-full pl-9 rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"Ex: 4E8Q..."})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-4",children:"Ativao Global"}),i.jsx("div",{className:"space-y-3",children:i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg border border-slate-100 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:cr,onChange:L=>_n(L.target.checked),className:"rounded text-primary focus:ring-primary"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-sm text-slate-700 dark:text-slate-200",children:"Ativar Notificaes Globais (sistema legado)"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Quando ativo, notificaes genricas de categoria so disparadas. Para notificaes por etapa configure na aba Comunicaes."})]})]})})]})]}),i.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[i.jsx("button",{onClick:bu,disabled:lt==="testing"||!Ce||!wn,className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors ${lt==="success"?"bg-green-100 text-green-700":lt==="error"?"bg-rose-100 text-rose-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:lt==="testing"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"refresh"}),"Testando..."]}):lt==="success"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"check_circle"}),"Conectado!"]}):lt==="error"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"error"}),"Falha na Conexo"]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"wifi_tethering"}),"Testar Conexo"]})}),i.jsx("button",{onClick:Tr,className:"bg-primary text-white font-bold py-2.5 px-6 rounded-lg text-sm hover:bg-primary-600 shadow-lg shadow-primary/20",children:"Salvar Integraes"})]})]})}),U==="COMMUNICATIONS"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"material-symbols-outlined text-4xl text-green-500",children:"chat"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:"Configurao da Evolution API"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Configure a conexo com a Evolution API para envio de mensagens WhatsApp."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"URL da Instncia"}),i.jsx("input",{type:"text",value:Ce,onChange:L=>We(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"https://api.evolution.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Nome da Instncia"}),i.jsx("input",{type:"text",value:Ye,onChange:L=>vt(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"Ex: minha-empresa"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"API Token"}),i.jsx("input",{type:"password",value:wn,onChange:L=>Cr(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"Ex: 4E8Q..."})]})]}),i.jsx("div",{className:"mt-4 flex items-center gap-3",children:i.jsxs("button",{onClick:bu,disabled:lt==="testing"||!Ce||!Ye||!wn,className:`px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors ${lt==="success"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":lt==="error"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400":"bg-slate-100 text-slate-600 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-300"}`,children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:lt==="testing"?"refresh":lt==="success"?"check_circle":lt==="error"?"error":"wifi_tethering"}),lt==="testing"?"Testando...":lt==="success"?"Conectado!":lt==="error"?"Falha":"Testar Conexo"]})})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"material-symbols-outlined text-2xl text-blue-500",children:"person"}),i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:"Mensagens para o Cliente"})]}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Escolha quais etapas enviam mensagem automtica ao cliente. Personalize o texto de cada uma."}),i.jsxs("p",{className:"text-xs text-slate-400 mb-6",children:["Variveis: ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{nomeCliente}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{data}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{prazo}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{vendedor}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{codigoAss}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{etapa}"})]}),i.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:za.map((L,ke)=>i.jsxs("div",{className:`p-3 rounded-lg border transition-colors ${L.enabled?"border-green-200 bg-green-50/50 dark:border-green-800 dark:bg-green-900/10":"border-slate-100 dark:border-slate-800"}`,children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer shrink-0",children:[i.jsx("input",{type:"checkbox",checked:L.enabled,onChange:()=>{const ze=[...za];ze[ke]={...L,enabled:!L.enabled},ei(ze)},className:"sr-only peer"}),i.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-green-500"})]}),i.jsx("span",{className:"text-xs font-mono text-slate-400 w-16 shrink-0",children:L.stepId}),i.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 truncate",children:L.label})]}),i.jsx("button",{onClick:()=>io(vu===L.stepId?null:L.stepId),className:"text-slate-400 hover:text-primary shrink-0",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:vu===L.stepId?"expand_less":"edit"})})]}),vu===L.stepId&&i.jsx("div",{className:"mt-3",children:i.jsx("textarea",{value:L.message,onChange:ze=>{const Mt=[...za];Mt[ke]={...L,message:ze.target.value},ei(Mt)},rows:3,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm p-3"})})]},L.stepId))})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"material-symbols-outlined text-2xl text-orange-500",children:"groups"}),i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:"Mensagens para a Equipe (Alertas de SLA)"})]}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Alertas automticos enviados para o responsvel da etapa, vendedor e gerente quando o SLA est prestes a vencer."}),i.jsxs("p",{className:"text-xs text-slate-400 mb-6",children:["Variveis: ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{nomeResponsavel}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{nomeProjeto}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{nomeCliente}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{etapa}"})," ",i.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-1 rounded",children:"{diasRestantes}"})]}),i.jsx("div",{className:"space-y-3",children:dl.map((L,ke)=>i.jsxs("div",{className:`p-4 rounded-lg border transition-colors ${L.enabled?"border-orange-200 bg-orange-50/50 dark:border-orange-800 dark:bg-orange-900/10":"border-slate-100 dark:border-slate-800"}`,children:[i.jsx("div",{className:"flex items-center justify-between gap-3 mb-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer shrink-0",children:[i.jsx("input",{type:"checkbox",checked:L.enabled,onChange:()=>{const ze=[...dl];ze[ke]={...L,enabled:!L.enabled},mu(ze)},className:"sr-only peer"}),i.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-orange-500"})]}),i.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:[L.type==="sla_d1"?"":""," ",L.label]})]})}),i.jsx("textarea",{value:L.message,onChange:ze=>{const Mt=[...dl];Mt[ke]={...L,message:ze.target.value},mu(Mt)},rows:2,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm p-3"}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Enviado para: Responsvel da etapa + Vendedor do projeto + Gerente/Admin"})]},L.type))})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("span",{className:"material-symbols-outlined text-2xl text-slate-400",children:"history"}),i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-lg",children:"Log de Mensagens Enviadas"}),i.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:[gu.length," registros"]})]}),gu.length===0?i.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Nenhuma mensagem enviada ainda."}):i.jsx("div",{className:"overflow-x-auto max-h-[400px] overflow-y-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"sticky top-0 bg-white dark:bg-[#1a2632]",children:i.jsxs("tr",{className:"text-left text-xs font-bold text-slate-500 uppercase",children:[i.jsx("th",{className:"pb-3 pr-4",children:"Data"}),i.jsx("th",{className:"pb-3 pr-4",children:"Tipo"}),i.jsx("th",{className:"pb-3 pr-4",children:"Etapa"}),i.jsx("th",{className:"pb-3 pr-4",children:"Destinatrio"}),i.jsx("th",{className:"pb-3 pr-4",children:"Telefone"}),i.jsx("th",{className:"pb-3",children:"Status"})]})}),i.jsx("tbody",{children:gu.slice(0,100).map((L,ke)=>i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-800",children:[i.jsx("td",{className:"py-2 pr-4 text-slate-600 dark:text-slate-300 whitespace-nowrap",children:new Date(L.sentAt).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}),i.jsx("td",{className:"py-2 pr-4",children:i.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${L.audience==="client"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"}`,children:L.audience==="client"?"Cliente":"Equipe"})}),i.jsx("td",{className:"py-2 pr-4 text-slate-600 dark:text-slate-300 font-mono text-xs",children:L.stepId}),i.jsx("td",{className:"py-2 pr-4 text-slate-700 dark:text-slate-200",children:L.recipientName}),i.jsx("td",{className:"py-2 pr-4 text-slate-500 font-mono text-xs",children:L.phone}),i.jsx("td",{className:"py-2",children:L.success?i.jsx("span",{className:"text-green-600 font-bold",children:""}):i.jsx("span",{className:"text-rose-500 font-bold",children:""})})]},ke))})]})})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[sh&&i.jsx("span",{className:"text-sm font-bold",children:sh}),i.jsx("button",{onClick:xs,disabled:tr,className:"bg-primary text-white font-bold py-2.5 px-6 rounded-lg text-sm hover:bg-primary-600 shadow-lg shadow-primary/20 ml-auto",children:tr?"Salvando...":"Salvar Comunicaes"})]})]}),U==="APPEARANCE"&&i.jsx("div",{className:"space-y-6 animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-2",children:"Tema da Interface"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Escolha como o FluxoERP aparece para voc."}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{key:"light",icon:"light_mode",label:"Claro",desc:"Fundo claro com texto escuro"},{key:"dark",icon:"dark_mode",label:"Escuro",desc:"Fundo escuro, ideal para noite"},{key:"auto",icon:"contrast",label:"Automtico",desc:"Segue a preferncia do sistema"}].map(L=>i.jsxs("button",{onClick:()=>X(L.key),className:`p-5 rounded-xl border-2 text-left transition-all duration-200 ${te===L.key?"border-primary bg-primary/5 dark:bg-primary/10 shadow-md":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:`material-symbols-outlined text-2xl ${te===L.key?"text-primary":"text-slate-400"}`,children:L.icon}),i.jsx("span",{className:`font-bold ${te===L.key?"text-primary":"text-slate-700 dark:text-slate-300"}`,children:L.label}),te===L.key&&i.jsx("span",{className:"material-symbols-outlined text-primary text-sm ml-auto",children:"check_circle"})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:L.desc})]},L.key))})]})}),U==="HOLIDAYS"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Feriados Fixos (Obrigatrios)"}),i.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left font-bold text-slate-700 dark:text-slate-300",children:"Data (MM-DD)"}),i.jsx("th",{className:"px-4 py-3 text-left font-bold text-slate-700 dark:text-slate-300",children:"Nome"})]})}),i.jsx("tbody",{children:[{date:"01-01",name:"Confraternizao Universal"},{date:"04-21",name:"Tiradentes"},{date:"05-01",name:"Dia do Trabalho"},{date:"09-07",name:"Independncia do Brasil"},{date:"10-12",name:"Nossa Senhora Aparecida"},{date:"11-02",name:"Finados"},{date:"11-15",name:"Proclamao da Repblica"},{date:"12-25",name:"Natal"}].map((L,ke)=>i.jsxs("tr",{className:ke%2===0?"bg-white dark:bg-slate-900/30":"bg-slate-50 dark:bg-slate-800/30",children:[i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400 font-mono",children:L.date}),i.jsx("td",{className:"px-4 py-3 text-slate-700 dark:text-slate-300",children:L.name})]},ke))})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white mb-4",children:"Feriados Customizados"}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-4 rounded-lg mb-6 border border-slate-200 dark:border-slate-700",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Adicionar novo feriado"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-500 mb-1",children:"Data"}),i.jsx("input",{type:lr==="fixed"?"text":"date",placeholder:lr==="fixed"?"MM-DD":"YYYY-MM-DD",value:Se,onChange:L=>Ue(L.target.value),className:"w-full text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-500 mb-1",children:"Nome"}),i.jsx("input",{type:"text",placeholder:"Ex: Carnaval",value:st,onChange:L=>it(L.target.value),className:"w-full text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-500 mb-1",children:"Tipo"}),i.jsxs("select",{value:lr,onChange:L=>{Cn(L.target.value),Ue("")},className:"w-full text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-800 text-slate-900 dark:text-white px-3 py-2",children:[i.jsx("option",{value:"fixed",children:"Fixo (Todo ano)"}),i.jsx("option",{value:"movable",children:"Mvel (Ano especfico)"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{onClick:wu,disabled:tr,className:"w-full bg-primary hover:bg-primary-600 disabled:opacity-50 text-white font-bold text-sm py-2 px-4 rounded transition-colors",children:tr?"Salvando...":"Adicionar"})})]})]}),w.holidays&&w.holidays.length>0?i.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left font-bold text-slate-700 dark:text-slate-300",children:"Data"}),i.jsx("th",{className:"px-4 py-3 text-left font-bold text-slate-700 dark:text-slate-300",children:"Nome"}),i.jsx("th",{className:"px-4 py-3 text-left font-bold text-slate-700 dark:text-slate-300",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left font-bold text-slate-700 dark:text-slate-300",children:"Ao"})]})}),i.jsx("tbody",{children:w.holidays.map((L,ke)=>i.jsxs("tr",{className:ke%2===0?"bg-white dark:bg-slate-900/30":"bg-slate-50 dark:bg-slate-800/30",children:[i.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-400 font-mono",children:L.date}),i.jsx("td",{className:"px-4 py-3 text-slate-700 dark:text-slate-300",children:L.name}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${L.type==="fixed"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300"}`,children:L.type==="fixed"?"Fixo":`Mvel (${L.year})`})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{onClick:()=>fl(ke),className:"text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 px-3 py-1 rounded text-xs font-bold border border-rose-200 dark:border-rose-800 transition-colors",children:"Remover"})})]},ke))})]})}):i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm py-6 text-center",children:"Nenhum feriado customizado cadastrado"})]})]}),U==="ASSISTANCE"&&i.jsxs("div",{className:"space-y-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Fluxo de Assistncia Tcnica"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Defina as etapas do processo de assistncia."})]}),i.jsx("button",{onClick:async()=>{window.confirm("Tem certeza? Isso redefinir as etapas de assistncia para o padro do sistema. Personalizaes sero perdidas.")&&(await S("assistance"),alert("Padres restaurados!"))},className:"text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 px-3 py-1 rounded text-xs font-bold border border-rose-200 dark:border-rose-800 transition-colors",children:"Restaurar Padro"})]}),i.jsx("div",{className:"space-y-2",children:p.map(L=>i.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[i.jsx("div",{className:"col-span-1",children:i.jsx("span",{className:"font-mono text-xs font-bold text-slate-400 bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded",children:L.id})}),i.jsxs("div",{className:"col-span-4",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Nome da Etapa"}),i.jsx("input",{type:"text",readOnly:!0,value:L.label,className:"w-full text-sm font-bold bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary opacity-70 cursor-not-allowed"})]}),i.jsxs("div",{className:"col-span-3",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"Responsvel"}),i.jsxs("select",{value:L.ownerRole||"",onChange:ke=>v(L.id,{ownerRole:ke.target.value}),className:"w-full text-sm bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary",children:[i.jsx("option",{value:"",children:"Selecione..."}),a.map(ke=>i.jsx("option",{value:ke.role,children:ke.role},ke.role))]})]}),i.jsx("div",{className:"col-span-3",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("label",{className:"block text-[10px] uppercase font-bold text-slate-400 mb-1",children:"SLA (Dias):"}),i.jsx("input",{type:"number",min:"0",value:L.sla,onChange:ke=>v(L.id,{sla:parseInt(ke.target.value)||0}),className:"w-full text-sm font-bold bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 rounded transition-colors focus:ring-primary"})]})})]},L.id))})]}),i.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[i.jsxs("button",{onClick:Tr,disabled:tr,className:"bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-sm hover:bg-green-700 disabled:opacity-50 flex items-center gap-2 shadow-lg",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),tr?"Salvando...":"Salvar Alteraes"]}),qr&&i.jsx("span",{className:"text-sm font-medium",children:qr})]})]})]}),F&&i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>de(!1),children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-scale-up",onClick:L=>L.stopPropagation(),children:[i.jsxs("div",{className:"px-8 py-5 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center bg-white dark:bg-[#1a2632] shrink-0",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:me?"Editar Colaborador":"Novo Colaborador"}),i.jsx("button",{onClick:()=>de(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-500",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-4 border-b border-slate-100 dark:border-slate-800 pb-2",children:"Dados Pessoais"})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Nome Completo"}),i.jsx("input",{type:"text",value:pt,onChange:L=>Fe(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"CPF"}),i.jsx("input",{type:"text",value:pr,onChange:L=>Er(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"000.000.000-00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"RG"}),i.jsx("input",{type:"text",value:mr,onChange:L=>Br(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Telefone / WhatsApp"}),i.jsx("input",{type:"text",value:en,onChange:L=>Ur(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Endereo Completo"}),i.jsx("input",{type:"text",value:or,onChange:L=>wr(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsx("div",{className:"md:col-span-2 mt-4",children:i.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider mb-4 border-b border-slate-100 dark:border-slate-800 pb-2",children:"Dados Corporativos"})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Cargo / Funo"}),i.jsxs("select",{value:bt,onChange:L=>ir(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{children:"Vendedor"}),i.jsx("option",{children:"Projetista"}),i.jsx("option",{children:"Medidor"}),i.jsx("option",{children:"Liberador"}),i.jsx("option",{children:"Financeiro"}),i.jsx("option",{children:"Industria"}),i.jsx("option",{children:"Coordenador de Montagem"}),i.jsx("option",{children:"Montador"}),i.jsx("option",{children:"Logistica"}),i.jsx("option",{children:"Gerente"}),i.jsx("option",{children:"Proprietario"}),i.jsx("option",{children:"Admin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Tipo de Contrato"}),i.jsxs("select",{value:Nt,onChange:L=>Yt(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",children:[i.jsx("option",{children:"CLT"}),i.jsx("option",{children:"PJ"})]})]}),i.jsx("div",{className:"md:col-span-2 mt-4",children:i.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 dark:border-slate-800 pb-2 mb-4",children:[i.jsx("h3",{className:"text-sm font-bold text-primary uppercase tracking-wider",children:"Acesso ao Sistema"}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Ot,onChange:L=>er(L.target.checked),className:"rounded text-primary focus:ring-primary"}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Este funcionrio utiliza o ERP?"})]})]})}),Ot&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Usurio de Login"}),i.jsx("input",{type:"text",value:It,onChange:L=>Zt(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"usuario.sobrenome"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Email (Opcional)"}),i.jsx("input",{type:"email",value:he,onChange:L=>Vr(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Senha"}),i.jsx("input",{type:"password",value:hr,onChange:L=>Fr(L.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:me?"Deixe em branco para manter":"Senha inicial"})]})]})]})}),i.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>de(!1),className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-bold text-slate-600 dark:text-slate-300",children:"Cancelar"}),i.jsx("button",{onClick:ih,className:"px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary-600",children:"Salvar"})]})]})})]})},gB=({isOpen:t,onClose:e,project:r})=>{const{currentUser:n,companySettings:a,formalizeContract:s}=yr(),[o,l]=D.useState("EDIT"),[c,u]=D.useState(new Date().toISOString().split("T")[0]),[d,f]=D.useState(60),[p,m]=D.useState([]),[v,x]=D.useState(0),[_,y]=D.useState([]);D.useEffect(()=>{if(t&&r){const A=r.environments.map(I=>({id:I.id,name:I.name,value:I.final_value||I.estimated_value||0,included:I.status!=="Lost"}));m(A);const T=A.filter(I=>I.included).reduce((I,O)=>I+O.value,0);x(T),_.length===0&&y([{id:"1",dueDate:new Date().toISOString().split("T")[0],method:"Transferncia",value:T}])}},[t,r]);const g=()=>{window.print()},w=()=>{const A=r.environments.map(T=>{const I=p.find(O=>O.id===T.id);return I?{...T,name:I.name,final_value:I.value,estimated_value:I.value,status:I.included?T.status:"Lost"}:T});s(r.id,A,v,c),e()};if(!t||!r)return null;const E=a||{name:"Empresa Modelo",corporateName:"Razo Social Modelo",cnpj:"00.000.000/0001-00",address:"Endereo da Empresa",phone:"(00) 0000-0000"},N=A=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(A),k=A=>A?new Date(A).toLocaleDateString("pt-BR"):"",S=()=>i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[i.jsxs("section",{children:[i.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-emerald-100 text-emerald-600 size-6 rounded-full flex items-center justify-center text-sm",children:"1"}),"Itens e Valores"]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 space-y-4",children:[p.map((A,T)=>i.jsxs("div",{className:`flex gap-4 items-center ${A.included?"":"opacity-50"}`,children:[i.jsxs("span",{className:"font-bold text-slate-400 w-6",children:["#",T+1]}),i.jsx("button",{onClick:()=>{const I=[...p];I[T].included=!I[T].included,m(I),x(I.filter(O=>O.included).reduce((O,R)=>O+R.value,0))},className:`w-6 h-6 rounded border flex items-center justify-center shrink-0 ${A.included?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300"}`,children:A.included&&i.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"check"})}),i.jsx("input",{type:"text",value:A.name,onChange:I=>{const O=[...p];O[T].name=I.target.value,m(O)},className:"flex-1 rounded border-slate-300 text-sm",placeholder:"Nome do Ambiente",disabled:!A.included}),i.jsx("input",{type:"number",value:A.value,onChange:I=>{const O=[...p];O[T].value=Number(I.target.value),m(O),x(O.filter(R=>R.included).reduce((R,G)=>R+G.value,0))},className:"w-32 rounded border-slate-300 text-sm",placeholder:"0,00",disabled:!A.included}),i.jsx("button",{onClick:()=>m(p.filter((I,O)=>O!==T)),className:"text-red-400 hover:text-red-600",children:i.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]},A.id)),i.jsx("button",{onClick:()=>m([...p,{id:`new-${Date.now()}`,name:"",value:0,included:!0}]),className:"text-sm text-emerald-600 font-bold hover:underline",children:"+ Adicionar Item"}),i.jsxs("div",{className:"border-t border-slate-200 mt-4 pt-4 flex justify-end items-center gap-4",children:[i.jsx("span",{className:"font-bold text-slate-600",children:"Total do Contrato:"}),i.jsx("span",{className:"text-xl font-bold text-slate-800",children:N(v)})]})]})]}),i.jsxs("section",{children:[i.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-emerald-100 text-emerald-600 size-6 rounded-full flex items-center justify-center text-sm",children:"2"}),"Forma de Pagamento"]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 space-y-4",children:[_.map((A,T)=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center bg-white p-3 rounded border border-slate-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Vencimento"}),i.jsx("input",{type:"date",value:A.dueDate,onChange:I=>{const O=[..._];O[T].dueDate=I.target.value,y(O)},className:"w-full rounded border-slate-300 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Forma"}),i.jsxs("select",{value:A.method,onChange:I=>{const O=[..._];O[T].method=I.target.value,y(O)},className:"w-full rounded border-slate-300 text-sm",children:[i.jsx("option",{children:"Transferncia"}),i.jsx("option",{children:"Boleto"}),i.jsx("option",{children:"Carto de Crdito"}),i.jsx("option",{children:"Pix"}),i.jsx("option",{children:"Cheque"}),i.jsx("option",{children:"Dinheiro"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Valor"}),i.jsx("input",{type:"number",value:A.value,onChange:I=>{const O=[..._];O[T].value=Number(I.target.value),y(O)},className:"w-full rounded border-slate-300 text-sm"})]}),i.jsx("div",{className:"flex items-end justify-end h-full pt-4",children:i.jsx("button",{onClick:()=>y(_.filter((I,O)=>O!==T)),className:"text-red-400 hover:text-red-600 p-2",children:i.jsx("span",{className:"material-symbols-outlined",children:"delete"})})})]},T)),i.jsx("button",{onClick:()=>y([..._,{id:`p-${Date.now()}`,dueDate:"",method:"Transferncia",value:0}]),className:"text-sm text-emerald-600 font-bold hover:underline",children:"+ Adicionar Parcela"})]})]}),i.jsxs("section",{children:[i.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"bg-emerald-100 text-emerald-600 size-6 rounded-full flex items-center justify-center text-sm",children:"3"}),"Detalhes do Contrato"]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Data do Contrato"}),i.jsx("input",{type:"date",value:c,onChange:A=>u(A.target.value),className:"w-full rounded border-slate-300 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Prazo de Entrega (Dias teis)"}),i.jsx("input",{type:"number",value:d,onChange:A=>f(Number(A.target.value)),className:"w-full rounded border-slate-300 text-sm"})]})]})]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-200 bg-white flex justify-end gap-3 rounded-b-xl",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded",children:"Cancelar"}),i.jsx("button",{onClick:()=>l("PREVIEW"),className:"px-6 py-2 bg-emerald-600 text-white font-bold rounded hover:bg-emerald-700 shadow-lg shadow-emerald-600/20",children:"Gerar Minuta"})]})]}),b=()=>i.jsxs("div",{className:"flex flex-col h-full bg-slate-500/50",children:[i.jsxs("div",{className:"bg-white p-4 shadow-md z-10 flex justify-between items-center print:hidden",children:[i.jsxs("button",{onClick:()=>l("EDIT"),className:"flex items-center gap-2 text-slate-600 font-bold hover:text-slate-900",children:[i.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"}),"Voltar e Editar"]}),i.jsx("h2",{className:"font-bold text-slate-800",children:"Visualizao de Impresso"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:g,className:"flex items-center gap-2 bg-slate-200 text-slate-700 px-6 py-2 rounded font-bold hover:bg-slate-300 shadow",children:[i.jsx("span",{className:"material-symbols-outlined",children:"print"}),"Imprimir / PDF"]}),i.jsxs("button",{onClick:w,className:"flex items-center gap-2 bg-emerald-600 text-white px-6 py-2 rounded font-bold hover:bg-emerald-700 shadow-lg",children:[i.jsx("span",{className:"material-symbols-outlined",children:"verified"}),"Formalizar Contrato"]})]})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-8 print:p-0 print:overflow-visible flex justify-center",children:[i.jsxs("div",{className:"bg-white w-[210mm] min-h-[297mm] p-[20mm] shadow-2xl print:shadow-none print:w-full text-[10pt] leading-relaxed text-justify font-serif text-black",children:[i.jsxs("div",{className:"mb-8 border-b-2 border-slate-300 pb-4 flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold uppercase mb-1",children:E.corporateName}),i.jsx("p",{className:"text-sm",children:E.cnpj}),i.jsx("p",{className:"text-sm",children:E.address}),i.jsx("p",{className:"text-sm",children:E.phone})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("h2",{className:"text-lg font-bold",children:"CONTRATO DE COMPRA E VENDA"}),i.jsxs("p",{className:"font-bold",children:["PV-",r.id.slice(-6).toUpperCase()]}),i.jsx("p",{children:"Verso: 1"})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-bold uppercase mb-2 bg-slate-100 p-1 print:bg-transparent print:border-b print:border-black",children:"Contratante"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nome:"})," ",r.client.name,i.jsx("br",{}),i.jsx("strong",{children:"CPF:"})," ",r.client.cpf||"No informado"," | ",i.jsx("strong",{children:"RG:"})," ",r.client.rg||"No informado",i.jsx("br",{}),i.jsx("strong",{children:"Endereo:"})," ",r.client.address||"No informado"," ",r.client.condominium?`- ${r.client.condominium}`:"",i.jsx("br",{}),i.jsx("strong",{children:"Telefone:"})," ",r.client.phone||"No informado"," | ",i.jsx("strong",{children:"Email:"})," ",r.client.email||"No informado"]})]}),i.jsxs("p",{className:"mb-4",children:["As partes acima identificadas tm, entre si, justas e acertadas pelo presente ",i.jsx("strong",{children:"Contrato de Compra e Venda de Produtos de bens durveis"}),", que se reger pelas clusulas seguintes e pelas condies descritas no presente."]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-bold uppercase mb-2 bg-slate-100 p-1 print:bg-transparent print:border-b print:border-black",children:"Objeto do Contrato (Bens Mveis)"}),i.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs mb-2",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-100 print:bg-transparent",children:[i.jsx("th",{className:"border border-slate-300 p-1 text-left",children:"Item"}),i.jsx("th",{className:"border border-slate-300 p-1 text-left",children:"Ambiente"}),i.jsx("th",{className:"border border-slate-300 p-1 text-right",children:"Valor"})]})}),i.jsxs("tbody",{children:[p.map((A,T)=>i.jsxs("tr",{children:[i.jsx("td",{className:"border border-slate-300 p-1",children:T+1}),i.jsx("td",{className:"border border-slate-300 p-1",children:A.name}),i.jsx("td",{className:"border border-slate-300 p-1 text-right",children:N(A.value)})]},T)),i.jsxs("tr",{children:[i.jsx("td",{colSpan:2,className:"border border-slate-300 p-1 font-bold text-right",children:"TOTAL"}),i.jsx("td",{className:"border border-slate-300 p-1 font-bold text-right bg-slate-50 print:bg-transparent",children:N(v)})]})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-bold uppercase mb-2 bg-slate-100 p-1 print:bg-transparent print:border-b print:border-black",children:"Condies de Pagamento"}),i.jsxs("table",{className:"w-full border-collapse border border-slate-300 text-xs",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-100 print:bg-transparent",children:[i.jsx("th",{className:"border border-slate-300 p-1 text-left",children:"Parcela"}),i.jsx("th",{className:"border border-slate-300 p-1 text-left",children:"Vencimento"}),i.jsx("th",{className:"border border-slate-300 p-1 text-left",children:"Forma"}),i.jsx("th",{className:"border border-slate-300 p-1 text-right",children:"Valor"})]})}),i.jsx("tbody",{children:_.map((A,T)=>i.jsxs("tr",{children:[i.jsx("td",{className:"border border-slate-300 p-1",children:T+1}),i.jsx("td",{className:"border border-slate-300 p-1",children:k(A.dueDate)}),i.jsx("td",{className:"border border-slate-300 p-1",children:A.method}),i.jsx("td",{className:"border border-slate-300 p-1 text-right",children:N(A.value)})]},T))})]})]}),i.jsxs("div",{className:"text-[10px] space-y-4 text-justify print:text-black font-sans leading-tight",children:[i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA PRIMEIRA - PARTES CONTRATANTES"}),i.jsxs("p",{children:["1.1 O CONTRATANTE, conforme descrito no pedido anexo, que integra e possui o mesmo nmero deste CONTRATO DE COMPRA E VENDA DE PRODUTOS E DE PRESTAO DE SERVIOS, na melhor forma de direito, contrata em carter irrevogvel e irretratvel a empresa ",i.jsx("strong",{children:E.corporateName}),", pessoa jurdica de direito privado, cessionria exclusiva da marca ",i.jsx("strong",{children:E.name}),", com sede a ",E.address,", inscrita no CNPJ ",E.cnpj,", doravante denominada simplesmente CONTRATADA, para vender e faturar diretamente em nome do CONTRATANTE os produtos descritos no pedido supracitado e os servios pertinentes, conforme clusulas e condies abaixo descritas."]})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA SEGUNDA - OBJETO E PREO"}),i.jsx("p",{children:"2.1 O CONTRATANTE atravs dos pagamentos descritos no pedido anexo, integrante deste contrato, e providncias contratuais complementares tambm constantes no presente contrato, receber os produtos descritos e de fabricao das empresas mencionadas no pedido supracitado bem como a prestao dos servios pertinentes, de acordo com os projetos anexos, os quais, vistados pelas partes, integram e constituem compromissos nicos deste contrato."}),i.jsxs("p",{children:["2.2 ",i.jsx("strong",{children:"SERVIOS:"})," Descoberta e interpretao das necessidades, atravs da demonstrao de produtos na loja, orientao tcnica e comercial, desenvolvimento de projetos, conferncia das medidas do local de instalao dos produtos, fornecimento de acessrios, entrega e instalao, desde a pr-venda at a concluso de instalao conforme projetos integrantes deste contrato."]}),i.jsx("p",{children:"2.3 Pela prestao de servios e fornecimento de materiais ora contratados o CONTRATANTE PAGAR a CONTRATADA o valor descrito no anexo, integrante deste contrato."}),i.jsx("p",{children:"2.4 No integram o presente contrato, o fornecimento de elementos decorativos, presentes nos projetos apenas a ttulo de ilustrao, tais como eletrodomsticos, granitos, tapetes, cortinas, espelhos, vidros, etc."}),i.jsx("p",{children:"2.5 No faro parte do objeto deste contrato e nem ser encargo da CONTRATADA a instalao ou alterao de pontos eltricos ou hidrulicos, ou qualquer outra atividade no concretamente relacionada no pedido ou adendo deste instrumento."}),i.jsx("p",{children:"2.6 Caso o projeto final venha a ser modificado durante sua execuo a pedido do CONTRATANTE, de forma que implique diferena de preos do valor pr acordado no pedido desse contrato, haver ajustes pr-definidos entre as duas partes para sanar a diferena de valores que seguiro tabela de reajustes de acordo com a data em questo. Em caso de medio menor do j efetivamente pago, a diferena ser restituda ao CONTRATANTE em forma de crdito para novas compras ou adequao de projetos."}),i.jsx("p",{children:"2.7  de inteira responsabilidade do CONTRATANTE a instalao dos eletrodomsticos que porventura estejam integrados ao objeto deste contrato."}),i.jsx("p",{children:"2.8 A CONTRATADA no assumir quaisquer responsabilidades pela perda de prazo de instalao de qualquer equipamento eletrodomstico em geral ou acessrio, a no ser que a CONTRATADA tenha dado causa desse eventual atraso."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA TERCEIRA - CONDIES DE FORNECIMENTO E GARANTIA"}),i.jsx("p",{children:"3.1 Aps a assinatura deste contrato pelo CONTRATANTE, as partes se obrigam ao cumprimento do presente contrato de forma irrevogvel e irretratvel, sendo vedado o cancelamento da venda por desistncia ou arrependimento de qualquer das partes, nos termos do pargrafo 2 do artigo 40 do Cdigo de Defesa do Consumidor."}),i.jsx("p",{children:"3.2 A medio tcnica s ser liberada mediante a entrega de toda a documentao pertinente ao projeto como: Eletros, camas, metais, louas e demais itens que possam impactar no processo da conferncia tcnica."}),i.jsxs("p",{children:["3.3 Os produtos comprados sero entregues e os servios de instalao executados pela CONTRATADA. Devendo os produtos serem entregues no prazo de ",i.jsxs("strong",{children:[d," Dias teis"]})," partir da data de assinatura do memorial executivo, sendo que os servios de instalao sero iniciados em at 05 Dias teis da confirmao da entrega dos mveis no local. Caso seja constatado que algum componente tenha sofrido avaria durante o transporte ou durante a instalao, o mesmo ser substitudo ou reparado em at 20 dias teis a partir da constatao do fato."]}),i.jsx("p",{children:"3.4 O prazo para a entrega das orientaes de pontos hidrulicos/ eltricos  de at 3 Dias teis a partir da medio. Quando no houver necessidade de orientao tcnica o prazo para a entrega do memorial executivo  de 10 DIAS TEIS. As imagens dos projetos anexados ao contrato so enviados por e-mail ao CONTRATANTE, em at 5 Dias teis aps a data de efetivao do mesmo."}),i.jsx("p",{children:"3.5  de responsabilidade do CONTRATANTE deixar o local de entrega disponvel para receber os produtos e nas condies necessrias  realizao da instalao, livre e sem ocorrncia de obras civis de qualquer modo, assim como a presena de energia eltrica e boa iluminao dos ambientes; fornecimento das plantas hidrulicas e eltricas no incio da instalao. A segunda demo de tinta deve ser aplicada aps a finalizao de todas as instalaes."}),i.jsx("p",{children:"3.6 Quando houver a necessidade de confeco de algum produto que no seja possvel ser transportado at o local de instalao, os custos do iamento desses produtos devem ser do CONTRATANTE. Devendo esse servio ser realizado por empresas especializadas, com seguro, seguindo-se as normas e leis recorrentes."}),i.jsx("p",{children:"3.7 Na indisponibilidade de entrega e instalao na data estabelecida no presente contrato, o CONTRATANTE dever informar a previso para entrega do produto. Nesse caso a nova data de entrega e instalao dever respeitar a programao logstica da CONTRATADA."}),i.jsx("p",{children:"3.8 A perfeita execuo do projeto requer, durante a instalao, alguns ajustes de acabamento que podero provocar resduos e p. Alm disso, as embalagens dos produtos aps abertos geram volumes que ocupam espaos considerveis. Aps a concluso da instalao, nossos tcnicos estaro aptos a desloc-los para locais previamente indicados pelo CONTRATANTE e faro a limpeza dos resduos resultantes da instalao. Quando no houver espao ideal para o descarte ecolgico dos resduos dessa operao,  de responsabilidade da CONTRATADA a coleta e destinao."}),i.jsx("p",{children:"3.9 Constituem obrigaes da CONTRATADA: a) atender, dentro dos prazos convencionados, no que diz respeito  entrega e instalao dos bens, objeto deste instrumento, bem como, prestar assistncia tcnica decorrente de defeitos de fabricao; b) Executar a instalao dos produtos dentro da melhor tcnica e zelo, obedecendo aos parmetros de qualidade; c) Providenciar a substituio dos bens ou partes com defeito de fabricao ou decorrente do processo de transporte ou instalao."}),i.jsx("p",{children:"3.10 A CONTRATADA se exime de qualquer responsabilidade referente a) Existncia no local da instalao de sobras de construo civil que possam vir a danificar os produtos; b) Existncia de desnveis de grandes propores, assim como fragilidade de paredes que recebero os produtos; c) Ocorrncia de focos de umidade constante e excessiva exposio ao sol, alm da possvel infestao por insetos."}),i.jsx("p",{children:"3.11 Os produtos possuem garantia contra eventuais defeitos aparentes e de fcil constatao, oriundos de fbrica, pelo prazo de 90 (noventa) dias a contar da efetiva entrega e emisso da Nota Fiscal. Garantia extra conforme o componente do produto, pelos prazos seguintes: 07 (sete) anos de garantia para o mvel; 05 (cinco) anos para dobradias e corredias; 03 (trs) anos para puxadores e estruturas metlicas e 01 (um) ano para todos os itens de iluminao, vidros, espelhos, aramados e tapearia."}),i.jsx("p",{children:"3.12 So causas de excluso da garantia: Utilizao dos produtos em condies anormais de uso (tais como sobrecarga de peso, incidncia de fogo, infiltraes de lquidos, utilizao de produtos abrasivos para limpeza, maresia, ferrugem, fungos, cupins, brocas e outros, por serem oriundos de agentes externos), a montagem ou desmontagem dos produtos por pessoas no credenciadas pela CONTRATADA e defeitos oriundos pela falta de manuteno peridica."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA QUARTA  PAGAMENTOS"}),i.jsx("p",{children:"4.1 Os pagamentos devero ser efetivados nas datas estipuladas no presente instrumento, independentemente do faturamento das mercadorias ou da finalizao dos servios, salvo quando citado por escrito em adendo a este contrato que o pagamento ser mediante entrega dos produtos."}),i.jsx("p",{children:"4.2 Eventuais greves, motivos de fora maior ou falta de matrias-prima no constituiro descumprimento contratual."}),i.jsx("p",{children:"4.3 O atraso no pagamento do(s) ttulo(s) sujeita ao pagamento da(s) parcela(s) vencida(s), acrescida(s) da correo monetria, de acordo com a inflao e pelo ndice oficial em vigor, mais juros de 12% (doze por cento) ao ano, e de multa contratual de 2% (dois por cento), sobre o valor do montante em aberto, at o efetivo adimplemento da obrigao."}),i.jsx("p",{children:"4.4 No caso dos dbitos no serem quitados no vencimento, ficar o CONTRATANTE desde logo constitudo em mora, vencendo-se antecipadamente o total da dvida, depois de verificado o inadimplemento da 2 parcela por mais de 15 dias vencida e no paga. A CONTRATADA fica autorizada a comunicar os rgos de proteo ao crdito, bem como ajuizar a competente ao de execuo direta do presente, pelos valores que estiverem em aberto, acrescidos de todas as despesas, inclusive os encargos descritos na clusula 4.1, correo monetria, juros, custas processuais e honorrios de advogado  base de 20% sobre o montante devido."}),i.jsx("p",{children:"4.5 Fazendo a CONTRATANTE opo por financiamento, os ttulos (boletos, cheques, autorizao de dbito em conta ou outra aceita pela CONTRATADA) referentes a esse contrato, sero entregues ao CONTRATANTE, depois repassados ao Agente Financeiro no ato da aprovao do cadastro e permanecero na posse deste at o ltimo pagamento, razo pela qual, o CONTRATANTE isenta a CONTRATADA quanto a quaisquer ocorrncias relativas aos pagamentos e ttulos. As multas, juros e correo monetria, sejam elas decorrentes de inadimplemento ou no, obedecero s regras constantes do contrato de financiamento firmado entre o CONTRATANTE e o Agente Financeiro, excluindo-se as aqui pactuadas, razo pela qual eventuais divergncias devero ser dirimidas diretamente entre o CONTRATANTE e o Agente Financeiro, responsvel pelos ttulos e recebimentos."}),i.jsx("p",{children:"4.6 Por se tratar de mercadoria sob encomenda, no ser admitida a desistncia da compra aps o envio do pedido para produo. Caso o pedido ainda no tenha sido enviado o cancelamento acarretar em multa de 20% sobre valor do contrato."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA QUINTA - DA CESSO"}),i.jsx("p",{children:'5.1 O CONTRATANTE declara-se ciente que a CONTRATADA ceder o crdito decorrente da operao de venda parcelada, efetuada nesta data, descrita no item "Especificao da Operao", para Instituio Financeira, a qual ficar sub-rogada em todos os direitos da cedente inclusive o de receber o valor das parcelas nas datas avenadas, por meio de ficha de compensao, dbito em conta corrente, cheques ou qualquer outro meio que tenha sido indicado pelo CONTRATANTE e aceito pela cedente. A CONTRATADA autoriza a cesso parcial ou integral do crdito nas vendas a prazo. O crdito estar sujeito  aprovao da financeira.'})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA SEXTA - DA RESERVA DE DOMNIO"}),i.jsx("p",{children:"6.1 Por fora de pacto de reserva de domnio, aqui expressamente institudo, e aceito pelas partes, fica reservada a CONTRATADA a propriedade do(s) objeto(s) descrito(s) no pedido e projetos anexos, at que seja liquidada a ltima das prestaes mencionadas no referido pedido."}),i.jsx("p",{children:"6.2 A posse do(s) objeto(s) descrito(s) no pedido anexo, fica sendo do CONTRATANTE, a partir desta data, mas se o mesmo faltar como pagamento de qualquer das prestaes ficar desde logo constitudo em mora e obrigado, sob as penas da lei, a restituir incontinenti o(s) objeto(s) condicionalmente adquirido(s), restituio essa que se far amigavelmente."}),i.jsx("p",{children:"6.3 Fica facultado a CONTRATADA, no caso de mora ou arrependimento do CONTRATANTE, optar pela resciso deste contrato ou pela cobrana judicial dos ttulos assinados."}),i.jsx("p",{children:"6.4 Enquanto no tiver pago integralmente o preo, obriga-se o CONTRATANTE a manter em perfeito estado de conservao o(s) bem(ns) de cuja posse se integra neste ato, defendendo-o da turbao de terceiros."}),i.jsx("p",{children:"6.5 Ocorrendo resciso deste contrato por culpa do CONTRATANTE, efetuar-se- a avaliao do objeto restitudo para verificar a sua depreciao, sendo descontado o valor restante e o valor das prestaes vencidas e no pagas, acrescido dos encargos de financiamento."}),i.jsx("p",{children:"6.6 Uma vez satisfeitas as parcelas assumidas, na sua totalidade, os bens passaro a integrar o patrimnio da CONTRATANTE, deles passando a dispor de forma livre de quaisquer nus."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA STIMA - DA ENTREGA FUTURA"}),i.jsx("p",{children:"7.1 Entende-se por Venda Futura, aquela que no pode ser executada de imediato, seja por motivo da obra no estar concluda ou por solicitao do CONTRATANTE."}),i.jsx("p",{children:"7.2 O CONTRATANTE dever solicitar com antecedncia mnima de 10 Dias teis, a conferncia de medidas para adequao do projeto as medidas finais da obra pronta e partir dessa medio seguem-se os prazos pr-estabelecidos nesse instrumento."}),i.jsx("p",{children:"7.2.1 Em caso de divergncia na conferncia das medidas entre a obra finalizada e o projeto apresentado, fica estabelecida a seguinte regra: a) em caso da medida ser inferior ao projeto apresentado em um percentual de 1,5 % a CONTRATADA compensar o valor pago em excesso; b) em caso da medida ser superior ao projeto apresentado em um percentual de 1,5 % o CONTRATANTE efetuar o pagamento referente a diferena apresentada. c) esta regra tambm se aplicar para vendas que no sejam de carter de Venda Futura."}),i.jsx("p",{children:"7.3 Caso a alterao implique em restituio de valores, esta ser efetivada mediante a aquisio e/ ou troca por produtos fabricados pela CONTRATADA."}),i.jsx("p",{children:"7.4 Caso o projeto aprovado seja modificado, por diferena de medidas, pedido de incrementos mediante autorizao do CONTRATANTE, durante a confirmao do projeto ou execuo, os valores desse acrscimo sero calculados de acordo com a data e tabela de preos em questo. Mesmo em caso de falncia ou encerramento de suas atividades, a CONTRATADA se responsabiliza integralmente pela entrega e instalao dos bens objeto do presente contrato nos mesmos padres de qualidade ajustados na contratao."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA OITAVA - DO PRODUTO DE MOSTRURIO"}),i.jsx("p",{children:"8.1 No caso de aquisio de produtos do mostrurio da loja, o CONTRATANTE fica ciente que o mobilirio ser entregue nas condies apresentadas no showroom. No cabendo qualquer tipo de indenizao ou desconto no preo relacionados a defeitos existentes."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA NONA - DAS MEDIDAS E INSTALAO"}),i.jsx("p",{children:"9.1 A CONTRATADA efetuar conferncia de medidas, aps o projeto estar devidamente aprovado e contratualizado."}),i.jsx("p",{children:"9.2 O CONTRATANTE apenas solicitar a realizao de medidas no local aps a obra estar finalizada, livre de bens que impossibilitem a aferio das medidas corretamente. Caso o CONTRATANTE solicite a realizao de medidas antes da obra estar finalizada, dever informar no documento checklist de obra que segue em anexo as modificaes que ir fazer e as medidas que dever seguir para a conferncia do projeto e produo dos mveis."}),i.jsx("p",{children:"9.3 A CONTRATADA no realizar alteraes no projeto j aprovado a no ser que as mesmas sejam inerentes as medidas."}),i.jsx("p",{children:"9.4 A CONTRATADA fornecer orientao de obra para o CONTRATANTE apenas nas localidades onde a CONTRATADA fornecer o objeto do contrato."}),i.jsx("p",{children:"9.5  de inteira responsabilidade do CONTRATANTE fornecer ao instalador da CONTRATADA a planta hidrulica e eltrica do local onde os produtos sero instalados, responsabilizando-se o CONTRATANTE, de forma exclusiva, por eventuais danos decorrentes de perfurao de tubulao pela falta ou divergncia da referida planta."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA DCIMA - DISPOSIES GERAIS"}),i.jsx("p",{children:"10.1 Na hiptese de descumprimento de qualquer das clusulas deste, a eventual tolerncia ou concesso das partes no implicar em alterao ou novao contratual e nem impedir de exercer, a qualquer momento, todos os direitos que lhes so assegurados."}),i.jsx("p",{children:"10.2 A CONTRATADA oferece assistncia tcnica permanente aos seus produtos. Os custos de reparos, quando no cobertos pela garantia de fbrica, sero cobrados da CONTRATANTE."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA DCIMA PRIMEIRA - ELEIO DE FORO"}),i.jsx("p",{children:"11.1 As partes de comum acordo elegem o Foro da Comarca de Uberlndia para dirimir eventuais dvidas e aes judiciais envolvendo o ora pactuado e, por estarem assim convencionadas, firmam o presente em duas vias e na presena de duas testemunhas."})]}),i.jsxs("section",{children:[i.jsx("h4",{className:"font-bold text-center mb-2",children:"CLUSULA DCIMA SEGUNDA - DA RESPONSABILIDADE DE UTILIZAO DE DADOS E COMPLIANCE"}),i.jsx("p",{children:"12.1 A CONTRATADA se compromete a apenas tratar dados pessoais do CONTRATANTE dentre os previstos na Lei 13.709/2018, e respeitando as clusulas deste contrato. Somente tratar dados para fins de inteligncia de marketing e consumo previsto neste contrato, no compartilhar dados pessoais com nenhum outro controlador e/ou operador, exceto em relao ao Agente Financeiro, no qual o CONTRATANTE expressamente autoriza seu compartilhamento, e manter os dados ativos e existentes em sua base at o prazo final da garantia dos produtos contratados."}),i.jsx("p",{children:"12.2 A no observncia, por qualquer das Partes, dos ditames da LGPD sujeitar o infrator s penalidades indicadas na Lei Federal n 13.709, de 14 de agosto de 2018."}),i.jsx("p",{children:"12.3 As Partes esto cientes e declaram cumprir fielmente, por si e por seus scios, administradores e colaboradores, bem como exigir o seu cumprimento pelos terceiros por elas contratados, os ditames da Lei n 13.709/2018 - Lei Geral de Proteo de Dados (LGPD)."})]})]}),i.jsxs("div",{className:"mt-16 pt-8 flex justify-between gap-8",children:[i.jsxs("div",{className:"flex-1 border-t border-black text-center pt-2",children:[i.jsx("p",{className:"font-bold",children:E.corporateName}),i.jsx("p",{className:"text-xs",children:"CONTRATADA"})]}),i.jsxs("div",{className:"flex-1 border-t border-black text-center pt-2",children:[i.jsx("p",{className:"font-bold",children:r.client.name}),i.jsx("p",{className:"text-xs",children:"CONTRATANTE"})]})]})]}),i.jsxs("div",{className:"mt-12 text-center text-xs",children:[i.jsxs("p",{children:[E.address," - Tel: ",E.phone]}),i.jsxs("p",{children:["Data de emisso: ",new Date().toLocaleDateString()]})]})]})]});return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm print:bg-white print:static print:block",children:i.jsx("div",{className:"bg-white w-full h-full md:w-[90vw] md:h-[90vh] md:rounded-xl shadow-2xl overflow-hidden flex flex-col print:shadow-none print:h-auto print:w-auto print:rounded-none",children:o==="EDIT"?S():b()})})};function Vh({label:t,value:e,isEditing:r,onChange:n,type:a="text",multiline:s=!1,rows:o=2,options:l,placeholder:c,className:u=""}){return r?l?i.jsx("div",{className:u,children:i.jsxs("select",{className:"w-full rounded-lg border-slate-200 text-sm h-9",value:e,onChange:d=>n(d.target.value),children:[i.jsx("option",{value:"",children:"Selecione..."}),l.map(d=>i.jsx("option",{value:d.value,children:d.label},d.value))]})}):s?i.jsx("div",{className:u,children:i.jsx("textarea",{className:"w-full rounded-lg border-slate-200 text-sm",value:e,onChange:d=>n(d.target.value),rows:o,placeholder:c})}):i.jsx("div",{className:u,children:i.jsx("input",{type:a,className:"w-full rounded-lg border-slate-200 text-sm",value:e,onChange:d=>n(d.target.value),placeholder:c})}):i.jsx("div",{className:u,children:i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:a==="number"&&Number(e)>0?`R$ ${Number(e).toLocaleString()}`:e||"-"})})}function xB({onBack:t}){var $e;const{currentProjectId:e,getProjectById:r,batches:n,workflowConfig:a,workflowOrder:s,addNote:o,advanceBatch:l,moveBatchToStep:c,splitBatch:u,markProjectAsLost:d,reactivateProject:f,currentUser:p,updateEnvironmentDetails:m,updateProjectBriefing:v,updateClientData:x,origins:_,isLastStep:y,canUserAdvanceStep:g,allUsers:w,permissions:E,updateProjectSeller:N,deleteProject:k,getBranchingOptions:S,canUserEditClient:b,canUserDeleteClient:A,addEnvironment:T,removeEnvironment:I}=yr(),[O,R]=D.useState("OVERVIEW"),[G,U]=D.useState(""),[Q,te]=D.useState(null),[K,X]=D.useState(!1),[se,Z]=D.useState(!1),[F,de]=D.useState({name:"",email:"",phone:"",address:"",condominium:"",cpf:"",rg:"",cod_efinance:"",origin:"",consultant_name:"",sellerId:""}),[me,Ge]=D.useState({cep:"",street:"",number:"",complement:"",condominium:"",neighborhood:"",city:"",state:"",country:"Brasil"}),[Me,ot]=D.useState(!1),[Be,xe]=D.useState(!1),[ve,be]=D.useState({}),[le,Ze]=D.useState(!1),[ie,Pe]=D.useState(""),[Ae,Ee]=D.useState(null),[Oe,_e]=D.useState(null),[Ke,je]=D.useState(!1),[tt,ht]=D.useState(null),[pt,Fe]=D.useState(!1),[It,Zt]=D.useState(!1),he=e?r(e):null,Vr=D.useMemo(()=>he?he.environments.reduce((z,q)=>z+(q.estimated_value||0),0):0,[he==null?void 0:he.environments]);if(D.useEffect(()=>{he&&K&&(de({name:he.client.name,email:he.client.email,phone:he.client.phone,address:he.client.address||"",condominium:he.client.condominium||"",cpf:he.client.cpf||"",rg:he.client.rg||"",cod_efinance:he.client.cod_efinance||"",origin:he.client.origin||"",consultant_name:he.client.consultant_name||"",sellerId:he.sellerId||""}),Ge({cep:"",street:he.client.address||"",number:"",complement:"",condominium:he.client.condominium||"",neighborhood:"",city:"",state:"",country:"Brasil"}))},[he,K]),D.useEffect(()=>{he&&Be&&be({...he.client})},[he,Be]),!he)return null;const hr=n.filter(z=>z.projectId===he.id),Fr=()=>{!G.trim()||!p||(o(he.id,G,p.id),U(""))},bt=(z,q)=>{let Ne=q;z==="cep"&&(Ne=xD(q)),Ge(Se=>({...Se,[z]:Ne}))},ir=async()=>{ot(!0);try{const z=await vD(me.cep);z===null?alert("CEP no encontrado."):Ge(q=>({...q,street:z.street,neighborhood:z.neighborhood,city:z.city,state:z.state,country:"Brasil"}))}catch(z){console.error("Erro ao buscar CEP:",z),alert(z.message||"Erro ao buscar CEP. Tente novamente mais tarde.")}finally{ot(!1)}},en=z=>{if(z.phase==="2.3"){ht(z),Fe(!0);return}const q=a[z.phase];if(S(z.phase).length>0){Ee({batch:z,step:q});return}te(z.id),setTimeout(()=>{l(z.id),te(null)},300)},Ur=z=>{const q=a[z.phase];S(z.phase).length>0?Ee({batch:z,step:q}):(te(z.id),setTimeout(()=>{l(z.id),te(null)},300))},pr=z=>{if(!tt||!he)return;for(const[Ne,Se]of Object.entries(z)){const Ue=he.environments.find(lr=>lr.id===Ne);if(!Ue||!Se||Se<=0)continue;const st=(Ue.version||0)+1,it={version:st,value:Se,date:new Date().toISOString()};m(he.id,Ne,{estimated_value:Se,version:st,valueHistory:[...Ue.valueHistory||[],it]})}const q=tt;Fe(!1),ht(null),Ur(q)},Er=z=>{Ae&&(c(Ae.batch.id,z),Ee(null))},mr=z=>{_e(z.id),je(!0)},Br=()=>{const q=[me.street,me.number,me.complement,me.neighborhood,me.city,me.state,me.country,me.cep?`CEP: ${me.cep}`:""].filter(Boolean).join(", ")||F.address;x(he.id,{name:F.name,email:F.email,phone:F.phone,address:q,condominium:me.condominium||F.condominium,cpf:F.cpf,rg:F.rg,cod_efinance:F.cod_efinance,origin:F.origin,consultant_name:F.consultant_name}),F.sellerId&&F.sellerId!==he.sellerId&&N(he.id,F.sellerId,F.consultant_name),X(!1)},or=()=>{v(he.id,ve),xe(!1)},wr=()=>{if(!ie.trim()){alert("Por favor, informe o motivo da perda.");return}d(he.id,ie),Ze(!1),Pe("")},Nt=()=>{confirm("Deseja realmente reativar este projeto? Ele retornar para a etapa inicial.")&&f(he.id)},Yt=he.contractSigned||he.client.status==="Concluido",Ot=!Yt&&b(),er=(p==null?void 0:p.role)==="Admin"||(p==null?void 0:p.role)==="Proprietario",Bt=!Yt||er,bn=(($e=E.find(z=>z.role===(p==null?void 0:p.role)))==null?void 0:$e.canChangeSeller)||!1,zr=A(),re=async()=>{confirm("TEM CERTEZA ABSOLUTA? Esta ao ir excluir o projeto inteiro e todo seu histrico. No poder ser desfeita.")&&(await k(he.id),t())};return i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#101922] overflow-hidden",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] border-b border-slate-200 dark:border-slate-800 px-6 py-4 flex justify-between items-start shrink-0",children:[i.jsx("div",{className:"flex gap-4 items-center",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:he.client.name}),i.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-bold uppercase ${he.client.status==="Ativo"?"bg-green-100 text-green-700":he.client.status==="Perdido"?"bg-rose-100 text-rose-700":"bg-slate-100 text-slate-500"}`,children:he.client.status})]}),i.jsxs("p",{className:"text-sm text-slate-500 flex flex-wrap items-center gap-4 mt-1",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"mail"})," ",he.client.email]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"phone"})," ",he.client.phone]}),se?i.jsxs("select",{autoFocus:!0,className:"text-xs border-slate-300 dark:border-slate-700 dark:bg-slate-800 rounded px-2 py-1 focus:ring-primary focus:border-primary ml-2",value:he.sellerId||"",onChange:z=>{var Ne;const q=z.target.value;if(q&&q!==he.sellerId){const Se=((Ne=w.find(Ue=>Ue.id===q))==null?void 0:Ne.name)||"Vendedor";N(he.id,q,Se)}Z(!1)},onBlur:()=>Z(!1),title:"Pressione Esc para cancelar",children:[i.jsx("option",{value:"",disabled:!0,children:"Selecione o vendedor..."}),w.filter(z=>z.role!=="Montador"&&z.role!=="Projetista").map(z=>i.jsx("option",{value:z.id,children:z.name},z.id))]}):i.jsxs("span",{className:"flex items-center gap-1 group",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"person"})," ",he.sellerName||"N/A",bn&&i.jsx("button",{onClick:()=>Z(!0),className:"opacity-0 group-hover:opacity-100 transition-opacity text-primary hover:text-primary-dark ml-1 flex items-center",title:"Alterar Vendedor",children:i.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"edit"})})]})]})]})}),i.jsxs("div",{className:"flex gap-2",children:[he.client.status==="Perdido"&&Ot&&i.jsxs("button",{onClick:Nt,className:"px-3 py-2 text-xs font-bold text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors flex items-center gap-1 shadow-lg",title:"Voltar projeto para o fluxo",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"restore"}),"Reativar Projeto"]}),zr&&i.jsxs("button",{onClick:re,className:"px-3 py-2 text-xs font-bold text-rose-500 hover:text-white hover:bg-rose-600 rounded-lg transition-colors flex items-center gap-1 border border-rose-200 dark:border-rose-800",title:"Deletar este projeto definitivamente",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete_forever"}),"Deletar"]}),he.client.status!=="Perdido"&&he.client.status!=="Concluido"&&Ot&&i.jsxs("button",{onClick:()=>Ze(!0),className:"px-3 py-2 text-xs font-bold text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors flex items-center gap-1",title:"Marcar projeto como Perdido",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"thumb_down"}),"Projeto Perdido"]}),Ot&&i.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-bold text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"}),"Editar Cadastro"]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors text-slate-500 bg-slate-100 dark:bg-slate-800",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),i.jsx("div",{className:"px-6 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] shrink-0",children:i.jsx("div",{className:"flex gap-8",children:["OVERVIEW","ENVIRONMENTS","BRIEFING","TIMELINE"].map(z=>i.jsxs("button",{onClick:()=>R(z),className:`py-3 text-sm font-bold border-b-2 transition-colors ${O===z?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[z==="OVERVIEW"&&"Viso Geral",z==="ENVIRONMENTS"&&"Ambientes",z==="BRIEFING"&&"Detalhes do Briefing",z==="TIMELINE"&&"Histrico & Notas",Yt&&z==="BRIEFING"&&i.jsx("span",{className:"material-symbols-outlined text-[10px] ml-1 text-slate-400",title:"Bloqueado (Contrato Fechado)",children:"lock"})]},z))})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[O==="OVERVIEW"&&i.jsx("div",{className:"space-y-6",children:hr.map(z=>{const q=a[z.phase],Ne=z.phase==="9.0",Se=z.phase==="9.1",Ue=g(z.phase);return q?i.jsx("div",{className:"flex flex-col gap-4",children:i.jsxs("div",{className:`rounded-2xl shadow-lg overflow-hidden border ${Ne?"bg-white dark:bg-[#1a2632] border-green-200 dark:border-green-800":Se?"bg-white dark:bg-[#1a2632] border-rose-200 dark:border-rose-800":"bg-white dark:bg-[#1a2632] border-primary/20"}`,children:[i.jsxs("div",{className:`p-6 border-b flex justify-between items-center ${Ne?"bg-green-50 dark:bg-green-900/20 border-green-100 dark:border-green-800":Se?"bg-rose-50 dark:bg-rose-900/20 border-rose-100 dark:border-rose-800":"bg-primary/5 border-primary/10"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`size-12 rounded-full flex items-center justify-center shadow-lg ${Ne?"bg-green-500 text-white shadow-green-500/30":Se?"bg-rose-500 text-white shadow-rose-500/30":"bg-primary text-white shadow-primary/30"}`,children:i.jsx("span",{className:"material-symbols-outlined text-2xl",children:Ne?"celebration":Se?"thumb_down":"play_arrow"})}),i.jsxs("div",{children:[i.jsx("p",{className:`text-xs font-bold uppercase tracking-wider ${Ne?"text-green-600":Se?"text-rose-600":"text-primary"}`,children:Ne?"Status Final":Se?"Projeto Encerrado":"Tarefa Atual"}),i.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[q.id," - ",q.label]})]})]}),i.jsxs("div",{className:"text-right",children:[he.client.property_type&&i.jsxs("p",{children:[i.jsx("strong",{className:"text-slate-500",children:"Imvel:"})," ",he.client.property_type]}),he.client.budget_expectation&&i.jsxs("p",{children:[i.jsx("strong",{className:"text-slate-500",children:"Oramento:"})," ",he.client.budget_expectation]}),i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:q.ownerRole})]})]}),i.jsxs("div",{className:"p-8 flex flex-col items-center justify-center gap-6",children:[i.jsx("div",{className:"text-center max-w-lg",children:Ne?i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 text-lg",children:["O lote ",i.jsxs("span",{className:"font-bold",children:['"Lote ',z.id.substring(0,4),'"']})," foi entregue com sucesso em ",i.jsx("span",{className:"font-bold",children:new Date(z.lastUpdated).toLocaleDateString()}),"."]}),i.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2 font-bold",children:"Processo completo!"})]}):Se?i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 text-lg",children:["Este projeto foi marcado como ",i.jsx("span",{className:"font-bold text-rose-600",children:"Perdido"})," em ",i.jsx("span",{className:"font-bold",children:new Date(z.lastUpdated).toLocaleDateString()}),"."]}),i.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Verifique o histrico para mais detalhes sobre o motivo."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-slate-600 dark:text-slate-300 text-lg",children:["O lote ",i.jsxs("span",{className:"font-bold",children:['"Lote ',z.id.substring(0,4),'"']})," est pendente nesta etapa desde ",i.jsx("span",{className:"font-bold",children:new Date(z.lastUpdated).toLocaleDateString()}),"."]}),!Ue&&i.jsxs("p",{className:"text-sm text-orange-500 mt-2 font-bold flex items-center justify-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"}),"Aguardando concluso pelo responsvel (",q.ownerRole,")"]})]})}),!y(z.phase)&&Ue&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full justify-center",children:[(q.stage===3||q.stage===4||q.stage===5)&&i.jsxs("button",{onClick:()=>mr(z),className:"px-8 py-4 rounded-xl font-bold text-lg border-2 border-primary text-primary hover:bg-primary/5 transition-all flex items-center justify-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-3xl",children:"call_split"}),"Dividir Lote"]}),i.jsx("button",{onClick:()=>en(z),disabled:Q===z.id,className:`
                                                        px-8 py-4 rounded-xl font-bold text-lg shadow-xl flex items-center justify-center gap-3 transition-all 
                                                        ${Q===z.id?"bg-slate-300 text-slate-500 cursor-wait":"bg-emerald-500 hover:bg-emerald-600 text-white shadow-emerald-500/20 hover:scale-105 active:scale-95"}
                                                        ${q.stage===3||q.stage===4||q.stage===5?"flex-1":"w-auto"}
                                                    `,children:Q===z.id?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined text-3xl animate-spin",children:"sync"}),"Processando..."]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"material-symbols-outlined text-3xl",children:"check_circle"}),"Concluir Etapa"]})})]}),((p==null?void 0:p.role)==="Admin"||(p==null?void 0:p.role)==="Proprietario")&&!Ne&&!Se&&i.jsx("div",{className:"w-full mt-6 pt-6 border-t border-slate-100 dark:border-slate-800",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Ao Administrativa"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Forar reposicionamento no fluxo"})]}),i.jsxs("select",{className:"text-sm border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-lg p-2.5 bg-white min-w-[250px]",onChange:st=>{st.target.value&&confirm(`Voc est forando a movimentao deste lote para a etapa ${st.target.value}. O responsvel ser alterado.

Tem certeza que deseja continuar?`)&&c(z.id,st.target.value)},value:"",children:[i.jsx("option",{value:"",children:"Mover para etapa..."}),s.filter(st=>a[st]).map(st=>{const it=a[st];return i.jsxs("option",{value:it.id,children:[it.id," - ",it.label]},it.id)})]})]})})]})]})},z.id):i.jsxs("div",{className:"text-rose-500 bg-rose-50 dark:bg-rose-900/20 p-6 rounded-lg border border-rose-200 dark:border-rose-800 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"error"}),i.jsx("h3",{className:"font-bold text-lg",children:"Erro de Dados no Fluxo"})]}),i.jsxs("p",{className:"text-sm text-rose-700 dark:text-rose-300",children:["A etapa atual do projeto ('",z.phase,"') no foi encontrada na configurao do sistema."]}),((p==null?void 0:p.role)==="Admin"||(p==null?void 0:p.role)==="Proprietario")&&i.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-slate-900 rounded border border-rose-100 dark:border-rose-900",children:[i.jsx("p",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-2",children:"Ao de Correo (Apenas Admin):"}),i.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Selecione uma etapa vlida para reposicionar o projeto e corrigir este erro."}),i.jsxs("select",{className:"w-full text-sm border-slate-300 dark:border-slate-700 dark:bg-slate-800 rounded p-2.5 focus:ring-rose-500 focus:border-rose-500",onChange:st=>{st.target.value&&c(z.id,st.target.value)},value:"",children:[i.jsx("option",{value:"",children:"-- Selecionar nova etapa --"}),s.filter(st=>a[st]).map(st=>{const it=a[st];return i.jsxs("option",{value:it.id,children:[it.id," - ",it.label]},it.id)})]})]})]},z.id)})}),O==="ENVIRONMENTS"&&i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-sm text-blue-700 dark:text-blue-300 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-lg",children:"info"}),"Os valores, status e verses podem ser editados diretamente na tabela."]}),i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-800",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase",children:"Nome do Ambiente"}),i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase",children:"Valor Atual (R$)"}),i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase",children:"Verso"}),i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase",children:"Histrico"}),Bt&&i.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase text-right",children:"Aes"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:he.environments.map(z=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[i.jsx("td",{className:"px-6 py-4 font-bold text-slate-800 dark:text-white",children:z.name}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("input",{type:"number",value:z.estimated_value||"",onChange:q=>m(he.id,z.id,{estimated_value:Number(q.target.value)}),disabled:!Bt,className:"bg-transparent border border-slate-200 dark:border-slate-700 rounded px-2 py-1 text-sm font-mono text-slate-700 dark:text-slate-300 w-32 focus:border-primary focus:ring-1 focus:ring-primary disabled:opacity-50",placeholder:"0.00"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-bold bg-primary/10 text-primary",children:["V",z.version||1]})}),i.jsx("td",{className:"px-6 py-4",children:z.valueHistory&&z.valueHistory.length>0?i.jsx("div",{className:"flex gap-1 flex-wrap",children:z.valueHistory.map(q=>i.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 font-mono",title:`Registrado em ${new Date(q.date).toLocaleString("pt-BR")}`,children:["V",q.version,": R$",q.value.toLocaleString("pt-BR")]},q.version))}):i.jsx("span",{className:"text-xs text-slate-400 italic",children:""})}),Bt&&i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsx("button",{onClick:()=>{confirm(`Tem certeza que deseja excluir o ambiente "${z.name}"?`)&&I(he.id,z.id)},className:"p-1 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded transition-colors",title:"Excluir Ambiente",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})})]},z.id))}),i.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-900 border-t-2 border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 font-bold text-slate-500 uppercase text-xs",children:"Total Geral"}),i.jsxs("td",{className:"px-6 py-4 font-bold text-emerald-600 dark:text-emerald-400 text-base font-mono",children:["R$ ",Vr.toLocaleString("pt-BR")]}),i.jsx("td",{}),i.jsx("td",{})]})})]}),Bt&&i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-[#1a2632] flex justify-end",children:i.jsxs("button",{onClick:()=>{const z=prompt("Nome do novo ambiente:");z&&z.trim()&&T(he.id,z.trim())},className:"px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-lg hover:bg-primary/90 transition-colors flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Novo Ambiente"]})})]}),O==="BRIEFING"&&i.jsxs("div",{className:"relative",children:[Ot?i.jsx("div",{className:"flex justify-end mb-4",children:Be?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>xe(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-600 font-bold text-sm",children:"Cancelar"}),i.jsx("button",{onClick:or,className:"px-4 py-2 bg-primary text-white rounded-lg font-bold text-sm shadow-lg",children:"Salvar Alteraes"})]}):i.jsxs("button",{onClick:()=>xe(!0),className:"px-4 py-2 bg-slate-800 text-white rounded-lg font-bold text-sm flex items-center gap-2 hover:bg-slate-700",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})," Editar Briefing"]})}):Yt&&i.jsx("div",{className:"flex justify-end mb-4",children:i.jsxs("div",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-500 rounded-lg text-sm flex items-center gap-2 border border-slate-200 dark:border-slate-700",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"})," Dados bloqueados por contrato"]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl border border-slate-200 dark:border-slate-800 md:col-span-2",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-emerald-500",children:"attach_money"}),"Financeiro do Projeto"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-800",children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Expectativa do Cliente"}),i.jsx(Vh,{label:"Expectativa do Cliente",value:he.client.budget_expectation||0,isEditing:Be,onChange:z=>be({...ve,budget_expectation:Number(z)}),type:"number"})]}),i.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl border border-emerald-100 dark:border-emerald-800",children:[i.jsx("p",{className:"text-xs font-bold text-emerald-700 dark:text-emerald-400 uppercase mb-1",children:"Valor do Projeto (Soma)"}),i.jsxs("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:["R$ ",Vr.toLocaleString()]})]}),i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-900 rounded-xl border border-slate-100 dark:border-slate-800",children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Forma de Pagamento"}),Be?i.jsxs("select",{className:"w-full rounded-lg border-slate-200 text-sm h-9",value:ve.payment_preference||"",onChange:z=>be({...ve,payment_preference:z.target.value}),children:[i.jsx("option",{value:" vista",children:" vista"}),i.jsx("option",{value:"Parcelado",children:"Parcelado"})]}):i.jsx("p",{className:"text-lg text-slate-800 dark:text-slate-200",children:he.client.payment_preference||"-"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl border border-slate-200 dark:border-slate-800 md:col-span-2",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-orange-500",children:"assignment"}),"Informaes do Projeto"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Possui Projeto Arquitetnico?"}),Be?i.jsxs("select",{className:"w-full rounded-lg border-slate-200 text-sm",value:ve.project_has_architect_project||"",onChange:z=>be({...ve,project_has_architect_project:z.target.value}),children:[i.jsx("option",{value:"",children:"Selecione..."}),i.jsx("option",{value:"Sim",children:"Sim"}),i.jsx("option",{value:"No",children:"No"}),i.jsx("option",{value:"Cliente Ir Fornecer",children:"Cliente Ir Fornecer"})]}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.project_has_architect_project||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Especificador Comissionado?"}),Be?i.jsx("input",{className:"w-full rounded-lg border-slate-200 text-sm",value:ve.commissioned_specifier||"",onChange:z=>be({...ve,commissioned_specifier:z.target.value}),placeholder:"Nome do Especificador"}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.commissioned_specifier||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Previso Medio"}),Be?i.jsx("input",{type:"date",className:"w-full rounded-lg border-slate-200 text-sm",value:ve.time_measurement_ready||"",onChange:z=>be({...ve,time_measurement_ready:z.target.value})}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.time_measurement_ready?new Date(he.client.time_measurement_ready).toLocaleDateString():"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Expectativa de Deciso"}),Be?i.jsx("input",{type:"date",className:"w-full rounded-lg border-slate-200 text-sm",value:ve.time_decision_expectation||"",onChange:z=>be({...ve,time_decision_expectation:z.target.value})}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.time_decision_expectation?new Date(he.client.time_decision_expectation).toLocaleDateString():"-"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Materiais de Preferncia"}),Be?i.jsx("textarea",{className:"w-full rounded-lg border-slate-200 text-sm",value:ve.project_materials||"",onChange:z=>be({...ve,project_materials:z.target.value}),rows:2}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.project_materials||"-"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Requisitos Especiais"}),i.jsx(Vh,{label:"Necessidades Especiais/Acessibilidade",value:he.client.project_special_reqs||"",isEditing:Be,onChange:z=>be({...ve,project_special_reqs:z}),multiline:!0,rows:2})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Eletrodomsticos Especficos"}),i.jsx(Vh,{value:he.client.project_appliances||"",isEditing:Be,onChange:z=>be({...ve,project_appliances:z}),multiline:!0,rows:2})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-blue-500",children:"person"}),"Perfil e Necessidades"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Quem vai morar"}),Be?i.jsx("input",{className:"w-full rounded-lg border-slate-200 text-sm",value:ve.profile_residents||"",onChange:z=>be({...ve,profile_residents:z.target.value})}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.profile_residents||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Rotina da Casa"}),Be?i.jsx("textarea",{className:"w-full rounded-lg border-slate-200 text-sm",value:ve.profile_routine||"",onChange:z=>be({...ve,profile_routine:z.target.value})}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.profile_routine||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Dores / Expectativas"}),Be?i.jsx("textarea",{className:"w-full rounded-lg border-slate-200 text-sm",value:ve.profile_pains||"",onChange:z=>be({...ve,profile_pains:z.target.value})}):i.jsxs("p",{className:"text-slate-800 dark:text-slate-200 italic",children:['"',he.client.profile_pains||"-",'"']})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-xl border border-slate-200 dark:border-slate-800",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-purple-500",children:"home_work"}),"Imvel e Prazos"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Tipo"}),i.jsx(Vh,{label:"Tipo de Imvel",value:he.client.property_type||"",isEditing:Be,onChange:z=>be({...ve,property_type:z}),type:"select",options:[{value:"Reforma",label:"Reforma"},{value:"Construo Nova",label:"Construo Nova"}]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Localizao"}),Be?i.jsx("input",{className:"w-full rounded-lg border-slate-200 text-sm",value:ve.property_location||"",onChange:z=>be({...ve,property_location:z.target.value})}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.property_location||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Mudana Prevista"}),Be?i.jsx("input",{type:"date",className:"w-full rounded-lg border-slate-200 text-sm",value:ve.time_move_in||"",onChange:z=>be({...ve,time_move_in:z.target.value})}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.time_move_in||"-"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Arquiteto"}),Be?i.jsx("input",{className:"w-full rounded-lg border-slate-200 text-sm",value:ve.architect_name||"",onChange:z=>be({...ve,architect_name:z.target.value})}):i.jsx("p",{className:"text-slate-800 dark:text-slate-200",children:he.client.architect_name||"-"})]})]})]})]})]}),O==="TIMELINE"&&i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:i.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-4 rounded-xl border border-slate-200 dark:border-slate-800",children:[i.jsx("textarea",{value:G,onChange:z=>U(z.target.value),className:"w-full bg-slate-50 dark:bg-slate-900 border-none rounded-lg p-3 text-sm focus:ring-2 focus:ring-primary mb-3",placeholder:"Adicionar uma nota interna...",rows:3}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:Fr,className:"px-4 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-600",children:"Adicionar Nota"})})]}),i.jsxs("div",{className:"relative pl-4 space-y-8",children:[i.jsx("div",{className:"absolute left-[27px] top-4 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700"}),he.notes.map(z=>i.jsxs("div",{className:"relative flex gap-4 animate-fade-in",children:[i.jsx("div",{className:`size-10 rounded-full flex items-center justify-center shrink-0 z-10 border-4 border-slate-50 dark:border-[#101922] ${z.type==="SYSTEM"?"bg-slate-200 text-slate-500":"bg-primary text-white"}`,children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:z.type==="SYSTEM"?"settings":"edit"})}),i.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a2632] p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"font-bold text-sm text-slate-800 dark:text-white",children:z.authorName}),i.jsx("span",{className:"text-xs text-slate-400",children:new Date(z.createdAt).toLocaleString()})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:z.content})]})]},z.id)),he.notes.length===0&&i.jsx("div",{className:"text-center text-slate-400 py-8",children:"Nenhum registro encontrado."})]})]})})]}),K&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 md:p-6 animate-fade-in",onClick:()=>X(!1),children:i.jsxs("div",{className:"bg-white dark:bg-[#1e2936] w-full max-w-2xl flex flex-col max-h-[90dvh] rounded-2xl shadow-2xl overflow-hidden animate-scale-in",onClick:z=>z.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center shrink-0",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Editar Dados do Cliente"}),i.jsx("button",{onClick:()=>X(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4 flex-1 overflow-y-auto",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Cd. EFinance"}),i.jsx("input",{className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm",value:F.cod_efinance||"",onChange:z=>de({...F,cod_efinance:z.target.value.replace(/\D/g,"").slice(0,5)}),maxLength:5})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nome Completo"}),i.jsx("input",{className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm",value:F.name,onChange:z=>de({...F,name:z.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"WhatsApp"}),i.jsx("input",{className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm",value:F.phone,onChange:z=>de({...F,phone:mD(z.target.value)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Email"}),i.jsx("input",{className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm",value:F.email,onChange:z=>de({...F,email:z.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"CPF"}),i.jsx("input",{className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm",value:F.cpf,onChange:z=>de({...F,cpf:gD(z.target.value)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"RG"}),i.jsx("input",{className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm",value:F.rg,onChange:z=>de({...F,rg:z.target.value})})]}),i.jsx("div",{className:"md:col-span-2 mt-2",children:i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white mb-2 border-b border-slate-100 dark:border-slate-800 pb-2",children:"Endereo"})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"CEP"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:me.cep,onChange:z=>bt("cep",z.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"00000-000",maxLength:9}),i.jsx("button",{type:"button",onClick:ir,disabled:Me||me.cep.length<9,className:"px-3 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-200 disabled:opacity-50 flex items-center justify-center shrink-0 border border-slate-200 dark:border-slate-700",title:"Buscar CEP",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:Me?"sync":"search"})})]})]}),i.jsxs("div",{className:"md:col-span-1",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Rua / Logradouro"}),i.jsx("input",{type:"text",value:me.street,onChange:z=>bt("street",z.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"Ex: Rua das Flores"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Nmero"}),i.jsx("input",{type:"text",value:me.number,onChange:z=>bt("number",z.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"Ex: 123"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Complemento"}),i.jsx("input",{type:"text",value:me.complement,onChange:z=>bt("complement",z.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"Ex: Apto 101, Bloco B"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Condomnio"}),i.jsx("input",{type:"text",value:me.condominium||F.condominium,onChange:z=>{bt("condominium",z.target.value),de({...F,condominium:z.target.value})},className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary",placeholder:"Nome do Condomnio (se houver)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Bairro"}),i.jsx("input",{type:"text",value:me.neighborhood,onChange:z=>bt("neighborhood",z.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Cidade"}),i.jsx("input",{type:"text",value:me.city,onChange:z=>bt("city",z.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm focus:ring-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Estado (UF)"}),i.jsx("input",{type:"text",value:me.state,onChange:z=>bt("state",z.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm uppercase focus:ring-primary",maxLength:2})]}),i.jsxs("div",{className:"md:col-span-2 pt-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Endereo Legado (Temporrio / Consulta)"}),i.jsx("textarea",{className:"w-full rounded-lg border-slate-200 dark:bg-slate-900 dark:border-slate-700 text-sm opacity-60 focus:ring-primary",value:F.address,onChange:z=>de({...F,address:z.target.value}),rows:1,title:"Mostra o endereo de clientes antigos que ainda no foram separados."})]})]}),i.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 bg-slate-50 dark:bg-[#1a2632] shrink-0",children:[i.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-white font-medium",children:"Cancelar"}),i.jsx("button",{onClick:Br,className:"px-6 py-2 bg-primary text-white font-bold rounded-lg hover:bg-primary-600 shadow-lg shadow-primary/20",children:"Salvar Alteraes"})]})]})}),le&&i.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>Ze(!1),children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] w-full max-w-md rounded-xl shadow-2xl overflow-hidden p-6 animate-scale-up",onClick:z=>z.stopPropagation(),children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Marcar como Perdido"}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Ao marcar este projeto como perdido, ele sair do fluxo produtivo. Por favor, indique o motivo:"}),i.jsx("textarea",{className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-sm p-3 focus:ring-rose-500 focus:border-rose-500 mb-4",rows:4,placeholder:"Ex: Preo acima do oramento, fechou com concorrente X...",value:ie,onChange:z=>Pe(z.target.value)}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>Ze(!1),className:"px-4 py-2 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",children:"Cancelar"}),i.jsx("button",{onClick:wr,className:"px-4 py-2 bg-rose-600 text-white rounded-lg text-sm font-bold hover:bg-rose-700 shadow-lg shadow-rose-600/20",children:"Confirmar Perda"})]})]})}),pt&&he&&tt&&i.jsx(hD,{isOpen:!0,onClose:()=>{Fe(!1),ht(null)},onConfirm:pr,project:he}),Ae&&i.jsx(fD,{isOpen:!!Ae,onClose:()=>Ee(null),batchName:`Lote ${Ae.batch.id.substring(0,4)}`,currentStep:Ae.step,options:S(Ae.batch.phase),onSelect:Er}),Oe&&i.jsx(dD,{isOpen:Ke,onClose:()=>{je(!1),_e(null)},batchId:Oe}),i.jsx(gB,{isOpen:It,onClose:()=>Zt(!1),project:he})]})}const vB=()=>{const{login:t}=yr(),[e,r]=D.useState(""),[n,a]=D.useState(""),[s,o]=D.useState(""),[l,c]=D.useState(""),[u,d]=D.useState(!1),f=async p=>{p.preventDefault(),d(!0),c("");try{await new Promise(v=>setTimeout(v,600));const m=await t(e,n,s);m===!0||(m==="suspended"?(c("Esta loja est suspensa. Entre em contato com o suporte."),d(!1)):(c("Credenciais invlidas. Verifique Loja, Usurio e Senha."),d(!1)))}catch(m){console.error(m),c("Erro ao conectar. Tente novamente."),d(!1)}};return i.jsxs("div",{className:"flex min-h-screen w-full bg-[#f0f2f5] dark:bg-[#0b1116] items-center justify-center p-4 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0",children:[i.jsx("div",{className:"absolute -top-[10%] -left-[10%] w-[50%] h-[50%] bg-blue-500/10 rounded-full blur-[100px]"}),i.jsx("div",{className:"absolute top-[20%] right-[10%] w-[30%] h-[30%] bg-purple-500/10 rounded-full blur-[100px]"})]}),i.jsxs("div",{className:"w-full max-w-4xl h-auto min-h-[500px] bg-white dark:bg-[#161f29] rounded-3xl shadow-2xl flex overflow-hidden z-10 border border-white/50 dark:border-slate-800",children:[i.jsxs("div",{className:"hidden md:flex flex-1 relative bg-gradient-to-br from-primary to-blue-700 items-center justify-center p-12 text-white",children:[i.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"32px 32px"}}),i.jsxs("div",{className:"relative z-10 max-w-sm",children:[i.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center mb-8 border border-white/30 shadow-xl",children:i.jsx("span",{className:"text-3xl font-bold",children:"F"})}),i.jsx("h2",{className:"text-4xl font-extrabold mb-4 leading-tight",children:"Gerencie seus clientes com maestria."}),i.jsx("p",{className:"text-blue-100 text-lg leading-relaxed opacity-90",children:"Fluxo Mobili integra vendas, projetos, medio e fbrica em um nico fluxo contnuo."})]})]}),i.jsxs("div",{className:"flex-1 p-8 md:p-12 flex flex-col justify-center transition-all",children:[i.jsx("div",{className:"md:hidden w-12 h-12 bg-primary rounded-xl flex items-center justify-center text-white font-bold text-xl mb-6",children:"F"}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Bem-vindo de volta!"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Insira suas credenciais para acessar o painel."}),i.jsxs("form",{onSubmit:f,className:"space-y-5 animate-fade-in",children:[i.jsxs("div",{className:"space-y-1.5",children:[i.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"ID da Loja (Slug)"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"store"}),i.jsx("input",{type:"text",value:e,onChange:p=>r(p.target.value.toLowerCase().replace(/[^a-z0-9]/g,"")),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none",placeholder:"ex: modelo",required:!0})]})]}),i.jsxs("div",{className:"space-y-1.5",children:[i.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Usurio"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"person"}),i.jsx("input",{type:"text",value:n,onChange:p=>a(p.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none",placeholder:"seu.usuario",required:!0})]})]}),i.jsxs("div",{className:"space-y-1.5",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Senha"})}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-[20px]",children:"lock"}),i.jsx("input",{type:"password",value:s,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all outline-none",placeholder:"",required:!0})]})]}),l&&i.jsxs("div",{className:"p-3 rounded-lg bg-rose-50 border border-rose-100 text-rose-600 text-sm font-medium flex items-center gap-2 animate-fade-in",children:[i.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),l]}),i.jsx("button",{type:"submit",disabled:u,className:`
                        w-full bg-primary text-white font-bold py-3.5 rounded-xl shadow-lg shadow-primary/25 
                        hover:bg-primary-600 hover:shadow-primary/40 active:scale-[0.98] 
                        transition-all flex items-center justify-center gap-2
                        ${u?"opacity-70 cursor-wait":""}
                    `,children:u?"Entrando...":"Acessar Painel"})]})]})]}),i.jsx("div",{className:"absolute bottom-4 text-xs text-slate-400 text-center w-full",children:" 2025 Fluxo Mobili. Todos os direitos reservados."})]})};function yD(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=yD(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ut(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=yD(t))&&(n&&(n+=" "),n+=e);return n}var bB=Array.isArray,Bn=bB,yB=typeof ph=="object"&&ph&&ph.Object===Object&&ph,wD=yB,wB=wD,_B=typeof self=="object"&&self&&self.Object===Object&&self,NB=wB||_B||Function("return this")(),ms=NB,jB=ms,SB=jB.Symbol,Yf=SB,xA=Yf,_D=Object.prototype,AB=_D.hasOwnProperty,kB=_D.toString,Mu=xA?xA.toStringTag:void 0;function EB(t){var e=AB.call(t,Mu),r=t[Mu];try{t[Mu]=void 0;var n=!0}catch{}var a=kB.call(t);return n&&(e?t[Mu]=r:delete t[Mu]),a}var TB=EB,CB=Object.prototype,PB=CB.toString;function IB(t){return PB.call(t)}var OB=IB,vA=Yf,DB=TB,RB=OB,MB="[object Null]",$B="[object Undefined]",bA=vA?vA.toStringTag:void 0;function LB(t){return t==null?t===void 0?$B:MB:bA&&bA in Object(t)?DB(t):RB(t)}var Ks=LB;function VB(t){return t!=null&&typeof t=="object"}var Ys=VB,FB=Ks,UB=Ys,BB="[object Symbol]";function zB(t){return typeof t=="symbol"||UB(t)&&FB(t)==BB}var ru=zB,WB=Bn,qB=ru,HB=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,GB=/^\w*$/;function KB(t,e){if(WB(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||qB(t)?!0:GB.test(t)||!HB.test(t)||e!=null&&t in Object(e)}var t_=KB;function YB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ro=YB;const nu=Tt(ro);var XB=Ks,QB=ro,JB="[object AsyncFunction]",ZB="[object Function]",e7="[object GeneratorFunction]",t7="[object Proxy]";function r7(t){if(!QB(t))return!1;var e=XB(t);return e==ZB||e==e7||e==JB||e==t7}var r_=r7;const rt=Tt(r_);var n7=ms,a7=n7["__core-js_shared__"],s7=a7,qx=s7,yA=function(){var t=/[^.]+$/.exec(qx&&qx.keys&&qx.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function i7(t){return!!yA&&yA in t}var o7=i7,l7=Function.prototype,c7=l7.toString;function u7(t){if(t!=null){try{return c7.call(t)}catch{}try{return t+""}catch{}}return""}var ND=u7,d7=r_,f7=o7,h7=ro,p7=ND,m7=/[\\^$.*+?()[\]{}|]/g,g7=/^\[object .+?Constructor\]$/,x7=Function.prototype,v7=Object.prototype,b7=x7.toString,y7=v7.hasOwnProperty,w7=RegExp("^"+b7.call(y7).replace(m7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _7(t){if(!h7(t)||f7(t))return!1;var e=d7(t)?w7:g7;return e.test(p7(t))}var N7=_7;function j7(t,e){return t==null?void 0:t[e]}var S7=j7,A7=N7,k7=S7;function E7(t,e){var r=k7(t,e);return A7(r)?r:void 0}var il=E7,T7=il,C7=T7(Object,"create"),Zg=C7,wA=Zg;function P7(){this.__data__=wA?wA(null):{},this.size=0}var I7=P7;function O7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var D7=O7,R7=Zg,M7="__lodash_hash_undefined__",$7=Object.prototype,L7=$7.hasOwnProperty;function V7(t){var e=this.__data__;if(R7){var r=e[t];return r===M7?void 0:r}return L7.call(e,t)?e[t]:void 0}var F7=V7,U7=Zg,B7=Object.prototype,z7=B7.hasOwnProperty;function W7(t){var e=this.__data__;return U7?e[t]!==void 0:z7.call(e,t)}var q7=W7,H7=Zg,G7="__lodash_hash_undefined__";function K7(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=H7&&e===void 0?G7:e,this}var Y7=K7,X7=I7,Q7=D7,J7=F7,Z7=q7,ez=Y7;function au(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}au.prototype.clear=X7;au.prototype.delete=Q7;au.prototype.get=J7;au.prototype.has=Z7;au.prototype.set=ez;var tz=au;function rz(){this.__data__=[],this.size=0}var nz=rz;function az(t,e){return t===e||t!==t&&e!==e}var n_=az,sz=n_;function iz(t,e){for(var r=t.length;r--;)if(sz(t[r][0],e))return r;return-1}var e0=iz,oz=e0,lz=Array.prototype,cz=lz.splice;function uz(t){var e=this.__data__,r=oz(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():cz.call(e,r,1),--this.size,!0}var dz=uz,fz=e0;function hz(t){var e=this.__data__,r=fz(e,t);return r<0?void 0:e[r][1]}var pz=hz,mz=e0;function gz(t){return mz(this.__data__,t)>-1}var xz=gz,vz=e0;function bz(t,e){var r=this.__data__,n=vz(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var yz=bz,wz=nz,_z=dz,Nz=pz,jz=xz,Sz=yz;function su(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}su.prototype.clear=wz;su.prototype.delete=_z;su.prototype.get=Nz;su.prototype.has=jz;su.prototype.set=Sz;var t0=su,Az=il,kz=ms,Ez=Az(kz,"Map"),a_=Ez,_A=tz,Tz=t0,Cz=a_;function Pz(){this.size=0,this.__data__={hash:new _A,map:new(Cz||Tz),string:new _A}}var Iz=Pz;function Oz(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Dz=Oz,Rz=Dz;function Mz(t,e){var r=t.__data__;return Rz(e)?r[typeof e=="string"?"string":"hash"]:r.map}var r0=Mz,$z=r0;function Lz(t){var e=$z(this,t).delete(t);return this.size-=e?1:0,e}var Vz=Lz,Fz=r0;function Uz(t){return Fz(this,t).get(t)}var Bz=Uz,zz=r0;function Wz(t){return zz(this,t).has(t)}var qz=Wz,Hz=r0;function Gz(t,e){var r=Hz(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var Kz=Gz,Yz=Iz,Xz=Vz,Qz=Bz,Jz=qz,Zz=Kz;function iu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}iu.prototype.clear=Yz;iu.prototype.delete=Xz;iu.prototype.get=Qz;iu.prototype.has=Jz;iu.prototype.set=Zz;var s_=iu,jD=s_,eW="Expected a function";function i_(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(eW);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var o=t.apply(this,n);return r.cache=s.set(a,o)||s,o};return r.cache=new(i_.Cache||jD),r}i_.Cache=jD;var SD=i_;const tW=Tt(SD);var rW=SD,nW=500;function aW(t){var e=rW(t,function(n){return r.size===nW&&r.clear(),n}),r=e.cache;return e}var sW=aW,iW=sW,oW=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lW=/\\(\\)?/g,cW=iW(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(oW,function(r,n,a,s){e.push(a?s.replace(lW,"$1"):n||r)}),e}),uW=cW;function dW(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var o_=dW,NA=Yf,fW=o_,hW=Bn,pW=ru,jA=NA?NA.prototype:void 0,SA=jA?jA.toString:void 0;function AD(t){if(typeof t=="string")return t;if(hW(t))return fW(t,AD)+"";if(pW(t))return SA?SA.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var mW=AD,gW=mW;function xW(t){return t==null?"":gW(t)}var kD=xW,vW=Bn,bW=t_,yW=uW,wW=kD;function _W(t,e){return vW(t)?t:bW(t,e)?[t]:yW(wW(t))}var ED=_W,NW=ru;function jW(t){if(typeof t=="string"||NW(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var n0=jW,SW=ED,AW=n0;function kW(t,e){e=SW(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[AW(e[r++])];return r&&r==n?t:void 0}var l_=kW,EW=l_;function TW(t,e,r){var n=t==null?void 0:EW(t,e);return n===void 0?r:n}var TD=TW;const Jn=Tt(TD);function CW(t){return t==null}var PW=CW;const dt=Tt(PW);var IW=Ks,OW=Bn,DW=Ys,RW="[object String]";function MW(t){return typeof t=="string"||!OW(t)&&DW(t)&&IW(t)==RW}var $W=MW;const Yo=Tt($W);var CD={exports:{}},Ct={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_=Symbol.for("react.element"),u_=Symbol.for("react.portal"),a0=Symbol.for("react.fragment"),s0=Symbol.for("react.strict_mode"),i0=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),l0=Symbol.for("react.context"),LW=Symbol.for("react.server_context"),c0=Symbol.for("react.forward_ref"),u0=Symbol.for("react.suspense"),d0=Symbol.for("react.suspense_list"),f0=Symbol.for("react.memo"),h0=Symbol.for("react.lazy"),VW=Symbol.for("react.offscreen"),PD;PD=Symbol.for("react.module.reference");function va(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case c_:switch(t=t.type,t){case a0:case i0:case s0:case u0:case d0:return t;default:switch(t=t&&t.$$typeof,t){case LW:case l0:case c0:case h0:case f0:case o0:return t;default:return e}}case u_:return e}}}Ct.ContextConsumer=l0;Ct.ContextProvider=o0;Ct.Element=c_;Ct.ForwardRef=c0;Ct.Fragment=a0;Ct.Lazy=h0;Ct.Memo=f0;Ct.Portal=u_;Ct.Profiler=i0;Ct.StrictMode=s0;Ct.Suspense=u0;Ct.SuspenseList=d0;Ct.isAsyncMode=function(){return!1};Ct.isConcurrentMode=function(){return!1};Ct.isContextConsumer=function(t){return va(t)===l0};Ct.isContextProvider=function(t){return va(t)===o0};Ct.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===c_};Ct.isForwardRef=function(t){return va(t)===c0};Ct.isFragment=function(t){return va(t)===a0};Ct.isLazy=function(t){return va(t)===h0};Ct.isMemo=function(t){return va(t)===f0};Ct.isPortal=function(t){return va(t)===u_};Ct.isProfiler=function(t){return va(t)===i0};Ct.isStrictMode=function(t){return va(t)===s0};Ct.isSuspense=function(t){return va(t)===u0};Ct.isSuspenseList=function(t){return va(t)===d0};Ct.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===a0||t===i0||t===s0||t===u0||t===d0||t===VW||typeof t=="object"&&t!==null&&(t.$$typeof===h0||t.$$typeof===f0||t.$$typeof===o0||t.$$typeof===l0||t.$$typeof===c0||t.$$typeof===PD||t.getModuleId!==void 0)};Ct.typeOf=va;CD.exports=Ct;var FW=CD.exports,UW=Ks,BW=Ys,zW="[object Number]";function WW(t){return typeof t=="number"||BW(t)&&UW(t)==zW}var ID=WW;const qW=Tt(ID);var HW=ID;function GW(t){return HW(t)&&t!=+t}var KW=GW;const Xf=Tt(KW);var jn=function(e){return e===0?0:e>0?1:-1},Ao=function(e){return Yo(e)&&e.indexOf("%")===e.length-1},ye=function(e){return qW(e)&&!Xf(e)},YW=function(e){return dt(e)},Mr=function(e){return ye(e)||Yo(e)},XW=0,Qf=function(e){var r=++XW;return"".concat(e||"").concat(r)},Sn=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ye(e)&&!Yo(e))return n;var s;if(Ao(e)){var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return Xf(s)&&(s=n),a&&s>r&&(s=r),s},wi=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},QW=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},hi=function(e,r){return ye(e)&&ye(r)?function(n){return e+n*(r-e)}:function(){return r}};function Bb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Jn(n,e))===r})}var JW=function(e,r){return ye(e)&&ye(r)?e-r:Yo(e)&&Yo(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function tc(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function zb(t){"@babel/helpers - typeof";return zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zb(t)}var ZW=["viewBox","children"],eq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],AA=["points","pathLength"],Hx={svg:ZW,polygon:AA,polyline:AA},d_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],pm=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(D.isValidElement(e)&&(n=e.props),!nu(n))return null;var a={};return Object.keys(n).forEach(function(s){d_.includes(s)&&(a[s]=r||function(o){return n[s](n,o)})}),a},tq=function(e,r,n){return function(a){return e(r,n,a),null}},Xo=function(e,r,n){if(!nu(e)||zb(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(s){var o=e[s];d_.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=tq(o,r,n))}),a},rq=["children"],nq=["children"];function kA(t,e){if(t==null)return{};var r=aq(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function aq(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var EA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Cs=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},TA=null,Gx=null,f_=function t(e){if(e===TA&&Array.isArray(Gx))return Gx;var r=[];return D.Children.forEach(e,function(n){dt(n)||(FW.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Gx=r,TA=e,r};function pa(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Cs(a)}):n=[Cs(e)],f_(t).forEach(function(a){var s=Jn(a,"type.displayName")||Jn(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}function Gn(t,e){var r=pa(t,e);return r&&r[0]}var CA=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!ye(n)||n<=0||!ye(a)||a<=0)},sq=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],iq=function(e){return e&&e.type&&Yo(e.type)&&sq.indexOf(e.type)>=0},oq=function(e,r,n,a){var s,o=(s=Hx==null?void 0:Hx[a])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!rt(e)&&(a&&o.includes(r)||eq.includes(r))||n&&d_.includes(r)},Je=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(D.isValidElement(e)&&(a=e.props),!nu(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;oq((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(s[o]=a[o])}),s},Wb=function t(e,r){if(e===r)return!0;var n=D.Children.count(e);if(n!==D.Children.count(r))return!1;if(n===0)return!0;if(n===1)return PA(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var s=e[a],o=r[a];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!PA(s,o))return!1}return!0},PA=function(e,r){if(dt(e)&&dt(r))return!0;if(!dt(e)&&!dt(r)){var n=e.props||{},a=n.children,s=kA(n,rq),o=r.props||{},l=o.children,c=kA(o,nq);return a&&l?tc(s,c)&&Wb(a,l):!a&&!l?tc(s,c):!1}return!1},IA=function(e,r){var n=[],a={};return f_(e).forEach(function(s,o){if(iq(s))n.push(s);else if(s){var l=Cs(s.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(s,l,o);n.push(f),a[l]=!0}}}),n},lq=function(e){var r=e&&e.type;return r&&EA[r]?EA[r]:null},cq=function(e,r){return f_(r).indexOf(e)},uq=["children","width","height","viewBox","className","style","title","desc"];function qb(){return qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qb.apply(this,arguments)}function dq(t,e){if(t==null)return{};var r=fq(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fq(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Hb(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,u=dq(t,uq),d=a||{width:r,height:n,x:0,y:0},f=ut("recharts-surface",s);return H.createElement("svg",qb({},Je(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),H.createElement("title",null,l),H.createElement("desc",null,c),e)}var hq=["children","className"];function Gb(){return Gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gb.apply(this,arguments)}function pq(t,e){if(t==null)return{};var r=mq(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mq(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var kt=H.forwardRef(function(t,e){var r=t.children,n=t.className,a=pq(t,hq),s=ut("recharts-layer",n);return H.createElement("g",Gb({className:s},Je(a,!0),{ref:e}),r)}),Va=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function gq(t,e,r){var n=-1,a=t.length;e<0&&(e=-e>a?0:a+e),r=r>a?a:r,r<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(a);++n<a;)s[n]=t[n+e];return s}var xq=gq,vq=xq;function bq(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:vq(t,e,r)}var yq=bq,wq="\\ud800-\\udfff",_q="\\u0300-\\u036f",Nq="\\ufe20-\\ufe2f",jq="\\u20d0-\\u20ff",Sq=_q+Nq+jq,Aq="\\ufe0e\\ufe0f",kq="\\u200d",Eq=RegExp("["+kq+wq+Sq+Aq+"]");function Tq(t){return Eq.test(t)}var OD=Tq;function Cq(t){return t.split("")}var Pq=Cq,DD="\\ud800-\\udfff",Iq="\\u0300-\\u036f",Oq="\\ufe20-\\ufe2f",Dq="\\u20d0-\\u20ff",Rq=Iq+Oq+Dq,Mq="\\ufe0e\\ufe0f",$q="["+DD+"]",Kb="["+Rq+"]",Yb="\\ud83c[\\udffb-\\udfff]",Lq="(?:"+Kb+"|"+Yb+")",RD="[^"+DD+"]",MD="(?:\\ud83c[\\udde6-\\uddff]){2}",$D="[\\ud800-\\udbff][\\udc00-\\udfff]",Vq="\\u200d",LD=Lq+"?",VD="["+Mq+"]?",Fq="(?:"+Vq+"(?:"+[RD,MD,$D].join("|")+")"+VD+LD+")*",Uq=VD+LD+Fq,Bq="(?:"+[RD+Kb+"?",Kb,MD,$D,$q].join("|")+")",zq=RegExp(Yb+"(?="+Yb+")|"+Bq+Uq,"g");function Wq(t){return t.match(zq)||[]}var qq=Wq,Hq=Pq,Gq=OD,Kq=qq;function Yq(t){return Gq(t)?Kq(t):Hq(t)}var Xq=Yq,Qq=yq,Jq=OD,Zq=Xq,eH=kD;function tH(t){return function(e){e=eH(e);var r=Jq(e)?Zq(e):void 0,n=r?r[0]:e.charAt(0),a=r?Qq(r,1).join(""):e.slice(1);return n[t]()+a}}var rH=tH,nH=rH,aH=nH("toUpperCase"),sH=aH;const p0=Tt(sH);function Lt(t){return function(){return t}}const FD=Math.cos,mm=Math.sin,Ba=Math.sqrt,gm=Math.PI,m0=2*gm,Xb=Math.PI,Qb=2*Xb,xo=1e-6,iH=Qb-xo;function UD(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function oH(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return UD;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class lH{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?UD:oH(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,f=l-r,p=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(p>xo)if(!(Math.abs(f*c-u*d)>xo)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-o,v=a-l,x=c*c+u*u,_=m*m+v*v,y=Math.sqrt(x),g=Math.sqrt(p),w=s*Math.tan((Xb-Math.acos((x+p-_)/(2*y*g)))/2),E=w/g,N=w/y;Math.abs(E-1)>xo&&this._append`L${e+E*d},${r+E*f}`,this._append`A${s},${s},0,0,${+(f*m>d*v)},${this._x1=e+N*c},${this._y1=r+N*u}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,f=1^o,p=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>xo||Math.abs(this._y1-d)>xo)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%Qb+Qb),p>iH?this._append`A${n},${n},0,1,${f},${e-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:p>xo&&this._append`A${n},${n},0,${+(p>=Xb)},${f},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function h_(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new lH(e)}function p_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function BD(t){this._context=t}BD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function g0(t){return new BD(t)}function zD(t){return t[0]}function WD(t){return t[1]}function qD(t,e){var r=Lt(!0),n=null,a=g0,s=null,o=h_(l);t=typeof t=="function"?t:t===void 0?zD:Lt(t),e=typeof e=="function"?e:e===void 0?WD:Lt(e);function l(c){var u,d=(c=p_(c)).length,f,p=!1,m;for(n==null&&(s=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(f,u,c),+e(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Lt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Lt(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Lt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function Fh(t,e,r){var n=null,a=Lt(!0),s=null,o=g0,l=null,c=h_(u);t=typeof t=="function"?t:t===void 0?zD:Lt(+t),e=typeof e=="function"?e:Lt(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?WD:Lt(+r);function u(f){var p,m,v,x=(f=p_(f)).length,_,y=!1,g,w=new Array(x),E=new Array(x);for(s==null&&(l=o(g=c())),p=0;p<=x;++p){if(!(p<x&&a(_=f[p],p,f))===y)if(y=!y)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=m;--v)l.point(w[v],E[v]);l.lineEnd(),l.areaEnd()}y&&(w[p]=+t(_,p,f),E[p]=+e(_,p,f),l.point(n?+n(_,p,f):w[p],r?+r(_,p,f):E[p]))}if(g)return l=null,g+""||null}function d(){return qD().defined(a).curve(o).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Lt(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Lt(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Lt(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Lt(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Lt(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Lt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Lt(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class HD{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function cH(t){return new HD(t,!0)}function uH(t){return new HD(t,!1)}const m_={draw(t,e){const r=Ba(e/gm);t.moveTo(r,0),t.arc(0,0,r,0,m0)}},dH={draw(t,e){const r=Ba(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},GD=Ba(1/3),fH=GD*2,hH={draw(t,e){const r=Ba(e/fH),n=r*GD;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},pH={draw(t,e){const r=Ba(e),n=-r/2;t.rect(n,n,r,r)}},mH=.8908130915292852,KD=mm(gm/10)/mm(7*gm/10),gH=mm(m0/10)*KD,xH=-FD(m0/10)*KD,vH={draw(t,e){const r=Ba(e*mH),n=gH*r,a=xH*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=m0*s/5,l=FD(o),c=mm(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},Kx=Ba(3),bH={draw(t,e){const r=-Ba(e/(Kx*3));t.moveTo(0,r*2),t.lineTo(-Kx*r,-r),t.lineTo(Kx*r,-r),t.closePath()}},na=-.5,aa=Ba(3)/2,Jb=1/Ba(12),yH=(Jb/2+1)*3,wH={draw(t,e){const r=Ba(e/yH),n=r/2,a=r*Jb,s=n,o=r*Jb+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(na*n-aa*a,aa*n+na*a),t.lineTo(na*s-aa*o,aa*s+na*o),t.lineTo(na*l-aa*c,aa*l+na*c),t.lineTo(na*n+aa*a,na*a-aa*n),t.lineTo(na*s+aa*o,na*o-aa*s),t.lineTo(na*l+aa*c,na*c-aa*l),t.closePath()}};function _H(t,e){let r=null,n=h_(a);t=typeof t=="function"?t:Lt(t||m_),e=typeof e=="function"?e:Lt(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Lt(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Lt(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function xm(){}function vm(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function YD(t){this._context=t}YD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NH(t){return new YD(t)}function XD(t){this._context=t}XD.prototype={areaStart:xm,areaEnd:xm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:vm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jH(t){return new XD(t)}function QD(t){this._context=t}QD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:vm(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function SH(t){return new QD(t)}function JD(t){this._context=t}JD.prototype={areaStart:xm,areaEnd:xm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function AH(t){return new JD(t)}function OA(t){return t<0?-1:1}function DA(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(OA(s)+OA(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function RA(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Yx(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function bm(t){this._context=t}bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Yx(this,this._t0,RA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Yx(this,RA(this,r=DA(this,t,e)),r);break;default:Yx(this,this._t0,r=DA(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function ZD(t){this._context=new eR(t)}(ZD.prototype=Object.create(bm.prototype)).point=function(t,e){bm.prototype.point.call(this,e,t)};function eR(t){this._context=t}eR.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function kH(t){return new bm(t)}function EH(t){return new ZD(t)}function tR(t){this._context=t}tR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=MA(t),a=MA(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function MA(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function TH(t){return new tR(t)}function x0(t,e){this._context=t,this._t=e}x0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function CH(t){return new x0(t,.5)}function PH(t){return new x0(t,0)}function IH(t){return new x0(t,1)}function _c(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Zb(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function OH(t,e){return t[e]}function DH(t){const e=[];return e.key=t,e}function RH(){var t=Lt([]),e=Zb,r=_c,n=OH;function a(s){var o=Array.from(t.apply(this,arguments),DH),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=p_(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Lt(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Lt(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?Zb:typeof s=="function"?s:Lt(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??_c,a):r},a}function MH(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}_c(t,e)}}function $H(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}_c(t,e)}}function LH(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],f=d[n][1]||0,p=d[n-1][1]||0,m=(f-p)/2,v=0;v<l;++v){var x=t[e[v]],_=x[n][1]||0,y=x[n-1][1]||0;m+=_-y}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,_c(t,e)}}function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}var VH=["type","size","sizeType"];function ey(){return ey=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ey.apply(this,arguments)}function $A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function LA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$A(Object(r),!0).forEach(function(n){FH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FH(t,e,r){return e=UH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UH(t){var e=BH(t,"string");return Yd(e)=="symbol"?e:e+""}function BH(t,e){if(Yd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zH(t,e){if(t==null)return{};var r=WH(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function WH(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var rR={symbolCircle:m_,symbolCross:dH,symbolDiamond:hH,symbolSquare:pH,symbolStar:vH,symbolTriangle:bH,symbolWye:wH},qH=Math.PI/180,HH=function(e){var r="symbol".concat(p0(e));return rR[r]||m_},GH=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*qH;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},KH=function(e,r){rR["symbol".concat(p0(e))]=r},g_=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,s=a===void 0?64:a,o=e.sizeType,l=o===void 0?"area":o,c=zH(e,VH),u=LA(LA({},c),{},{type:n,size:s,sizeType:l}),d=function(){var _=HH(n),y=_H().type(_).size(GH(s,l,n));return y()},f=u.className,p=u.cx,m=u.cy,v=Je(u,!0);return p===+p&&m===+m&&s===+s?H.createElement("path",ey({},v,{className:ut("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(m,")"),d:d()})):null};g_.registerSymbol=KH;function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(t)}function ty(){return ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ty.apply(this,arguments)}function VA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function YH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VA(Object(r),!0).forEach(function(n){Xd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VA(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aR(n.key),n)}}function JH(t,e,r){return e&&QH(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZH(t,e,r){return e=ym(e),eG(t,nR()?Reflect.construct(e,r||[],ym(t).constructor):e.apply(t,r))}function eG(t,e){if(e&&(Nc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tG(t)}function tG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nR=function(){return!!t})()}function ym(t){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ym(t)}function rG(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ry(t,e)}function ry(t,e){return ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ry(t,e)}function Xd(t,e,r){return e=aR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aR(t){var e=nG(t,"string");return Nc(e)=="symbol"?e:e+""}function nG(t,e){if(Nc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sa=32,x_=function(t){function e(){return XH(this,e),ZH(this,e,arguments)}return rG(e,t),JH(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,s=sa/2,o=sa/6,l=sa/3,c=n.inactive?a:n.color;if(n.type==="plainline")return H.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:sa,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return H.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(sa,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return H.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(sa/8,"h").concat(sa,"v").concat(sa*3/4,"h").concat(-sa,"z"),className:"recharts-legend-icon"});if(H.isValidElement(n.legendIcon)){var u=YH({},n);return delete u.legendIcon,H.cloneElement(n.legendIcon,u)}return H.createElement(g_,{fill:c,cx:s,cy:s,size:sa,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:sa,height:sa},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,v){var x=m.formatter||c,_=ut(Xd(Xd({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=rt(m.value)?null:m.value;Va(!rt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=m.inactive?u:m.color;return H.createElement("li",ty({className:_,style:f,key:"legend-item-".concat(v)},Xo(n.props,m,v)),H.createElement(Hb,{width:o,height:o,viewBox:d,style:p},n.renderIcon(m)),H.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x?x(y,m,v):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,s=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return H.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(D.PureComponent);Xd(x_,"displayName","Legend");Xd(x_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var aG=t0;function sG(){this.__data__=new aG,this.size=0}var iG=sG;function oG(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var lG=oG;function cG(t){return this.__data__.get(t)}var uG=cG;function dG(t){return this.__data__.has(t)}var fG=dG,hG=t0,pG=a_,mG=s_,gG=200;function xG(t,e){var r=this.__data__;if(r instanceof hG){var n=r.__data__;if(!pG||n.length<gG-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new mG(n)}return r.set(t,e),this.size=r.size,this}var vG=xG,bG=t0,yG=iG,wG=lG,_G=uG,NG=fG,jG=vG;function ou(t){var e=this.__data__=new bG(t);this.size=e.size}ou.prototype.clear=yG;ou.prototype.delete=wG;ou.prototype.get=_G;ou.prototype.has=NG;ou.prototype.set=jG;var sR=ou,SG="__lodash_hash_undefined__";function AG(t){return this.__data__.set(t,SG),this}var kG=AG;function EG(t){return this.__data__.has(t)}var TG=EG,CG=s_,PG=kG,IG=TG;function wm(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new CG;++e<r;)this.add(t[e])}wm.prototype.add=wm.prototype.push=PG;wm.prototype.has=IG;var iR=wm;function OG(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var oR=OG;function DG(t,e){return t.has(e)}var lR=DG,RG=iR,MG=oR,$G=lR,LG=1,VG=2;function FG(t,e,r,n,a,s){var o=r&LG,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var f=-1,p=!0,m=r&VG?new RG:void 0;for(s.set(t,e),s.set(e,t);++f<l;){var v=t[f],x=e[f];if(n)var _=o?n(x,v,f,e,t,s):n(v,x,f,t,e,s);if(_!==void 0){if(_)continue;p=!1;break}if(m){if(!MG(e,function(y,g){if(!$G(m,g)&&(v===y||a(v,y,r,n,s)))return m.push(g)})){p=!1;break}}else if(!(v===x||a(v,x,r,n,s))){p=!1;break}}return s.delete(t),s.delete(e),p}var cR=FG,UG=ms,BG=UG.Uint8Array,zG=BG;function WG(t){var e=-1,r=Array(t.size);return t.forEach(function(n,a){r[++e]=[a,n]}),r}var qG=WG;function HG(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var v_=HG,FA=Yf,UA=zG,GG=n_,KG=cR,YG=qG,XG=v_,QG=1,JG=2,ZG="[object Boolean]",eK="[object Date]",tK="[object Error]",rK="[object Map]",nK="[object Number]",aK="[object RegExp]",sK="[object Set]",iK="[object String]",oK="[object Symbol]",lK="[object ArrayBuffer]",cK="[object DataView]",BA=FA?FA.prototype:void 0,Xx=BA?BA.valueOf:void 0;function uK(t,e,r,n,a,s,o){switch(r){case cK:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lK:return!(t.byteLength!=e.byteLength||!s(new UA(t),new UA(e)));case ZG:case eK:case nK:return GG(+t,+e);case tK:return t.name==e.name&&t.message==e.message;case aK:case iK:return t==e+"";case rK:var l=YG;case sK:var c=n&QG;if(l||(l=XG),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;n|=JG,o.set(t,e);var d=KG(l(t),l(e),n,a,s,o);return o.delete(t),d;case oK:if(Xx)return Xx.call(t)==Xx.call(e)}return!1}var dK=uK;function fK(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}var uR=fK,hK=uR,pK=Bn;function mK(t,e,r){var n=e(t);return pK(t)?n:hK(n,r(t))}var gK=mK;function xK(t,e){for(var r=-1,n=t==null?0:t.length,a=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[a++]=o)}return s}var vK=xK;function bK(){return[]}var yK=bK,wK=vK,_K=yK,NK=Object.prototype,jK=NK.propertyIsEnumerable,zA=Object.getOwnPropertySymbols,SK=zA?function(t){return t==null?[]:(t=Object(t),wK(zA(t),function(e){return jK.call(t,e)}))}:_K,AK=SK;function kK(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var EK=kK,TK=Ks,CK=Ys,PK="[object Arguments]";function IK(t){return CK(t)&&TK(t)==PK}var OK=IK,WA=OK,DK=Ys,dR=Object.prototype,RK=dR.hasOwnProperty,MK=dR.propertyIsEnumerable,$K=WA(function(){return arguments}())?WA:function(t){return DK(t)&&RK.call(t,"callee")&&!MK.call(t,"callee")},b_=$K,_m={exports:{}};function LK(){return!1}var VK=LK;_m.exports;(function(t,e){var r=ms,n=VK,a=e&&!e.nodeType&&e,s=a&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;t.exports=u})(_m,_m.exports);var fR=_m.exports,FK=9007199254740991,UK=/^(?:0|[1-9]\d*)$/;function BK(t,e){var r=typeof t;return e=e??FK,!!e&&(r=="number"||r!="symbol"&&UK.test(t))&&t>-1&&t%1==0&&t<e}var y_=BK,zK=9007199254740991;function WK(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=zK}var w_=WK,qK=Ks,HK=w_,GK=Ys,KK="[object Arguments]",YK="[object Array]",XK="[object Boolean]",QK="[object Date]",JK="[object Error]",ZK="[object Function]",eY="[object Map]",tY="[object Number]",rY="[object Object]",nY="[object RegExp]",aY="[object Set]",sY="[object String]",iY="[object WeakMap]",oY="[object ArrayBuffer]",lY="[object DataView]",cY="[object Float32Array]",uY="[object Float64Array]",dY="[object Int8Array]",fY="[object Int16Array]",hY="[object Int32Array]",pY="[object Uint8Array]",mY="[object Uint8ClampedArray]",gY="[object Uint16Array]",xY="[object Uint32Array]",qt={};qt[cY]=qt[uY]=qt[dY]=qt[fY]=qt[hY]=qt[pY]=qt[mY]=qt[gY]=qt[xY]=!0;qt[KK]=qt[YK]=qt[oY]=qt[XK]=qt[lY]=qt[QK]=qt[JK]=qt[ZK]=qt[eY]=qt[tY]=qt[rY]=qt[nY]=qt[aY]=qt[sY]=qt[iY]=!1;function vY(t){return GK(t)&&HK(t.length)&&!!qt[qK(t)]}var bY=vY;function yY(t){return function(e){return t(e)}}var hR=yY,Nm={exports:{}};Nm.exports;(function(t,e){var r=wD,n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===n,o=s&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(Nm,Nm.exports);var wY=Nm.exports,_Y=bY,NY=hR,qA=wY,HA=qA&&qA.isTypedArray,jY=HA?NY(HA):_Y,pR=jY,SY=EK,AY=b_,kY=Bn,EY=fR,TY=y_,CY=pR,PY=Object.prototype,IY=PY.hasOwnProperty;function OY(t,e){var r=kY(t),n=!r&&AY(t),a=!r&&!n&&EY(t),s=!r&&!n&&!a&&CY(t),o=r||n||a||s,l=o?SY(t.length,String):[],c=l.length;for(var u in t)(e||IY.call(t,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||TY(u,c)))&&l.push(u);return l}var DY=OY,RY=Object.prototype;function MY(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||RY;return t===r}var $Y=MY;function LY(t,e){return function(r){return t(e(r))}}var mR=LY,VY=mR,FY=VY(Object.keys,Object),UY=FY,BY=$Y,zY=UY,WY=Object.prototype,qY=WY.hasOwnProperty;function HY(t){if(!BY(t))return zY(t);var e=[];for(var r in Object(t))qY.call(t,r)&&r!="constructor"&&e.push(r);return e}var GY=HY,KY=r_,YY=w_;function XY(t){return t!=null&&YY(t.length)&&!KY(t)}var Jf=XY,QY=DY,JY=GY,ZY=Jf;function eX(t){return ZY(t)?QY(t):JY(t)}var v0=eX,tX=gK,rX=AK,nX=v0;function aX(t){return tX(t,nX,rX)}var sX=aX,GA=sX,iX=1,oX=Object.prototype,lX=oX.hasOwnProperty;function cX(t,e,r,n,a,s){var o=r&iX,l=GA(t),c=l.length,u=GA(e),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var p=l[f];if(!(o?p in e:lX.call(e,p)))return!1}var m=s.get(t),v=s.get(e);if(m&&v)return m==e&&v==t;var x=!0;s.set(t,e),s.set(e,t);for(var _=o;++f<c;){p=l[f];var y=t[p],g=e[p];if(n)var w=o?n(g,y,p,e,t,s):n(y,g,p,t,e,s);if(!(w===void 0?y===g||a(y,g,r,n,s):w)){x=!1;break}_||(_=p=="constructor")}if(x&&!_){var E=t.constructor,N=e.constructor;E!=N&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof N=="function"&&N instanceof N)&&(x=!1)}return s.delete(t),s.delete(e),x}var uX=cX,dX=il,fX=ms,hX=dX(fX,"DataView"),pX=hX,mX=il,gX=ms,xX=mX(gX,"Promise"),vX=xX,bX=il,yX=ms,wX=bX(yX,"Set"),gR=wX,_X=il,NX=ms,jX=_X(NX,"WeakMap"),SX=jX,ny=pX,ay=a_,sy=vX,iy=gR,oy=SX,xR=Ks,lu=ND,KA="[object Map]",AX="[object Object]",YA="[object Promise]",XA="[object Set]",QA="[object WeakMap]",JA="[object DataView]",kX=lu(ny),EX=lu(ay),TX=lu(sy),CX=lu(iy),PX=lu(oy),vo=xR;(ny&&vo(new ny(new ArrayBuffer(1)))!=JA||ay&&vo(new ay)!=KA||sy&&vo(sy.resolve())!=YA||iy&&vo(new iy)!=XA||oy&&vo(new oy)!=QA)&&(vo=function(t){var e=xR(t),r=e==AX?t.constructor:void 0,n=r?lu(r):"";if(n)switch(n){case kX:return JA;case EX:return KA;case TX:return YA;case CX:return XA;case PX:return QA}return e});var IX=vo,Qx=sR,OX=cR,DX=dK,RX=uX,ZA=IX,ek=Bn,tk=fR,MX=pR,$X=1,rk="[object Arguments]",nk="[object Array]",Uh="[object Object]",LX=Object.prototype,ak=LX.hasOwnProperty;function VX(t,e,r,n,a,s){var o=ek(t),l=ek(e),c=o?nk:ZA(t),u=l?nk:ZA(e);c=c==rk?Uh:c,u=u==rk?Uh:u;var d=c==Uh,f=u==Uh,p=c==u;if(p&&tk(t)){if(!tk(e))return!1;o=!0,d=!1}if(p&&!d)return s||(s=new Qx),o||MX(t)?OX(t,e,r,n,a,s):DX(t,e,c,r,n,a,s);if(!(r&$X)){var m=d&&ak.call(t,"__wrapped__"),v=f&&ak.call(e,"__wrapped__");if(m||v){var x=m?t.value():t,_=v?e.value():e;return s||(s=new Qx),a(x,_,r,n,s)}}return p?(s||(s=new Qx),RX(t,e,r,n,a,s)):!1}var FX=VX,UX=FX,sk=Ys;function vR(t,e,r,n,a){return t===e?!0:t==null||e==null||!sk(t)&&!sk(e)?t!==t&&e!==e:UX(t,e,r,n,vR,a)}var __=vR,BX=sR,zX=__,WX=1,qX=2;function HX(t,e,r,n){var a=r.length,s=a,o=!n;if(t==null)return!s;for(t=Object(t);a--;){var l=r[a];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){l=r[a];var c=l[0],u=t[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in t))return!1}else{var f=new BX;if(n)var p=n(u,d,c,t,e,f);if(!(p===void 0?zX(d,u,WX|qX,n,f):p))return!1}}return!0}var GX=HX,KX=ro;function YX(t){return t===t&&!KX(t)}var bR=YX,XX=bR,QX=v0;function JX(t){for(var e=QX(t),r=e.length;r--;){var n=e[r],a=t[n];e[r]=[n,a,XX(a)]}return e}var ZX=JX;function eQ(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var yR=eQ,tQ=GX,rQ=ZX,nQ=yR;function aQ(t){var e=rQ(t);return e.length==1&&e[0][2]?nQ(e[0][0],e[0][1]):function(r){return r===t||tQ(r,t,e)}}var sQ=aQ;function iQ(t,e){return t!=null&&e in Object(t)}var oQ=iQ,lQ=ED,cQ=b_,uQ=Bn,dQ=y_,fQ=w_,hQ=n0;function pQ(t,e,r){e=lQ(e,t);for(var n=-1,a=e.length,s=!1;++n<a;){var o=hQ(e[n]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++n!=a?s:(a=t==null?0:t.length,!!a&&fQ(a)&&dQ(o,a)&&(uQ(t)||cQ(t)))}var mQ=pQ,gQ=oQ,xQ=mQ;function vQ(t,e){return t!=null&&xQ(t,e,gQ)}var bQ=vQ,yQ=__,wQ=TD,_Q=bQ,NQ=t_,jQ=bR,SQ=yR,AQ=n0,kQ=1,EQ=2;function TQ(t,e){return NQ(t)&&jQ(e)?SQ(AQ(t),e):function(r){var n=wQ(r,t);return n===void 0&&n===e?_Q(r,t):yQ(e,n,kQ|EQ)}}var CQ=TQ;function PQ(t){return t}var cu=PQ;function IQ(t){return function(e){return e==null?void 0:e[t]}}var OQ=IQ,DQ=l_;function RQ(t){return function(e){return DQ(e,t)}}var MQ=RQ,$Q=OQ,LQ=MQ,VQ=t_,FQ=n0;function UQ(t){return VQ(t)?$Q(FQ(t)):LQ(t)}var BQ=UQ,zQ=sQ,WQ=CQ,qQ=cu,HQ=Bn,GQ=BQ;function KQ(t){return typeof t=="function"?t:t==null?qQ:typeof t=="object"?HQ(t)?WQ(t[0],t[1]):zQ(t):GQ(t)}var gs=KQ;function YQ(t,e,r,n){for(var a=t.length,s=r+(n?1:-1);n?s--:++s<a;)if(e(t[s],s,t))return s;return-1}var wR=YQ;function XQ(t){return t!==t}var QQ=XQ;function JQ(t,e,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1}var ZQ=JQ,eJ=wR,tJ=QQ,rJ=ZQ;function nJ(t,e,r){return e===e?rJ(t,e,r):eJ(t,tJ,r)}var aJ=nJ,sJ=aJ;function iJ(t,e){var r=t==null?0:t.length;return!!r&&sJ(t,e,0)>-1}var oJ=iJ;function lJ(t,e,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(e,t[n]))return!0;return!1}var cJ=lJ;function uJ(){}var dJ=uJ,Jx=gR,fJ=dJ,hJ=v_,pJ=1/0,mJ=Jx&&1/hJ(new Jx([,-0]))[1]==pJ?function(t){return new Jx(t)}:fJ,gJ=mJ,xJ=iR,vJ=oJ,bJ=cJ,yJ=lR,wJ=gJ,_J=v_,NJ=200;function jJ(t,e,r){var n=-1,a=vJ,s=t.length,o=!0,l=[],c=l;if(r)o=!1,a=bJ;else if(s>=NJ){var u=e?null:wJ(t);if(u)return _J(u);o=!1,a=yJ,c=new xJ}else c=e?[]:l;e:for(;++n<s;){var d=t[n],f=e?e(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var p=c.length;p--;)if(c[p]===f)continue e;e&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var SJ=jJ,AJ=gs,kJ=SJ;function EJ(t,e){return t&&t.length?kJ(t,AJ(e)):[]}var TJ=EJ;const ik=Tt(TJ);function _R(t,e,r){return e===!0?ik(t,r):rt(e)?ik(t,e):t}function jc(t){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(t)}var CJ=["ref"];function ok(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ok(Object(r),!0).forEach(function(n){b0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ok(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jR(n.key),n)}}function IJ(t,e,r){return e&&lk(t.prototype,e),r&&lk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function OJ(t,e,r){return e=jm(e),DJ(t,NR()?Reflect.construct(e,r||[],jm(t).constructor):e.apply(t,r))}function DJ(t,e){if(e&&(jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RJ(t)}function RJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NR=function(){return!!t})()}function jm(t){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jm(t)}function MJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ly(t,e)}function ly(t,e){return ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ly(t,e)}function b0(t,e,r){return e=jR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jR(t){var e=$J(t,"string");return jc(e)=="symbol"?e:e+""}function $J(t,e){if(jc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function LJ(t,e){if(t==null)return{};var r=VJ(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function VJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function FJ(t){return t.value}function UJ(t,e){if(H.isValidElement(t))return H.cloneElement(t,e);if(typeof t=="function")return H.createElement(t,e);e.ref;var r=LJ(e,CJ);return H.createElement(x_,r)}var ck=1,rc=function(t){function e(){var r;PJ(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=OJ(this,e,[].concat(a)),b0(r,"lastBoundingBox",{width:-1,height:-1}),r}return MJ(e,t),IJ(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>ck||Math.abs(a.height-this.lastBoundingBox.height)>ck)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?vs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();p={top:((d||0)-v.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return vs(vs({},f),p)}},{key:"render",value:function(){var n=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=vs(vs({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return H.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},UJ(s,vs(vs({},this.props),{},{payload:_R(d,u,FJ)})))}}],[{key:"getWithHeight",value:function(n,a){var s=vs(vs({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&ye(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(D.PureComponent);b0(rc,"displayName","Legend");b0(rc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var uk=Yf,BJ=b_,zJ=Bn,dk=uk?uk.isConcatSpreadable:void 0;function WJ(t){return zJ(t)||BJ(t)||!!(dk&&t&&t[dk])}var qJ=WJ,HJ=uR,GJ=qJ;function SR(t,e,r,n,a){var s=-1,o=t.length;for(r||(r=GJ),a||(a=[]);++s<o;){var l=t[s];e>0&&r(l)?e>1?SR(l,e-1,r,n,a):HJ(a,l):n||(a[a.length]=l)}return a}var AR=SR;function KJ(t){return function(e,r,n){for(var a=-1,s=Object(e),o=n(e),l=o.length;l--;){var c=o[t?l:++a];if(r(s[c],c,s)===!1)break}return e}}var YJ=KJ,XJ=YJ,QJ=XJ(),JJ=QJ,ZJ=JJ,eZ=v0;function tZ(t,e){return t&&ZJ(t,e,eZ)}var kR=tZ,rZ=Jf;function nZ(t,e){return function(r,n){if(r==null)return r;if(!rZ(r))return t(r,n);for(var a=r.length,s=e?a:-1,o=Object(r);(e?s--:++s<a)&&n(o[s],s,o)!==!1;);return r}}var aZ=nZ,sZ=kR,iZ=aZ,oZ=iZ(sZ),N_=oZ,lZ=N_,cZ=Jf;function uZ(t,e){var r=-1,n=cZ(t)?Array(t.length):[];return lZ(t,function(a,s,o){n[++r]=e(a,s,o)}),n}var ER=uZ;function dZ(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var fZ=dZ,fk=ru;function hZ(t,e){if(t!==e){var r=t!==void 0,n=t===null,a=t===t,s=fk(t),o=e!==void 0,l=e===null,c=e===e,u=fk(e);if(!l&&!u&&!s&&t>e||s&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!s&&!u&&t<e||u&&r&&a&&!n&&!s||l&&r&&a||!o&&a||!c)return-1}return 0}var pZ=hZ,mZ=pZ;function gZ(t,e,r){for(var n=-1,a=t.criteria,s=e.criteria,o=a.length,l=r.length;++n<o;){var c=mZ(a[n],s[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return t.index-e.index}var xZ=gZ,Zx=o_,vZ=l_,bZ=gs,yZ=ER,wZ=fZ,_Z=hR,NZ=xZ,jZ=cu,SZ=Bn;function AZ(t,e,r){e.length?e=Zx(e,function(s){return SZ(s)?function(o){return vZ(o,s.length===1?s[0]:s)}:s}):e=[jZ];var n=-1;e=Zx(e,_Z(bZ));var a=yZ(t,function(s,o,l){var c=Zx(e,function(u){return u(s)});return{criteria:c,index:++n,value:s}});return wZ(a,function(s,o){return NZ(s,o,r)})}var kZ=AZ;function EZ(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var TZ=EZ,CZ=TZ,hk=Math.max;function PZ(t,e,r){return e=hk(e===void 0?t.length-1:e,0),function(){for(var n=arguments,a=-1,s=hk(n.length-e,0),o=Array(s);++a<s;)o[a]=n[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=n[a];return l[e]=r(o),CZ(t,this,l)}}var IZ=PZ;function OZ(t){return function(){return t}}var DZ=OZ,RZ=il,MZ=function(){try{var t=RZ(Object,"defineProperty");return t({},"",{}),t}catch{}}(),TR=MZ,$Z=DZ,pk=TR,LZ=cu,VZ=pk?function(t,e){return pk(t,"toString",{configurable:!0,enumerable:!1,value:$Z(e),writable:!0})}:LZ,FZ=VZ,UZ=800,BZ=16,zZ=Date.now;function WZ(t){var e=0,r=0;return function(){var n=zZ(),a=BZ-(n-r);if(r=n,a>0){if(++e>=UZ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var qZ=WZ,HZ=FZ,GZ=qZ,KZ=GZ(HZ),YZ=KZ,XZ=cu,QZ=IZ,JZ=YZ;function ZZ(t,e){return JZ(QZ(t,e,XZ),t+"")}var eee=ZZ,tee=n_,ree=Jf,nee=y_,aee=ro;function see(t,e,r){if(!aee(r))return!1;var n=typeof e;return(n=="number"?ree(r)&&nee(e,r.length):n=="string"&&e in r)?tee(r[e],t):!1}var y0=see,iee=AR,oee=kZ,lee=eee,mk=y0,cee=lee(function(t,e){if(t==null)return[];var r=e.length;return r>1&&mk(t,e[0],e[1])?e=[]:r>2&&mk(e[0],e[1],e[2])&&(e=[e[0]]),oee(t,iee(e,1),[])}),uee=cee;const j_=Tt(uee);function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function cy(){return cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cy.apply(this,arguments)}function dee(t,e){return mee(t)||pee(t,e)||hee(t,e)||fee()}function fee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hee(t,e){if(t){if(typeof t=="string")return gk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gk(t,e)}}function gk(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pee(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function mee(t){if(Array.isArray(t))return t}function xk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ev(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(r),!0).forEach(function(n){gee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gee(t,e,r){return e=xee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xee(t){var e=vee(t,"string");return Qd(e)=="symbol"?e:e+""}function vee(t,e){if(Qd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bee(t){return Array.isArray(t)&&Mr(t[0])&&Mr(t[1])?t.join(" ~ "):t}var yee=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,s=a===void 0?{}:a,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,p=e.itemSorter,m=e.wrapperClassName,v=e.labelClassName,x=e.label,_=e.labelFormatter,y=e.accessibilityLayer,g=y===void 0?!1:y,w=function(){if(d&&d.length){var O={padding:0,margin:0},R=(p?j_(d,p):d).map(function(G,U){if(G.type==="none")return null;var Q=ev({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},l),te=G.formatter||f||bee,K=G.value,X=G.name,se=K,Z=X;if(te&&se!=null&&Z!=null){var F=te(K,X,G,U,d);if(Array.isArray(F)){var de=dee(F,2);se=de[0],Z=de[1]}else se=F}return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:Q},Mr(Z)?H.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,Mr(Z)?H.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,H.createElement("span",{className:"recharts-tooltip-item-value"},se),H.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:O},R)}return null},E=ev({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),N=ev({margin:0},u),k=!dt(x),S=k?x:"",b=ut("recharts-default-tooltip",m),A=ut("recharts-tooltip-label",v);k&&_&&d!==void 0&&d!==null&&(S=_(x,d));var T=g?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",cy({className:b,style:E},T),H.createElement("p",{className:A,style:N},H.isValidElement(S)?S:"".concat(S)),w())};function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function Bh(t,e,r){return e=wee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wee(t){var e=_ee(t,"string");return Jd(e)=="symbol"?e:e+""}function _ee(t,e){if(Jd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $u="recharts-tooltip-wrapper",Nee={visibility:"hidden"};function jee(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return ut($u,Bh(Bh(Bh(Bh({},"".concat($u,"-right"),ye(r)&&e&&ye(e.x)&&r>=e.x),"".concat($u,"-left"),ye(r)&&e&&ye(e.x)&&r<e.x),"".concat($u,"-bottom"),ye(n)&&e&&ye(e.y)&&n>=e.y),"".concat($u,"-top"),ye(n)&&e&&ye(e.y)&&n<e.y))}function vk(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&ye(s[n]))return s[n];var d=r[n]-l-a,f=r[n]+a;if(e[n])return o[n]?d:f;if(o[n]){var p=d,m=c[n];return p<m?Math.max(f,c[n]):Math.max(d,c[n])}var v=f+l,x=c[n]+u;return v>x?Math.max(d,c[n]):Math.max(f,c[n])}function See(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function Aee(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=vk({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=vk({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=See({translateX:d,translateY:f,useTranslate3d:l})):u=Nee,{cssProperties:u,cssClasses:jee({translateX:d,translateY:f,coordinate:r})}}function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function bk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bk(Object(r),!0).forEach(function(n){dy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PR(n.key),n)}}function Tee(t,e,r){return e&&Eee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cee(t,e,r){return e=Sm(e),Pee(t,CR()?Reflect.construct(e,r||[],Sm(t).constructor):e.apply(t,r))}function Pee(t,e){if(e&&(Sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Iee(t)}function Iee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CR=function(){return!!t})()}function Sm(t){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sm(t)}function Oee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uy(t,e)}function uy(t,e){return uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uy(t,e)}function dy(t,e,r){return e=PR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PR(t){var e=Dee(t,"string");return Sc(e)=="symbol"?e:e+""}function Dee(t,e){if(Sc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wk=1,Ree=function(t){function e(){var r;kee(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Cee(this,e,[].concat(a)),dy(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),dy(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Oee(e,t),Tee(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>wk||Math.abs(n.height-this.state.lastBoundingBox.height)>wk)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,p=a.isAnimationActive,m=a.offset,v=a.position,x=a.reverseDirection,_=a.useTranslate3d,y=a.viewBox,g=a.wrapperStyle,w=Aee({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:v,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:_,viewBox:y}),E=w.cssClasses,N=w.cssProperties,k=yk(yk({transition:p&&s?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},g);return H.createElement("div",{tabIndex:-1,className:E,style:k,ref:function(b){n.wrapperNode=b}},u)}}])}(D.PureComponent),Mee=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},uu={isSsr:Mee()};function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}function _k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(r),!0).forEach(function(n){S_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_k(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OR(n.key),n)}}function Vee(t,e,r){return e&&Lee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fee(t,e,r){return e=Am(e),Uee(t,IR()?Reflect.construct(e,r||[],Am(t).constructor):e.apply(t,r))}function Uee(t,e){if(e&&(Ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bee(t)}function Bee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IR=function(){return!!t})()}function Am(t){return Am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Am(t)}function zee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fy(t,e)}function fy(t,e){return fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fy(t,e)}function S_(t,e,r){return e=OR(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OR(t){var e=Wee(t,"string");return Ac(e)=="symbol"?e:e+""}function Wee(t,e){if(Ac(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ac(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function qee(t){return t.dataKey}function Hee(t,e){return H.isValidElement(t)?H.cloneElement(t,e):typeof t=="function"?H.createElement(t,e):H.createElement(yee,e)}var Ta=function(t){function e(){return $ee(this,e),Fee(this,e,arguments)}return zee(e,t),Vee(e,[{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,p=a.isAnimationActive,m=a.offset,v=a.payload,x=a.payloadUniqBy,_=a.position,y=a.reverseDirection,g=a.useTranslate3d,w=a.viewBox,E=a.wrapperStyle,N=v??[];f&&N.length&&(N=_R(v.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),x,qee));var k=N.length>0;return H.createElement(Ree,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:s,coordinate:d,hasPayload:k,offset:m,position:_,reverseDirection:y,useTranslate3d:g,viewBox:w,wrapperStyle:E},Hee(u,Nk(Nk({},this.props),{},{payload:N})))}}])}(D.PureComponent);S_(Ta,"displayName","Tooltip");S_(Ta,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!uu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Gee=ms,Kee=function(){return Gee.Date.now()},Yee=Kee,Xee=/\s/;function Qee(t){for(var e=t.length;e--&&Xee.test(t.charAt(e)););return e}var Jee=Qee,Zee=Jee,ete=/^\s+/;function tte(t){return t&&t.slice(0,Zee(t)+1).replace(ete,"")}var rte=tte,nte=rte,jk=ro,ate=ru,Sk=NaN,ste=/^[-+]0x[0-9a-f]+$/i,ite=/^0b[01]+$/i,ote=/^0o[0-7]+$/i,lte=parseInt;function cte(t){if(typeof t=="number")return t;if(ate(t))return Sk;if(jk(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=jk(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=nte(t);var r=ite.test(t);return r||ote.test(t)?lte(t.slice(2),r?2:8):ste.test(t)?Sk:+t}var DR=cte,ute=ro,tv=Yee,Ak=DR,dte="Expected a function",fte=Math.max,hte=Math.min;function pte(t,e,r){var n,a,s,o,l,c,u=0,d=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(dte);e=Ak(e)||0,ute(r)&&(d=!!r.leading,f="maxWait"in r,s=f?fte(Ak(r.maxWait)||0,e):s,p="trailing"in r?!!r.trailing:p);function m(k){var S=n,b=a;return n=a=void 0,u=k,o=t.apply(b,S),o}function v(k){return u=k,l=setTimeout(y,e),d?m(k):o}function x(k){var S=k-c,b=k-u,A=e-S;return f?hte(A,s-b):A}function _(k){var S=k-c,b=k-u;return c===void 0||S>=e||S<0||f&&b>=s}function y(){var k=tv();if(_(k))return g(k);l=setTimeout(y,x(k))}function g(k){return l=void 0,p&&n?m(k):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function E(){return l===void 0?o:g(tv())}function N(){var k=tv(),S=_(k);if(n=arguments,a=this,c=k,S){if(l===void 0)return v(c);if(f)return clearTimeout(l),l=setTimeout(y,e),m(c)}return l===void 0&&(l=setTimeout(y,e)),o}return N.cancel=w,N.flush=E,N}var mte=pte,gte=mte,xte=ro,vte="Expected a function";function bte(t,e,r){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(vte);return xte(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),gte(t,e,{leading:n,maxWait:e,trailing:a})}var yte=bte;const RR=Tt(yte);function Zd(t){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(t)}function kk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(r),!0).forEach(function(n){wte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wte(t,e,r){return e=_te(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _te(t){var e=Nte(t,"string");return Zd(e)=="symbol"?e:e+""}function Nte(t,e){if(Zd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jte(t,e){return Ete(t)||kte(t,e)||Ate(t,e)||Ste()}function Ste(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ate(t,e){if(t){if(typeof t=="string")return Ek(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ek(t,e)}}function Ek(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Ete(t){if(Array.isArray(t))return t}var Tk=D.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,p=t.maxHeight,m=t.children,v=t.debounce,x=v===void 0?0:v,_=t.id,y=t.className,g=t.onResize,w=t.style,E=w===void 0?{}:w,N=D.useRef(null),k=D.useRef();k.current=g,D.useImperativeHandle(e,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var S=D.useState({containerWidth:a.width,containerHeight:a.height}),b=jte(S,2),A=b[0],T=b[1],I=D.useCallback(function(R,G){T(function(U){var Q=Math.round(R),te=Math.round(G);return U.containerWidth===Q&&U.containerHeight===te?U:{containerWidth:Q,containerHeight:te}})},[]);D.useEffect(function(){var R=function(X){var se,Z=X[0].contentRect,F=Z.width,de=Z.height;I(F,de),(se=k.current)===null||se===void 0||se.call(k,F,de)};x>0&&(R=RR(R,x,{trailing:!0,leading:!1}));var G=new ResizeObserver(R),U=N.current.getBoundingClientRect(),Q=U.width,te=U.height;return I(Q,te),G.observe(N.current),function(){G.disconnect()}},[I,x]);var O=D.useMemo(function(){var R=A.containerWidth,G=A.containerHeight;if(R<0||G<0)return null;Va(Ao(o)||Ao(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Va(!r||r>0,"The aspect(%s) must be greater than zero.",r);var U=Ao(o)?R:o,Q=Ao(c)?G:c;r&&r>0&&(U?Q=U/r:Q&&(U=Q*r),p&&Q>p&&(Q=p)),Va(U>0||Q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,Q,o,c,d,f,r);var te=!Array.isArray(m)&&Cs(m.type).endsWith("Chart");return H.Children.map(m,function(K){return H.isValidElement(K)?D.cloneElement(K,zh({width:U,height:Q},te?{style:zh({height:"100%",width:"100%",maxHeight:Q,maxWidth:U},K.props.style)}:{})):K})},[r,m,c,p,f,d,A,o]);return H.createElement("div",{id:_?"".concat(_):void 0,className:ut("recharts-responsive-container",y),style:zh(zh({},E),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:p}),ref:N},O)}),w0=function(e){return null};w0.displayName="Cell";function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function Ck(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ck(Object(r),!0).forEach(function(n){Tte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ck(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tte(t,e,r){return e=Cte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cte(t){var e=Pte(t,"string");return ef(e)=="symbol"?e:e+""}function Pte(t,e){if(ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xl={widthCache:{},cacheCount:0},Ite=2e3,Ote={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Pk="recharts_measurement_span";function Dte(t){var e=hy({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var xd=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||uu.isSsr)return{width:0,height:0};var n=Dte(r),a=JSON.stringify({text:e,copyStyle:n});if(xl.widthCache[a])return xl.widthCache[a];try{var s=document.getElementById(Pk);s||(s=document.createElement("span"),s.setAttribute("id",Pk),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=hy(hy({},Ote),n);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return xl.widthCache[a]=c,++xl.cacheCount>Ite&&(xl.cacheCount=0,xl.widthCache={}),c}catch{return{width:0,height:0}}},Rte=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function km(t,e){return Vte(t)||Lte(t,e)||$te(t,e)||Mte()}function Mte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $te(t,e){if(t){if(typeof t=="string")return Ik(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ik(t,e)}}function Ik(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Vte(t){if(Array.isArray(t))return t}function Fte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ok(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bte(n.key),n)}}function Ute(t,e,r){return e&&Ok(t.prototype,e),r&&Ok(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bte(t){var e=zte(t,"string");return tf(e)=="symbol"?e:e+""}function zte(t,e){if(tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Dk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Rk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Wte=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qte=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,MR={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Hte=Object.keys(MR),Vl="NaN";function Gte(t,e){return t*MR[e]}var Wh=function(){function t(e,r){Fte(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Wte.test(r)&&(this.num=NaN,this.unit=""),Hte.includes(r)&&(this.num=Gte(e,r),this.unit="px")}return Ute(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=qte.exec(r))!==null&&n!==void 0?n:[],s=km(a,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function $R(t){if(t.includes(Vl))return Vl;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=Dk.exec(e))!==null&&r!==void 0?r:[],a=km(n,4),s=a[1],o=a[2],l=a[3],c=Wh.parse(s??""),u=Wh.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Vl;e=e.replace(Dk,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,p=(f=Rk.exec(e))!==null&&f!==void 0?f:[],m=km(p,4),v=m[1],x=m[2],_=m[3],y=Wh.parse(v??""),g=Wh.parse(_??""),w=x==="+"?y.add(g):y.subtract(g);if(w.isNaN())return Vl;e=e.replace(Rk,w.toString())}return e}var Mk=/\(([^()]*)\)/;function Kte(t){for(var e=t;e.includes("(");){var r=Mk.exec(e),n=km(r,2),a=n[1];e=e.replace(Mk,$R(a))}return e}function Yte(t){var e=t.replace(/\s+/g,"");return e=Kte(e),e=$R(e),e}function Xte(t){try{return Yte(t)}catch{return Vl}}function rv(t){var e=Xte(t.slice(5,-1));return e===Vl?"":e}var Qte=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Jte=["dx","dy","angle","className","breakAll"];function py(){return py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},py.apply(this,arguments)}function $k(t,e){if(t==null)return{};var r=Zte(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zte(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Lk(t,e){return nre(t)||rre(t,e)||tre(t,e)||ere()}function ere(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tre(t,e){if(t){if(typeof t=="string")return Vk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vk(t,e)}}function Vk(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function nre(t){if(Array.isArray(t))return t}var LR=/[ \f\n\r\t\v\u2028\u2029]+/,VR=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var s=[];dt(r)||(n?s=r.toString().split(""):s=r.toString().split(LR));var o=s.map(function(c){return{word:c,width:xd(c,a).width}}),l=n?0:xd("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},are=function(e,r,n,a,s){var o=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=ye(o),f=l,p=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(Q,te){var K=te.word,X=te.width,se=Q[Q.length-1];if(se&&(a==null||s||se.width+X+n<Number(a)))se.words.push(K),se.width+=X+n;else{var Z={words:[K],width:X};Q.push(Z)}return Q},[])},m=p(r),v=function(U){return U.reduce(function(Q,te){return Q.width>te.width?Q:te})};if(!d)return m;for(var x="",_=function(U){var Q=f.slice(0,U),te=VR({breakAll:u,style:c,children:Q+x}).wordsWithComputedWidth,K=p(te),X=K.length>o||v(K).width>Number(a);return[X,K]},y=0,g=f.length-1,w=0,E;y<=g&&w<=f.length-1;){var N=Math.floor((y+g)/2),k=N-1,S=_(k),b=Lk(S,2),A=b[0],T=b[1],I=_(N),O=Lk(I,1),R=O[0];if(!A&&!R&&(y=N+1),A&&R&&(g=N-1),!A&&R){E=T;break}w++}return E||m},Fk=function(e){var r=dt(e)?[]:e.toString().split(LR);return[{words:r}]},sre=function(e){var r=e.width,n=e.scaleToFit,a=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!uu.isSsr){var c,u,d=VR({breakAll:o,children:a,style:s});if(d){var f=d.wordsWithComputedWidth,p=d.spaceWidth;c=f,u=p}else return Fk(a);return are({breakAll:o,children:a,maxLines:l,style:s},c,u,r,n)}return Fk(a)},Uk="#808080",Qo=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,p=e.textAnchor,m=p===void 0?"start":p,v=e.verticalAnchor,x=v===void 0?"end":v,_=e.fill,y=_===void 0?Uk:_,g=$k(e,Qte),w=D.useMemo(function(){return sre({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:f,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,f,g.style,g.width]),E=g.dx,N=g.dy,k=g.angle,S=g.className,b=g.breakAll,A=$k(g,Jte);if(!Mr(n)||!Mr(s))return null;var T=n+(ye(E)?E:0),I=s+(ye(N)?N:0),O;switch(x){case"start":O=rv("calc(".concat(u,")"));break;case"middle":O=rv("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:O=rv("calc(".concat(w.length-1," * -").concat(l,")"));break}var R=[];if(f){var G=w[0].width,U=g.width;R.push("scale(".concat((ye(U)?U/G:1)/G,")"))}return k&&R.push("rotate(".concat(k,", ").concat(T,", ").concat(I,")")),R.length&&(A.transform=R.join(" ")),H.createElement("text",py({},Je(A,!0),{x:T,y:I,className:ut("recharts-text",S),textAnchor:m,fill:y.includes("url")?Uk:y}),w.map(function(Q,te){var K=Q.words.join(b?"":" ");return H.createElement("tspan",{x:T,dy:te===0?O:l,key:"".concat(K,"-").concat(te)},K)}))};function Fi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ire(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function A_(t){let e,r,n;t.length!==2?(e=Fi,r=(l,c)=>Fi(t(l),c),n=(l,c)=>t(l)-c):(e=t===Fi||t===ire?t:ore,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:s}}function ore(){return 0}function FR(t){return t===null?NaN:+t}function*lre(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const cre=A_(Fi),Zf=cre.right;A_(FR).center;class Bk extends Map{constructor(e,r=fre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(zk(this,e))}has(e){return super.has(zk(this,e))}set(e,r){return super.set(ure(this,e),r)}delete(e){return super.delete(dre(this,e))}}function zk({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function ure({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function dre({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function fre(t){return t!==null&&typeof t=="object"?t.valueOf():t}function hre(t=Fi){if(t===Fi)return UR;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function UR(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const pre=Math.sqrt(50),mre=Math.sqrt(10),gre=Math.sqrt(2);function Em(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=pre?10:s>=mre?5:s>=gre?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?Em(t,e,r*2):[l,c,u]}function my(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?Em(e,t,r):Em(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function gy(t,e,r){return e=+e,t=+t,r=+r,Em(t,e,r)[2]}function xy(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?gy(e,t,r):gy(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function Wk(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function qk(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function BR(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?UR:hre(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(e-u*f/c+p)),v=Math.min(n,Math.floor(e+(c-u)*f/c+p));BR(t,e,m,v,a)}const s=t[e];let o=r,l=n;for(Lu(t,r,e),a(t[n],s)>0&&Lu(t,r,n);o<l;){for(Lu(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?Lu(t,r,l):(++l,Lu(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Lu(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function xre(t,e,r){if(t=Float64Array.from(lre(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return qk(t);if(e>=1)return Wk(t);var n,a=(n-1)*e,s=Math.floor(a),o=Wk(BR(t,s).subarray(0,s+1)),l=qk(t.subarray(s+1));return o+(l-o)*(a-s)}}function vre(t,e,r=FR){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function bre(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function ba(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Xs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vy=Symbol("implicit");function k_(){var t=new Bk,e=[],r=[],n=vy;function a(s){let o=t.get(s);if(o===void 0){if(n!==vy)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Bk;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return k_(e,r).unknown(n)},ba.apply(a,arguments),a}function rf(){var t=k_().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var p=e().length,m=a<n,v=m?a:n,x=m?n:a;s=(x-v)/Math.max(1,p-c+u*2),l&&(s=Math.floor(s)),v+=(x-v-s*(p-c))*d,o=s*(1-c),l&&(v=Math.round(v),o=Math.round(o));var _=bre(p).map(function(y){return v+s*y});return r(m?_.reverse():_)}return t.domain=function(p){return arguments.length?(e(p),f()):e()},t.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,f()):[n,a]},t.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,l=!0,f()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(p){return arguments.length?(l=!!p,f()):l},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),f()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,f()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),f()):d},t.copy=function(){return rf(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},ba.apply(f(),arguments)}function zR(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return zR(e())},t}function vd(){return zR(rf.apply(null,arguments).paddingInner(1))}function E_(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function WR(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function eh(){}var nf=.7,Tm=1/nf,nc="\\s*([+-]?\\d+)\\s*",af="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",us="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yre=/^#([0-9a-f]{3,8})$/,wre=new RegExp(`^rgb\\(${nc},${nc},${nc}\\)$`),_re=new RegExp(`^rgb\\(${us},${us},${us}\\)$`),Nre=new RegExp(`^rgba\\(${nc},${nc},${nc},${af}\\)$`),jre=new RegExp(`^rgba\\(${us},${us},${us},${af}\\)$`),Sre=new RegExp(`^hsl\\(${af},${us},${us}\\)$`),Are=new RegExp(`^hsla\\(${af},${us},${us},${af}\\)$`),Hk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};E_(eh,sf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Gk,formatHex:Gk,formatHex8:kre,formatHsl:Ere,formatRgb:Kk,toString:Kk});function Gk(){return this.rgb().formatHex()}function kre(){return this.rgb().formatHex8()}function Ere(){return qR(this).formatHsl()}function Kk(){return this.rgb().formatRgb()}function sf(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=yre.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Yk(e):r===3?new $n(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?qh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?qh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=wre.exec(t))?new $n(e[1],e[2],e[3],1):(e=_re.exec(t))?new $n(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Nre.exec(t))?qh(e[1],e[2],e[3],e[4]):(e=jre.exec(t))?qh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Sre.exec(t))?Jk(e[1],e[2]/100,e[3]/100,1):(e=Are.exec(t))?Jk(e[1],e[2]/100,e[3]/100,e[4]):Hk.hasOwnProperty(t)?Yk(Hk[t]):t==="transparent"?new $n(NaN,NaN,NaN,0):null}function Yk(t){return new $n(t>>16&255,t>>8&255,t&255,1)}function qh(t,e,r,n){return n<=0&&(t=e=r=NaN),new $n(t,e,r,n)}function Tre(t){return t instanceof eh||(t=sf(t)),t?(t=t.rgb(),new $n(t.r,t.g,t.b,t.opacity)):new $n}function by(t,e,r,n){return arguments.length===1?Tre(t):new $n(t,e,r,n??1)}function $n(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}E_($n,by,WR(eh,{brighter(t){return t=t==null?Tm:Math.pow(Tm,t),new $n(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?nf:Math.pow(nf,t),new $n(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $n(Mo(this.r),Mo(this.g),Mo(this.b),Cm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xk,formatHex:Xk,formatHex8:Cre,formatRgb:Qk,toString:Qk}));function Xk(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}`}function Cre(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}${ko((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qk(){const t=Cm(this.opacity);return`${t===1?"rgb(":"rgba("}${Mo(this.r)}, ${Mo(this.g)}, ${Mo(this.b)}${t===1?")":`, ${t})`}`}function Cm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Mo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ko(t){return t=Mo(t),(t<16?"0":"")+t.toString(16)}function Jk(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ia(t,e,r,n)}function qR(t){if(t instanceof Ia)return new Ia(t.h,t.s,t.l,t.opacity);if(t instanceof eh||(t=sf(t)),!t)return new Ia;if(t instanceof Ia)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Ia(o,l,c,t.opacity)}function Pre(t,e,r,n){return arguments.length===1?qR(t):new Ia(t,e,r,n??1)}function Ia(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}E_(Ia,Pre,WR(eh,{brighter(t){return t=t==null?Tm:Math.pow(Tm,t),new Ia(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?nf:Math.pow(nf,t),new Ia(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new $n(nv(t>=240?t-240:t+120,a,n),nv(t,a,n),nv(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new Ia(Zk(this.h),Hh(this.s),Hh(this.l),Cm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Cm(this.opacity);return`${t===1?"hsl(":"hsla("}${Zk(this.h)}, ${Hh(this.s)*100}%, ${Hh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Zk(t){return t=(t||0)%360,t<0?t+360:t}function Hh(t){return Math.max(0,Math.min(1,t||0))}function nv(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const T_=t=>()=>t;function Ire(t,e){return function(r){return t+r*e}}function Ore(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Dre(t){return(t=+t)==1?HR:function(e,r){return r-e?Ore(e,r,t):T_(isNaN(e)?r:e)}}function HR(t,e){var r=e-t;return r?Ire(t,r):T_(isNaN(t)?e:t)}const eE=function t(e){var r=Dre(e);function n(a,s){var o=r((a=by(a)).r,(s=by(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=HR(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function Rre(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function Mre(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $re(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=du(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function Lre(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Pm(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Vre(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=du(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var yy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,av=new RegExp(yy.source,"g");function Fre(t){return function(){return t}}function Ure(t){return function(e){return t(e)+""}}function Bre(t,e){var r=yy.lastIndex=av.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=yy.exec(t))&&(a=av.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Pm(n,a)})),r=av.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Ure(c[0].x):Fre(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function du(t,e){var r=typeof e,n;return e==null||r==="boolean"?T_(e):(r==="number"?Pm:r==="string"?(n=sf(e))?(e=n,eE):Bre:e instanceof sf?eE:e instanceof Date?Lre:Mre(e)?Rre:Array.isArray(e)?$re:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vre:Pm)(t,e)}function C_(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function zre(t,e){e===void 0&&(e=t,t=du);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function Wre(t){return function(){return t}}function Im(t){return+t}var tE=[0,1];function An(t){return t}function wy(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Wre(isNaN(e)?NaN:.5)}function qre(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Hre(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=wy(a,n),s=r(o,s)):(n=wy(n,a),s=r(s,o)),function(l){return s(n(l))}}function Gre(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=wy(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=Zf(t,l,1,n)-1;return s[c](a[c](l))}}function th(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _0(){var t=tE,e=tE,r=du,n,a,s,o=An,l,c,u;function d(){var p=Math.min(t.length,e.length);return o!==An&&(o=qre(t[0],t[p-1])),l=p>2?Gre:Hre,c=u=null,f}function f(p){return p==null||isNaN(p=+p)?s:(c||(c=l(t.map(n),e,r)))(n(o(p)))}return f.invert=function(p){return o(a((u||(u=l(e,t.map(n),Pm)))(p)))},f.domain=function(p){return arguments.length?(t=Array.from(p,Im),d()):t.slice()},f.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},f.rangeRound=function(p){return e=Array.from(p),r=C_,d()},f.clamp=function(p){return arguments.length?(o=p?!0:An,d()):o!==An},f.interpolate=function(p){return arguments.length?(r=p,d()):r},f.unknown=function(p){return arguments.length?(s=p,f):s},function(p,m){return n=p,a=m,d()}}function P_(){return _0()(An,An)}function Kre(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Om(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function kc(t){return t=Om(Math.abs(t)),t?t[1]:NaN}function Yre(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Xre(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Qre=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function of(t){if(!(e=Qre.exec(t)))throw new Error("invalid format: "+t);var e;return new I_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}of.prototype=I_.prototype;function I_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}I_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jre(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Dm;function Zre(t,e){var r=Om(t,e);if(!r)return Dm=void 0,t.toPrecision(e);var n=r[0],a=r[1],s=a-(Dm=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Om(t,Math.max(0,e+s-1))[0]}function rE(t,e){var r=Om(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const nE={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Kre,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>rE(t*100,e),r:rE,s:Zre,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function aE(t){return t}var sE=Array.prototype.map,iE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ene(t){var e=t.grouping===void 0||t.thousands===void 0?aE:Yre(sE.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?aE:Xre(sE.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,p){f=of(f);var m=f.fill,v=f.align,x=f.sign,_=f.symbol,y=f.zero,g=f.width,w=f.comma,E=f.precision,N=f.trim,k=f.type;k==="n"?(w=!0,k="g"):nE[k]||(E===void 0&&(E=12),N=!0,k="g"),(y||m==="0"&&v==="=")&&(y=!0,m="0",v="=");var S=(p&&p.prefix!==void 0?p.prefix:"")+(_==="$"?r:_==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():""),b=(_==="$"?n:/[%p]/.test(k)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),A=nE[k],T=/[defgprs%]/.test(k);E=E===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function I(O){var R=S,G=b,U,Q,te;if(k==="c")G=A(O)+G,O="";else{O=+O;var K=O<0||1/O<0;if(O=isNaN(O)?c:A(Math.abs(O),E),N&&(O=Jre(O)),K&&+O==0&&x!=="+"&&(K=!1),R=(K?x==="("?x:l:x==="-"||x==="("?"":x)+R,G=(k==="s"&&!isNaN(O)&&Dm!==void 0?iE[8+Dm/3]:"")+G+(K&&x==="("?")":""),T){for(U=-1,Q=O.length;++U<Q;)if(te=O.charCodeAt(U),48>te||te>57){G=(te===46?a+O.slice(U+1):O.slice(U))+G,O=O.slice(0,U);break}}}w&&!y&&(O=e(O,1/0));var X=R.length+O.length+G.length,se=X<g?new Array(g-X+1).join(m):"";switch(w&&y&&(O=e(se+O,se.length?g-G.length:1/0),se=""),v){case"<":O=R+O+G+se;break;case"=":O=R+se+O+G;break;case"^":O=se.slice(0,X=se.length>>1)+R+O+G+se.slice(X);break;default:O=se+R+O+G;break}return s(O)}return I.toString=function(){return f+""},I}function d(f,p){var m=Math.max(-8,Math.min(8,Math.floor(kc(p)/3)))*3,v=Math.pow(10,-m),x=u((f=of(f),f.type="f",f),{suffix:iE[8+m/3]});return function(_){return x(v*_)}}return{format:u,formatPrefix:d}}var Gh,O_,GR;tne({thousands:",",grouping:[3],currency:["$",""]});function tne(t){return Gh=ene(t),O_=Gh.format,GR=Gh.formatPrefix,Gh}function rne(t){return Math.max(0,-kc(Math.abs(t)))}function nne(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(kc(e)/3)))*3-kc(Math.abs(t)))}function ane(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,kc(e)-kc(t))+1}function KR(t,e,r,n){var a=xy(t,e,r),s;switch(n=of(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=nne(a,o))&&(n.precision=s),GR(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=ane(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=rne(a))&&(n.precision=s-(n.type==="%")*2);break}}return O_(n)}function no(t){var e=t.domain;return t.ticks=function(r){var n=e();return my(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return KR(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=gy(o,l,r),u===c)return n[a]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Rm(){var t=P_();return t.copy=function(){return th(t,Rm())},ba.apply(t,arguments),no(t)}function YR(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Im),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return YR(t).unknown(e)},t=arguments.length?Array.from(t,Im):[0,1],no(r)}function XR(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function oE(t){return Math.log(t)}function lE(t){return Math.exp(t)}function sne(t){return-Math.log(-t)}function ine(t){return-Math.exp(-t)}function one(t){return isFinite(t)?+("1e"+t):t<0?0:t}function lne(t){return t===10?one:t===Math.E?Math.exp:e=>Math.pow(t,e)}function cne(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function cE(t){return(e,r)=>-t(-e,r)}function D_(t){const e=t(oE,lE),r=e.domain;let n=10,a,s;function o(){return a=cne(n),s=lne(n),r()[0]<0?(a=cE(a),s=cE(s),t(sne,ine)):t(oE,lE),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let p=a(u),m=a(d),v,x;const _=l==null?10:+l;let y=[];if(!(n%1)&&m-p<_){if(p=Math.floor(p),m=Math.ceil(m),u>0){for(;p<=m;++p)for(v=1;v<n;++v)if(x=p<0?v/s(-p):v*s(p),!(x<u)){if(x>d)break;y.push(x)}}else for(;p<=m;++p)for(v=n-1;v>=1;--v)if(x=p>0?v/s(-p):v*s(p),!(x<u)){if(x>d)break;y.push(x)}y.length*2<_&&(y=my(u,d,_))}else y=my(p,m,Math.min(m-p,_)).map(s);return f?y.reverse():y},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=of(c)).precision==null&&(c.trim=!0),c=O_(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},e.nice=()=>r(XR(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function QR(){const t=D_(_0()).domain([1,10]);return t.copy=()=>th(t,QR()).base(t.base()),ba.apply(t,arguments),t}function uE(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dE(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function R_(t){var e=1,r=t(uE(e),dE(e));return r.constant=function(n){return arguments.length?t(uE(e=+n),dE(e)):e},no(r)}function JR(){var t=R_(_0());return t.copy=function(){return th(t,JR()).constant(t.constant())},ba.apply(t,arguments)}function fE(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function une(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function dne(t){return t<0?-t*t:t*t}function M_(t){var e=t(An,An),r=1;function n(){return r===1?t(An,An):r===.5?t(une,dne):t(fE(r),fE(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},no(e)}function $_(){var t=M_(_0());return t.copy=function(){return th(t,$_()).exponent(t.exponent())},ba.apply(t,arguments),t}function fne(){return $_.apply(null,arguments).exponent(.5)}function hE(t){return Math.sign(t)*t*t}function hne(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function ZR(){var t=P_(),e=[0,1],r=!1,n;function a(s){var o=hne(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(hE(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,Im)).map(hE)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return ZR(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},ba.apply(a,arguments),no(a)}function eM(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=vre(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Zf(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Fi),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return eM().domain(t).range(e).unknown(n)},ba.apply(s,arguments)}function tM(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Zf(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return tM().domain([t,e]).range(a).unknown(s)},ba.apply(no(o),arguments)}function rM(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Zf(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return rM().domain(t).range(e).unknown(r)},ba.apply(a,arguments)}const sv=new Date,iv=new Date;function Lr(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},a.filter=s=>Lr(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(sv.setTime(+s),iv.setTime(+o),t(sv),t(iv),Math.floor(r(sv,iv))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Mm=Lr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Mm.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Lr(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Mm);Mm.range;const As=1e3,fa=As*60,ks=fa*60,Bs=ks*24,L_=Bs*7,pE=Bs*30,ov=Bs*365,Eo=Lr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*As)},(t,e)=>(e-t)/As,t=>t.getUTCSeconds());Eo.range;const V_=Lr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*As)},(t,e)=>{t.setTime(+t+e*fa)},(t,e)=>(e-t)/fa,t=>t.getMinutes());V_.range;const F_=Lr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*fa)},(t,e)=>(e-t)/fa,t=>t.getUTCMinutes());F_.range;const U_=Lr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*As-t.getMinutes()*fa)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getHours());U_.range;const B_=Lr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getUTCHours());B_.range;const rh=Lr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fa)/Bs,t=>t.getDate()-1);rh.range;const N0=Lr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bs,t=>t.getUTCDate()-1);N0.range;const nM=Lr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bs,t=>Math.floor(t/Bs));nM.range;function ol(t){return Lr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*fa)/L_)}const j0=ol(0),$m=ol(1),pne=ol(2),mne=ol(3),Ec=ol(4),gne=ol(5),xne=ol(6);j0.range;$m.range;pne.range;mne.range;Ec.range;gne.range;xne.range;function ll(t){return Lr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/L_)}const S0=ll(0),Lm=ll(1),vne=ll(2),bne=ll(3),Tc=ll(4),yne=ll(5),wne=ll(6);S0.range;Lm.range;vne.range;bne.range;Tc.range;yne.range;wne.range;const z_=Lr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());z_.range;const W_=Lr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());W_.range;const zs=Lr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());zs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});zs.range;const Ws=Lr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ws.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Ws.range;function aM(t,e,r,n,a,s){const o=[[Eo,1,As],[Eo,5,5*As],[Eo,15,15*As],[Eo,30,30*As],[s,1,fa],[s,5,5*fa],[s,15,15*fa],[s,30,30*fa],[a,1,ks],[a,3,3*ks],[a,6,6*ks],[a,12,12*ks],[n,1,Bs],[n,2,2*Bs],[r,1,L_],[e,1,pE],[e,3,3*pE],[t,1,ov]];function l(u,d,f){const p=d<u;p&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),v=m?m.range(u,+d+1):[];return p?v.reverse():v}function c(u,d,f){const p=Math.abs(d-u)/f,m=A_(([,,_])=>_).right(o,p);if(m===o.length)return t.every(xy(u/ov,d/ov,f));if(m===0)return Mm.every(Math.max(xy(u,d,f),1));const[v,x]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return v.every(x)}return[l,c]}const[_ne,Nne]=aM(Ws,W_,S0,nM,B_,F_),[jne,Sne]=aM(zs,z_,j0,rh,U_,V_);function lv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function cv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vu(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Ane(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=Fu(a),d=Uu(a),f=Fu(s),p=Uu(s),m=Fu(o),v=Uu(o),x=Fu(l),_=Uu(l),y=Fu(c),g=Uu(c),w={a:te,A:K,b:X,B:se,c:null,d:yE,e:yE,f:Yne,g:sae,G:oae,H:Hne,I:Gne,j:Kne,L:sM,m:Xne,M:Qne,p:Z,q:F,Q:NE,s:jE,S:Jne,u:Zne,U:eae,V:tae,w:rae,W:nae,x:null,X:null,y:aae,Y:iae,Z:lae,"%":_E},E={a:de,A:me,b:Ge,B:Me,c:null,d:wE,e:wE,f:fae,g:_ae,G:jae,H:cae,I:uae,j:dae,L:oM,m:hae,M:pae,p:ot,q:Be,Q:NE,s:jE,S:mae,u:gae,U:xae,V:vae,w:bae,W:yae,x:null,X:null,y:wae,Y:Nae,Z:Sae,"%":_E},N={a:T,A:I,b:O,B:R,c:G,d:vE,e:vE,f:Bne,g:xE,G:gE,H:bE,I:bE,j:Lne,L:Une,m:$ne,M:Vne,p:A,q:Mne,Q:Wne,s:qne,S:Fne,u:Pne,U:Ine,V:One,w:Cne,W:Dne,x:U,X:Q,y:xE,Y:gE,Z:Rne,"%":zne};w.x=k(r,w),w.X=k(n,w),w.c=k(e,w),E.x=k(r,E),E.X=k(n,E),E.c=k(e,E);function k(xe,ve){return function(be){var le=[],Ze=-1,ie=0,Pe=xe.length,Ae,Ee,Oe;for(be instanceof Date||(be=new Date(+be));++Ze<Pe;)xe.charCodeAt(Ze)===37&&(le.push(xe.slice(ie,Ze)),(Ee=mE[Ae=xe.charAt(++Ze)])!=null?Ae=xe.charAt(++Ze):Ee=Ae==="e"?" ":"0",(Oe=ve[Ae])&&(Ae=Oe(be,Ee)),le.push(Ae),ie=Ze+1);return le.push(xe.slice(ie,Ze)),le.join("")}}function S(xe,ve){return function(be){var le=Vu(1900,void 0,1),Ze=b(le,xe,be+="",0),ie,Pe;if(Ze!=be.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(ve&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(ie=cv(Vu(le.y,0,1)),Pe=ie.getUTCDay(),ie=Pe>4||Pe===0?Lm.ceil(ie):Lm(ie),ie=N0.offset(ie,(le.V-1)*7),le.y=ie.getUTCFullYear(),le.m=ie.getUTCMonth(),le.d=ie.getUTCDate()+(le.w+6)%7):(ie=lv(Vu(le.y,0,1)),Pe=ie.getDay(),ie=Pe>4||Pe===0?$m.ceil(ie):$m(ie),ie=rh.offset(ie,(le.V-1)*7),le.y=ie.getFullYear(),le.m=ie.getMonth(),le.d=ie.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Pe="Z"in le?cv(Vu(le.y,0,1)).getUTCDay():lv(Vu(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Pe+5)%7:le.w+le.U*7-(Pe+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,cv(le)):lv(le)}}function b(xe,ve,be,le){for(var Ze=0,ie=ve.length,Pe=be.length,Ae,Ee;Ze<ie;){if(le>=Pe)return-1;if(Ae=ve.charCodeAt(Ze++),Ae===37){if(Ae=ve.charAt(Ze++),Ee=N[Ae in mE?ve.charAt(Ze++):Ae],!Ee||(le=Ee(xe,be,le))<0)return-1}else if(Ae!=be.charCodeAt(le++))return-1}return le}function A(xe,ve,be){var le=u.exec(ve.slice(be));return le?(xe.p=d.get(le[0].toLowerCase()),be+le[0].length):-1}function T(xe,ve,be){var le=m.exec(ve.slice(be));return le?(xe.w=v.get(le[0].toLowerCase()),be+le[0].length):-1}function I(xe,ve,be){var le=f.exec(ve.slice(be));return le?(xe.w=p.get(le[0].toLowerCase()),be+le[0].length):-1}function O(xe,ve,be){var le=y.exec(ve.slice(be));return le?(xe.m=g.get(le[0].toLowerCase()),be+le[0].length):-1}function R(xe,ve,be){var le=x.exec(ve.slice(be));return le?(xe.m=_.get(le[0].toLowerCase()),be+le[0].length):-1}function G(xe,ve,be){return b(xe,e,ve,be)}function U(xe,ve,be){return b(xe,r,ve,be)}function Q(xe,ve,be){return b(xe,n,ve,be)}function te(xe){return o[xe.getDay()]}function K(xe){return s[xe.getDay()]}function X(xe){return c[xe.getMonth()]}function se(xe){return l[xe.getMonth()]}function Z(xe){return a[+(xe.getHours()>=12)]}function F(xe){return 1+~~(xe.getMonth()/3)}function de(xe){return o[xe.getUTCDay()]}function me(xe){return s[xe.getUTCDay()]}function Ge(xe){return c[xe.getUTCMonth()]}function Me(xe){return l[xe.getUTCMonth()]}function ot(xe){return a[+(xe.getUTCHours()>=12)]}function Be(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var ve=k(xe+="",w);return ve.toString=function(){return xe},ve},parse:function(xe){var ve=S(xe+="",!1);return ve.toString=function(){return xe},ve},utcFormat:function(xe){var ve=k(xe+="",E);return ve.toString=function(){return xe},ve},utcParse:function(xe){var ve=S(xe+="",!0);return ve.toString=function(){return xe},ve}}}var mE={"-":"",_:" ",0:"0"},Zr=/^\s*\d+/,kne=/^%/,Ene=/[\\^$*+?|[\]().{}]/g;function _t(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function Tne(t){return t.replace(Ene,"\\$&")}function Fu(t){return new RegExp("^(?:"+t.map(Tne).join("|")+")","i")}function Uu(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Cne(t,e,r){var n=Zr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Pne(t,e,r){var n=Zr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Ine(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function One(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Dne(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function gE(t,e,r){var n=Zr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function xE(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Rne(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Mne(t,e,r){var n=Zr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function $ne(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function vE(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Lne(t,e,r){var n=Zr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function bE(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Vne(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Fne(t,e,r){var n=Zr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Une(t,e,r){var n=Zr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Bne(t,e,r){var n=Zr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function zne(t,e,r){var n=kne.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Wne(t,e,r){var n=Zr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function qne(t,e,r){var n=Zr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function yE(t,e){return _t(t.getDate(),e,2)}function Hne(t,e){return _t(t.getHours(),e,2)}function Gne(t,e){return _t(t.getHours()%12||12,e,2)}function Kne(t,e){return _t(1+rh.count(zs(t),t),e,3)}function sM(t,e){return _t(t.getMilliseconds(),e,3)}function Yne(t,e){return sM(t,e)+"000"}function Xne(t,e){return _t(t.getMonth()+1,e,2)}function Qne(t,e){return _t(t.getMinutes(),e,2)}function Jne(t,e){return _t(t.getSeconds(),e,2)}function Zne(t){var e=t.getDay();return e===0?7:e}function eae(t,e){return _t(j0.count(zs(t)-1,t),e,2)}function iM(t){var e=t.getDay();return e>=4||e===0?Ec(t):Ec.ceil(t)}function tae(t,e){return t=iM(t),_t(Ec.count(zs(t),t)+(zs(t).getDay()===4),e,2)}function rae(t){return t.getDay()}function nae(t,e){return _t($m.count(zs(t)-1,t),e,2)}function aae(t,e){return _t(t.getFullYear()%100,e,2)}function sae(t,e){return t=iM(t),_t(t.getFullYear()%100,e,2)}function iae(t,e){return _t(t.getFullYear()%1e4,e,4)}function oae(t,e){var r=t.getDay();return t=r>=4||r===0?Ec(t):Ec.ceil(t),_t(t.getFullYear()%1e4,e,4)}function lae(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+_t(e/60|0,"0",2)+_t(e%60,"0",2)}function wE(t,e){return _t(t.getUTCDate(),e,2)}function cae(t,e){return _t(t.getUTCHours(),e,2)}function uae(t,e){return _t(t.getUTCHours()%12||12,e,2)}function dae(t,e){return _t(1+N0.count(Ws(t),t),e,3)}function oM(t,e){return _t(t.getUTCMilliseconds(),e,3)}function fae(t,e){return oM(t,e)+"000"}function hae(t,e){return _t(t.getUTCMonth()+1,e,2)}function pae(t,e){return _t(t.getUTCMinutes(),e,2)}function mae(t,e){return _t(t.getUTCSeconds(),e,2)}function gae(t){var e=t.getUTCDay();return e===0?7:e}function xae(t,e){return _t(S0.count(Ws(t)-1,t),e,2)}function lM(t){var e=t.getUTCDay();return e>=4||e===0?Tc(t):Tc.ceil(t)}function vae(t,e){return t=lM(t),_t(Tc.count(Ws(t),t)+(Ws(t).getUTCDay()===4),e,2)}function bae(t){return t.getUTCDay()}function yae(t,e){return _t(Lm.count(Ws(t)-1,t),e,2)}function wae(t,e){return _t(t.getUTCFullYear()%100,e,2)}function _ae(t,e){return t=lM(t),_t(t.getUTCFullYear()%100,e,2)}function Nae(t,e){return _t(t.getUTCFullYear()%1e4,e,4)}function jae(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Tc(t):Tc.ceil(t),_t(t.getUTCFullYear()%1e4,e,4)}function Sae(){return"+0000"}function _E(){return"%"}function NE(t){return+t}function jE(t){return Math.floor(+t/1e3)}var vl,cM,uM;Aae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Aae(t){return vl=Ane(t),cM=vl.format,vl.parse,uM=vl.utcFormat,vl.utcParse,vl}function kae(t){return new Date(t)}function Eae(t){return t instanceof Date?+t:+new Date(+t)}function q_(t,e,r,n,a,s,o,l,c,u){var d=P_(),f=d.invert,p=d.domain,m=u(".%L"),v=u(":%S"),x=u("%I:%M"),_=u("%I %p"),y=u("%a %d"),g=u("%b %d"),w=u("%B"),E=u("%Y");function N(k){return(c(k)<k?m:l(k)<k?v:o(k)<k?x:s(k)<k?_:n(k)<k?a(k)<k?y:g:r(k)<k?w:E)(k)}return d.invert=function(k){return new Date(f(k))},d.domain=function(k){return arguments.length?p(Array.from(k,Eae)):p().map(kae)},d.ticks=function(k){var S=p();return t(S[0],S[S.length-1],k??10)},d.tickFormat=function(k,S){return S==null?N:u(S)},d.nice=function(k){var S=p();return(!k||typeof k.range!="function")&&(k=e(S[0],S[S.length-1],k??10)),k?p(XR(S,k)):d},d.copy=function(){return th(d,q_(t,e,r,n,a,s,o,l,c,u))},d}function Tae(){return ba.apply(q_(jne,Sne,zs,z_,j0,rh,U_,V_,Eo,cM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cae(){return ba.apply(q_(_ne,Nne,Ws,W_,S0,N0,B_,F_,Eo,uM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function A0(){var t=0,e=1,r,n,a,s,o=An,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(s(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(p){var m,v;return arguments.length?([m,v]=p,o=f(m,v),u):[o(0),o(1)]}}return u.range=d(du),u.rangeRound=d(C_),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(t),n=f(e),a=r===n?0:1/(n-r),u}}function ao(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function dM(){var t=no(A0()(An));return t.copy=function(){return ao(t,dM())},Xs.apply(t,arguments)}function fM(){var t=D_(A0()).domain([1,10]);return t.copy=function(){return ao(t,fM()).base(t.base())},Xs.apply(t,arguments)}function hM(){var t=R_(A0());return t.copy=function(){return ao(t,hM()).constant(t.constant())},Xs.apply(t,arguments)}function H_(){var t=M_(A0());return t.copy=function(){return ao(t,H_()).exponent(t.exponent())},Xs.apply(t,arguments)}function Pae(){return H_.apply(null,arguments).exponent(.5)}function pM(){var t=[],e=An;function r(n){if(n!=null&&!isNaN(n=+n))return e((Zf(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Fi),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>xre(t,s/n))},r.copy=function(){return pM(e).domain(t)},Xs.apply(r,arguments)}function k0(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,u=An,d,f=!1,p;function m(x){return isNaN(x=+x)?p:(x=.5+((x=+d(x))-s)*(n*x<n*s?l:c),u(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([t,e,r]=x,a=d(t=+t),s=d(e=+e),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m):[t,e,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(u=x,m):u};function v(x){return function(_){var y,g,w;return arguments.length?([y,g,w]=_,u=zre(x,[y,g,w]),m):[u(0),u(.5),u(1)]}}return m.range=v(du),m.rangeRound=v(C_),m.unknown=function(x){return arguments.length?(p=x,m):p},function(x){return d=x,a=x(t),s=x(e),o=x(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m}}function mM(){var t=no(k0()(An));return t.copy=function(){return ao(t,mM())},Xs.apply(t,arguments)}function gM(){var t=D_(k0()).domain([.1,1,10]);return t.copy=function(){return ao(t,gM()).base(t.base())},Xs.apply(t,arguments)}function xM(){var t=R_(k0());return t.copy=function(){return ao(t,xM()).constant(t.constant())},Xs.apply(t,arguments)}function G_(){var t=M_(k0());return t.copy=function(){return ao(t,G_()).exponent(t.exponent())},Xs.apply(t,arguments)}function Iae(){return G_.apply(null,arguments).exponent(.5)}const SE=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rf,scaleDiverging:mM,scaleDivergingLog:gM,scaleDivergingPow:G_,scaleDivergingSqrt:Iae,scaleDivergingSymlog:xM,scaleIdentity:YR,scaleImplicit:vy,scaleLinear:Rm,scaleLog:QR,scaleOrdinal:k_,scalePoint:vd,scalePow:$_,scaleQuantile:eM,scaleQuantize:tM,scaleRadial:ZR,scaleSequential:dM,scaleSequentialLog:fM,scaleSequentialPow:H_,scaleSequentialQuantile:pM,scaleSequentialSqrt:Pae,scaleSequentialSymlog:hM,scaleSqrt:fne,scaleSymlog:JR,scaleThreshold:rM,scaleTime:Tae,scaleUtc:Cae,tickFormat:KR},Symbol.toStringTag,{value:"Module"}));var Oae=ru;function Dae(t,e,r){for(var n=-1,a=t.length;++n<a;){var s=t[n],o=e(s);if(o!=null&&(l===void 0?o===o&&!Oae(o):r(o,l)))var l=o,c=s}return c}var E0=Dae;function Rae(t,e){return t>e}var vM=Rae,Mae=E0,$ae=vM,Lae=cu;function Vae(t){return t&&t.length?Mae(t,Lae,$ae):void 0}var Fae=Vae;const T0=Tt(Fae);function Uae(t,e){return t<e}var bM=Uae,Bae=E0,zae=bM,Wae=cu;function qae(t){return t&&t.length?Bae(t,Wae,zae):void 0}var Hae=qae;const C0=Tt(Hae);var Gae=o_,Kae=gs,Yae=ER,Xae=Bn;function Qae(t,e){var r=Xae(t)?Gae:Yae;return r(t,Kae(e))}var Jae=Qae,Zae=AR,ese=Jae;function tse(t,e){return Zae(ese(t,e),1)}var rse=tse;const nse=Tt(rse);var ase=__;function sse(t,e){return ase(t,e)}var ise=sse;const P0=Tt(ise);var fu=1e9,ose={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Y_,Qt=!0,xa="[DecimalError] ",$o=xa+"Invalid argument: ",K_=xa+"Exponent out of range: ",hu=Math.floor,bo=Math.pow,lse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Kn,Kr=1e7,Ht=7,yM=9007199254740991,Vm=hu(yM/Ht),Re={};Re.absoluteValue=Re.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Re.comparedTo=Re.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Re.decimalPlaces=Re.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ht;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Re.dividedBy=Re.div=function(t){return Ps(this,new this.constructor(t))};Re.dividedToIntegerBy=Re.idiv=function(t){var e=this,r=e.constructor;return Rt(Ps(e,new r(t),0,1),r.precision)};Re.equals=Re.eq=function(t){return!this.cmp(t)};Re.exponent=function(){return kr(this)};Re.greaterThan=Re.gt=function(t){return this.cmp(t)>0};Re.greaterThanOrEqualTo=Re.gte=function(t){return this.cmp(t)>=0};Re.isInteger=Re.isint=function(){return this.e>this.d.length-2};Re.isNegative=Re.isneg=function(){return this.s<0};Re.isPositive=Re.ispos=function(){return this.s>0};Re.isZero=function(){return this.s===0};Re.lessThan=Re.lt=function(t){return this.cmp(t)<0};Re.lessThanOrEqualTo=Re.lte=function(t){return this.cmp(t)<1};Re.logarithm=Re.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Kn))throw Error(xa+"NaN");if(r.s<1)throw Error(xa+(r.s?"NaN":"-Infinity"));return r.eq(Kn)?new n(0):(Qt=!1,e=Ps(lf(r,s),lf(t,s),s),Qt=!0,Rt(e,a))};Re.minus=Re.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?NM(e,t):wM(e,(t.s=-t.s,t))};Re.modulo=Re.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(xa+"NaN");return r.s?(Qt=!1,e=Ps(r,t,0,1).times(t),Qt=!0,r.minus(e)):Rt(new n(r),a)};Re.naturalExponential=Re.exp=function(){return _M(this)};Re.naturalLogarithm=Re.ln=function(){return lf(this)};Re.negated=Re.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Re.plus=Re.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?wM(e,t):NM(e,(t.s=-t.s,t))};Re.precision=Re.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error($o+t);if(e=kr(a)+1,n=a.d.length-1,r=n*Ht+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Re.squareRoot=Re.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(xa+"NaN")}for(t=kr(l),Qt=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=rs(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=hu((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(Ps(l,s,o+2)).times(.5),rs(s.d).slice(0,o)===(e=rs(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Rt(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Qt=!0,Rt(n,r)};Re.times=Re.mul=function(t){var e,r,n,a,s,o,l,c,u,d=this,f=d.constructor,p=d.d,m=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,c=p.length,u=m.length,c<u&&(s=p,p=m,m=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+m[n]*p[a-n-1]+e,s[a--]=l%Kr|0,e=l/Kr|0;s[a]=(s[a]+e)%Kr|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Qt?Rt(t,f.precision):t};Re.toDecimalPlaces=Re.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(hs(t,0,fu),e===void 0?e=n.rounding:hs(e,0,8),Rt(r,t+kr(r)+1,e))};Re.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Jo(n,!0):(hs(t,0,fu),e===void 0?e=a.rounding:hs(e,0,8),n=Rt(new a(n),t+1,e),r=Jo(n,!0,t+1)),r};Re.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Jo(a):(hs(t,0,fu),e===void 0?e=s.rounding:hs(e,0,8),n=Rt(new s(a),t+kr(a)+1,e),r=Jo(n.abs(),!1,t+kr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Re.toInteger=Re.toint=function(){var t=this,e=t.constructor;return Rt(new e(t),kr(t)+1,e.rounding)};Re.toNumber=function(){return+this};Re.toPower=Re.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Kn);if(l=new c(l),!l.s){if(t.s<1)throw Error(xa+"Infinity");return l}if(l.eq(Kn))return l;if(n=c.precision,t.eq(Kn))return Rt(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=yM){for(a=new c(Kn),e=Math.ceil(n/Ht+4),Qt=!1;r%2&&(a=a.times(l),kE(a.d,e)),r=hu(r/2),r!==0;)l=l.times(l),kE(l.d,e);return Qt=!0,t.s<0?new c(Kn).div(a):Rt(a,n)}}else if(s<0)throw Error(xa+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Qt=!1,a=t.times(lf(l,n+u)),Qt=!0,a=_M(a),a.s=s,a};Re.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=kr(a),n=Jo(a,r<=s.toExpNeg||r>=s.toExpPos)):(hs(t,1,fu),e===void 0?e=s.rounding:hs(e,0,8),a=Rt(new s(a),t,e),r=kr(a),n=Jo(a,t<=r||r<=s.toExpNeg,t)),n};Re.toSignificantDigits=Re.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(hs(t,1,fu),e===void 0?e=n.rounding:hs(e,0,8)),Rt(new n(r),t,e)};Re.toString=Re.valueOf=Re.val=Re.toJSON=Re[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=kr(t),r=t.constructor;return Jo(t,e<=r.toExpNeg||e>=r.toExpPos)};function wM(t,e){var r,n,a,s,o,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Qt?Rt(e,f):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Ht),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Kr|0,c[s]%=Kr;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Qt?Rt(e,f):e}function hs(t,e,r){if(t!==~~t||t<e||t>r)throw Error($o+t)}function rs(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=Ht-n.length,r&&(s+=pi(r)),s+=n;o=t[e],n=o+"",r=Ht-n.length,r&&(s+=pi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Ps=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Kr|0,o=s/Kr|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Kr+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,f,p,m,v,x,_,y,g,w,E,N,k,S,b,A=n.constructor,T=n.s==a.s?1:-1,I=n.d,O=a.d;if(!n.s)return new A(n);if(!a.s)throw Error(xa+"Division by zero");for(c=n.e-a.e,S=O.length,N=I.length,m=new A(T),v=m.d=[],u=0;O[u]==(I[u]||0);)++u;if(O[u]>(I[u]||0)&&--c,s==null?g=s=A.precision:o?g=s+(kr(n)-kr(a))+1:g=s,g<0)return new A(0);if(g=g/Ht+2|0,u=0,S==1)for(d=0,O=O[0],g++;(u<N||d)&&g--;u++)w=d*Kr+(I[u]||0),v[u]=w/O|0,d=w%O|0;else{for(d=Kr/(O[0]+1)|0,d>1&&(O=t(O,d),I=t(I,d),S=O.length,N=I.length),E=S,x=I.slice(0,S),_=x.length;_<S;)x[_++]=0;b=O.slice(),b.unshift(0),k=O[0],O[1]>=Kr/2&&++k;do d=0,l=e(O,x,S,_),l<0?(y=x[0],S!=_&&(y=y*Kr+(x[1]||0)),d=y/k|0,d>1?(d>=Kr&&(d=Kr-1),f=t(O,d),p=f.length,_=x.length,l=e(f,x,p,_),l==1&&(d--,r(f,S<p?b:O,p))):(d==0&&(l=d=1),f=O.slice()),p=f.length,p<_&&f.unshift(0),r(x,f,_),l==-1&&(_=x.length,l=e(O,x,S,_),l<1&&(d++,r(x,S<_?b:O,_))),_=x.length):l===0&&(d++,x=[0]),v[u++]=d,l&&x[0]?x[_++]=I[E]||0:(x=[I[E]],_=1);while((E++<N||x[0]!==void 0)&&g--)}return v[0]||v.shift(),m.e=c,Rt(m,o?s+kr(m)+1:s)}}();function _M(t,e){var r,n,a,s,o,l,c=0,u=0,d=t.constructor,f=d.precision;if(kr(t)>16)throw Error(K_+kr(t));if(!t.s)return new d(Kn);for(Qt=!1,l=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(bo(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Kn),d.precision=l;;){if(a=Rt(a.times(t),l),r=r.times(++c),o=s.plus(Ps(a,r,l)),rs(o.d).slice(0,l)===rs(s.d).slice(0,l)){for(;u--;)s=Rt(s.times(s),l);return d.precision=f,e==null?(Qt=!0,Rt(s,f)):s}s=o}}function kr(t){for(var e=t.e*Ht,r=t.d[0];r>=10;r/=10)e++;return e}function uv(t,e,r){if(e>t.LN10.sd())throw Qt=!0,r&&(t.precision=r),Error(xa+"LN10 precision limit exceeded");return Rt(new t(t.LN10),e)}function pi(t){for(var e="";t--;)e+="0";return e}function lf(t,e){var r,n,a,s,o,l,c,u,d,f=1,p=10,m=t,v=m.d,x=m.constructor,_=x.precision;if(m.s<1)throw Error(xa+(m.s?"NaN":"-Infinity"));if(m.eq(Kn))return new x(0);if(e==null?(Qt=!1,u=_):u=e,m.eq(10))return e==null&&(Qt=!0),uv(x,u);if(u+=p,x.precision=u,r=rs(v),n=r.charAt(0),s=kr(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=rs(m.d),n=r.charAt(0),f++;s=kr(m),n>1?(m=new x("0."+r),s++):m=new x(n+"."+r.slice(1))}else return c=uv(x,u+2,_).times(s+""),m=lf(new x(n+"."+r.slice(1)),u-p).plus(c),x.precision=_,e==null?(Qt=!0,Rt(m,_)):m;for(l=o=m=Ps(m.minus(Kn),m.plus(Kn),u),d=Rt(m.times(m),u),a=3;;){if(o=Rt(o.times(d),u),c=l.plus(Ps(o,new x(a),u)),rs(c.d).slice(0,u)===rs(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(uv(x,u+2,_).times(s+""))),l=Ps(l,new x(f),u),x.precision=_,e==null?(Qt=!0,Rt(l,_)):l;l=c,a+=2}}function AE(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=hu(r/Ht),t.d=[],n=(r+1)%Ht,r<0&&(n+=Ht),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Ht;n<a;)t.d.push(+e.slice(n,n+=Ht));e=e.slice(n),n=Ht-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Qt&&(t.e>Vm||t.e<-Vm))throw Error(K_+r)}else t.s=0,t.e=0,t.d=[0];return t}function Rt(t,e,r){var n,a,s,o,l,c,u,d,f=t.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Ht,a=e,u=f[d=0];else{if(d=Math.ceil((n+1)/Ht),s=f.length,d>=s)return t;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=Ht,a=n-Ht+o}if(r!==void 0&&(s=bo(10,o-a-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/bo(10,o-a):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return c?(s=kr(t),f.length=1,e=e-s-1,f[0]=bo(10,(Ht-e%Ht)%Ht),t.e=hu(-e/Ht)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=bo(10,Ht-n),f[d]=a>0?(u/bo(10,o-a)%bo(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Kr&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=Kr)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Qt&&(t.e>Vm||t.e<-Vm))throw Error(K_+kr(t));return t}function NM(t,e){var r,n,a,s,o,l,c,u,d,f,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),Qt?Rt(e,m):e;if(c=t.d,f=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/Ht),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,e.s=-e.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Kr-1;--c[s],c[a]+=Kr}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Qt?Rt(e,m):e):new p(0)}function Jo(t,e,r){var n,a=kr(t),s=rs(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+pi(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+pi(-a-1)+s,r&&(n=r-o)>0&&(s+=pi(n))):a>=o?(s+=pi(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+pi(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=pi(n))),t.s<0?"-"+s:s}function kE(t,e){if(t.length>e)return t.length=e,!0}function jM(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error($o+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return AE(o,s.toString())}else if(typeof s!="string")throw Error($o+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,lse.test(s))AE(o,s);else throw Error($o+s)}if(a.prototype=Re,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=jM,a.config=a.set=cse,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function cse(t){if(!t||typeof t!="object")throw Error(xa+"Object expected");var e,r,n,a=["precision",1,fu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(hu(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error($o+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error($o+r+": "+n);return this}var Y_=jM(ose);Kn=new Y_(1);const Pt=Y_;function use(t){return pse(t)||hse(t)||fse(t)||dse()}function dse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fse(t,e){if(t){if(typeof t=="string")return _y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _y(t,e)}}function hse(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function pse(t){if(Array.isArray(t))return _y(t)}function _y(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var mse=function(e){return e},SM={},AM=function(e){return e===SM},EE=function(e){return function r(){return arguments.length===0||arguments.length===1&&AM(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},gse=function t(e,r){return e===1?r:EE(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==SM}).length;return o>=e?r.apply(void 0,a):t(e-o,EE(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return AM(f)?c.shift():f});return r.apply(void 0,use(d).concat(c))}))})},I0=function(e){return gse(e.length,e)},Ny=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},xse=I0(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),vse=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return mse;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},jy=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},kM=function(e){var r=null,n=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r&&s.every(function(l,c){return l===r[c]})||(r=s,n=e.apply(void 0,s)),n}};function bse(t){var e;return t===0?e=1:e=Math.floor(new Pt(t).abs().log(10).toNumber())+1,e}function yse(t,e,r){for(var n=new Pt(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var wse=I0(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),_se=I0(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Nse=I0(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const O0={rangeStep:yse,getDigitCount:bse,interpolateNumber:wse,uninterpolateNumber:_se,uninterpolateTruncation:Nse};function Sy(t){return Ase(t)||Sse(t)||EM(t)||jse()}function jse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sse(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Ase(t){if(Array.isArray(t))return Ay(t)}function cf(t,e){return Tse(t)||Ese(t,e)||EM(t,e)||kse()}function kse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EM(t,e){if(t){if(typeof t=="string")return Ay(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ay(t,e)}}function Ay(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ese(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){a=!0,s=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw s}}return r}}function Tse(t){if(Array.isArray(t))return t}function TM(t){var e=cf(t,2),r=e[0],n=e[1],a=r,s=n;return r>n&&(a=n,s=r),[a,s]}function CM(t,e,r){if(t.lte(0))return new Pt(0);var n=O0.getDigitCount(t.toNumber()),a=new Pt(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new Pt(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?c:new Pt(Math.ceil(c))}function Cse(t,e,r){var n=1,a=new Pt(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Pt(10).pow(O0.getDigitCount(t)-1),a=new Pt(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Pt(Math.floor(t)))}else t===0?a=new Pt(Math.floor((e-1)/2)):r||(a=new Pt(Math.floor(t)));var o=Math.floor((e-1)/2),l=vse(xse(function(c){return a.add(new Pt(c-o).mul(n)).toNumber()}),Ny);return l(0,e)}function PM(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Pt(0),tickMin:new Pt(0),tickMax:new Pt(0)};var s=CM(new Pt(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new Pt(0):(o=new Pt(t).add(e).div(2),o=o.sub(new Pt(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new Pt(e).sub(o).div(s).toNumber()),u=l+c+1;return u>r?PM(t,e,r,n,a+1):(u<r&&(c=e>0?c+(r-u):c,l=e>0?l:l+(r-u)),{step:s,tickMin:o.sub(new Pt(l).mul(s)),tickMax:o.add(new Pt(c).mul(s))})}function Pse(t){var e=cf(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=TM([r,n]),c=cf(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Sy(Ny(0,a-1).map(function(){return 1/0}))):[].concat(Sy(Ny(0,a-1).map(function(){return-1/0})),[d]);return r>n?jy(f):f}if(u===d)return Cse(u,a,s);var p=PM(u,d,o,s),m=p.step,v=p.tickMin,x=p.tickMax,_=O0.rangeStep(v,x.add(new Pt(.1).mul(m)),m);return r>n?jy(_):_}function Ise(t,e){var r=cf(t,2),n=r[0],a=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=TM([n,a]),l=cf(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(e,2),f=CM(new Pt(u).sub(c).div(d-1),s,0),p=[].concat(Sy(O0.rangeStep(new Pt(c),new Pt(u).sub(new Pt(.99).mul(f)),f)),[u]);return n>a?jy(p):p}var Ose=kM(Pse),Dse=kM(Ise),Rse="Invariant failed";function Zo(t,e){throw new Error(Rse)}var Mse=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function Fm(){return Fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fm.apply(this,arguments)}function $se(t,e){return Use(t)||Fse(t,e)||Vse(t,e)||Lse()}function Lse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vse(t,e){if(t){if(typeof t=="string")return TE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TE(t,e)}}function TE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fse(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Use(t){if(Array.isArray(t))return t}function Bse(t,e){if(t==null)return{};var r=zse(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zse(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Wse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DM(n.key),n)}}function Hse(t,e,r){return e&&qse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gse(t,e,r){return e=Um(e),Kse(t,IM()?Reflect.construct(e,r||[],Um(t).constructor):e.apply(t,r))}function Kse(t,e){if(e&&(Cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yse(t)}function Yse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IM=function(){return!!t})()}function Um(t){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Um(t)}function Xse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ky(t,e)}function ky(t,e){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ky(t,e)}function OM(t,e,r){return e=DM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DM(t){var e=Qse(t,"string");return Cc(e)=="symbol"?e:e+""}function Qse(t,e){if(Cc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var D0=function(t){function e(){return Wse(this,e),Gse(this,e,arguments)}return Xse(e,t),Hse(e,[{key:"render",value:function(){var n=this.props,a=n.offset,s=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,p=Bse(n,Mse),m=Je(p,!1);this.props.direction==="x"&&d.type!=="number"&&Zo();var v=c.map(function(x){var _=u(x,l),y=_.x,g=_.y,w=_.value,E=_.errorVal;if(!E)return null;var N=[],k,S;if(Array.isArray(E)){var b=$se(E,2);k=b[0],S=b[1]}else k=S=E;if(s==="vertical"){var A=d.scale,T=g+a,I=T+o,O=T-o,R=A(w-k),G=A(w+S);N.push({x1:G,y1:I,x2:G,y2:O}),N.push({x1:R,y1:T,x2:G,y2:T}),N.push({x1:R,y1:I,x2:R,y2:O})}else if(s==="horizontal"){var U=f.scale,Q=y+a,te=Q-o,K=Q+o,X=U(w-k),se=U(w+S);N.push({x1:te,y1:se,x2:K,y2:se}),N.push({x1:Q,y1:X,x2:Q,y2:se}),N.push({x1:te,y1:X,x2:K,y2:X})}return H.createElement(kt,Fm({className:"recharts-errorBar",key:"bar-".concat(N.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},m),N.map(function(Z){return H.createElement("line",Fm({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return H.createElement(kt,{className:"recharts-errorBars"},v)}}])}(H.Component);OM(D0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});OM(D0,"displayName","ErrorBar");function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function CE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function uo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CE(Object(r),!0).forEach(function(n){Jse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jse(t,e,r){return e=Zse(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zse(t){var e=eie(t,"string");return uf(e)=="symbol"?e:e+""}function eie(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RM=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,s=e.legendContent,o=Gn(r,rc);if(!o)return null;var l=rc.defaultProps,c=l!==void 0?uo(uo({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(n||[]).reduce(function(d,f){var p=f.item,m=f.props,v=m.sectors||m.data||[];return d.concat(v.map(function(x){return{type:o.props.iconType||p.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(n||[]).map(function(d){var f=d.item,p=f.type.defaultProps,m=p!==void 0?uo(uo({},p),f.props):{},v=m.dataKey,x=m.name,_=m.legendType,y=m.hide;return{inactive:y,dataKey:v,type:c.iconType||_||"square",color:X_(f),value:x||v,payload:m}}),uo(uo(uo({},c),rc.getWithHeight(o,a)),{},{payload:u,item:o})};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function PE(t){return aie(t)||nie(t)||rie(t)||tie()}function tie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rie(t,e){if(t){if(typeof t=="string")return Ey(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ey(t,e)}}function nie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aie(t){if(Array.isArray(t))return Ey(t)}function Ey(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function IE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IE(Object(r),!0).forEach(function(n){ac(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ac(t,e,r){return e=sie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sie(t){var e=iie(t,"string");return df(e)=="symbol"?e:e+""}function iie(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gn(t,e,r){return dt(t)||dt(e)?r:Mr(e)?Jn(t,e,r):rt(e)?e(t):r}function bd(t,e,r,n){var a=nse(t,function(l){return gn(l,e)});if(r==="number"){var s=a.filter(function(l){return ye(l)||parseFloat(l)});return s.length?[C0(s),T0(s)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!dt(l)}):a;return o.map(function(l){return Mr(l)||l instanceof Date?l:""})}var oie=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,p=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(jn(f-d)!==jn(p-f)){var v=[];if(jn(p-f)===jn(c[1]-c[0])){m=p;var x=f+c[1]-c[0];v[0]=Math.min(x,(x+d)/2),v[1]=Math.max(x,(x+d)/2)}else{m=d;var _=p+c[1]-c[0];v[0]=Math.min(f,(_+f)/2),v[1]=Math.max(f,(_+f)/2)}var y=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(e>y[0]&&e<=y[1]||e>=v[0]&&e<=v[1]){o=a[u].index;break}}else{var g=Math.min(d,p),w=Math.max(d,p);if(e>(g+f)/2&&e<=(w+f)/2){o=a[u].index;break}}}else for(var E=0;E<l;E++)if(E===0&&e<=(n[E].coordinate+n[E+1].coordinate)/2||E>0&&E<l-1&&e>(n[E].coordinate+n[E-1].coordinate)/2&&e<=(n[E].coordinate+n[E+1].coordinate)/2||E===l-1&&e>(n[E].coordinate+n[E-1].coordinate)/2){o=n[E].index;break}return o},X_=function(e){var r,n=e,a=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},lie=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),p=0,m=f.length;p<m;p++){var v=d[f[p]],x=v.items,_=v.cateAxisId,y=x.filter(function(S){return Cs(S.type).indexOf("Bar")>=0});if(y&&y.length){var g=y[0].type.defaultProps,w=g!==void 0?fr(fr({},g),y[0].props):y[0].props,E=w.barSize,N=w[_];o[N]||(o[N]=[]);var k=dt(E)?r:E;o[N].push({item:y[0],stackList:y.slice(1),barSize:dt(k)?void 0:Sn(k,n,0)})}}return o},cie=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var u=Sn(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=a/c,v=o.reduce(function(E,N){return E+N.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&m>0&&(p=!0,m*=.9,v=c*m);var x=(a-v)/2>>0,_={offset:x-u,size:0};d=o.reduce(function(E,N){var k={item:N.item,position:{offset:_.offset+_.size+u,size:p?m:N.barSize}},S=[].concat(PE(E),[k]);return _=S[S.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(b){S.push({item:b,position:_})}),S},f)}else{var y=Sn(n,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var g=(a-2*y-(c-1)*u)/c;g>1&&(g>>=0);var w=l===+l?Math.min(g,l):g;d=o.reduce(function(E,N,k){var S=[].concat(PE(E),[{item:N.item,position:{offset:y+(g+u)*k+(g-w)/2,size:w}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(b){S.push({item:b,position:S[S.length-1].position})}),S},f)}return d},uie=function(e,r,n,a){var s=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=RM({children:s,legendWidth:c});if(u){var d=a||{},f=d.width,p=d.height,m=u.align,v=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&v==="middle")&&m!=="center"&&ye(e[m]))return fr(fr({},e),{},ac({},m,e[m]+(f||0)));if((x==="horizontal"||x==="vertical"&&m==="center")&&v!=="middle"&&ye(e[v]))return fr(fr({},e),{},ac({},v,e[v]+(p||0)))}return e},die=function(e,r,n){return dt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},MM=function(e,r,n,a,s){var o=r.props.children,l=pa(o,D0).filter(function(u){return die(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=gn(d,n);if(dt(f))return u;var p=Array.isArray(f)?[C0(f),T0(f)]:[f,f],m=c.reduce(function(v,x){var _=gn(d,x,0),y=p[0]-Math.abs(Array.isArray(_)?_[0]:_),g=p[1]+Math.abs(Array.isArray(_)?_[1]:_);return[Math.min(y,v[0]),Math.max(g,v[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},fie=function(e,r,n,a,s){var o=r.map(function(l){return MM(e,l,n,s,a)}).filter(function(l){return!dt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},$M=function(e,r,n,a,s){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&MM(e,c,u,a)||bd(e,u,n,s)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},LM=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},VM=function(e,r,n,a){if(a)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate});return s||l.push(r),o||l.push(n),l},Es=function(e,r,n){if(!e)return null;var a=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?jn(l[0]-l[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var p=s?s.indexOf(f):f;return{coordinate:a(p)+u,value:f,offset:u}});return d.filter(function(f){return!Xf(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,p){return{coordinate:a(f)+u,value:f,index:p,offset:u}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,p){return{coordinate:a(f)+u,value:s?s[f]:f,index:p,offset:u}})},dv=new WeakMap,Kh=function(e,r){if(typeof r!="function")return e;dv.has(e)||dv.set(e,new WeakMap);var n=dv.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},FM=function(e,r,n){var a=e.scale,s=e.type,o=e.layout,l=e.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:rf(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Rm(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:vd(),realScaleType:"point"}:s==="category"?{scale:rf(),realScaleType:"band"}:{scale:Rm(),realScaleType:"linear"};if(Yo(a)){var c="scale".concat(p0(a));return{scale:(SE[c]||vd)(),realScaleType:SE[c]?c:"point"}}return rt(a)?{scale:a}:{scale:vd(),realScaleType:"point"}},OE=1e-4,UM=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),s=Math.min(a[0],a[1])-OE,o=Math.max(a[0],a[1])+OE,l=e(r[0]),c=e(r[n-1]);(l<s||l>o||c<s||c>o)&&e.domain([r[0],r[n-1]])}},hie=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},pie=function(e,r){if(!r||r.length!==2||!ye(r[0])||!ye(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!ye(e[0])||e[0]<n)&&(s[0]=n),(!ye(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<n&&(s[1]=n),s},mie=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,o=0,l=0;l<r;++l){var c=Xf(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=s,e[l][n][1]=s+c,s=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},gie=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,o=0;o<r;++o){var l=Xf(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=s,e[o][n][1]=s+l,s=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},xie={sign:mie,expand:MH,none:_c,silhouette:$H,wiggle:LH,positive:gie},vie=function(e,r,n){var a=r.map(function(l){return l.props.dataKey}),s=xie[n],o=RH().keys(a).value(function(l,c){return+gn(l,c,0)}).order(Zb).offset(s);return o(e)},bie=function(e,r,n,a,s,o){if(!e)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,p){var m,v=(m=p.type)!==null&&m!==void 0&&m.defaultProps?fr(fr({},p.type.defaultProps),p.props):p.props,x=v.stackId,_=v.hide;if(_)return f;var y=v[n],g=f[y]||{hasStack:!1,stackGroups:{}};if(Mr(x)){var w=g.stackGroups[x]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(p),g.hasStack=!0,g.stackGroups[x]=w}else g.stackGroups[Qf("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[p]};return fr(fr({},f),{},ac({},y,g))},c),d={};return Object.keys(u).reduce(function(f,p){var m=u[p];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(x,_){var y=m.stackGroups[_];return fr(fr({},x),{},ac({},_,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:vie(e,y.items,s)}))},v)}return fr(fr({},f),{},ac({},p,m))},d)},BM=function(e,r){var n=r.realScaleType,a=r.type,s=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=Ose(u,s,l);return e.domain([C0(d),T0(d)]),{niceTicks:d}}if(s&&a==="number"){var f=e.domain(),p=Dse(f,s,l);return{niceTicks:p}}return null},DE=function(e){var r=e.axis,n=e.ticks,a=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=gn(o,r.dataKey,r.domain[l]);return dt(c)?null:r.scale(c)-s/2+a},yie=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return a<=0&&s>=0?0:s<0?s:a}return n[0]},wie=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,s=a.stackId;if(Mr(s)){var o=r[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},_ie=function(e){return e.reduce(function(r,n){return[C0(n.concat([r[0]]).filter(ye)),T0(n.concat([r[1]]).filter(ye))]},[1/0,-1/0])},zM=function(e,r,n){return Object.keys(e).reduce(function(a,s){var o=e[s],l=o.stackedData,c=l.reduce(function(u,d){var f=_ie(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},RE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ME=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ty=function(e,r,n){if(rt(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(ye(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(RE.test(e[0])){var s=+RE.exec(e[0])[1];a[0]=r[0]-s}else rt(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(ye(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(ME.test(e[1])){var o=+ME.exec(e[1])[1];a[1]=r[1]+o}else rt(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Bm=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var s=j_(r,function(f){return f.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},$E=function(e,r,n){return!e||!e.length||P0(e,Jn(n,"type.defaultProps.domain"))?r:e},WM=function(e,r){var n=e.type.defaultProps?fr(fr({},e.type.defaultProps),e.props):e.props,a=n.dataKey,s=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return fr(fr({},Je(e,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:X_(e),value:gn(r,a),type:c,payload:r,chartType:u,hide:d})};function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function LE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LE(Object(r),!0).forEach(function(n){qM(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qM(t,e,r){return e=Nie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nie(t){var e=jie(t,"string");return ff(e)=="symbol"?e:e+""}function jie(t,e){if(ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sie(t,e){return Tie(t)||Eie(t,e)||kie(t,e)||Aie()}function Aie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kie(t,e){if(t){if(typeof t=="string")return VE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VE(t,e)}}function VE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Eie(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Tie(t){if(Array.isArray(t))return t}var zm=Math.PI/180,Cie=function(e){return e*180/Math.PI},Ut=function(e,r,n,a){return{x:e+Math.cos(-zm*a)*n,y:r+Math.sin(-zm*a)*n}},HM=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Pie=function(e,r,n,a,s){var o=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Sn(e.cx,o,o/2),f=Sn(e.cy,l,l/2),p=HM(o,l,n),m=Sn(e.innerRadius,p,0),v=Sn(e.outerRadius,p,p*.8),x=Object.keys(r);return x.reduce(function(_,y){var g=r[y],w=g.domain,E=g.reversed,N;if(dt(g.range))a==="angleAxis"?N=[c,u]:a==="radiusAxis"&&(N=[m,v]),E&&(N=[N[1],N[0]]);else{N=g.range;var k=N,S=Sie(k,2);c=S[0],u=S[1]}var b=FM(g,s),A=b.realScaleType,T=b.scale;T.domain(w).range(N),UM(T);var I=BM(T,ys(ys({},g),{},{realScaleType:A})),O=ys(ys(ys({},g),I),{},{range:N,radius:v,realScaleType:A,scale:T,cx:d,cy:f,innerRadius:m,outerRadius:v,startAngle:c,endAngle:u});return ys(ys({},_),{},qM({},y,O))},{})},Iie=function(e,r){var n=e.x,a=e.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(a-o,2))},Oie=function(e,r){var n=e.x,a=e.y,s=r.cx,o=r.cy,l=Iie({x:n,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(n-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:Cie(u),angleInRadian:u}},Die=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return{startAngle:r-o*360,endAngle:n-o*360}},Rie=function(e,r){var n=r.startAngle,a=r.endAngle,s=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(s,o);return e+l*360},FE=function(e,r){var n=e.x,a=e.y,s=Oie({x:n,y:a},r),o=s.radius,l=s.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=Die(r),f=d.startAngle,p=d.endAngle,m=l,v;if(f<=p){for(;m>p;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=p}else{for(;m>f;)m-=360;for(;m<p;)m+=360;v=m>=p&&m<=f}return v?ys(ys({},r),{},{radius:o,angle:Rie(m,r)}):null},GM=function(e){return!D.isValidElement(e)&&!rt(e)&&typeof e!="boolean"?e.className:""};function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}var Mie=["offset"];function $ie(t){return Uie(t)||Fie(t)||Vie(t)||Lie()}function Lie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vie(t,e){if(t){if(typeof t=="string")return Cy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cy(t,e)}}function Fie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uie(t){if(Array.isArray(t))return Cy(t)}function Cy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bie(t,e){if(t==null)return{};var r=zie(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zie(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function UE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UE(Object(r),!0).forEach(function(n){Wie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wie(t,e,r){return e=qie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qie(t){var e=Hie(t,"string");return hf(e)=="symbol"?e:e+""}function Hie(t,e){if(hf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pf(){return pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pf.apply(this,arguments)}var Gie=function(e){var r=e.value,n=e.formatter,a=dt(e.children)?r:e.children;return rt(n)?n(a):a},Kie=function(e,r){var n=jn(r-e),a=Math.min(Math.abs(r-e),360);return n*a},Yie=function(e,r,n){var a=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,p=c.outerRadius,m=c.startAngle,v=c.endAngle,x=c.clockWise,_=(f+p)/2,y=Kie(m,v),g=y>=0?1:-1,w,E;a==="insideStart"?(w=m+g*o,E=x):a==="insideEnd"?(w=v-g*o,E=!x):a==="end"&&(w=v+g*o,E=x),E=y<=0?E:!E;var N=Ut(u,d,_,w),k=Ut(u,d,_,w+(E?1:-1)*359),S="M".concat(N.x,",").concat(N.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(E?0:1,`,
    `).concat(k.x,",").concat(k.y),b=dt(e.id)?Qf("recharts-radial-line-"):e.id;return H.createElement("text",pf({},n,{dominantBaseline:"central",className:ut("recharts-radial-bar-label",l)}),H.createElement("defs",null,H.createElement("path",{id:b,d:S})),H.createElement("textPath",{xlinkHref:"#".concat(b)},r))},Xie=function(e){var r=e.viewBox,n=e.offset,a=e.position,s=r,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,p=(d+f)/2;if(a==="outside"){var m=Ut(o,l,u+n,p),v=m.x,x=m.y;return{x:v,y:x,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var _=(c+u)/2,y=Ut(o,l,_,p),g=y.x,w=y.y;return{x:g,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Qie=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,s=e.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,p=f*a,m=f>0?"end":"start",v=f>0?"start":"end",x=u>=0?1:-1,_=x*a,y=x>0?"end":"start",g=x>0?"start":"end";if(s==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return Or(Or({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(s==="bottom"){var E={x:l+u/2,y:c+d+p,textAnchor:"middle",verticalAnchor:v};return Or(Or({},E),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(s==="left"){var N={x:l-_,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return Or(Or({},N),n?{width:Math.max(N.x-n.x,0),height:d}:{})}if(s==="right"){var k={x:l+u+_,y:c+d/2,textAnchor:g,verticalAnchor:"middle"};return Or(Or({},k),n?{width:Math.max(n.x+n.width-k.x,0),height:d}:{})}var S=n?{width:u,height:d}:{};return s==="insideLeft"?Or({x:l+_,y:c+d/2,textAnchor:g,verticalAnchor:"middle"},S):s==="insideRight"?Or({x:l+u-_,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},S):s==="insideTop"?Or({x:l+u/2,y:c+p,textAnchor:"middle",verticalAnchor:v},S):s==="insideBottom"?Or({x:l+u/2,y:c+d-p,textAnchor:"middle",verticalAnchor:m},S):s==="insideTopLeft"?Or({x:l+_,y:c+p,textAnchor:g,verticalAnchor:v},S):s==="insideTopRight"?Or({x:l+u-_,y:c+p,textAnchor:y,verticalAnchor:v},S):s==="insideBottomLeft"?Or({x:l+_,y:c+d-p,textAnchor:g,verticalAnchor:m},S):s==="insideBottomRight"?Or({x:l+u-_,y:c+d-p,textAnchor:y,verticalAnchor:m},S):nu(s)&&(ye(s.x)||Ao(s.x))&&(ye(s.y)||Ao(s.y))?Or({x:l+Sn(s.x,u),y:c+Sn(s.y,d),textAnchor:"end",verticalAnchor:"end"},S):Or({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},Jie=function(e){return"cx"in e&&ye(e.cx)};function Xr(t){var e=t.offset,r=e===void 0?5:e,n=Bie(t,Mie),a=Or({offset:r},n),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,p=a.textBreakAll;if(!s||dt(l)&&dt(c)&&!D.isValidElement(u)&&!rt(u))return null;if(D.isValidElement(u))return D.cloneElement(u,a);var m;if(rt(u)){if(m=D.createElement(u,a),D.isValidElement(m))return m}else m=Gie(a);var v=Jie(s),x=Je(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Yie(a,m,x);var _=v?Xie(a):Qie(a);return H.createElement(Qo,pf({className:ut("recharts-label",f)},x,_,{breakAll:p}),m)}Xr.displayName="Label";var KM=function(e){var r=e.cx,n=e.cy,a=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,p=e.y,m=e.top,v=e.left,x=e.width,_=e.height,y=e.clockWise,g=e.labelViewBox;if(g)return g;if(ye(x)&&ye(_)){if(ye(f)&&ye(p))return{x:f,y:p,width:x,height:_};if(ye(m)&&ye(v))return{x:m,y:v,width:x,height:_}}return ye(f)&&ye(p)?{x:f,y:p,width:0,height:0}:ye(r)&&ye(n)?{cx:r,cy:n,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:e.viewBox?e.viewBox:{}},Zie=function(e,r){return e?e===!0?H.createElement(Xr,{key:"label-implicit",viewBox:r}):Mr(e)?H.createElement(Xr,{key:"label-implicit",viewBox:r,value:e}):D.isValidElement(e)?e.type===Xr?D.cloneElement(e,{key:"label-implicit",viewBox:r}):H.createElement(Xr,{key:"label-implicit",content:e,viewBox:r}):rt(e)?H.createElement(Xr,{key:"label-implicit",content:e,viewBox:r}):nu(e)?H.createElement(Xr,pf({viewBox:r},e,{key:"label-implicit"})):null:null},eoe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=KM(e),o=pa(a,Xr).map(function(c,u){return D.cloneElement(c,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return o;var l=Zie(e.label,r||s);return[l].concat($ie(o))};Xr.parseViewBox=KM;Xr.renderCallByParent=eoe;function toe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var roe=toe;const noe=Tt(roe);function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}var aoe=["valueAccessor"],soe=["data","dataKey","clockWise","id","textBreakAll"];function ioe(t){return uoe(t)||coe(t)||loe(t)||ooe()}function ooe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function loe(t,e){if(t){if(typeof t=="string")return Py(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Py(t,e)}}function coe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uoe(t){if(Array.isArray(t))return Py(t)}function Py(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wm(){return Wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wm.apply(this,arguments)}function BE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BE(Object(r),!0).forEach(function(n){doe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function doe(t,e,r){return e=foe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function foe(t){var e=hoe(t,"string");return mf(e)=="symbol"?e:e+""}function hoe(t,e){if(mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WE(t,e){if(t==null)return{};var r=poe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function poe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var moe=function(e){return Array.isArray(e.value)?noe(e.value):e.value};function Ui(t){var e=t.valueAccessor,r=e===void 0?moe:e,n=WE(t,aoe),a=n.data,s=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=WE(n,soe);return!a||!a.length?null:H.createElement(kt,{className:"recharts-label-list"},a.map(function(d,f){var p=dt(s)?r(d,f):gn(d&&d.payload,s),m=dt(l)?{}:{id:"".concat(l,"-").concat(f)};return H.createElement(Xr,Wm({},Je(d,!0),u,m,{parentViewBox:d.parentViewBox,value:p,textBreakAll:c,viewBox:Xr.parseViewBox(dt(o)?d:zE(zE({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Ui.displayName="LabelList";function goe(t,e){return t?t===!0?H.createElement(Ui,{key:"labelList-implicit",data:e}):H.isValidElement(t)||rt(t)?H.createElement(Ui,{key:"labelList-implicit",data:e,content:t}):nu(t)?H.createElement(Ui,Wm({data:e},t,{key:"labelList-implicit"})):null:null}function xoe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=pa(n,Ui).map(function(o,l){return D.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return a;var s=goe(t.label,e);return[s].concat(ioe(a))}Ui.renderCallByParent=xoe;function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function Iy(){return Iy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Iy.apply(this,arguments)}function qE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qE(Object(r),!0).forEach(function(n){voe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function voe(t,e,r){return e=boe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function boe(t){var e=yoe(t,"string");return gf(e)=="symbol"?e:e+""}function yoe(t,e){if(gf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var woe=function(e,r){var n=jn(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Yh=function(e){var r=e.cx,n=e.cy,a=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/zm,p=u?s:s+o*f,m=Ut(r,n,d,p),v=Ut(r,n,a,p),x=u?s-o*f:s,_=Ut(r,n,d*Math.cos(f*zm),x);return{center:m,circleTangency:v,lineTangency:_,theta:f}},YM=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=woe(o,l),u=o+c,d=Ut(r,n,s,o),f=Ut(r,n,s,u),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=Ut(r,n,a,o),v=Ut(r,n,a,u);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},_oe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=jn(d-u),p=Yh({cx:r,cy:n,radius:s,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=p.circleTangency,v=p.lineTangency,x=p.theta,_=Yh({cx:r,cy:n,radius:s,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=_.circleTangency,g=_.lineTangency,w=_.theta,E=c?Math.abs(u-d):Math.abs(u-d)-x-w;if(E<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):YM({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var k=Yh({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=k.circleTangency,b=k.lineTangency,A=k.theta,T=Yh({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=T.circleTangency,O=T.lineTangency,R=T.theta,G=c?Math.abs(u-d):Math.abs(u-d)-A-R;if(G<0&&o===0)return"".concat(N,"L").concat(r,",").concat(n,"Z");N+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(G>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,"Z")}else N+="L".concat(r,",").concat(n,"Z");return N},Noe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XM=function(e){var r=HE(HE({},Noe),e),n=r.cx,a=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,p=r.className;if(o<s||d===f)return null;var m=ut("recharts-sector",p),v=o-s,x=Sn(l,v,0,!0),_;return x>0&&Math.abs(d-f)<360?_=_oe({cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(x,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):_=YM({cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:d,endAngle:f}),H.createElement("path",Iy({},Je(r,!0),{className:m,d:_,role:"img"}))};function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Oy.apply(this,arguments)}function GE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function KE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GE(Object(r),!0).forEach(function(n){joe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function joe(t,e,r){return e=Soe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Soe(t){var e=Aoe(t,"string");return xf(e)=="symbol"?e:e+""}function Aoe(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YE={curveBasisClosed:jH,curveBasisOpen:SH,curveBasis:NH,curveBumpX:cH,curveBumpY:uH,curveLinearClosed:AH,curveLinear:g0,curveMonotoneX:kH,curveMonotoneY:EH,curveNatural:TH,curveStep:CH,curveStepAfter:IH,curveStepBefore:PH},Xh=function(e){return e.x===+e.x&&e.y===+e.y},Bu=function(e){return e.x},zu=function(e){return e.y},koe=function(e,r){if(rt(e))return e;var n="curve".concat(p0(e));return(n==="curveMonotone"||n==="curveBump")&&r?YE["".concat(n).concat(r==="vertical"?"Y":"X")]:YE[n]||g0},Eoe=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,s=a===void 0?[]:a,o=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=koe(n,l),f=u?s.filter(function(x){return Xh(x)}):s,p;if(Array.isArray(o)){var m=u?o.filter(function(x){return Xh(x)}):o,v=f.map(function(x,_){return KE(KE({},x),{},{base:m[_]})});return l==="vertical"?p=Fh().y(zu).x1(Bu).x0(function(x){return x.base.x}):p=Fh().x(Bu).y1(zu).y0(function(x){return x.base.y}),p.defined(Xh).curve(d),p(v)}return l==="vertical"&&ye(o)?p=Fh().y(zu).x1(Bu).x0(o):ye(o)?p=Fh().x(Bu).y1(zu).y0(o):p=qD().x(Bu).y(zu),p.defined(Xh).curve(d),p(f)},Dy=function(e){var r=e.className,n=e.points,a=e.path,s=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?Eoe(e):a;return D.createElement("path",Oy({},Je(e,!1),pm(e),{className:ut("recharts-curve",r),d:o,ref:s}))},QM={exports:{}},Toe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Coe=Toe,Poe=Coe;function JM(){}function ZM(){}ZM.resetWarningCache=JM;var Ioe=function(){function t(n,a,s,o,l,c){if(c!==Poe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ZM,resetWarningCache:JM};return r.PropTypes=r,r};QM.exports=Ioe();var Ooe=QM.exports;const jt=Tt(Ooe),{getOwnPropertyNames:Doe,getOwnPropertySymbols:Roe}=Object,{hasOwnProperty:Moe}=Object.prototype;function fv(t,e){return function(n,a,s){return t(n,a,s)&&e(n,a,s)}}function Qh(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:s}=a,o=s.get(r),l=s.get(n);if(o&&l)return o===n&&l===r;s.set(r,n),s.set(n,r);const c=t(r,n,a);return s.delete(r),s.delete(n),c}}function $oe(t){return t!=null?t[Symbol.toStringTag]:void 0}function XE(t){return Doe(t).concat(Roe(t))}const Loe=Object.hasOwn||((t,e)=>Moe.call(t,e));function cl(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Voe="__v",Foe="__o",Uoe="_owner",{getOwnPropertyDescriptor:QE,keys:JE}=Object;function Boe(t,e){return t.byteLength===e.byteLength&&qm(new Uint8Array(t),new Uint8Array(e))}function zoe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Woe(t,e){return t.byteLength===e.byteLength&&qm(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function qoe(t,e){return cl(t.getTime(),e.getTime())}function Hoe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Goe(t,e){return t===e}function ZE(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),s=t.entries();let o,l,c=0;for(;(o=s.next())&&!o.done;){const u=e.entries();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(a[f]){f++;continue}const p=o.value,m=l.value;if(r.equals(p[0],m[0],c,f,t,e,r)&&r.equals(p[1],m[1],p[0],m[0],t,e,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}const Koe=cl;function Yoe(t,e,r){const n=JE(t);let a=n.length;if(JE(e).length!==a)return!1;for(;a-- >0;)if(!e$(t,e,r,n[a]))return!1;return!0}function Wu(t,e,r){const n=XE(t);let a=n.length;if(XE(e).length!==a)return!1;let s,o,l;for(;a-- >0;)if(s=n[a],!e$(t,e,r,s)||(o=QE(t,s),l=QE(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Xoe(t,e){return cl(t.valueOf(),e.valueOf())}function Qoe(t,e){return t.source===e.source&&t.flags===e.flags}function eT(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),s=t.values();let o,l;for(;(o=s.next())&&!o.done;){const c=e.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function qm(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Joe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function e$(t,e,r,n){return(n===Uoe||n===Foe||n===Voe)&&(t.$$typeof||e.$$typeof)?!0:Loe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Zoe="[object ArrayBuffer]",ele="[object Arguments]",tle="[object Boolean]",rle="[object DataView]",nle="[object Date]",ale="[object Error]",sle="[object Map]",ile="[object Number]",ole="[object Object]",lle="[object RegExp]",cle="[object Set]",ule="[object String]",dle={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},fle="[object URL]",hle=Object.prototype.toString;function ple({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:s,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:v}){return function(_,y,g){if(_===y)return!0;if(_==null||y==null)return!1;const w=typeof _;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?l(_,y,g):w==="function"?s(_,y,g):!1;const E=_.constructor;if(E!==y.constructor)return!1;if(E===Object)return c(_,y,g);if(Array.isArray(_))return e(_,y,g);if(E===Date)return n(_,y,g);if(E===RegExp)return d(_,y,g);if(E===Map)return o(_,y,g);if(E===Set)return f(_,y,g);const N=hle.call(_);if(N===nle)return n(_,y,g);if(N===lle)return d(_,y,g);if(N===sle)return o(_,y,g);if(N===cle)return f(_,y,g);if(N===ole)return typeof _.then!="function"&&typeof y.then!="function"&&c(_,y,g);if(N===fle)return m(_,y,g);if(N===ale)return a(_,y,g);if(N===ele)return c(_,y,g);if(dle[N])return p(_,y,g);if(N===Zoe)return t(_,y,g);if(N===rle)return r(_,y,g);if(N===tle||N===ile||N===ule)return u(_,y,g);if(v){let k=v[N];if(!k){const S=$oe(_);S&&(k=v[S])}if(k)return k(_,y,g)}return!1}}function mle({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Boe,areArraysEqual:r?Wu:zoe,areDataViewsEqual:Woe,areDatesEqual:qoe,areErrorsEqual:Hoe,areFunctionsEqual:Goe,areMapsEqual:r?fv(ZE,Wu):ZE,areNumbersEqual:Koe,areObjectsEqual:r?Wu:Yoe,arePrimitiveWrappersEqual:Xoe,areRegExpsEqual:Qoe,areSetsEqual:r?fv(eT,Wu):eT,areTypedArraysEqual:r?fv(qm,Wu):qm,areUrlsEqual:Joe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Qh(n.areArraysEqual),s=Qh(n.areMapsEqual),o=Qh(n.areObjectsEqual),l=Qh(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return n}function gle(t){return function(e,r,n,a,s,o,l){return t(e,r,l)}}function xle({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(l,c){const{cache:u=t?new WeakMap:void 0,meta:d}=r();return e(l,c,{cache:u,equals:n,meta:d,strict:a})};if(t)return function(l,c){return e(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const s={cache:void 0,equals:n,meta:void 0,strict:a};return function(l,c){return e(l,c,s)}}const vle=so();so({strict:!0});so({circular:!0});so({circular:!0,strict:!0});so({createInternalComparator:()=>cl});so({strict:!0,createInternalComparator:()=>cl});so({circular:!0,createInternalComparator:()=>cl});so({circular:!0,createInternalComparator:()=>cl,strict:!0});function so(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,s=mle(t),o=ple(s),l=r?r(o):gle(o);return xle({circular:e,comparator:o,createState:n,equals:l,strict:a})}function ble(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function tT(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(s){r<0&&(r=s),s-r>e?(t(s),r=-1):ble(a)};requestAnimationFrame(n)}function Ry(t){"@babel/helpers - typeof";return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ry(t)}function yle(t){return jle(t)||Nle(t)||_le(t)||wle()}function wle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _le(t,e){if(t){if(typeof t=="string")return rT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rT(t,e)}}function rT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jle(t){if(Array.isArray(t))return t}function Sle(){var t={},e=function(){return null},r=!1,n=function a(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,l=yle(o),c=l[0],u=l.slice(1);if(typeof c=="number"){tT(a.bind(null,u),c);return}a(c),tT(a.bind(null,u));return}Ry(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function nT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nT(Object(r),!0).forEach(function(n){t$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function t$(t,e,r){return e=Ale(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ale(t){var e=kle(t,"string");return vf(e)==="symbol"?e:String(e)}function kle(t,e){if(vf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ele=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(s){return a.includes(s)})})},Tle=function(e){return e},Cle=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},yd=function(e,r){return Object.keys(r).reduce(function(n,a){return aT(aT({},n),{},t$({},a,e(a,r[a])))},{})},sT=function(e,r,n){return e.map(function(a){return"".concat(Cle(a)," ").concat(r,"ms ").concat(n)}).join(",")};function Ple(t,e){return Dle(t)||Ole(t,e)||r$(t,e)||Ile()}function Ile(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ole(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Dle(t){if(Array.isArray(t))return t}function Rle(t){return Lle(t)||$le(t)||r$(t)||Mle()}function Mle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r$(t,e){if(t){if(typeof t=="string")return My(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return My(t,e)}}function $le(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lle(t){if(Array.isArray(t))return My(t)}function My(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Hm=1e-4,n$=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},a$=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},iT=function(e,r){return function(n){var a=n$(e,r);return a$(a,n)}},Vle=function(e,r){return function(n){var a=n$(e,r),s=[].concat(Rle(a.map(function(o,l){return o*l}).slice(1)),[0]);return a$(s,n)}},oT=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],s=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(_){return parseFloat(_)}),d=Ple(u,4);a=d[0],s=d[1],o=d[2],l=d[3]}}}var f=iT(a,o),p=iT(s,l),m=Vle(a,o),v=function(y){return y>1?1:y<0?0:y},x=function(y){for(var g=y>1?1:y,w=g,E=0;E<8;++E){var N=f(w)-g,k=m(w);if(Math.abs(N-g)<Hm||k<Hm)return p(w);w=v(w-N/k)}return p(w)};return x.isStepper=!1,x},Fle=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,s=a===void 0?8:a,o=e.dt,l=o===void 0?17:o,c=function(d,f,p){var m=-(d-f)*n,v=p*s,x=p+(m-v)*l/1e3,_=p*l/1e3+d;return Math.abs(_-f)<Hm&&Math.abs(x)<Hm?[f,0]:[_,x]};return c.isStepper=!0,c.dt=l,c},Ule=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oT(a);case"spring":return Fle();default:if(a.split("(")[0]==="cubic-bezier")return oT(a)}return typeof a=="function"?a:null};function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function lT(t){return Wle(t)||zle(t)||s$(t)||Ble()}function Ble(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wle(t){if(Array.isArray(t))return Ly(t)}function cT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cT(Object(r),!0).forEach(function(n){$y(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $y(t,e,r){return e=qle(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qle(t){var e=Hle(t,"string");return bf(e)==="symbol"?e:String(e)}function Hle(t,e){if(bf(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gle(t,e){return Xle(t)||Yle(t,e)||s$(t,e)||Kle()}function Kle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s$(t,e){if(t){if(typeof t=="string")return Ly(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ly(t,e)}}function Ly(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yle(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Xle(t){if(Array.isArray(t))return t}var Gm=function(e,r,n){return e+(r-e)*n},Vy=function(e){var r=e.from,n=e.to;return r!==n},Qle=function t(e,r,n){var a=yd(function(s,o){if(Vy(o)){var l=e(o.from,o.to,o.velocity),c=Gle(l,2),u=c[0],d=c[1];return tn(tn({},o),{},{from:u,velocity:d})}return o},r);return n<1?yd(function(s,o){return Vy(o)?tn(tn({},o),{},{velocity:Gm(o.velocity,a[s].velocity,n),from:Gm(o.from,a[s].from,n)}):o},r):t(e,a,n-1)};const Jle=function(t,e,r,n,a){var s=Ele(t,e),o=s.reduce(function(_,y){return tn(tn({},_),{},$y({},y,[t[y],e[y]]))},{}),l=s.reduce(function(_,y){return tn(tn({},_),{},$y({},y,{from:t[y],velocity:0,to:e[y]}))},{}),c=-1,u,d,f=function(){return null},p=function(){return yd(function(y,g){return g.from},l)},m=function(){return!Object.values(l).filter(Vy).length},v=function(y){u||(u=y);var g=y-u,w=g/r.dt;l=Qle(r,l,w),a(tn(tn(tn({},t),e),p())),u=y,m()||(c=requestAnimationFrame(f))},x=function(y){d||(d=y);var g=(y-d)/n,w=yd(function(N,k){return Gm.apply(void 0,lT(k).concat([r(g)]))},o);if(a(tn(tn(tn({},t),e),w)),g<1)c=requestAnimationFrame(f);else{var E=yd(function(N,k){return Gm.apply(void 0,lT(k).concat([r(1)]))},o);a(tn(tn(tn({},t),e),E))}};return f=r.isStepper?v:x,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}var Zle=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ece(t,e){if(t==null)return{};var r=tce(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function tce(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function hv(t){return sce(t)||ace(t)||nce(t)||rce()}function rce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nce(t,e){if(t){if(typeof t=="string")return Fy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fy(t,e)}}function ace(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sce(t){if(Array.isArray(t))return Fy(t)}function Fy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Na(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uT(Object(r),!0).forEach(function(n){ed(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ed(t,e,r){return e=i$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ice(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i$(n.key),n)}}function lce(t,e,r){return e&&oce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function i$(t){var e=cce(t,"string");return Pc(e)==="symbol"?e:String(e)}function cce(t,e){if(Pc(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uy(t,e)}function Uy(t,e){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uy(t,e)}function dce(t){var e=fce();return function(){var n=Km(t),a;if(e){var s=Km(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return By(this,a)}}function By(t,e){if(e&&(Pc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zy(t)}function zy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Km(t){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Km(t)}var qs=function(t){uce(r,t);var e=dce(r);function r(n,a){var s;ice(this,r),s=e.call(this,n,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,p=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(zy(s)),s.changeStyle=s.changeStyle.bind(zy(s)),!l||m<=0)return s.state={style:{}},typeof p=="function"&&(s.state={style:d}),By(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof p=="function")return s.state={style:u},By(s);s.state={style:c?ed({},c,u):u}}else s.state={style:{}};return s}return lce(r,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,p=this.state.style;if(l){if(!o){var m={style:c?ed({},c,d):d};this.state&&p&&(c&&p[c]!==d||!c&&p!==d)&&this.setState(m);return}if(!(vle(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=v||u?f:a.to;if(this.state&&p){var _={style:c?ed({},c,x):x};(c&&p[c]!==x||!c&&p!==x)&&this.setState(_)}this.runAnimation(Na(Na({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,p=a.onAnimationStart,m=Jle(o,l,Ule(u),c,this.changeStyle),v=function(){s.stopJSAnimation=m()};this.manager.start([p,d,v,c,f])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,p=f===void 0?0:f,m=function(x,_,y){if(y===0)return x;var g=_.duration,w=_.easing,E=w===void 0?"ease":w,N=_.style,k=_.properties,S=_.onAnimationEnd,b=y>0?o[y-1]:_,A=k||Object.keys(N);if(typeof E=="function"||E==="spring")return[].concat(hv(x),[s.runJSAnimation.bind(s,{from:b.style,to:N,duration:g,easing:E}),g]);var T=sT(A,g,E),I=Na(Na(Na({},b.style),N),{},{transition:T});return[].concat(hv(x),[I,g,S]).filter(Tle)};return this.manager.start([c].concat(hv(o.reduce(m,[d,Math.max(p,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Sle());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,p=a.steps,m=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(p.length>1){this.runStepAnimation(a);return}var x=l?ed({},l,c):c,_=sT(Object.keys(x),o,u);v.start([d,s,Na(Na({},x),{},{transition:_}),o,f])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=ece(a,Zle),u=D.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var f=function(m){var v=m.props,x=v.style,_=x===void 0?{}:x,y=v.className,g=D.cloneElement(m,Na(Na({},c),{},{style:Na(Na({},_),d),className:y}));return g};return u===1?f(D.Children.only(s)):H.createElement("div",null,D.Children.map(s,function(p){return f(p)}))}}]),r}(D.PureComponent);qs.displayName="Animate";qs.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};qs.propTypes={from:jt.oneOfType([jt.object,jt.string]),to:jt.oneOfType([jt.object,jt.string]),attributeName:jt.string,duration:jt.number,begin:jt.number,easing:jt.oneOfType([jt.string,jt.func]),steps:jt.arrayOf(jt.shape({duration:jt.number.isRequired,style:jt.object.isRequired,easing:jt.oneOfType([jt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),jt.func]),properties:jt.arrayOf("string"),onAnimationEnd:jt.func})),children:jt.oneOfType([jt.node,jt.func]),isActive:jt.bool,canBegin:jt.bool,onAnimationEnd:jt.func,shouldReAnimate:jt.bool,onAnimationStart:jt.func,onAnimationReStart:jt.func};function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function Ym(){return Ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ym.apply(this,arguments)}function hce(t,e){return xce(t)||gce(t,e)||mce(t,e)||pce()}function pce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mce(t,e){if(t){if(typeof t=="string")return dT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dT(t,e)}}function dT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gce(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function xce(t){if(Array.isArray(t))return t}function fT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fT(Object(r),!0).forEach(function(n){vce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vce(t,e,r){return e=bce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bce(t){var e=yce(t,"string");return yf(e)=="symbol"?e:e+""}function yce(t,e){if(yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pT=function(e,r,n,a,s){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,m=4;p<m;p++)f[p]=s[p]>o?o:s[p];d="M".concat(e,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(r)),d+="L ".concat(e+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+n,",").concat(r+l*f[1])),d+="L ".concat(e+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+n-c*f[2],",").concat(r+a)),d+="L ".concat(e+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var v=Math.min(o,s);d="M ".concat(e,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+c*v,",").concat(r,`
            L `).concat(e+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+n,",").concat(r+l*v,`
            L `).concat(e+n,",").concat(r+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+n-c*v,",").concat(r+a,`
            L `).concat(e+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(r+a-l*v," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},wce=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,s=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(o,o+c),p=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=p}return!1},_ce={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q_=function(e){var r=hT(hT({},_ce),e),n=D.useRef(),a=D.useState(-1),s=hce(a,2),o=s[0],l=s[1];D.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&l(E)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,p=r.radius,m=r.className,v=r.animationEasing,x=r.animationDuration,_=r.animationBegin,y=r.isAnimationActive,g=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=ut("recharts-rectangle",m);return g?H.createElement(qs,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:x,animationEasing:v,isActive:g},function(E){var N=E.width,k=E.height,S=E.x,b=E.y;return H.createElement(qs,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:_,duration:x,isActive:y,easing:v},H.createElement("path",Ym({},Je(r,!0),{className:w,d:pT(S,b,N,k,p),ref:n})))}):H.createElement("path",Ym({},Je(r,!0),{className:w,d:pT(c,u,d,f,p)}))},Nce=["points","className","baseLinePoints","connectNulls"];function Fl(){return Fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fl.apply(this,arguments)}function jce(t,e){if(t==null)return{};var r=Sce(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Sce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function mT(t){return Tce(t)||Ece(t)||kce(t)||Ace()}function Ace(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kce(t,e){if(t){if(typeof t=="string")return Wy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wy(t,e)}}function Ece(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tce(t){if(Array.isArray(t))return Wy(t)}function Wy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var gT=function(e){return e&&e.x===+e.x&&e.y===+e.y},Cce=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){gT(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),gT(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},wd=function(e,r){var n=Cce(e);r&&(n=[n.reduce(function(s,o){return[].concat(mT(s),mT(o))},[])]);var a=n.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},Pce=function(e,r,n){var a=wd(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(wd(r.reverse(),n).slice(1))},Ice=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,s=e.connectNulls,o=jce(e,Nce);if(!r||!r.length)return null;var l=ut("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=Pce(r,a,s);return H.createElement("g",{className:l},H.createElement("path",Fl({},Je(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?H.createElement("path",Fl({},Je(o,!0),{fill:"none",d:wd(r,s)})):null,c?H.createElement("path",Fl({},Je(o,!0),{fill:"none",d:wd(a,s)})):null)}var d=wd(r,s);return H.createElement("path",Fl({},Je(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function qy(){return qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qy.apply(this,arguments)}var J_=function(e){var r=e.cx,n=e.cy,a=e.r,s=e.className,o=ut("recharts-dot",s);return r===+r&&n===+n&&a===+a?D.createElement("circle",qy({},Je(e,!1),pm(e),{className:o,cx:r,cy:n,r:a})):null};function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}var Oce=["x","y","top","left","width","height","className"];function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hy.apply(this,arguments)}function xT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Dce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xT(Object(r),!0).forEach(function(n){Rce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rce(t,e,r){return e=Mce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mce(t){var e=$ce(t,"string");return wf(e)=="symbol"?e:e+""}function $ce(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lce(t,e){if(t==null)return{};var r=Vce(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Fce=function(e,r,n,a,s,o){return"M".concat(e,",").concat(s,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},Uce=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,o=e.top,l=o===void 0?0:o,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,p=e.height,m=p===void 0?0:p,v=e.className,x=Lce(e,Oce),_=Dce({x:n,y:s,top:l,left:u,width:f,height:m},x);return!ye(n)||!ye(s)||!ye(f)||!ye(m)||!ye(l)||!ye(u)?null:H.createElement("path",Hy({},Je(_,!0),{className:ut("recharts-cross",v),d:Fce(n,s,f,m,l,u)}))},Bce=E0,zce=vM,Wce=gs;function qce(t,e){return t&&t.length?Bce(t,Wce(e),zce):void 0}var Hce=qce;const Gce=Tt(Hce);var Kce=E0,Yce=gs,Xce=bM;function Qce(t,e){return t&&t.length?Kce(t,Yce(e),Xce):void 0}var Jce=Qce;const Zce=Tt(Jce);var eue=["cx","cy","angle","ticks","axisLine"],tue=["ticks","tick","angle","tickFormatter","stroke"];function Ic(t){"@babel/helpers - typeof";return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(t)}function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_d.apply(this,arguments)}function vT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vT(Object(r),!0).forEach(function(n){R0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bT(t,e){if(t==null)return{};var r=rue(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function nue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l$(n.key),n)}}function aue(t,e,r){return e&&yT(t.prototype,e),r&&yT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function sue(t,e,r){return e=Xm(e),iue(t,o$()?Reflect.construct(e,r||[],Xm(t).constructor):e.apply(t,r))}function iue(t,e){if(e&&(Ic(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oue(t)}function oue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o$=function(){return!!t})()}function Xm(t){return Xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xm(t)}function lue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gy(t,e)}function Gy(t,e){return Gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gy(t,e)}function R0(t,e,r){return e=l$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l$(t){var e=cue(t,"string");return Ic(e)=="symbol"?e:e+""}function cue(t,e){if(Ic(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M0=function(t){function e(){return nue(this,e),sue(this,e,arguments)}return lue(e,t),aue(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Ut(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=Gce(l,function(d){return d.coordinate||0}),u=Zce(l,function(d){return d.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=bT(n,eue),d=l.reduce(function(v,x){return[Math.min(v[0],x.coordinate),Math.max(v[1],x.coordinate)]},[1/0,-1/0]),f=Ut(a,s,d[0],o),p=Ut(a,s,d[1],o),m=fo(fo(fo({},Je(u,!1)),{},{fill:"none"},Je(c,!1)),{},{x1:f.x,y1:f.y,x2:p.x,y2:p.y});return H.createElement("line",_d({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=bT(a,tue),f=this.getTickTextAnchor(),p=Je(d,!1),m=Je(o,!1),v=s.map(function(x,_){var y=n.getTickValueCoord(x),g=fo(fo(fo(fo({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},p),{},{stroke:"none",fill:u},m),{},{index:_},y),{},{payload:x});return H.createElement(kt,_d({className:ut("recharts-polar-radius-axis-tick",GM(o)),key:"tick-".concat(x.coordinate)},Xo(n.props,x,_)),e.renderTickItem(o,g,c?c(x.value,_):x.value))});return H.createElement(kt,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.axisLine,o=n.tick;return!a||!a.length?null:H.createElement(kt,{className:ut("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Xr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,s){var o;return H.isValidElement(n)?o=H.cloneElement(n,a):rt(n)?o=n(a):o=H.createElement(Qo,_d({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(D.PureComponent);R0(M0,"displayName","PolarRadiusAxis");R0(M0,"axisType","radiusAxis");R0(M0,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Oc(t){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(t)}function wo(){return wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wo.apply(this,arguments)}function wT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ho(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wT(Object(r),!0).forEach(function(n){$0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u$(n.key),n)}}function due(t,e,r){return e&&_T(t.prototype,e),r&&_T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fue(t,e,r){return e=Qm(e),hue(t,c$()?Reflect.construct(e,r||[],Qm(t).constructor):e.apply(t,r))}function hue(t,e){if(e&&(Oc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pue(t)}function pue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c$=function(){return!!t})()}function Qm(t){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qm(t)}function mue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ky(t,e)}function Ky(t,e){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ky(t,e)}function $0(t,e,r){return e=u$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u$(t){var e=gue(t,"string");return Oc(e)=="symbol"?e:e+""}function gue(t,e){if(Oc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xue=Math.PI/180,NT=1e-5,L0=function(t){function e(){return uue(this,e),fue(this,e,arguments)}return mue(e,t),due(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=Ut(s,o,l,n.coordinate),p=Ut(s,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:p.x,y2:p.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,s=Math.cos(-n.coordinate*xue),o;return s>NT?o=a==="outer"?"start":"end":s<-NT?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=ho(ho({},Je(this.props,!1)),{},{fill:"none"},Je(l,!1));if(c==="circle")return H.createElement(J_,wo({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:s,r:o}));var d=this.props.ticks,f=d.map(function(p){return Ut(a,s,o,p.coordinate)});return H.createElement(Ice,wo({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Je(this.props,!1),f=Je(o,!1),p=ho(ho({},d),{},{fill:"none"},Je(l,!1)),m=s.map(function(v,x){var _=n.getTickLineCoord(v),y=n.getTickTextAnchor(v),g=ho(ho(ho({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:x,payload:v,x:_.x2,y:_.y2});return H.createElement(kt,wo({className:ut("recharts-polar-angle-axis-tick",GM(o)),key:"tick-".concat(v.coordinate)},Xo(n.props,v,x)),l&&H.createElement("line",wo({className:"recharts-polar-angle-axis-tick-line"},p,_)),o&&e.renderTickItem(o,g,c?c(v.value,x):v.value))});return H.createElement(kt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!a||!a.length?null:H.createElement(kt,{className:ut("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,s){var o;return H.isValidElement(n)?o=H.cloneElement(n,a):rt(n)?o=n(a):o=H.createElement(Qo,wo({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(D.PureComponent);$0(L0,"displayName","PolarAngleAxis");$0(L0,"axisType","angleAxis");$0(L0,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var vue=mR,bue=vue(Object.getPrototypeOf,Object),yue=bue,wue=Ks,_ue=yue,Nue=Ys,jue="[object Object]",Sue=Function.prototype,Aue=Object.prototype,d$=Sue.toString,kue=Aue.hasOwnProperty,Eue=d$.call(Object);function Tue(t){if(!Nue(t)||wue(t)!=jue)return!1;var e=_ue(t);if(e===null)return!0;var r=kue.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&d$.call(r)==Eue}var Cue=Tue;const Pue=Tt(Cue);var Iue=Ks,Oue=Ys,Due="[object Boolean]";function Rue(t){return t===!0||t===!1||Oue(t)&&Iue(t)==Due}var Mue=Rue;const $ue=Tt(Mue);function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function Jm(){return Jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jm.apply(this,arguments)}function Lue(t,e){return Bue(t)||Uue(t,e)||Fue(t,e)||Vue()}function Vue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fue(t,e){if(t){if(typeof t=="string")return jT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jT(t,e)}}function jT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Uue(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Bue(t){if(Array.isArray(t))return t}function ST(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function AT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ST(Object(r),!0).forEach(function(n){zue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ST(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zue(t,e,r){return e=Wue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wue(t){var e=que(t,"string");return _f(e)=="symbol"?e:e+""}function que(t,e){if(_f(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_f(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kT=function(e,r,n,a,s){var o=n-a,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+s),l+="L ".concat(e+n-o/2-a,",").concat(r+s),l+="L ".concat(e,",").concat(r," Z"),l},Hue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Gue=function(e){var r=AT(AT({},Hue),e),n=D.useRef(),a=D.useState(-1),s=Lue(a,2),o=s[0],l=s[1];D.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,p=r.height,m=r.className,v=r.animationEasing,x=r.animationDuration,_=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||p!==+p||d===0&&f===0||p===0)return null;var g=ut("recharts-trapezoid",m);return y?H.createElement(qs,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:p,x:c,y:u},duration:x,animationEasing:v,isActive:y},function(w){var E=w.upperWidth,N=w.lowerWidth,k=w.height,S=w.x,b=w.y;return H.createElement(qs,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:_,duration:x,easing:v},H.createElement("path",Jm({},Je(r,!0),{className:g,d:kT(S,b,E,N,k),ref:n})))}):H.createElement("g",null,H.createElement("path",Jm({},Je(r,!0),{className:g,d:kT(c,u,d,f,p)})))},Kue=["option","shapeType","propTransformer","activeClassName","isActive"];function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}function Yue(t,e){if(t==null)return{};var r=Xue(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ET(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ET(Object(r),!0).forEach(function(n){Que(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ET(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Que(t,e,r){return e=Jue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jue(t){var e=Zue(t,"string");return Nf(e)=="symbol"?e:e+""}function Zue(t,e){if(Nf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ede(t,e){return Zm(Zm({},e),t)}function tde(t,e){return t==="symbols"}function TT(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return H.createElement(Q_,r);case"trapezoid":return H.createElement(Gue,r);case"sector":return H.createElement(XM,r);case"symbols":if(tde(e))return H.createElement(g_,r);break;default:return null}}function rde(t){return D.isValidElement(t)?t.props:t}function f$(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?ede:n,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=Yue(t,Kue),u;if(D.isValidElement(e))u=D.cloneElement(e,Zm(Zm({},c),rde(e)));else if(rt(e))u=e(c);else if(Pue(e)&&!$ue(e)){var d=a(e,c);u=H.createElement(TT,{shapeType:r,elementProps:d})}else{var f=c;u=H.createElement(TT,{shapeType:r,elementProps:f})}return l?H.createElement(kt,{className:o},u):u}function V0(t,e){return e!=null&&"trapezoids"in t.props}function F0(t,e){return e!=null&&"sectors"in t.props}function jf(t,e){return e!=null&&"points"in t.props}function nde(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,s=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&s}function ade(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function sde(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function ide(t,e){var r;return V0(t,e)?r=nde:F0(t,e)?r=ade:jf(t,e)&&(r=sde),r}function ode(t,e){var r;return V0(t,e)?r="trapezoids":F0(t,e)?r="sectors":jf(t,e)&&(r="points"),r}function lde(t,e){if(V0(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(F0(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return jf(t,e)?e.payload:{}}function cde(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=ode(r,e),s=lde(r,e),o=n.filter(function(c,u){var d=P0(s,c),f=r.props[a].filter(function(v){var x=ide(r,e);return x(v,e)}),p=r.props[a].indexOf(f[f.length-1]),m=u===p;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var jp;function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ul.apply(this,arguments)}function CT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CT(Object(r),!0).forEach(function(n){ca(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ude(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p$(n.key),n)}}function dde(t,e,r){return e&&PT(t.prototype,e),r&&PT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function fde(t,e,r){return e=eg(e),hde(t,h$()?Reflect.construct(e,r||[],eg(t).constructor):e.apply(t,r))}function hde(t,e){if(e&&(Dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pde(t)}function pde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h$=function(){return!!t})()}function eg(t){return eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eg(t)}function mde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yy(t,e)}function Yy(t,e){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Yy(t,e)}function ca(t,e,r){return e=p$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p$(t){var e=gde(t,"string");return Dc(e)=="symbol"?e:e+""}function gde(t,e){if(Dc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qs=function(t){function e(r){var n;return ude(this,e),n=fde(this,e,[r]),ca(n,"pieRef",null),ca(n,"sectorRefs",[]),ca(n,"id",Qf("recharts-pie-")),ca(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),rt(a)&&a()}),ca(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),rt(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return mde(e,t),dde(e,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,d=Je(this.props,!1),f=Je(o,!1),p=Je(l,!1),m=o&&o.offsetRadius||20,v=n.map(function(x,_){var y=(x.startAngle+x.endAngle)/2,g=Ut(x.cx,x.cy,x.outerRadius+m,y),w=$t($t($t($t({},d),x),{},{stroke:"none"},f),{},{index:_,textAnchor:e.getTextAnchor(g.x,x.cx)},g),E=$t($t($t($t({},d),x),{},{fill:"none",stroke:x.fill},p),{},{index:_,points:[Ut(x.cx,x.cy,x.outerRadius,y),g]}),N=c;return dt(c)&&dt(u)?N="value":dt(c)&&(N=u),H.createElement(kt,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(_)},l&&e.renderLabelLineItem(l,E,"line"),e.renderLabelItem(o,w,gn(x,N)))});return H.createElement(kt,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var a=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),p=c&&a.hasActiveIndex()?c:null,m=f?o:p,v=$t($t({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return H.createElement(kt,Ul({ref:function(_){_&&!a.sectorRefs.includes(_)&&a.sectorRefs.push(_)},tabIndex:-1,className:"recharts-pie-sector"},Xo(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),H.createElement(f$,Ul({option:m,isActive:f,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,s=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,p=f.prevSectors,m=f.prevIsAnimationActive;return H.createElement(qs,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var x=v.t,_=[],y=s&&s[0],g=y.startAngle;return s.forEach(function(w,E){var N=p&&p[E],k=E>0?Jn(w,"paddingAngle",0):0;if(N){var S=hi(N.endAngle-N.startAngle,w.endAngle-w.startAngle),b=$t($t({},w),{},{startAngle:g+k,endAngle:g+S(x)+k});_.push(b),g=b.endAngle}else{var A=w.endAngle,T=w.startAngle,I=hi(0,A-T),O=I(x),R=$t($t({},w),{},{startAngle:g+k,endAngle:g+O+k});_.push(R),g=R.endAngle}}),H.createElement(kt,null,n.renderSectorsStatically(_))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!P0(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,s=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,p=a.outerRadius,m=a.isAnimationActive,v=this.state.isAnimationFinished;if(s||!o||!o.length||!ye(u)||!ye(d)||!ye(f)||!ye(p))return null;var x=ut("recharts-pie",l);return H.createElement(kt,{tabIndex:this.props.rootTabIndex,className:x,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(o),Xr.renderCallByParent(this.props,null,!1),(!m||v)&&Ui.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,s){if(H.isValidElement(n))return H.cloneElement(n,a);if(rt(n))return n(a);var o=ut("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return H.createElement(Dy,Ul({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,s){if(H.isValidElement(n))return H.cloneElement(n,a);var o=s;if(rt(n)&&(o=n(a),H.isValidElement(o)))return o;var l=ut("recharts-pie-label-text",typeof n!="boolean"&&!rt(n)?n.className:"");return H.createElement(Qo,Ul({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(D.PureComponent);jp=Qs;ca(Qs,"displayName","Pie");ca(Qs,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!uu.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ca(Qs,"parseDeltaAngle",function(t,e){var r=jn(e-t),n=Math.min(Math.abs(e-t),360);return r*n});ca(Qs,"getRealPieData",function(t){var e=t.data,r=t.children,n=Je(t,!1),a=pa(r,w0);return e&&e.length?e.map(function(s,o){return $t($t($t({payload:s},n),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return $t($t({},n),s.props)}):[]});ca(Qs,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,a=e.width,s=e.height,o=HM(a,s),l=n+Sn(t.cx,a,a/2),c=r+Sn(t.cy,s,s/2),u=Sn(t.innerRadius,o,0),d=Sn(t.outerRadius,o,o*.8),f=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});ca(Qs,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?$t($t({},e.type.defaultProps),e.props):e.props,a=jp.getRealPieData(n);if(!a||!a.length)return null;var s=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,p=n.tooltipType,m=Math.abs(n.minAngle),v=jp.parseCoordinateOfPie(n,r),x=jp.parseDeltaAngle(o,l),_=Math.abs(x),y=u;dt(u)&&dt(f)?(Va(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):dt(u)&&(Va(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=f);var g=a.filter(function(b){return gn(b,y,0)!==0}).length,w=(_>=360?g:g-1)*c,E=_-g*m-w,N=a.reduce(function(b,A){var T=gn(A,y,0);return b+(ye(T)?T:0)},0),k;if(N>0){var S;k=a.map(function(b,A){var T=gn(b,y,0),I=gn(b,d,A),O=(ye(T)?T:0)/N,R;A?R=S.endAngle+jn(x)*c*(T!==0?1:0):R=o;var G=R+jn(x)*((T!==0?m:0)+O*E),U=(R+G)/2,Q=(v.innerRadius+v.outerRadius)/2,te=[{name:I,value:T,payload:b,dataKey:y,type:p}],K=Ut(v.cx,v.cy,Q,U);return S=$t($t($t({percent:O,cornerRadius:s,name:I,tooltipPayload:te,midAngle:U,middleRadius:Q,tooltipPosition:K},b),v),{},{value:gn(b,y),startAngle:R,endAngle:G,payload:b,paddingAngle:jn(x)*c}),S})}return $t($t({},v),{},{sectors:k,data:a})});var xde=Math.ceil,vde=Math.max;function bde(t,e,r,n){for(var a=-1,s=vde(xde((e-t)/(r||1)),0),o=Array(s);s--;)o[n?s:++a]=t,t+=r;return o}var yde=bde,wde=DR,IT=1/0,_de=17976931348623157e292;function Nde(t){if(!t)return t===0?t:0;if(t=wde(t),t===IT||t===-IT){var e=t<0?-1:1;return e*_de}return t===t?t:0}var m$=Nde,jde=yde,Sde=y0,pv=m$;function Ade(t){return function(e,r,n){return n&&typeof n!="number"&&Sde(e,r,n)&&(r=n=void 0),e=pv(e),r===void 0?(r=e,e=0):r=pv(r),n=n===void 0?e<r?1:-1:pv(n),jde(e,r,n,t)}}var kde=Ade,Ede=kde,Tde=Ede(),Cde=Tde;const tg=Tt(Cde);function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function OT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function DT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OT(Object(r),!0).forEach(function(n){g$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g$(t,e,r){return e=Pde(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pde(t){var e=Ide(t,"string");return Sf(e)=="symbol"?e:e+""}function Ide(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ode=["Webkit","Moz","O","ms"],Dde=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),a=Ode.reduce(function(s,o){return DT(DT({},s),{},g$({},o+n,r))},{});return a[e]=r,a};function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}function rg(){return rg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rg.apply(this,arguments)}function RT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RT(Object(r),!0).forEach(function(n){qn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v$(n.key),n)}}function Mde(t,e,r){return e&&MT(t.prototype,e),r&&MT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $de(t,e,r){return e=ng(e),Lde(t,x$()?Reflect.construct(e,r||[],ng(t).constructor):e.apply(t,r))}function Lde(t,e){if(e&&(Rc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vde(t)}function Vde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x$=function(){return!!t})()}function ng(t){return ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ng(t)}function Fde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xy(t,e)}function Xy(t,e){return Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Xy(t,e)}function qn(t,e,r){return e=v$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v$(t){var e=Ude(t,"string");return Rc(e)=="symbol"?e:e+""}function Ude(t,e){if(Rc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bde=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=vd().domain(tg(0,c)).range([s,s+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},$T=function(e){return e.changedTouches&&!!e.changedTouches.length},Mc=function(t){function e(r){var n;return Rde(this,e),n=$de(this,e,[r]),qn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),qn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),qn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),n.detachDragEndListener()}),qn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),qn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),qn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),qn(n,"handleSlideDragStart",function(a){var s=$T(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Fde(e,t),Mde(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,s=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,s),p=Math.max(a,s),m=e.getIndexInRange(o,f),v=e.getIndexInRange(o,p);return{startIndex:m-m%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=gn(s[n],l,n);return rt(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,p=c.startIndex,m=c.endIndex,v=c.onChange,x=n.pageX-s;x>0?x=Math.min(x,u+d-f-l,u+d-f-o):x<0&&(x=Math.max(x,u-o,u-l));var _=this.getIndex({startX:o+x,endX:l+x});(_.startIndex!==p||_.endIndex!==m)&&v&&v(_),this.setState({startX:o+x,endX:l+x,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var s=$T(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,p=d.width,m=d.travellerWidth,v=d.onChange,x=d.gap,_=d.data,y={startX:this.state.startX,endX:this.state.endX},g=n.pageX-s;g>0?g=Math.min(g,f+p-m-u):g<0&&(g=Math.max(g,f-u)),y[o]=u+g;var w=this.getIndex(y),E=w.startIndex,N=w.endIndex,k=function(){var b=_.length-1;return o==="startX"&&(l>c?E%x===0:N%x===0)||l<c&&N===b||o==="endX"&&(l>c?N%x===0:E%x===0)||l>c&&N===b};this.setState(qn(qn({},o,u+g),"brushMoveStartX",n.pageX),function(){v&&k()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var p=f+n;if(!(p===-1||p>=l.length)){var m=l[p];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(qn({},a,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return H.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=D.Children.only(u);return f?H.cloneElement(f,{x:a,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,p=c.traveller,m=c.ariaLabel,v=c.data,x=c.startIndex,_=c.endIndex,y=Math.max(n,this.props.x),g=mv(mv({},Je(this.props,!1)),{},{x:y,y:u,width:d,height:f}),w=m||"Min value: ".concat((s=v[x])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=v[_])===null||o===void 0?void 0:o.name);return H.createElement(kt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(p,g))}},{key:"renderSlide",value:function(n,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return H.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,s=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,p=d.endX,m=5,v={pointerEvents:"none",fill:u};return H.createElement(kt,{className:"recharts-brush-texts"},H.createElement(Qo,rg({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-m,y:o+l/2},v),this.getTextOfTick(a)),H.createElement(Qo,rg({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+m,y:o+l/2},v),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,a=n.data,s=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,p=this.state,m=p.startX,v=p.endX,x=p.isTextActive,_=p.isSlideMoving,y=p.isTravellerMoving,g=p.isTravellerFocused;if(!a||!a.length||!ye(l)||!ye(c)||!ye(u)||!ye(d)||u<=0||d<=0)return null;var w=ut("recharts-brush",s),E=H.Children.count(o)===1,N=Dde("userSelect","none");return H.createElement(kt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(x||_||y||g||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,s=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(s+l/2)-1;return H.createElement(H.Fragment,null,H.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),H.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),H.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var s;return H.isValidElement(n)?s=H.cloneElement(n,a):rt(n)?s=n(a):s=e.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(n,a){var s=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return mv({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?Bde({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var p=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,a){for(var s=n.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(D.PureComponent);qn(Mc,"displayName","Brush");qn(Mc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var zde=N_;function Wde(t,e){var r;return zde(t,function(n,a,s){return r=e(n,a,s),!r}),!!r}var qde=Wde,Hde=oR,Gde=gs,Kde=qde,Yde=Bn,Xde=y0;function Qde(t,e,r){var n=Yde(t)?Hde:Kde;return r&&Xde(t,e,r)&&(e=void 0),n(t,Gde(e))}var Jde=Qde;const Zde=Tt(Jde);var ds=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},LT=TR;function efe(t,e,r){e=="__proto__"&&LT?LT(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var tfe=efe,rfe=tfe,nfe=kR,afe=gs;function sfe(t,e){var r={};return e=afe(e),nfe(t,function(n,a,s){rfe(r,a,e(n,a,s))}),r}var ife=sfe;const ofe=Tt(ife);function lfe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var cfe=lfe,ufe=N_;function dfe(t,e){var r=!0;return ufe(t,function(n,a,s){return r=!!e(n,a,s),r}),r}var ffe=dfe,hfe=cfe,pfe=ffe,mfe=gs,gfe=Bn,xfe=y0;function vfe(t,e,r){var n=gfe(t)?hfe:pfe;return r&&xfe(t,e,r)&&(e=void 0),n(t,mfe(e))}var bfe=vfe;const b$=Tt(bfe);var yfe=["x","y"];function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qy.apply(this,arguments)}function VT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VT(Object(r),!0).forEach(function(n){wfe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wfe(t,e,r){return e=_fe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _fe(t){var e=Nfe(t,"string");return Af(e)=="symbol"?e:e+""}function Nfe(t,e){if(Af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jfe(t,e){if(t==null)return{};var r=Sfe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Sfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Afe(t,e){var r=t.x,n=t.y,a=jfe(t,yfe),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||a.height),d=parseInt(u,10),f="".concat(e.width||a.width),p=parseInt(f,10);return qu(qu(qu(qu(qu({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function FT(t){return H.createElement(f$,Qy({shapeType:"rectangle",propTransformer:Afe,activeClassName:"recharts-active-bar"},t))}var kfe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var s=ye(n)||YW(n);return s?e(n,a):(s||Zo(),r)}},Efe=["value","background"],y$;function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function Tfe(t,e){if(t==null)return{};var r=Cfe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Cfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ag(){return ag=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ag.apply(this,arguments)}function UT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UT(Object(r),!0).forEach(function(n){Si(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_$(n.key),n)}}function Ife(t,e,r){return e&&BT(t.prototype,e),r&&BT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ofe(t,e,r){return e=sg(e),Dfe(t,w$()?Reflect.construct(e,r||[],sg(t).constructor):e.apply(t,r))}function Dfe(t,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rfe(t)}function Rfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w$=function(){return!!t})()}function sg(t){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sg(t)}function Mfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jy(t,e)}function Jy(t,e){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Jy(t,e)}function Si(t,e,r){return e=_$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _$(t){var e=$fe(t,"string");return $c(e)=="symbol"?e:e+""}function $fe(t,e){if($c(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($c(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ul=function(t){function e(){var r;Pfe(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Ofe(this,e,[].concat(a)),Si(r,"state",{isAnimationFinished:!1}),Si(r,"id",Qf("recharts-bar-")),Si(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Si(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Mfe(e,t),Ife(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=Je(this.props,!1);return n&&n.map(function(f,p){var m=p===c,v=m?u:o,x=Nr(Nr(Nr({},d),f),{},{isActive:m,option:v,index:p,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return H.createElement(kt,ag({className:"recharts-bar-rectangle"},Xo(a.props,f,p),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(p)}),H.createElement(FT,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,p=this.state.prevData;return H.createElement(qs,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,x=s.map(function(_,y){var g=p&&p[y];if(g){var w=hi(g.x,_.x),E=hi(g.y,_.y),N=hi(g.width,_.width),k=hi(g.height,_.height);return Nr(Nr({},_),{},{x:w(v),y:E(v),width:N(v),height:k(v)})}if(o==="horizontal"){var S=hi(0,_.height),b=S(v);return Nr(Nr({},_),{},{y:_.y+_.height-b,height:b})}var A=hi(0,_.width),T=A(v);return Nr(Nr({},_),{},{width:T})});return H.createElement(kt,null,n.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!P0(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=Je(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,p=Tfe(u,Efe);if(!f)return null;var m=Nr(Nr(Nr(Nr(Nr({},p),{},{fill:"#eee"},f),c),Xo(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return H.createElement(FT,ag({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=pa(d,D0);if(!f)return null;var p=u==="vertical"?o[0].height/2:o[0].width/2,m=function(_,y){var g=Array.isArray(_.value)?_.value[1]:_.value;return{x:_.x,y:_.y,value:g,errorVal:gn(_,y)}},v={clipPath:n?"url(#clipPath-".concat(a,")"):null};return H.createElement(kt,v,f.map(function(x){return H.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,s=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,p=n.height,m=n.isAnimationActive,v=n.background,x=n.id;if(a||!s||!s.length)return null;var _=this.state.isAnimationFinished,y=ut("recharts-bar",o),g=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,E=g||w,N=dt(x)?this.id:x;return H.createElement(kt,{className:y},g||w?H.createElement("defs",null,H.createElement("clipPath",{id:"clipPath-".concat(N)},H.createElement("rect",{x:g?u:u-f/2,y:w?d:d-p/2,width:g?f:f*2,height:w?p:p*2}))):null,H.createElement(kt,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(N,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,N),(!m||_)&&Ui.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(D.PureComponent);y$=ul;Si(ul,"displayName","Bar");Si(ul,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!uu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Si(ul,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,p=t.offset,m=hie(n,r);if(!m)return null;var v=e.layout,x=r.type.defaultProps,_=x!==void 0?Nr(Nr({},x),r.props):r.props,y=_.dataKey,g=_.children,w=_.minPointSize,E=v==="horizontal"?o:s,N=u?E.scale.domain():null,k=yie({numericAxis:E}),S=pa(g,w0),b=f.map(function(A,T){var I,O,R,G,U,Q;u?I=pie(u[d+T],N):(I=gn(A,y),Array.isArray(I)||(I=[k,I]));var te=kfe(w,y$.defaultProps.minPointSize)(I[1],T);if(v==="horizontal"){var K,X=[o.scale(I[0]),o.scale(I[1])],se=X[0],Z=X[1];O=DE({axis:s,ticks:l,bandSize:a,offset:m.offset,entry:A,index:T}),R=(K=Z??se)!==null&&K!==void 0?K:void 0,G=m.size;var F=se-Z;if(U=Number.isNaN(F)?0:F,Q={x:O,y:o.y,width:G,height:o.height},Math.abs(te)>0&&Math.abs(U)<Math.abs(te)){var de=jn(U||te)*(Math.abs(te)-Math.abs(U));R-=de,U+=de}}else{var me=[s.scale(I[0]),s.scale(I[1])],Ge=me[0],Me=me[1];if(O=Ge,R=DE({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:A,index:T}),G=Me-Ge,U=m.size,Q={x:s.x,y:R,width:s.width,height:U},Math.abs(te)>0&&Math.abs(G)<Math.abs(te)){var ot=jn(G||te)*(Math.abs(te)-Math.abs(G));G+=ot}}return Nr(Nr(Nr({},A),{},{x:O,y:R,width:G,height:U,value:u?I:I[1],payload:A,background:Q},S&&S[T]&&S[T].props),{},{tooltipPayload:[WM(r,A)],tooltipPosition:{x:O+G/2,y:R+U/2}})});return Nr({data:b,layout:v},p)});function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function Lfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N$(n.key),n)}}function Vfe(t,e,r){return e&&zT(t.prototype,e),r&&zT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function WT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ca(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WT(Object(r),!0).forEach(function(n){U0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U0(t,e,r){return e=N$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N$(t){var e=Ffe(t,"string");return kf(e)=="symbol"?e:e+""}function Ffe(t,e){if(kf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ufe=function(e,r,n,a,s){var o=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},p=!!Gn(u,ul);return d.reduce(function(m,v){var x=r[v],_=x.orientation,y=x.domain,g=x.padding,w=g===void 0?{}:g,E=x.mirror,N=x.reversed,k="".concat(_).concat(E?"Mirror":""),S,b,A,T,I;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var O=y[1]-y[0],R=1/0,G=x.categoricalDomain.sort(JW);if(G.forEach(function(me,Ge){Ge>0&&(R=Math.min((me||0)-(G[Ge-1]||0),R))}),Number.isFinite(R)){var U=R/O,Q=x.layout==="vertical"?n.height:n.width;if(x.padding==="gap"&&(S=U*Q/2),x.padding==="no-gap"){var te=Sn(e.barCategoryGap,U*Q),K=U*Q/2;S=K-te-(K-te)/Q*te}}}a==="xAxis"?b=[n.left+(w.left||0)+(S||0),n.left+n.width-(w.right||0)-(S||0)]:a==="yAxis"?b=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(S||0),n.top+n.height-(w.bottom||0)-(S||0)]:b=x.range,N&&(b=[b[1],b[0]]);var X=FM(x,s,p),se=X.scale,Z=X.realScaleType;se.domain(y).range(b),UM(se);var F=BM(se,Ca(Ca({},x),{},{realScaleType:Z}));a==="xAxis"?(I=_==="top"&&!E||_==="bottom"&&E,A=n.left,T=f[k]-I*x.height):a==="yAxis"&&(I=_==="left"&&!E||_==="right"&&E,A=f[k]-I*x.width,T=n.top);var de=Ca(Ca(Ca({},x),F),{},{realScaleType:Z,x:A,y:T,scale:se,width:a==="xAxis"?n.width:x.width,height:a==="yAxis"?n.height:x.height});return de.bandSize=Bm(de,F),!x.hide&&a==="xAxis"?f[k]+=(I?-1:1)*de.height:x.hide||(f[k]+=(I?-1:1)*de.width),Ca(Ca({},m),{},U0({},v,de))},{})},j$=function(e,r){var n=e.x,a=e.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(a,o),width:Math.abs(s-n),height:Math.abs(o-a)}},Bfe=function(e){var r=e.x1,n=e.y1,a=e.x2,s=e.y2;return j$({x:r,y:n},{x:a,y:s})},S$=function(){function t(e){Lfe(this,t),this.scale=e}return Vfe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?r>=a&&r<=s:r>=s&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])}();U0(S$,"EPS",1e-4);var Z_=function(e){var r=Object.keys(e).reduce(function(n,a){return Ca(Ca({},n),{},U0({},a,S$.create(e[a])))},{});return Ca(Ca({},r),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return ofe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return b$(a,function(s,o){return r[o].isInRange(s)})}})};function zfe(t){return(t%180+180)%180}var Wfe=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=zfe(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},qfe=gs,Hfe=Jf,Gfe=v0;function Kfe(t){return function(e,r,n){var a=Object(e);if(!Hfe(e)){var s=qfe(r);e=Gfe(e),r=function(l){return s(a[l],l,a)}}var o=t(e,r,n);return o>-1?a[s?e[o]:o]:void 0}}var Yfe=Kfe,Xfe=m$;function Qfe(t){var e=Xfe(t),r=e%1;return e===e?r?e-r:e:0}var Jfe=Qfe,Zfe=wR,ehe=gs,the=Jfe,rhe=Math.max;function nhe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var a=r==null?0:the(r);return a<0&&(a=rhe(n+a,0)),Zfe(t,ehe(e),a)}var ahe=nhe,she=Yfe,ihe=ahe,ohe=she(ihe),lhe=ohe;const che=Tt(lhe);var uhe=tW(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),eN=D.createContext(void 0),tN=D.createContext(void 0),A$=D.createContext(void 0),k$=D.createContext({}),E$=D.createContext(void 0),T$=D.createContext(0),C$=D.createContext(0),qT=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,s=r.offset,o=e.clipPathId,l=e.children,c=e.width,u=e.height,d=uhe(s);return H.createElement(eN.Provider,{value:n},H.createElement(tN.Provider,{value:a},H.createElement(k$.Provider,{value:s},H.createElement(A$.Provider,{value:d},H.createElement(E$.Provider,{value:o},H.createElement(T$.Provider,{value:u},H.createElement(C$.Provider,{value:c},l)))))))},dhe=function(){return D.useContext(E$)},P$=function(e){var r=D.useContext(eN);r==null&&Zo();var n=r[e];return n==null&&Zo(),n},fhe=function(){var e=D.useContext(eN);return wi(e)},hhe=function(){var e=D.useContext(tN),r=che(e,function(n){return b$(n.domain,Number.isFinite)});return r||wi(e)},I$=function(e){var r=D.useContext(tN);r==null&&Zo();var n=r[e];return n==null&&Zo(),n},phe=function(){var e=D.useContext(A$);return e},mhe=function(){return D.useContext(k$)},rN=function(){return D.useContext(C$)},nN=function(){return D.useContext(T$)};function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}function ghe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D$(n.key),n)}}function vhe(t,e,r){return e&&xhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bhe(t,e,r){return e=ig(e),yhe(t,O$()?Reflect.construct(e,r||[],ig(t).constructor):e.apply(t,r))}function yhe(t,e){if(e&&(Lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return whe(t)}function whe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O$=function(){return!!t})()}function ig(t){return ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ig(t)}function _he(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zy(t,e)}function Zy(t,e){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Zy(t,e)}function HT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HT(Object(r),!0).forEach(function(n){aN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aN(t,e,r){return e=D$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D$(t){var e=Nhe(t,"string");return Lc(e)=="symbol"?e:e+""}function Nhe(t,e){if(Lc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jhe(t,e){return Ehe(t)||khe(t,e)||Ahe(t,e)||She()}function She(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ahe(t,e){if(t){if(typeof t=="string")return KT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KT(t,e)}}function KT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function khe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Ehe(t){if(Array.isArray(t))return t}function ew(){return ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ew.apply(this,arguments)}var The=function(e,r){var n;return H.isValidElement(e)?n=H.cloneElement(e,r):rt(e)?n=e(r):n=H.createElement("line",ew({},r,{className:"recharts-reference-line-line"})),n},Che=function(e,r,n,a,s,o,l,c,u){var d=s.x,f=s.y,p=s.width,m=s.height;if(n){var v=u.y,x=e.y.apply(v,{position:o});if(ds(u,"discard")&&!e.y.isInRange(x))return null;var _=[{x:d+p,y:x},{x:d,y:x}];return c==="left"?_.reverse():_}if(r){var y=u.x,g=e.x.apply(y,{position:o});if(ds(u,"discard")&&!e.x.isInRange(g))return null;var w=[{x:g,y:f+m},{x:g,y:f}];return l==="top"?w.reverse():w}if(a){var E=u.segment,N=E.map(function(k){return e.apply(k,{position:o})});return ds(u,"discard")&&Zde(N,function(k){return!e.isInRange(k)})?null:N}return null};function Phe(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,u=dhe(),d=P$(a),f=I$(s),p=phe();if(!u||!p)return null;Va(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Z_({x:d.scale,y:f.scale}),v=Mr(e),x=Mr(r),_=n&&n.length===2,y=Che(m,v,x,_,p,t.position,d.orientation,f.orientation,t);if(!y)return null;var g=jhe(y,2),w=g[0],E=w.x,N=w.y,k=g[1],S=k.x,b=k.y,A=ds(t,"hidden")?"url(#".concat(u,")"):void 0,T=GT(GT({clipPath:A},Je(t,!0)),{},{x1:E,y1:N,x2:S,y2:b});return H.createElement(kt,{className:ut("recharts-reference-line",l)},The(o,T),Xr.renderCallByParent(t,Bfe({x1:E,y1:N,x2:S,y2:b})))}var sN=function(t){function e(){return ghe(this,e),bhe(this,e,arguments)}return _he(e,t),vhe(e,[{key:"render",value:function(){return H.createElement(Phe,this.props)}}])}(H.Component);aN(sN,"displayName","ReferenceLine");aN(sN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tw(){return tw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tw.apply(this,arguments)}function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function YT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YT(Object(r),!0).forEach(function(n){B0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ihe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ohe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M$(n.key),n)}}function Dhe(t,e,r){return e&&Ohe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rhe(t,e,r){return e=og(e),Mhe(t,R$()?Reflect.construct(e,r||[],og(t).constructor):e.apply(t,r))}function Mhe(t,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $he(t)}function $he(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R$=function(){return!!t})()}function og(t){return og=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},og(t)}function Lhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rw(t,e)}function rw(t,e){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rw(t,e)}function B0(t,e,r){return e=M$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M$(t){var e=Vhe(t,"string");return Vc(e)=="symbol"?e:e+""}function Vhe(t,e){if(Vc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fhe=function(e){var r=e.x,n=e.y,a=e.xAxis,s=e.yAxis,o=Z_({x:a.scale,y:s.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return ds(e,"discard")&&!o.isInRange(l)?null:l},z0=function(t){function e(){return Ihe(this,e),Rhe(this,e,arguments)}return Lhe(e,t),Dhe(e,[{key:"render",value:function(){var n=this.props,a=n.x,s=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Mr(a),d=Mr(s);if(Va(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=Fhe(this.props);if(!f)return null;var p=f.x,m=f.y,v=this.props,x=v.shape,_=v.className,y=ds(this.props,"hidden")?"url(#".concat(c,")"):void 0,g=XT(XT({clipPath:y},Je(this.props,!0)),{},{cx:p,cy:m});return H.createElement(kt,{className:ut("recharts-reference-dot",_)},e.renderDot(x,g),Xr.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])}(H.Component);B0(z0,"displayName","ReferenceDot");B0(z0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});B0(z0,"renderDot",function(t,e){var r;return H.isValidElement(t)?r=H.cloneElement(t,e):rt(t)?r=t(e):r=H.createElement(J_,tw({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function nw(){return nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nw.apply(this,arguments)}function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}function QT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function JT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QT(Object(r),!0).forEach(function(n){W0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L$(n.key),n)}}function zhe(t,e,r){return e&&Bhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Whe(t,e,r){return e=lg(e),qhe(t,$$()?Reflect.construct(e,r||[],lg(t).constructor):e.apply(t,r))}function qhe(t,e){if(e&&(Fc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hhe(t)}function Hhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($$=function(){return!!t})()}function lg(t){return lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lg(t)}function Ghe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aw(t,e)}function aw(t,e){return aw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},aw(t,e)}function W0(t,e,r){return e=L$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L$(t){var e=Khe(t,"string");return Fc(e)=="symbol"?e:e+""}function Khe(t,e){if(Fc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yhe=function(e,r,n,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var p=Z_({x:d.scale,y:f.scale}),m={x:e?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},v={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:a?p.y.apply(u,{position:"end"}):p.y.rangeMax};return ds(s,"discard")&&(!p.isInRange(m)||!p.isInRange(v))?null:j$(m,v)},q0=function(t){function e(){return Uhe(this,e),Whe(this,e,arguments)}return Ghe(e,t),zhe(e,[{key:"render",value:function(){var n=this.props,a=n.x1,s=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;Va(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Mr(a),p=Mr(s),m=Mr(o),v=Mr(l),x=this.props.shape;if(!f&&!p&&!m&&!v&&!x)return null;var _=Yhe(f,p,m,v,this.props);if(!_&&!x)return null;var y=ds(this.props,"hidden")?"url(#".concat(d,")"):void 0;return H.createElement(kt,{className:ut("recharts-reference-area",c)},e.renderRect(x,JT(JT({clipPath:y},Je(this.props,!0)),_)),Xr.renderCallByParent(this.props,_))}}])}(H.Component);W0(q0,"displayName","ReferenceArea");W0(q0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});W0(q0,"renderRect",function(t,e){var r;return H.isValidElement(t)?r=H.cloneElement(t,e):rt(t)?r=t(e):r=H.createElement(Q_,nw({},e,{className:"recharts-reference-area-rect"})),r});function V$(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function Xhe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Wfe(n,r)}function Qhe(t,e,r){var n=r==="width",a=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function cg(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Jhe(t,e){return V$(t,e+1)}function Zhe(t,e,r,n,a){for(var s=(n||[]).slice(),o=e.start,l=e.end,c=0,u=1,d=o,f=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:V$(n,u)};var x=c,_,y=function(){return _===void 0&&(_=r(v,x)),_},g=v.coordinate,w=c===0||cg(t,g,y,d,l);w||(c=0,d=o,u+=1),w&&(d=g+t*(y()/2+a),c+=u)},p;u<=s.length;)if(p=f(),p)return p.v;return[]}function Ef(t){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ef(t)}function ZT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZT(Object(r),!0).forEach(function(n){epe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZT(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function epe(t,e,r){return e=tpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tpe(t){var e=rpe(t,"string");return Ef(e)=="symbol"?e:e+""}function rpe(t,e){if(Ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function npe(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,l=e.start,c=e.end,u=function(p){var m=s[p],v,x=function(){return v===void 0&&(v=r(m,p)),v};if(p===o-1){var _=t*(m.coordinate+t*x()/2-c);s[p]=m=fn(fn({},m),{},{tickCoord:_>0?m.coordinate-_*t:m.coordinate})}else s[p]=m=fn(fn({},m),{},{tickCoord:m.coordinate});var y=cg(t,m.tickCoord,x,l,c);y&&(c=m.tickCoord-t*(x()/2+a),s[p]=fn(fn({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function ape(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,c=e.start,u=e.end;if(s){var d=n[l-1],f=r(d,l-1),p=t*(d.coordinate+t*f/2-u);o[l-1]=d=fn(fn({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate});var m=cg(t,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-t*(f/2+a),o[l-1]=fn(fn({},d),{},{isShow:!0}))}for(var v=s?l-1:l,x=function(g){var w=o[g],E,N=function(){return E===void 0&&(E=r(w,g)),E};if(g===0){var k=t*(w.coordinate-t*N()/2-c);o[g]=w=fn(fn({},w),{},{tickCoord:k<0?w.coordinate-k*t:w.coordinate})}else o[g]=w=fn(fn({},w),{},{tickCoord:w.coordinate});var S=cg(t,w.tickCoord,N,c,u);S&&(c=w.tickCoord+t*(N()/2+a),o[g]=fn(fn({},w),{},{isShow:!0}))},_=0;_<v;_++)x(_);return o}function iN(t,e,r){var n=t.tick,a=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!a||!a.length||!n)return[];if(ye(c)||uu.isSsr)return Jhe(a,typeof c=="number"&&ye(c)?c:0);var p=[],m=l==="top"||l==="bottom"?"width":"height",v=d&&m==="width"?xd(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},x=function(w,E){var N=rt(u)?u(w.value,E):w.value;return m==="width"?Xhe(xd(N,{fontSize:e,letterSpacing:r}),v,f):xd(N,{fontSize:e,letterSpacing:r})[m]},_=a.length>=2?jn(a[1].coordinate-a[0].coordinate):1,y=Qhe(s,_,m);return c==="equidistantPreserveStart"?Zhe(_,y,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?p=ape(_,y,x,a,o,c==="preserveStartEnd"):p=npe(_,y,x,a,o),p.filter(function(g){return g.isShow}))}var spe=["viewBox"],ipe=["viewBox"],ope=["ticks"];function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bl.apply(this,arguments)}function e2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ir(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?e2(Object(r),!0).forEach(function(n){oN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gv(t,e){if(t==null)return{};var r=lpe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function cpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U$(n.key),n)}}function upe(t,e,r){return e&&t2(t.prototype,e),r&&t2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function dpe(t,e,r){return e=ug(e),fpe(t,F$()?Reflect.construct(e,r||[],ug(t).constructor):e.apply(t,r))}function fpe(t,e){if(e&&(Uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hpe(t)}function hpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F$=function(){return!!t})()}function ug(t){return ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ug(t)}function ppe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sw(t,e)}function sw(t,e){return sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},sw(t,e)}function oN(t,e,r){return e=U$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U$(t){var e=mpe(t,"string");return Uc(e)=="symbol"?e:e+""}function mpe(t,e){if(Uc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pu=function(t){function e(r){var n;return cpe(this,e),n=dpe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return ppe(e,t),upe(e,[{key:"shouldComponentUpdate",value:function(n,a){var s=n.viewBox,o=gv(n,spe),l=this.props,c=l.viewBox,u=gv(l,ipe);return!tc(s,c)||!tc(o,u)||!tc(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,p=a.tickMargin,m,v,x,_,y,g,w=f?-1:1,E=n.tickSize||d,N=ye(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=v=n.coordinate,_=o+ +!f*c,x=_-w*E,g=x-w*p,y=N;break;case"left":x=_=n.coordinate,v=s+ +!f*l,m=v-w*E,y=m-w*p,g=N;break;case"right":x=_=n.coordinate,v=s+ +f*l,m=v+w*E,y=m+w*p,g=N;break;default:m=v=n.coordinate,_=o+ +f*c,x=_+w*E,g=x+w*p,y=N;break}return{line:{x1:m,y1:x,x2:v,y2:_},tick:{x:y,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Ir(Ir(Ir({},Je(this.props,!1)),Je(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!u||c==="bottom"&&u);f=Ir(Ir({},f),{},{x1:a,y1:s+p*l,x2:a+o,y2:s+p*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Ir(Ir({},f),{},{x1:a+m*o,y1:s,x2:a+m*o,y2:s+l})}return H.createElement("line",Bl({},f,{className:ut("recharts-cartesian-axis-line",Jn(d,"className"))}))}},{key:"renderTicks",value:function(n,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,p=l.unit,m=iN(Ir(Ir({},this.props),{},{ticks:n}),a,s),v=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),_=Je(this.props,!1),y=Je(d,!1),g=Ir(Ir({},_),{},{fill:"none"},Je(c,!1)),w=m.map(function(E,N){var k=o.getTickLineCoord(E),S=k.line,b=k.tick,A=Ir(Ir(Ir(Ir({textAnchor:v,verticalAnchor:x},_),{},{stroke:"none",fill:u},y),b),{},{index:N,payload:E,visibleTicksCount:m.length,tickFormatter:f});return H.createElement(kt,Bl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},Xo(o.props,E,N)),c&&H.createElement("line",Bl({},g,S,{className:ut("recharts-cartesian-axis-tick-line",Jn(c,"className"))})),d&&e.renderTickItem(d,A,"".concat(rt(f)?f(E.value,N):E.value).concat(p||"")))});return H.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,p=f.ticks,m=gv(f,ope),v=p;return rt(c)&&(v=p&&p.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:H.createElement(kt,{className:ut("recharts-cartesian-axis",u),ref:function(_){n.layerReference=_}},s&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Xr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,s){var o,l=ut(a.className,"recharts-cartesian-axis-tick-value");return H.isValidElement(n)?o=H.cloneElement(n,Ir(Ir({},a),{},{className:l})):rt(n)?o=n(Ir(Ir({},a),{},{className:l})):o=H.createElement(Qo,Bl({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(D.Component);oN(pu,"displayName","CartesianAxis");oN(pu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var gpe=["x1","y1","x2","y2","key"],xpe=["offset"];function el(t){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(t)}function r2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?r2(Object(r),!0).forEach(function(n){vpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):r2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vpe(t,e,r){return e=bpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bpe(t){var e=ype(t,"string");return el(e)=="symbol"?e:e+""}function ype(t,e){if(el(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(el(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function To(){return To=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},To.apply(this,arguments)}function n2(t,e){if(t==null)return{};var r=wpe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var _pe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return H.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function B$(t,e){var r;if(H.isValidElement(t))r=H.cloneElement(t,e);else if(rt(t))r=t(e);else{var n=e.x1,a=e.y1,s=e.x2,o=e.y2,l=e.key,c=n2(e,gpe),u=Je(c,!1);u.offset;var d=n2(u,xpe);r=H.createElement("line",To({},d,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function Npe(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,s=t.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=mn(mn({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return B$(a,u)});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function jpe(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,s=t.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=mn(mn({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return B$(a,u)});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Spe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(p){return Math.round(p+a-a)}).sort(function(p,m){return p-m});a!==d[0]&&d.unshift(0);var f=d.map(function(p,m){var v=!d[m+1],x=v?a+o-p:d[m+1]-p;if(x<=0)return null;var _=m%e.length;return H.createElement("rect",{key:"react-".concat(m),y:p,x:n,height:x,width:s,stroke:"none",fill:e[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Ape(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(p){return Math.round(p+s-s)}).sort(function(p,m){return p-m});s!==d[0]&&d.unshift(0);var f=d.map(function(p,m){var v=!d[m+1],x=v?s+l-p:d[m+1]-p;if(x<=0)return null;var _=m%n.length;return H.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:x,height:c,stroke:"none",fill:n[_],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var kpe=function(e,r){var n=e.xAxis,a=e.width,s=e.height,o=e.offset;return VM(iN(mn(mn(mn({},pu.defaultProps),n),{},{ticks:Es(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,r)},Epe=function(e,r){var n=e.yAxis,a=e.width,s=e.height,o=e.offset;return VM(iN(mn(mn(mn({},pu.defaultProps),n),{},{ticks:Es(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,r)},bl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function z$(t){var e,r,n,a,s,o,l=rN(),c=nN(),u=mhe(),d=mn(mn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:bl.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:bl.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:bl.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:bl.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:bl.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:bl.verticalFill,x:ye(t.x)?t.x:u.left,y:ye(t.y)?t.y:u.top,width:ye(t.width)?t.width:u.width,height:ye(t.height)?t.height:u.height}),f=d.x,p=d.y,m=d.width,v=d.height,x=d.syncWithTicks,_=d.horizontalValues,y=d.verticalValues,g=fhe(),w=hhe();if(!ye(m)||m<=0||!ye(v)||v<=0||!ye(f)||f!==+f||!ye(p)||p!==+p)return null;var E=d.verticalCoordinatesGenerator||kpe,N=d.horizontalCoordinatesGenerator||Epe,k=d.horizontalPoints,S=d.verticalPoints;if((!k||!k.length)&&rt(N)){var b=_&&_.length,A=N({yAxis:w?mn(mn({},w),{},{ticks:b?_:w.ticks}):void 0,width:l,height:c,offset:u},b?!0:x);Va(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(el(A),"]")),Array.isArray(A)&&(k=A)}if((!S||!S.length)&&rt(E)){var T=y&&y.length,I=E({xAxis:g?mn(mn({},g),{},{ticks:T?y:g.ticks}):void 0,width:l,height:c,offset:u},T?!0:x);Va(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(el(I),"]")),Array.isArray(I)&&(S=I)}return H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(_pe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),H.createElement(Npe,To({},d,{offset:u,horizontalPoints:k,xAxis:g,yAxis:w})),H.createElement(jpe,To({},d,{offset:u,verticalPoints:S,xAxis:g,yAxis:w})),H.createElement(Spe,To({},d,{horizontalPoints:k})),H.createElement(Ape,To({},d,{verticalPoints:S})))}z$.displayName="CartesianGrid";function Bc(t){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(t)}function Tpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H$(n.key),n)}}function Ppe(t,e,r){return e&&Cpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ipe(t,e,r){return e=dg(e),Ope(t,W$()?Reflect.construct(e,r||[],dg(t).constructor):e.apply(t,r))}function Ope(t,e){if(e&&(Bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dpe(t)}function Dpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W$=function(){return!!t})()}function dg(t){return dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dg(t)}function Rpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iw(t,e)}function iw(t,e){return iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},iw(t,e)}function q$(t,e,r){return e=H$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H$(t){var e=Mpe(t,"string");return Bc(e)=="symbol"?e:e+""}function Mpe(t,e){if(Bc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ow(){return ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ow.apply(this,arguments)}function $pe(t){var e=t.xAxisId,r=rN(),n=nN(),a=P$(e);return a==null?null:D.createElement(pu,ow({},a,{className:ut("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Es(o,!0)}}))}var H0=function(t){function e(){return Tpe(this,e),Ipe(this,e,arguments)}return Rpe(e,t),Ppe(e,[{key:"render",value:function(){return D.createElement($pe,this.props)}}])}(D.Component);q$(H0,"displayName","XAxis");q$(H0,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function Lpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y$(n.key),n)}}function Fpe(t,e,r){return e&&Vpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Upe(t,e,r){return e=fg(e),Bpe(t,G$()?Reflect.construct(e,r||[],fg(t).constructor):e.apply(t,r))}function Bpe(t,e){if(e&&(zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zpe(t)}function zpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G$=function(){return!!t})()}function fg(t){return fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fg(t)}function Wpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lw(t,e)}function lw(t,e){return lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lw(t,e)}function K$(t,e,r){return e=Y$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y$(t){var e=qpe(t,"string");return zc(e)=="symbol"?e:e+""}function qpe(t,e){if(zc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function cw(){return cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cw.apply(this,arguments)}var Hpe=function(e){var r=e.yAxisId,n=rN(),a=nN(),s=I$(r);return s==null?null:D.createElement(pu,cw({},s,{className:ut("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Es(l,!0)}}))},G0=function(t){function e(){return Lpe(this,e),Upe(this,e,arguments)}return Wpe(e,t),Fpe(e,[{key:"render",value:function(){return D.createElement(Hpe,this.props)}}])}(D.Component);K$(G0,"displayName","YAxis");K$(G0,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function a2(t){return Xpe(t)||Ype(t)||Kpe(t)||Gpe()}function Gpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kpe(t,e){if(t){if(typeof t=="string")return uw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uw(t,e)}}function Ype(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xpe(t){if(Array.isArray(t))return uw(t)}function uw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var dw=function(e,r,n,a,s){var o=pa(e,sN),l=pa(e,z0),c=[].concat(a2(o),a2(l)),u=pa(e,q0),d="".concat(a,"Id"),f=a[0],p=r;if(c.length&&(p=c.reduce(function(x,_){if(_.props[d]===n&&ds(_.props,"extendDomain")&&ye(_.props[f])){var y=_.props[f];return[Math.min(x[0],y),Math.max(x[1],y)]}return x},p)),u.length){var m="".concat(f,"1"),v="".concat(f,"2");p=u.reduce(function(x,_){if(_.props[d]===n&&ds(_.props,"extendDomain")&&ye(_.props[m])&&ye(_.props[v])){var y=_.props[m],g=_.props[v];return[Math.min(x[0],y,g),Math.max(x[1],y,g)]}return x},p)}return s&&s.length&&(p=s.reduce(function(x,_){return ye(_)?[Math.min(x[0],_),Math.max(x[1],_)]:x},p)),p},X$={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,p),v=r?r+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,v=new Array(m);p<m;p++)v[p]=f[p].fn;return v},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,p,m,v){var x=r?r+u:u;if(!this._events[x])return!1;var _=this._events[x],y=arguments.length,g,w;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),y){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,f),!0;case 4:return _.fn.call(_.context,d,f,p),!0;case 5:return _.fn.call(_.context,d,f,p,m),!0;case 6:return _.fn.call(_.context,d,f,p,m,v),!0}for(w=1,g=new Array(y-1);w<y;w++)g[w-1]=arguments[w];_.fn.apply(_.context,g)}else{var E=_.length,N;for(w=0;w<E;w++)switch(_[w].once&&this.removeListener(u,_[w].fn,void 0,!0),y){case 1:_[w].fn.call(_[w].context);break;case 2:_[w].fn.call(_[w].context,d);break;case 3:_[w].fn.call(_[w].context,d,f);break;case 4:_[w].fn.call(_[w].context,d,f,p);break;default:if(!g)for(N=1,g=new Array(y-1);N<y;N++)g[N-1]=arguments[N];_[w].fn.apply(_[w].context,g)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,p){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!p||v.once)&&(!f||v.context===f)&&o(this,m);else{for(var x=0,_=[],y=v.length;x<y;x++)(v[x].fn!==d||p&&!v[x].once||f&&v[x].context!==f)&&_.push(v[x]);_.length?this._events[m]=_.length===1?_[0]:_:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(X$);var Qpe=X$.exports;const Jpe=Tt(Qpe);var xv=new Jpe,vv="recharts.syncMouseEvents";function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function Zpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eme(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q$(n.key),n)}}function tme(t,e,r){return e&&eme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bv(t,e,r){return e=Q$(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q$(t){var e=rme(t,"string");return Tf(e)=="symbol"?e:e+""}function rme(t,e){if(Tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nme=function(){function t(){Zpe(this,t),bv(this,"activeIndex",0),bv(this,"coordinateList",[]),bv(this,"layout","horizontal")}return tme(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,s=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=s+c+u,p=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])}();function ame(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&ye(n)&&ye(a))return!0}return!1}function sme(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function J$(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,s=t.endAngle,o=Ut(e,r,n,a),l=Ut(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}function ime(t,e,r){var n,a,s,o;if(t==="horizontal")n=e.x,s=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,s=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,p=Ut(l,c,u,f),m=Ut(l,c,d,f);n=p.x,a=p.y,s=m.x,o=m.y}else return J$(e);return[{x:n,y:a},{x:s,y:o}]}function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}function s2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Jh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s2(Object(r),!0).forEach(function(n){ome(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ome(t,e,r){return e=lme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lme(t){var e=cme(t,"string");return Cf(e)=="symbol"?e:e+""}function cme(t,e){if(Cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ume(t){var e,r,n=t.element,a=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,p=t.chartName,m=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!s||!o||p!=="ScatterChart"&&a!=="axis")return null;var v,x=Dy;if(p==="ScatterChart")v=o,x=Uce;else if(p==="BarChart")v=sme(f,o,c,d),x=Q_;else if(f==="radial"){var _=J$(o),y=_.cx,g=_.cy,w=_.radius,E=_.startAngle,N=_.endAngle;v={cx:y,cy:g,startAngle:E,endAngle:N,innerRadius:w,outerRadius:w},x=XM}else v={points:ime(f,o,c)},x=Dy;var k=Jh(Jh(Jh(Jh({stroke:"#ccc",pointerEvents:"none"},c),v),Je(m,!1)),{},{payload:l,payloadIndex:u,className:ut("recharts-tooltip-cursor",m.className)});return D.isValidElement(m)?D.cloneElement(m,k):D.createElement(x,k)}var dme=["item"],fme=["children","className","width","height","style","compact","title","desc"];function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zl.apply(this,arguments)}function i2(t,e){return mme(t)||pme(t,e)||e4(t,e)||hme()}function hme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function mme(t){if(Array.isArray(t))return t}function o2(t,e){if(t==null)return{};var r=gme(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function xme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vme(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,t4(n.key),n)}}function bme(t,e,r){return e&&vme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yme(t,e,r){return e=hg(e),wme(t,Z$()?Reflect.construct(e,r||[],hg(t).constructor):e.apply(t,r))}function wme(t,e){if(e&&(Wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _me(t)}function _me(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z$=function(){return!!t})()}function hg(t){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hg(t)}function Nme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fw(t,e)}function fw(t,e){return fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fw(t,e)}function qc(t){return Ame(t)||Sme(t)||e4(t)||jme()}function jme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e4(t,e){if(t){if(typeof t=="string")return hw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hw(t,e)}}function Sme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ame(t){if(Array.isArray(t))return hw(t)}function hw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l2(Object(r),!0).forEach(function(n){Xe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xe(t,e,r){return e=t4(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t4(t){var e=kme(t,"string");return Wc(e)=="symbol"?e:e+""}function kme(t,e){if(Wc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eme={xAxis:["bottom","top"],yAxis:["left","right"]},Tme={width:"100%",height:"100%"},r4={x:0,y:0};function Zh(t){return t}var Cme=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Pme=function(e,r,n,a){var s=r.find(function(d){return d&&d.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=a.radius;return oe(oe(oe({},a),Ut(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return oe(oe(oe({},a),Ut(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return r4},K0=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(qc(l),qc(u)):l},[]);return o.length>0?o:e&&e.length&&ye(a)&&ye(s)?e.slice(a,s+1):[]};function n4(t){return t==="number"?[0,"auto"]:void 0}var pw=function(e,r,n,a){var s=e.graphicalItems,o=e.tooltipAxis,l=K0(r,e);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;p=Bb(m,o.dataKey,a)}else p=f&&f[n]||l[n];return p?[].concat(qc(c),[WM(u,p)]):c},[])},c2=function(e,r,n,a){var s=a||{x:e.chartX,y:e.chartY},o=Cme(s,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=oie(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,p=pw(e,r,d,f),m=Pme(n,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:p,activeCoordinate:m}}return null},Ime=function(e,r){var n=r.axes,a=r.graphicalItems,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,p=e.stackOffset,m=LM(d,s);return n.reduce(function(v,x){var _,y=x.type.defaultProps!==void 0?oe(oe({},x.type.defaultProps),x.props):x.props,g=y.type,w=y.dataKey,E=y.allowDataOverflow,N=y.allowDuplicatedCategory,k=y.scale,S=y.ticks,b=y.includeHidden,A=y[o];if(v[A])return v;var T=K0(e.data,{graphicalItems:a.filter(function(F){var de,me=o in F.props?F.props[o]:(de=F.type.defaultProps)===null||de===void 0?void 0:de[o];return me===A}),dataStartIndex:c,dataEndIndex:u}),I=T.length,O,R,G;ame(y.domain,E,g)&&(O=Ty(y.domain,null,E),m&&(g==="number"||k!=="auto")&&(G=bd(T,w,"category")));var U=n4(g);if(!O||O.length===0){var Q,te=(Q=y.domain)!==null&&Q!==void 0?Q:U;if(w){if(O=bd(T,w,g),g==="category"&&m){var K=QW(O);N&&K?(R=O,O=tg(0,I)):N||(O=$E(te,O,x).reduce(function(F,de){return F.indexOf(de)>=0?F:[].concat(qc(F),[de])},[]))}else if(g==="category")N?O=O.filter(function(F){return F!==""&&!dt(F)}):O=$E(te,O,x).reduce(function(F,de){return F.indexOf(de)>=0||de===""||dt(de)?F:[].concat(qc(F),[de])},[]);else if(g==="number"){var X=fie(T,a.filter(function(F){var de,me,Ge=o in F.props?F.props[o]:(de=F.type.defaultProps)===null||de===void 0?void 0:de[o],Me="hide"in F.props?F.props.hide:(me=F.type.defaultProps)===null||me===void 0?void 0:me.hide;return Ge===A&&(b||!Me)}),w,s,d);X&&(O=X)}m&&(g==="number"||k!=="auto")&&(G=bd(T,w,"category"))}else m?O=tg(0,I):l&&l[A]&&l[A].hasStack&&g==="number"?O=p==="expand"?[0,1]:zM(l[A].stackGroups,c,u):O=$M(T,a.filter(function(F){var de=o in F.props?F.props[o]:F.type.defaultProps[o],me="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return de===A&&(b||!me)}),g,d,!0);if(g==="number")O=dw(f,O,A,s,S),te&&(O=Ty(te,O,E));else if(g==="category"&&te){var se=te,Z=O.every(function(F){return se.indexOf(F)>=0});Z&&(O=se)}}return oe(oe({},v),{},Xe({},A,oe(oe({},y),{},{axisType:s,domain:O,categoricalDomain:G,duplicateDomain:R,originalDomain:(_=y.domain)!==null&&_!==void 0?_:U,isCategorical:m,layout:d})))},{})},Ome=function(e,r){var n=r.graphicalItems,a=r.Axis,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,p=K0(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=p.length,v=LM(d,s),x=-1;return n.reduce(function(_,y){var g=y.type.defaultProps!==void 0?oe(oe({},y.type.defaultProps),y.props):y.props,w=g[o],E=n4("number");if(!_[w]){x++;var N;return v?N=tg(0,m):l&&l[w]&&l[w].hasStack?(N=zM(l[w].stackGroups,c,u),N=dw(f,N,w,s)):(N=Ty(E,$M(p,n.filter(function(k){var S,b,A=o in k.props?k.props[o]:(S=k.type.defaultProps)===null||S===void 0?void 0:S[o],T="hide"in k.props?k.props.hide:(b=k.type.defaultProps)===null||b===void 0?void 0:b.hide;return A===w&&!T}),"number",d),a.defaultProps.allowDataOverflow),N=dw(f,N,w,s)),oe(oe({},_),{},Xe({},w,oe(oe({axisType:s},a.defaultProps),{},{hide:!0,orientation:Jn(Eme,"".concat(s,".").concat(x%2),null),domain:N,originalDomain:E,isCategorical:v,layout:d})))}return _},{})},Dme=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=e.children,f="".concat(a,"Id"),p=pa(d,s),m={};return p&&p.length?m=Ime(e,{axes:p,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=Ome(e,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},Rme=function(e){var r=wi(e),n=Es(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:j_(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Bm(r,n)}},u2=function(e){var r=e.children,n=e.defaultShowTooltip,a=Gn(r,Mc),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Mme=function(e){return!e||!e.length?!1:e.some(function(r){var n=Cs(r&&r.type);return n&&n.indexOf("Bar")>=0})},d2=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},$me=function(e,r){var n=e.props,a=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,p=n.margin||{},m=Gn(f,Mc),v=Gn(f,rc),x=Object.keys(c).reduce(function(N,k){var S=c[k],b=S.orientation;return!S.mirror&&!S.hide?oe(oe({},N),{},Xe({},b,N[b]+S.width)):N},{left:p.left||0,right:p.right||0}),_=Object.keys(o).reduce(function(N,k){var S=o[k],b=S.orientation;return!S.mirror&&!S.hide?oe(oe({},N),{},Xe({},b,Jn(N,"".concat(b))+S.height)):N},{top:p.top||0,bottom:p.bottom||0}),y=oe(oe({},_),x),g=y.bottom;m&&(y.bottom+=m.props.height||Mc.defaultProps.height),v&&r&&(y=uie(y,a,n,r));var w=u-y.left-y.right,E=d-y.top-y.bottom;return oe(oe({brushBottom:g},y),{},{width:Math.max(w,0),height:Math.max(E,0)})},Lme=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},a4=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,s=a===void 0?"axis":a,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,p=function(y,g){var w=g.graphicalItems,E=g.stackGroups,N=g.offset,k=g.updateId,S=g.dataStartIndex,b=g.dataEndIndex,A=y.barSize,T=y.layout,I=y.barGap,O=y.barCategoryGap,R=y.maxBarSize,G=d2(T),U=G.numericAxisName,Q=G.cateAxisName,te=Mme(w),K=[];return w.forEach(function(X,se){var Z=K0(y.data,{graphicalItems:[X],dataStartIndex:S,dataEndIndex:b}),F=X.type.defaultProps!==void 0?oe(oe({},X.type.defaultProps),X.props):X.props,de=F.dataKey,me=F.maxBarSize,Ge=F["".concat(U,"Id")],Me=F["".concat(Q,"Id")],ot={},Be=c.reduce(function(je,tt){var ht=g["".concat(tt.axisType,"Map")],pt=F["".concat(tt.axisType,"Id")];ht&&ht[pt]||tt.axisType==="zAxis"||Zo();var Fe=ht[pt];return oe(oe({},je),{},Xe(Xe({},tt.axisType,Fe),"".concat(tt.axisType,"Ticks"),Es(Fe)))},ot),xe=Be[Q],ve=Be["".concat(Q,"Ticks")],be=E&&E[Ge]&&E[Ge].hasStack&&wie(X,E[Ge].stackGroups),le=Cs(X.type).indexOf("Bar")>=0,Ze=Bm(xe,ve),ie=[],Pe=te&&lie({barSize:A,stackGroups:E,totalSize:Lme(Be,Q)});if(le){var Ae,Ee,Oe=dt(me)?R:me,_e=(Ae=(Ee=Bm(xe,ve,!0))!==null&&Ee!==void 0?Ee:Oe)!==null&&Ae!==void 0?Ae:0;ie=cie({barGap:I,barCategoryGap:O,bandSize:_e!==Ze?_e:Ze,sizeList:Pe[Me],maxBarSize:Oe}),_e!==Ze&&(ie=ie.map(function(je){return oe(oe({},je),{},{position:oe(oe({},je.position),{},{offset:je.position.offset-_e/2})})}))}var Ke=X&&X.type&&X.type.getComposedData;Ke&&K.push({props:oe(oe({},Ke(oe(oe({},Be),{},{displayedData:Z,props:y,dataKey:de,item:X,bandSize:Ze,barPosition:ie,offset:N,stackedData:be,layout:T,dataStartIndex:S,dataEndIndex:b}))),{},Xe(Xe(Xe({key:X.key||"item-".concat(se)},U,Be[U]),Q,Be[Q]),"animationId",k)),childIndex:cq(X,y.children),item:X})}),K},m=function(y,g){var w=y.props,E=y.dataStartIndex,N=y.dataEndIndex,k=y.updateId;if(!CA({props:w}))return null;var S=w.children,b=w.layout,A=w.stackOffset,T=w.data,I=w.reverseStackOrder,O=d2(b),R=O.numericAxisName,G=O.cateAxisName,U=pa(S,n),Q=bie(T,U,"".concat(R,"Id"),"".concat(G,"Id"),A,I),te=c.reduce(function(F,de){var me="".concat(de.axisType,"Map");return oe(oe({},F),{},Xe({},me,Dme(w,oe(oe({},de),{},{graphicalItems:U,stackGroups:de.axisType===R&&Q,dataStartIndex:E,dataEndIndex:N}))))},{}),K=$me(oe(oe({},te),{},{props:w,graphicalItems:U}),g==null?void 0:g.legendBBox);Object.keys(te).forEach(function(F){te[F]=d(w,te[F],K,F.replace("Map",""),r)});var X=te["".concat(G,"Map")],se=Rme(X),Z=p(w,oe(oe({},te),{},{dataStartIndex:E,dataEndIndex:N,updateId:k,graphicalItems:U,stackGroups:Q,offset:K}));return oe(oe({formattedGraphicalItems:Z,graphicalItems:U,offset:K,stackGroups:Q},se),te)},v=function(_){function y(g){var w,E,N;return xme(this,y),N=yme(this,y,[g]),Xe(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xe(N,"accessibilityManager",new nme),Xe(N,"handleLegendBBoxUpdate",function(k){if(k){var S=N.state,b=S.dataStartIndex,A=S.dataEndIndex,T=S.updateId;N.setState(oe({legendBBox:k},m({props:N.props,dataStartIndex:b,dataEndIndex:A,updateId:T},oe(oe({},N.state),{},{legendBBox:k}))))}}),Xe(N,"handleReceiveSyncEvent",function(k,S,b){if(N.props.syncId===k){if(b===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(S)}}),Xe(N,"handleBrushChange",function(k){var S=k.startIndex,b=k.endIndex;if(S!==N.state.dataStartIndex||b!==N.state.dataEndIndex){var A=N.state.updateId;N.setState(function(){return oe({dataStartIndex:S,dataEndIndex:b},m({props:N.props,dataStartIndex:S,dataEndIndex:b,updateId:A},N.state))}),N.triggerSyncEvent({dataStartIndex:S,dataEndIndex:b})}}),Xe(N,"handleMouseEnter",function(k){var S=N.getMouseInfo(k);if(S){var b=oe(oe({},S),{},{isTooltipActive:!0});N.setState(b),N.triggerSyncEvent(b);var A=N.props.onMouseEnter;rt(A)&&A(b,k)}}),Xe(N,"triggeredAfterMouseMove",function(k){var S=N.getMouseInfo(k),b=S?oe(oe({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(b),N.triggerSyncEvent(b);var A=N.props.onMouseMove;rt(A)&&A(b,k)}),Xe(N,"handleItemMouseEnter",function(k){N.setState(function(){return{isTooltipActive:!0,activeItem:k,activePayload:k.tooltipPayload,activeCoordinate:k.tooltipPosition||{x:k.cx,y:k.cy}}})}),Xe(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Xe(N,"handleMouseMove",function(k){k.persist(),N.throttleTriggeredAfterMouseMove(k)}),Xe(N,"handleMouseLeave",function(k){N.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};N.setState(S),N.triggerSyncEvent(S);var b=N.props.onMouseLeave;rt(b)&&b(S,k)}),Xe(N,"handleOuterEvent",function(k){var S=lq(k),b=Jn(N.props,"".concat(S));if(S&&rt(b)){var A,T;/.*touch.*/i.test(S)?T=N.getMouseInfo(k.changedTouches[0]):T=N.getMouseInfo(k),b((A=T)!==null&&A!==void 0?A:{},k)}}),Xe(N,"handleClick",function(k){var S=N.getMouseInfo(k);if(S){var b=oe(oe({},S),{},{isTooltipActive:!0});N.setState(b),N.triggerSyncEvent(b);var A=N.props.onClick;rt(A)&&A(b,k)}}),Xe(N,"handleMouseDown",function(k){var S=N.props.onMouseDown;if(rt(S)){var b=N.getMouseInfo(k);S(b,k)}}),Xe(N,"handleMouseUp",function(k){var S=N.props.onMouseUp;if(rt(S)){var b=N.getMouseInfo(k);S(b,k)}}),Xe(N,"handleTouchMove",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(k.changedTouches[0])}),Xe(N,"handleTouchStart",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.handleMouseDown(k.changedTouches[0])}),Xe(N,"handleTouchEnd",function(k){k.changedTouches!=null&&k.changedTouches.length>0&&N.handleMouseUp(k.changedTouches[0])}),Xe(N,"handleDoubleClick",function(k){var S=N.props.onDoubleClick;if(rt(S)){var b=N.getMouseInfo(k);S(b,k)}}),Xe(N,"handleContextMenu",function(k){var S=N.props.onContextMenu;if(rt(S)){var b=N.getMouseInfo(k);S(b,k)}}),Xe(N,"triggerSyncEvent",function(k){N.props.syncId!==void 0&&xv.emit(vv,N.props.syncId,k,N.eventEmitterSymbol)}),Xe(N,"applySyncEvent",function(k){var S=N.props,b=S.layout,A=S.syncMethod,T=N.state.updateId,I=k.dataStartIndex,O=k.dataEndIndex;if(k.dataStartIndex!==void 0||k.dataEndIndex!==void 0)N.setState(oe({dataStartIndex:I,dataEndIndex:O},m({props:N.props,dataStartIndex:I,dataEndIndex:O,updateId:T},N.state)));else if(k.activeTooltipIndex!==void 0){var R=k.chartX,G=k.chartY,U=k.activeTooltipIndex,Q=N.state,te=Q.offset,K=Q.tooltipTicks;if(!te)return;if(typeof A=="function")U=A(K,k);else if(A==="value"){U=-1;for(var X=0;X<K.length;X++)if(K[X].value===k.activeLabel){U=X;break}}var se=oe(oe({},te),{},{x:te.left,y:te.top}),Z=Math.min(R,se.x+se.width),F=Math.min(G,se.y+se.height),de=K[U]&&K[U].value,me=pw(N.state,N.props.data,U),Ge=K[U]?{x:b==="horizontal"?K[U].coordinate:Z,y:b==="horizontal"?F:K[U].coordinate}:r4;N.setState(oe(oe({},k),{},{activeLabel:de,activeCoordinate:Ge,activePayload:me,activeTooltipIndex:U}))}else N.setState(k)}),Xe(N,"renderCursor",function(k){var S,b=N.state,A=b.isTooltipActive,T=b.activeCoordinate,I=b.activePayload,O=b.offset,R=b.activeTooltipIndex,G=b.tooltipAxisBandSize,U=N.getTooltipEventType(),Q=(S=k.props.active)!==null&&S!==void 0?S:A,te=N.props.layout,K=k.key||"_recharts-cursor";return H.createElement(ume,{key:K,activeCoordinate:T,activePayload:I,activeTooltipIndex:R,chartName:r,element:k,isActive:Q,layout:te,offset:O,tooltipAxisBandSize:G,tooltipEventType:U})}),Xe(N,"renderPolarAxis",function(k,S,b){var A=Jn(k,"type.axisType"),T=Jn(N.state,"".concat(A,"Map")),I=k.type.defaultProps,O=I!==void 0?oe(oe({},I),k.props):k.props,R=T&&T[O["".concat(A,"Id")]];return D.cloneElement(k,oe(oe({},R),{},{className:ut(A,R.className),key:k.key||"".concat(S,"-").concat(b),ticks:Es(R,!0)}))}),Xe(N,"renderPolarGrid",function(k){var S=k.props,b=S.radialLines,A=S.polarAngles,T=S.polarRadius,I=N.state,O=I.radiusAxisMap,R=I.angleAxisMap,G=wi(O),U=wi(R),Q=U.cx,te=U.cy,K=U.innerRadius,X=U.outerRadius;return D.cloneElement(k,{polarAngles:Array.isArray(A)?A:Es(U,!0).map(function(se){return se.coordinate}),polarRadius:Array.isArray(T)?T:Es(G,!0).map(function(se){return se.coordinate}),cx:Q,cy:te,innerRadius:K,outerRadius:X,key:k.key||"polar-grid",radialLines:b})}),Xe(N,"renderLegend",function(){var k=N.state.formattedGraphicalItems,S=N.props,b=S.children,A=S.width,T=S.height,I=N.props.margin||{},O=A-(I.left||0)-(I.right||0),R=RM({children:b,formattedGraphicalItems:k,legendWidth:O,legendContent:u});if(!R)return null;var G=R.item,U=o2(R,dme);return D.cloneElement(G,oe(oe({},U),{},{chartWidth:A,chartHeight:T,margin:I,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Xe(N,"renderTooltip",function(){var k,S=N.props,b=S.children,A=S.accessibilityLayer,T=Gn(b,Ta);if(!T)return null;var I=N.state,O=I.isTooltipActive,R=I.activeCoordinate,G=I.activePayload,U=I.activeLabel,Q=I.offset,te=(k=T.props.active)!==null&&k!==void 0?k:O;return D.cloneElement(T,{viewBox:oe(oe({},Q),{},{x:Q.left,y:Q.top}),active:te,label:U,payload:te?G:[],coordinate:R,accessibilityLayer:A})}),Xe(N,"renderBrush",function(k){var S=N.props,b=S.margin,A=S.data,T=N.state,I=T.offset,O=T.dataStartIndex,R=T.dataEndIndex,G=T.updateId;return D.cloneElement(k,{key:k.key||"_recharts-brush",onChange:Kh(N.handleBrushChange,k.props.onChange),data:A,x:ye(k.props.x)?k.props.x:I.left,y:ye(k.props.y)?k.props.y:I.top+I.height+I.brushBottom-(b.bottom||0),width:ye(k.props.width)?k.props.width:I.width,startIndex:O,endIndex:R,updateId:"brush-".concat(G)})}),Xe(N,"renderReferenceElement",function(k,S,b){if(!k)return null;var A=N,T=A.clipPathId,I=N.state,O=I.xAxisMap,R=I.yAxisMap,G=I.offset,U=k.type.defaultProps||{},Q=k.props,te=Q.xAxisId,K=te===void 0?U.xAxisId:te,X=Q.yAxisId,se=X===void 0?U.yAxisId:X;return D.cloneElement(k,{key:k.key||"".concat(S,"-").concat(b),xAxis:O[K],yAxis:R[se],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:T})}),Xe(N,"renderActivePoints",function(k){var S=k.item,b=k.activePoint,A=k.basePoint,T=k.childIndex,I=k.isRange,O=[],R=S.props.key,G=S.item.type.defaultProps!==void 0?oe(oe({},S.item.type.defaultProps),S.item.props):S.item.props,U=G.activeDot,Q=G.dataKey,te=oe(oe({index:T,dataKey:Q,cx:b.x,cy:b.y,r:4,fill:X_(S.item),strokeWidth:2,stroke:"#fff",payload:b.payload,value:b.value},Je(U,!1)),pm(U));return O.push(y.renderActiveDot(U,te,"".concat(R,"-activePoint-").concat(T))),A?O.push(y.renderActiveDot(U,oe(oe({},te),{},{cx:A.x,cy:A.y}),"".concat(R,"-basePoint-").concat(T))):I&&O.push(null),O}),Xe(N,"renderGraphicChild",function(k,S,b){var A=N.filterFormatItem(k,S,b);if(!A)return null;var T=N.getTooltipEventType(),I=N.state,O=I.isTooltipActive,R=I.tooltipAxis,G=I.activeTooltipIndex,U=I.activeLabel,Q=N.props.children,te=Gn(Q,Ta),K=A.props,X=K.points,se=K.isRange,Z=K.baseLine,F=A.item.type.defaultProps!==void 0?oe(oe({},A.item.type.defaultProps),A.item.props):A.item.props,de=F.activeDot,me=F.hide,Ge=F.activeBar,Me=F.activeShape,ot=!!(!me&&O&&te&&(de||Ge||Me)),Be={};T!=="axis"&&te&&te.props.trigger==="click"?Be={onClick:Kh(N.handleItemMouseEnter,k.props.onClick)}:T!=="axis"&&(Be={onMouseLeave:Kh(N.handleItemMouseLeave,k.props.onMouseLeave),onMouseEnter:Kh(N.handleItemMouseEnter,k.props.onMouseEnter)});var xe=D.cloneElement(k,oe(oe({},A.props),Be));function ve(tt){return typeof R.dataKey=="function"?R.dataKey(tt.payload):null}if(ot)if(G>=0){var be,le;if(R.dataKey&&!R.allowDuplicatedCategory){var Ze=typeof R.dataKey=="function"?ve:"payload.".concat(R.dataKey.toString());be=Bb(X,Ze,U),le=se&&Z&&Bb(Z,Ze,U)}else be=X==null?void 0:X[G],le=se&&Z&&Z[G];if(Me||Ge){var ie=k.props.activeIndex!==void 0?k.props.activeIndex:G;return[D.cloneElement(k,oe(oe(oe({},A.props),Be),{},{activeIndex:ie})),null,null]}if(!dt(be))return[xe].concat(qc(N.renderActivePoints({item:A,activePoint:be,basePoint:le,childIndex:G,isRange:se})))}else{var Pe,Ae=(Pe=N.getItemByXY(N.state.activeCoordinate))!==null&&Pe!==void 0?Pe:{graphicalItem:xe},Ee=Ae.graphicalItem,Oe=Ee.item,_e=Oe===void 0?k:Oe,Ke=Ee.childIndex,je=oe(oe(oe({},A.props),Be),{},{activeIndex:Ke});return[D.cloneElement(_e,je),null,null]}return se?[xe,null,null]:[xe,null]}),Xe(N,"renderCustomized",function(k,S,b){return D.cloneElement(k,oe(oe({key:"recharts-customized-".concat(b)},N.props),N.state))}),Xe(N,"renderMap",{CartesianGrid:{handler:Zh,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:Zh},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:Zh},YAxis:{handler:Zh},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((w=g.id)!==null&&w!==void 0?w:Qf("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=RR(N.triggeredAfterMouseMove,(E=g.throttleDelay)!==null&&E!==void 0?E:1e3/60),N.state={},N}return Nme(y,_),bme(y,[{key:"componentDidMount",value:function(){var w,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,E=w.children,N=w.data,k=w.height,S=w.layout,b=Gn(E,Ta);if(b){var A=b.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,I=pw(this.state,N,A,T),O=this.state.tooltipTicks[A].coordinate,R=(this.state.offset.top+k)/2,G=S==="horizontal",U=G?{x:O,y:R}:{y:O,x:R},Q=this.state.formattedGraphicalItems.find(function(K){var X=K.item;return X.type.name==="Scatter"});Q&&(U=oe(oe({},U),Q.props.points[A].tooltipPosition),I=Q.props.points[A].tooltipPayload);var te={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:T,activePayload:I,activeCoordinate:U};this.setState(te),this.renderCursor(b),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var N,k;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0}})}return null}},{key:"componentDidUpdate",value:function(w){Wb([Gn(w.children,Ta)],[Gn(this.props.children,Ta)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Gn(this.props.children,Ta);if(w&&typeof w.props.shared=="boolean"){var E=w.props.shared?"axis":"item";return l.indexOf(E)>=0?E:s}return s}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var E=this.container,N=E.getBoundingClientRect(),k=Rte(N),S={chartX:Math.round(w.pageX-k.left),chartY:Math.round(w.pageY-k.top)},b=N.width/E.offsetWidth||1,A=this.inRange(S.chartX,S.chartY,b);if(!A)return null;var T=this.state,I=T.xAxisMap,O=T.yAxisMap,R=this.getTooltipEventType(),G=c2(this.state,this.props.data,this.props.layout,A);if(R!=="axis"&&I&&O){var U=wi(I).scale,Q=wi(O).scale,te=U&&U.invert?U.invert(S.chartX):null,K=Q&&Q.invert?Q.invert(S.chartY):null;return oe(oe({},S),{},{xValue:te,yValue:K},G)}return G?oe(oe({},S),G):null}},{key:"inRange",value:function(w,E){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,k=this.props.layout,S=w/N,b=E/N;if(k==="horizontal"||k==="vertical"){var A=this.state.offset,T=S>=A.left&&S<=A.left+A.width&&b>=A.top&&b<=A.top+A.height;return T?{x:S,y:b}:null}var I=this.state,O=I.angleAxisMap,R=I.radiusAxisMap;if(O&&R){var G=wi(O);return FE({x:S,y:b},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,E=this.getTooltipEventType(),N=Gn(w,Ta),k={};N&&E==="axis"&&(N.props.trigger==="click"?k={onClick:this.handleClick}:k={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=pm(this.props,this.handleOuterEvent);return oe(oe({},S),k)}},{key:"addListener",value:function(){xv.on(vv,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){xv.removeListener(vv,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,E,N){for(var k=this.state.formattedGraphicalItems,S=0,b=k.length;S<b;S++){var A=k[S];if(A.item===w||A.props.key===w.key||E===Cs(A.item.type)&&N===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,E=this.state.offset,N=E.left,k=E.top,S=E.height,b=E.width;return H.createElement("defs",null,H.createElement("clipPath",{id:w},H.createElement("rect",{x:N,y:k,height:S,width:b})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(E,N){var k=i2(N,2),S=k[0],b=k[1];return oe(oe({},E),{},Xe({},S,b.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(E,N){var k=i2(N,2),S=k[0],b=k[1];return oe(oe({},E),{},Xe({},S,b.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[w])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(w){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[w])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(w){var E=this.state,N=E.formattedGraphicalItems,k=E.activeItem;if(N&&N.length)for(var S=0,b=N.length;S<b;S++){var A=N[S],T=A.props,I=A.item,O=I.type.defaultProps!==void 0?oe(oe({},I.type.defaultProps),I.props):I.props,R=Cs(I.type);if(R==="Bar"){var G=(T.data||[]).find(function(K){return wce(w,K)});if(G)return{graphicalItem:A,payload:G}}else if(R==="RadialBar"){var U=(T.data||[]).find(function(K){return FE(w,K)});if(U)return{graphicalItem:A,payload:U}}else if(V0(A,k)||F0(A,k)||jf(A,k)){var Q=cde({graphicalItem:A,activeTooltipItem:k,itemData:O.data}),te=O.activeIndex===void 0?Q:O.activeIndex;return{graphicalItem:oe(oe({},A),{},{childIndex:te}),payload:jf(A,k)?O.data[Q]:A.props.data[Q]}}}return null}},{key:"render",value:function(){var w=this;if(!CA(this))return null;var E=this.props,N=E.children,k=E.className,S=E.width,b=E.height,A=E.style,T=E.compact,I=E.title,O=E.desc,R=o2(E,fme),G=Je(R,!1);if(T)return H.createElement(qT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement(Hb,zl({},G,{width:S,height:b,title:I,desc:O}),this.renderClipPath(),IA(N,this.renderMap)));if(this.props.accessibilityLayer){var U,Q;G.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,G.role=(Q=this.props.role)!==null&&Q!==void 0?Q:"application",G.onKeyDown=function(K){w.accessibilityManager.keyboardEvent(K)},G.onFocus=function(){w.accessibilityManager.focus()}}var te=this.parseEventsOfWrapper();return H.createElement(qT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement("div",zl({className:ut("recharts-wrapper",k),style:oe({position:"relative",cursor:"default",width:S,height:b},A)},te,{ref:function(X){w.container=X}}),H.createElement(Hb,zl({},G,{width:S,height:b,title:I,desc:O,style:Tme}),this.renderClipPath(),IA(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(D.Component);Xe(v,"displayName",r),Xe(v,"defaultProps",oe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Xe(v,"getDerivedStateFromProps",function(_,y){var g=_.dataKey,w=_.data,E=_.children,N=_.width,k=_.height,S=_.layout,b=_.stackOffset,A=_.margin,T=y.dataStartIndex,I=y.dataEndIndex;if(y.updateId===void 0){var O=u2(_);return oe(oe(oe({},O),{},{updateId:0},m(oe(oe({props:_},O),{},{updateId:0}),y)),{},{prevDataKey:g,prevData:w,prevWidth:N,prevHeight:k,prevLayout:S,prevStackOffset:b,prevMargin:A,prevChildren:E})}if(g!==y.prevDataKey||w!==y.prevData||N!==y.prevWidth||k!==y.prevHeight||S!==y.prevLayout||b!==y.prevStackOffset||!tc(A,y.prevMargin)){var R=u2(_),G={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},U=oe(oe({},c2(y,w,S)),{},{updateId:y.updateId+1}),Q=oe(oe(oe({},R),G),U);return oe(oe(oe({},Q),m(oe({props:_},Q),y)),{},{prevDataKey:g,prevData:w,prevWidth:N,prevHeight:k,prevLayout:S,prevStackOffset:b,prevMargin:A,prevChildren:E})}if(!Wb(E,y.prevChildren)){var te,K,X,se,Z=Gn(E,Mc),F=Z&&(te=(K=Z.props)===null||K===void 0?void 0:K.startIndex)!==null&&te!==void 0?te:T,de=Z&&(X=(se=Z.props)===null||se===void 0?void 0:se.endIndex)!==null&&X!==void 0?X:I,me=F!==T||de!==I,Ge=!dt(w),Me=Ge&&!me?y.updateId:y.updateId+1;return oe(oe({updateId:Me},m(oe(oe({props:_},y),{},{updateId:Me,dataStartIndex:F,dataEndIndex:de}),y)),{},{prevChildren:E,dataStartIndex:F,dataEndIndex:de})}return null}),Xe(v,"renderActiveDot",function(_,y,g){var w;return D.isValidElement(_)?w=D.cloneElement(_,y):rt(_)?w=_(y):w=H.createElement(J_,y),H.createElement(kt,{className:"recharts-active-dot",key:g},w)});var x=D.forwardRef(function(y,g){return H.createElement(v,zl({},y,{ref:g}))});return x.displayName=v.displayName,x},Vme=a4({chartName:"BarChart",GraphicalChild:ul,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:H0},{axisType:"yAxis",AxisComp:G0}],formatAxisMap:Ufe}),Fme=a4({chartName:"PieChart",GraphicalChild:Qs,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:L0},{axisType:"radiusAxis",AxisComp:M0}],formatAxisMap:Pie,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const f2=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],Ume={month:"Ms Atual","3m":"ltimos 3 Meses","6m":"ltimos 6 Meses","12m":"ltimos 12 Meses",year:"Ano Atual",all:"Todos"};function Bme(t){const e=new Date;switch(t){case"month":return new Date(e.getFullYear(),e.getMonth(),1);case"3m":{const r=new Date;return r.setMonth(r.getMonth()-3),r}case"6m":{const r=new Date;return r.setMonth(r.getMonth()-6),r}case"12m":{const r=new Date;return r.setMonth(r.getMonth()-12),r}case"year":return new Date(e.getFullYear(),0,1);case"all":return null}}const zme=()=>{const{batches:t,projects:e}=yr(),[r,n]=D.useState("month"),a=D.useMemo(()=>{const s=Bme(r),o=s?e.filter(v=>new Date(v.created_at)>=s):e,l=new Set(o.map(v=>v.id)),c=t.filter(v=>l.has(v.projectId));let u=0;c.forEach(v=>{v.phase!=="9.0"&&v.phase!=="9.1"&&u++});const d=o.reduce((v,x)=>{const _=c.find(w=>w.projectId===x.id),y=(_==null?void 0:_.phase)==="9.0";return x.client.status==="Concluido"||y?v+(x.total_estimated_value||0):v},0),f=c.filter(v=>parseFloat(v.phase)>=2.9&&v.phase!=="9.1").length,p=o.length,m=p>0?(f/p*100).toFixed(1):"0.0";return{totalSales:d,activeProjects:u,conversionRate:m,totalInPeriod:p}},[t,e,r]);return i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Perodo:"}),i.jsx("select",{value:r,onChange:s=>n(s.target.value),className:"rounded-lg border-slate-200 dark:border-slate-700 dark:bg-[#1a2632] text-sm font-medium text-slate-700 dark:text-slate-300 py-1.5 px-3 focus:ring-primary focus:border-primary",children:Object.entries(Ume).map(([s,o])=>i.jsx("option",{value:s,children:o},s))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wide",children:"Volume de Vendas"}),i.jsx("h3",{className:"text-2xl font-extrabold text-slate-800 dark:text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a.totalSales)})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wide",children:"Projetos Ativos"}),i.jsx("h3",{className:"text-2xl font-extrabold text-slate-800 dark:text-white",children:a.activeProjects}),i.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[a.totalInPeriod," projetos no perodo"]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-wide",children:"Taxa de Converso"}),i.jsxs("h3",{className:"text-2xl font-extrabold text-slate-800 dark:text-white",children:[a.conversionRate,"%"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Projetos que chegaram ao detalhamento"})]})]})]})},Wme=()=>{const{batches:t,projects:e,workflowConfig:r}=yr(),n=D.useMemo(()=>{const s={},o={1:"Pr-Venda",2:"Venda",3:"Medio",4:"Executivo",5:"Fabricao",6:"Entrega",7:"Montagem",8:"Ps Montagem",9:"Concluso"};return Object.keys(o).forEach(l=>s[l]=0),t.forEach(l=>{const c=r[l.phase];c&&s[c.stage]!==void 0&&s[c.stage]++}),Object.entries(s).map(([l,c])=>({name:o[l]||`Estgio ${l}`,count:c}))},[t,r]),a=D.useMemo(()=>{const s={};return e.forEach(o=>{const l=o.client.status==="Concluido",c=t.find(d=>d.projectId===o.id),u=(c==null?void 0:c.phase)==="9.0";if(l||u){const d=o.sellerName||"Sem Vendedor",f=o.total_estimated_value||0;s[d]=(s[d]||0)+f}}),Object.entries(s).map(([o,l])=>({name:o,value:l}))},[e,t]);return i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 min-h-[400px]",children:[i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Funil de Projetos"}),i.jsx("div",{className:"h-[300px] w-full",children:i.jsx(Tk,{width:"100%",height:"100%",children:i.jsxs(Vme,{data:n,layout:"vertical",margin:{top:5,right:30,left:40,bottom:5},children:[i.jsx(z$,{strokeDasharray:"3 3",horizontal:!1}),i.jsx(H0,{type:"number"}),i.jsx(G0,{dataKey:"name",type:"category",width:100,style:{fontSize:"12px"}}),i.jsx(Ta,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#fff"},itemStyle:{color:"#fff"}}),i.jsx(ul,{dataKey:"count",fill:"#8884d8",radius:[0,4,4,0],name:"Projetos"})]})})})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 min-h-[400px]",children:[i.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Vendas por Vendedor"}),i.jsx("div",{className:"h-[300px] w-full flex justify-center",children:a.length>0?i.jsx(Tk,{width:"100%",height:"100%",children:i.jsxs(Fme,{children:[i.jsx(Qs,{data:a,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:o})=>`${s} ${(o*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:a.map((s,o)=>i.jsx(w0,{fill:f2[o%f2.length]},`cell-${o}`))}),i.jsx(Ta,{formatter:s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)})]})}):i.jsx("div",{className:"h-full flex items-center justify-center text-slate-400",children:"Sem dados de vendas ainda."})})]})]})},h2=()=>{const{batches:t,workflowConfig:e,currentUser:r,projects:n,setCurrentProjectId:a,assistanceTickets:s,assistanceWorkflow:o,companySettings:l}=yr(),c=D.useMemo(()=>{if(!r)return[];const u=t.filter(p=>{const m=e[p.phase];return!m||p.phase==="9.0"||p.phase==="9.1"?!1:r.role==="Admin"||r.role==="Proprietario"||m.ownerRole===r.role}).map(p=>{const m=n.find(x=>x.id===p.projectId),v=e[p.phase];return{id:p.id,projectId:p.projectId,phase:p.phase,lastUpdated:new Date(p.lastUpdated),sla:v.sla,stepLabel:v.label,clientName:(m==null?void 0:m.client.name)||"Desconhecido",type:"project"}}),d=(s||[]).filter(p=>p.status==="10.8"||p.status==="10.7"?!1:r.role==="Admin"||r.role==="Proprietario"||r.name===p.assemblerName).map(p=>{const m=o.find(x=>x.id===p.status),v=n.find(x=>x.client.id===p.clientId);return{id:p.id,projectId:(v==null?void 0:v.id)||null,phase:p.status,lastUpdated:new Date(p.updatedAt||p.createdAt),sla:(m==null?void 0:m.sla)||0,stepLabel:(m==null?void 0:m.label)||p.status,clientName:p.clientName,type:"assistance"}});return[...u,...d].sort((p,m)=>{const v=ts(p.lastUpdated,p.sla).getTime(),x=ts(m.lastUpdated,m.sla).getTime();return v-x})},[t,e,r,s,o,n]);return i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#101922] overflow-y-auto p-3 md:p-6",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:["Ol, ",r==null?void 0:r.name]}),i.jsx("p",{className:"text-slate-500",children:"Aqui est o resumo das suas atividades pendentes."})]}),i.jsx(zme,{}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 items-start",children:[i.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-[#1a2632] rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col max-h-[60vh] lg:max-h-[calc(100vh-240px)]",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-[#1a2632]",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Suas Tarefas"}),i.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded uppercase tracking-wide",children:"Prioritrias"})]}),i.jsx("div",{className:"overflow-y-auto p-2 space-y-2",children:c.length===0?i.jsx("div",{className:"p-8 text-center text-slate-400",children:"Tudo em dia!"}):c.map(u=>{const d=ts(u.lastUpdated,u.sla,l==null?void 0:l.holidays),p=zo(new Date,d,l==null?void 0:l.holidays);return i.jsxs("div",{className:"p-3 bg-white dark:bg-[#1e293b] border border-slate-100 dark:border-slate-700/50 rounded-xl hover:shadow-md transition-all group cursor-pointer",onClick:()=>u.projectId&&a(u.projectId),children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`size-8 rounded-full flex items-center justify-center text-xs font-bold ${u.type==="assistance"?"bg-orange-100 text-orange-600 dark:bg-orange-900/30":"bg-slate-100 dark:bg-slate-800 text-slate-500"}`,children:u.type==="assistance"?i.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"handyman"}):u.clientName.charAt(0)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-sm text-slate-800 dark:text-white line-clamp-1",children:u.clientName}),i.jsx("p",{className:"text-[10px] text-slate-400",children:u.type==="assistance"?"Assistncia Tcnica":"Projeto"})]})]}),i.jsx("div",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${p<0?"bg-rose-100 text-rose-600":p<=1?"bg-orange-100 text-orange-600":"bg-emerald-100 text-emerald-600"}`,children:p<0?`${Math.abs(p)}d atraso`:p===0?"Hoje":`${p} dias`})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-xs font-medium text-primary bg-primary/5 px-2 py-0.5 rounded",children:u.stepLabel}),i.jsx("span",{className:"text-[10px] text-slate-400 group-hover:text-primary transition-colors",children:"Abrir "})]})]},u.id)})})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx(Wme,{})})]})]})};function Jt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ps(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Co(t,e){const r=Jt(t);return isNaN(e)?ps(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function s4(t,e){const r=Jt(t);if(isNaN(e))return ps(t,NaN);if(!e)return r;const n=r.getDate(),a=ps(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return n>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}function qme(t){const e=Jt(t).getDay();return e===0||e===6}const i4=6048e5,Hme=864e5;let Gme={};function nh(){return Gme}function Is(t,e){var l,c,u,d;const r=nh(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Jt(t),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function pg(t){return Is(t,{weekStartsOn:1})}function o4(t){const e=Jt(t),r=e.getFullYear(),n=ps(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=pg(n),s=ps(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=pg(s);return e.getTime()>=a.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function mg(t){const e=Jt(t);return e.setHours(0,0,0,0),e}function p2(t){const e=Jt(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function l4(t,e){const r=mg(t),n=mg(e),a=+r-p2(r),s=+n-p2(n);return Math.round((a-s)/Hme)}function Kme(t){const e=o4(t),r=ps(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),pg(r)}function c4(t,e){const r=e*7;return Co(t,r)}function yv(t,e){const r=mg(t),n=mg(e);return+r==+n}function Yme(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Xme(t){if(!Yme(t)&&typeof t!="number")return!1;const e=Jt(t);return!isNaN(Number(e))}function ep(t,e){const r=Jt(t),n=Jt(e),a=m2(r,n),s=Math.abs(l4(r,n));r.setDate(r.getDate()-a*s);const o=+(m2(r,n)===-a),l=a*(s-o);return l===0?0:l}function m2(t,e){const r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function Qme(t){const e=Jt(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function mw(t,e){const r=Jt(t.start),n=Jt(t.end);let a=+r>+n;const s=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=s;)c.push(Jt(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?c.reverse():c}function Jme(t){const e=Jt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Zme(t){const e=Jt(t),r=ps(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function wv(t,e){var l,c;const r=nh(),n=r.weekStartsOn??((c=(l=r.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,a=Jt(t),s=a.getDay(),o=(s<n?-7:0)+6-(s-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}const ege={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tge=(t,e,r)=>{let n;const a=ege[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function sc(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const rge={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nge={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},age={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sge={date:sc({formats:rge,defaultWidth:"full"}),time:sc({formats:nge,defaultWidth:"full"}),dateTime:sc({formats:age,defaultWidth:"full"})},ige={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oge=(t,e,r,n)=>ige[t];function Za(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const lge={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uge={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dge={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hge={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pge=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},mge={ordinalNumber:pge,era:Za({values:lge,defaultWidth:"wide"}),quarter:Za({values:cge,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Za({values:uge,defaultWidth:"wide"}),day:Za({values:dge,defaultWidth:"wide"}),dayPeriod:Za({values:fge,defaultWidth:"wide",formattingValues:hge,defaultFormattingWidth:"wide"})};function es(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?xge(l,f=>f.test(o)):gge(l,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function gge(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function xge(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function u4(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const vge=/^(\d+)(th|st|nd|rd)?/i,bge=/\d+/i,yge={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},wge={any:[/^b/i,/^(a|c)/i]},_ge={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Nge={any:[/1/i,/2/i,/3/i,/4/i]},jge={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Sge={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Age={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kge={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ege={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tge={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cge={ordinalNumber:u4({matchPattern:vge,parsePattern:bge,valueCallback:t=>parseInt(t,10)}),era:es({matchPatterns:yge,defaultMatchWidth:"wide",parsePatterns:wge,defaultParseWidth:"any"}),quarter:es({matchPatterns:_ge,defaultMatchWidth:"wide",parsePatterns:Nge,defaultParseWidth:"any",valueCallback:t=>t+1}),month:es({matchPatterns:jge,defaultMatchWidth:"wide",parsePatterns:Sge,defaultParseWidth:"any"}),day:es({matchPatterns:Age,defaultMatchWidth:"wide",parsePatterns:kge,defaultParseWidth:"any"}),dayPeriod:es({matchPatterns:Ege,defaultMatchWidth:"any",parsePatterns:Tge,defaultParseWidth:"any"})},Pge={code:"en-US",formatDistance:tge,formatLong:sge,formatRelative:oge,localize:mge,match:Cge,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ige(t){const e=Jt(t);return l4(e,Zme(e))+1}function Oge(t){const e=Jt(t),r=+pg(e)-+Kme(e);return Math.round(r/i4)+1}function d4(t,e){var d,f,p,m;const r=Jt(t),n=r.getFullYear(),a=nh(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(p=a.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=ps(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=Is(o,e),c=ps(t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=Is(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Dge(t,e){var l,c,u,d;const r=nh(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=d4(t,e),s=ps(t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),Is(s,e)}function Rge(t,e){const r=Jt(t),n=+Is(r,e)-+Dge(r,e);return Math.round(n/i4)+1}function At(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const ci={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return At(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):At(r+1,2)},d(t,e){return At(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return At(t.getHours()%12||12,e.length)},H(t,e){return At(t.getHours(),e.length)},m(t,e){return At(t.getMinutes(),e.length)},s(t,e){return At(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return At(a,e.length)}},yl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},g2={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return ci.y(t,e)},Y:function(t,e,r,n){const a=d4(t,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return At(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):At(s,e.length)},R:function(t,e){const r=o4(t);return At(r,e.length)},u:function(t,e){const r=t.getFullYear();return At(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return At(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return At(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return ci.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return At(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=Rge(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):At(a,e.length)},I:function(t,e,r){const n=Oge(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):At(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ci.d(t,e)},D:function(t,e,r){const n=Ige(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):At(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return At(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return At(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return At(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=yl.noon:n===0?a=yl.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=yl.evening:n>=12?a=yl.afternoon:n>=4?a=yl.morning:a=yl.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ci.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ci.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):At(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):At(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ci.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ci.s(t,e)},S:function(t,e){return ci.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return v2(n);case"XXXX":case"XX":return yo(n);case"XXXXX":case"XXX":default:return yo(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return v2(n);case"xxxx":case"xx":return yo(n);case"xxxxx":case"xxx":default:return yo(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+x2(n,":");case"OOOO":default:return"GMT"+yo(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+x2(n,":");case"zzzz":default:return"GMT"+yo(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return At(n,e.length)},T:function(t,e,r){const n=t.getTime();return At(n,e.length)}};function x2(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+At(s,2)}function v2(t,e){return t%60===0?(t>0?"-":"+")+At(Math.abs(t)/60,2):yo(t,e)}function yo(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=At(Math.trunc(n/60),2),s=At(n%60,2);return r+a+e+s}const b2=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},f4=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Mge=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return b2(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",b2(n,e)).replace("{{time}}",f4(a,e))},$ge={p:f4,P:Mge},Lge=/^D+$/,Vge=/^Y+$/,Fge=["D","DD","YY","YYYY"];function Uge(t){return Lge.test(t)}function Bge(t){return Vge.test(t)}function zge(t,e,r){const n=Wge(t,e,r);if(console.warn(n),Fge.includes(t))throw new RangeError(n)}function Wge(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const qge=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hge=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gge=/^'([^]*?)'?$/,Kge=/''/g,Yge=/[a-zA-Z]/;function ur(t,e,r){var d,f,p,m,v,x,_,y;const n=nh(),a=(r==null?void 0:r.locale)??n.locale??Pge,s=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((y=(_=n.locale)==null?void 0:_.options)==null?void 0:y.weekStartsOn)??0,l=Jt(t);if(!Xme(l))throw new RangeError("Invalid time value");let c=e.match(Hge).map(g=>{const w=g[0];if(w==="p"||w==="P"){const E=$ge[w];return E(g,a.formatLong)}return g}).join("").match(qge).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const w=g[0];if(w==="'")return{isToken:!1,value:Xge(g)};if(g2[w])return{isToken:!0,value:g};if(w.match(Yge))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(g=>{if(!g.isToken)return g.value;const w=g.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Bge(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Uge(w))&&zge(w,e,String(t));const E=g2[w[0]];return E(l,w,a.localize,u)}).join("")}function Xge(t){const e=t.match(Gge);return e?e[1].replace(Kge,"'"):t}function Qge(t,e){const r=Jt(t),n=Jt(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function Jge(t,e){return Co(t,-1)}function Zge(t,e){return s4(t,-1)}function e0e(t,e){return c4(t,-1)}const t0e={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},r0e=(t,e,r)=>{let n;const a=t0e[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",String(e)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"em "+n:"h "+n:n},n0e={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},a0e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},s0e={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},i0e={date:sc({formats:n0e,defaultWidth:"full"}),time:sc({formats:a0e,defaultWidth:"full"}),dateTime:sc({formats:s0e,defaultWidth:"full"})},o0e={lastWeek:t=>{const e=t.getDay();return"'"+(e===0||e===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},l0e=(t,e,r,n)=>{const a=o0e[t];return typeof a=="function"?a(e):a},c0e={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},u0e={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},d0e={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},f0e={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},h0e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},p0e={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},m0e=(t,e)=>{const r=Number(t);return(e==null?void 0:e.unit)==="week"?r+"":r+""},g0e={ordinalNumber:m0e,era:Za({values:c0e,defaultWidth:"wide"}),quarter:Za({values:u0e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Za({values:d0e,defaultWidth:"wide"}),day:Za({values:f0e,defaultWidth:"wide"}),dayPeriod:Za({values:h0e,defaultWidth:"wide",formattingValues:p0e,defaultFormattingWidth:"wide"})},x0e=/^(\d+)[o]?/i,v0e=/\d+/i,b0e={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},y0e={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},w0e={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},_0e={any:[/1/i,/2/i,/3/i,/4/i]},N0e={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},j0e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},S0e={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},A0e={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},k0e={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},E0e={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},T0e={ordinalNumber:u4({matchPattern:x0e,parsePattern:v0e,valueCallback:t=>parseInt(t,10)}),era:es({matchPatterns:b0e,defaultMatchWidth:"wide",parsePatterns:y0e,defaultParseWidth:"any"}),quarter:es({matchPatterns:w0e,defaultMatchWidth:"wide",parsePatterns:_0e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:es({matchPatterns:N0e,defaultMatchWidth:"wide",parsePatterns:j0e,defaultParseWidth:"any"}),day:es({matchPatterns:S0e,defaultMatchWidth:"wide",parsePatterns:A0e,defaultParseWidth:"any"}),dayPeriod:es({matchPatterns:k0e,defaultMatchWidth:"any",parsePatterns:E0e,defaultParseWidth:"any"})},ua={code:"pt-BR",formatDistance:r0e,formatLong:i0e,formatRelative:l0e,localize:g0e,match:T0e,options:{weekStartsOn:0,firstWeekContainsDate:1}},Ga=Array.from({length:17},(t,e)=>e+6),C0e=({date:t,view:e,appointments:r,types:n,onDateChange:a,onViewChange:s,onSelectSlot:o,onSelectAppointment:l})=>{const c=()=>{a(e==="month"?Zge(t):e==="week"?e0e(t):Jge(t))},u=()=>{a(e==="month"?s4(t,1):e==="week"?c4(t,1):Co(t,1))},d=(()=>{if(e==="month")return ur(t,"MMMM yyyy",{locale:ua});if(e==="week"){const N=Is(t),k=wv(t);return`${ur(N,"dd MMM",{locale:ua})}  ${ur(k,"dd MMM yyyy",{locale:ua})}`}return ur(t,"EEEE, dd 'de' MMMM yyyy",{locale:ua})})(),f=Jme(t),p=Qme(f),m=Is(f),v=wv(p),x=mw({start:m,end:v}),_=Is(t),y=mw({start:_,end:wv(t)}),g=["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],w=N=>r.filter(k=>yv(new Date(k.start),N)),E=N=>{const k=n.find(S=>S.id===N);return k?k.color:"#64748b"};return i.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-800 animate-fade-in overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-4 p-4 border-b border-slate-200 dark:border-slate-800",children:[i.jsx("div",{className:"flex bg-slate-100 dark:bg-slate-800 rounded-lg p-0.5",children:["month","week","day"].map(N=>i.jsx("button",{onClick:()=>s(N),className:`px-3 py-1.5 text-xs font-bold rounded-md transition-all capitalize ${e===N?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-200"}`,children:N==="month"?"Ms":N==="week"?"Semana":"Dia"},N))}),i.jsxs("div",{className:"flex items-center gap-4 flex-1 justify-between",children:[i.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 rounded-lg p-0.5",children:[i.jsx("button",{onClick:c,className:"p-1 hover:bg-white dark:hover:bg-slate-700 rounded-md shadow-sm transition-all",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_left"})}),i.jsx("button",{onClick:()=>a(new Date),className:"px-3 text-xs font-bold text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 rounded-md transition-all",children:"Hoje"}),i.jsx("button",{onClick:u,className:"p-1 hover:bg-white dark:hover:bg-slate-700 rounded-md shadow-sm transition-all",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"})})]}),i.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent capitalize",children:d})]})]}),e==="month"&&i.jsxs("div",{className:"flex-1 grid grid-cols-7 grid-rows-[auto_1fr] h-full overflow-hidden",children:[g.map(N=>i.jsx("div",{className:"py-2 text-center text-xs font-bold text-slate-500 uppercase border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50",children:N},N)),i.jsx("div",{className:"col-span-7 grid grid-cols-7 auto-rows-fr overflow-y-auto",children:x.map(N=>{const k=w(N),S=Qge(N,f),b=yv(N,new Date);return i.jsxs("div",{className:`
                                        min-h-[100px] border-b border-r border-slate-100 dark:border-slate-800 p-1 flex flex-col gap-1 transition-colors group
                                        ${S?"bg-white dark:bg-[#1a2632]":"bg-slate-50/50 dark:bg-slate-900/50 text-slate-400"}
                                        hover:bg-slate-50 dark:hover:bg-slate-800/30
                                    `,onClick:()=>o(N),children:[i.jsx("span",{className:`
                                         text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full ml-auto mb-1
                                         ${b?"bg-primary text-white shadow-sm ring-2 ring-primary/20":"text-slate-700 dark:text-slate-400 group-hover:bg-slate-200 dark:group-hover:bg-slate-700"}
                                     `,children:ur(N,"d")}),i.jsx("div",{className:"flex-1 flex flex-col gap-1 overflow-y-auto max-h-[100px] custom-scrollbar",children:k.map(A=>i.jsxs("button",{onClick:T=>{T.stopPropagation(),l(A)},className:"text-left px-2 py-1 rounded text-[10px] font-bold text-white shadow-sm hover:brightness-110 active:scale-95 transition-all truncate",style:{backgroundColor:E(A.typeId)},children:[ur(new Date(A.start),"HH:mm")," ",A.title]},A.id))})]},N.toISOString())})})]}),e==="week"&&i.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-[60px_1fr] border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 shrink-0",children:[i.jsx("div",{className:"py-2"}),i.jsx("div",{className:"grid grid-cols-7",children:y.map(N=>{const k=yv(N,new Date);return i.jsxs("div",{className:"py-2 text-center border-l border-slate-200 dark:border-slate-800",children:[i.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase",children:ur(N,"EEE",{locale:ua})}),i.jsx("div",{className:`text-sm font-extrabold mt-0.5 w-7 h-7 flex items-center justify-center rounded-full mx-auto ${k?"bg-primary text-white":"text-slate-700 dark:text-slate-300"}`,children:ur(N,"d")})]},N.toISOString())})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto relative bg-white dark:bg-[#1a2632]",children:i.jsxs("div",{className:"grid grid-cols-[60px_1fr] min-h-full",children:[i.jsx("div",{className:"relative",children:Ga.map(N=>i.jsx("div",{className:"h-16 border-b border-slate-100 dark:border-slate-800 flex items-start justify-end pr-2 pt-1",children:i.jsxs("span",{className:"text-[10px] font-bold text-slate-400",children:[String(N).padStart(2,"0"),":00"]})},N))}),i.jsxs("div",{className:"grid grid-cols-7 relative",children:[Ga.map(N=>i.jsx("div",{className:"absolute left-0 right-0 h-16 border-b border-slate-100 dark:border-slate-800 pointer-events-none",style:{top:(N-Ga[0])*64}},N)),y.map((N,k)=>{const S=w(N);return i.jsx("div",{className:"relative h-full border-l border-slate-100 dark:border-slate-800 hover:bg-slate-50/30 dark:hover:bg-slate-800/10 cursor-pointer",onClick:b=>{const A=b.currentTarget.getBoundingClientRect(),T=b.clientY-A.top,I=Math.floor(T/64)+Ga[0],O=new Date(N);O.setHours(I,0,0,0),o(O)},children:S.map(b=>{const A=new Date(b.start),I=(A.getHours()+A.getMinutes()/60-Ga[0])*64,O=Math.max(15,b.durationMinutes||60)/60*64;return i.jsxs("button",{onClick:R=>{R.stopPropagation(),l(b)},className:"absolute left-0.5 right-0.5 z-10 p-1.5 rounded-lg text-[10px] font-bold text-white shadow-md hover:brightness-110 active:scale-[0.98] transition-all overflow-hidden border border-white/20 flex flex-col items-start",style:{top:Math.max(0,I),height:O,backgroundColor:E(b.typeId)},children:[i.jsxs("div",{className:"flex items-center gap-1 mb-0.5 opacity-90",children:[i.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"schedule"}),ur(A,"HH:mm")]}),i.jsx("div",{className:"font-extrabold leading-tight break-words text-left",children:b.title})]},b.id)})},N.toISOString())})]})]})})]}),e==="day"&&i.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:i.jsx("div",{className:"flex-1 overflow-y-auto relative bg-white dark:bg-[#1a2632]",children:i.jsxs("div",{className:"grid grid-cols-[60px_1fr] min-h-full",children:[i.jsx("div",{className:"relative",children:Ga.map(N=>i.jsx("div",{className:"h-24 border-b border-slate-100 dark:border-slate-800 flex items-start justify-end pr-2 pt-1 pt-2",children:i.jsxs("span",{className:"text-xs font-extrabold text-slate-400",children:[String(N).padStart(2,"0"),":00"]})},N))}),i.jsxs("div",{className:"relative border-l border-slate-100 dark:border-slate-800 hover:bg-slate-50/30 dark:hover:bg-slate-800/10 cursor-pointer",onClick:N=>{const k=N.currentTarget.getBoundingClientRect(),S=N.clientY-k.top,b=Math.floor(S/96)+Ga[0],A=new Date(t);A.setHours(b,0,0,0),o(A)},children:[Ga.map(N=>i.jsx("div",{className:"absolute left-0 right-0 h-24 border-b border-slate-100 dark:border-slate-800 pointer-events-none",style:{top:(N-Ga[0])*96}},N)),(()=>{const N=w(t);return N.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-300 dark:text-slate-700 opacity-50 bg-slate-50/20 dark:bg-slate-900/10",children:[i.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"event_available"}),i.jsx("p",{className:"text-sm font-medium",children:"Nenhum compromisso para hoje"})]}):N.map(k=>{const S=new Date(k.start),A=(S.getHours()+S.getMinutes()/60-Ga[0])*96,T=Math.max(15,k.durationMinutes||60)/60*96;return i.jsxs("button",{onClick:I=>{I.stopPropagation(),l(k)},className:"absolute left-2 right-2 z-10 p-3 rounded-xl text-xs font-bold text-white shadow-lg hover:brightness-110 active:scale-[0.99] transition-all overflow-hidden border border-white/20 flex flex-col items-start gap-1",style:{top:Math.max(0,A),height:T,backgroundColor:E(k.typeId)},children:[i.jsxs("div",{className:"flex items-center gap-1.5 opacity-90 px-1.5 py-0.5 bg-black/10 rounded-full text-[10px]",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),ur(S,"HH:mm"),"  ",k.durationMinutes,"min"]}),i.jsx("div",{className:"text-sm font-black leading-tight break-words text-left",children:k.title}),T>60&&k.notes&&i.jsx("p",{className:"text-[10px] opacity-80 mt-1 line-clamp-2 text-left font-normal",children:k.notes})]},k.id)})})()]})]})})})]})},P0e=({onSchedule:t})=>{const{batches:e,projects:r,workflowConfig:n,currentUser:a}=yr(),[s,o]=D.useState(!0),[l,c]=D.useState(!1),u=D.useMemo(()=>{const f=new Date;return e.map(p=>{const m=r.find(w=>w.id===p.projectId),v=n[p.phase];if(!v||!m)return null;const x=new Date(p.lastUpdated),_=new Date(x.getTime()+v.sla*24*60*60*1e3),y=_.getTime()-f.getTime(),g=Math.ceil(y/(1e3*60*60*24));return{batch:p,project:m,step:v,deadline:_,diffDays:g}}).filter(p=>!p||(a==null?void 0:a.role)==="Vendedor"&&p.project.sellerId!==a.id||p.step.stage===9?!1:p.diffDays<=3).sort((p,m)=>p.diffDays-m.diffDays)},[e,r,n,a]),d=i.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:u.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-400 text-sm",children:[i.jsx("span",{className:"material-symbols-outlined text-3xl mb-2 opacity-50",children:"task_alt"}),i.jsx("p",{children:"Nenhuma tarefa pendente para os prximos 3 dias."})]}):u.map(({batch:f,project:p,step:m,diffDays:v})=>i.jsxs("div",{className:"bg-white dark:bg-[#1e2936] rounded-lg border border-slate-200 dark:border-slate-700 p-3 shadow-sm hover:shadow-md transition-shadow group",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"text-xs font-bold px-2 py-0.5 rounded bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700",children:m.label}),i.jsx("span",{className:`text-xs font-bold ${v<0?"text-rose-500":v===0?"text-orange-500":"text-emerald-500"}`,children:v<0?`${Math.abs(v)}d atrasado`:v===0?"Hoje":`${v}d restantes`})]}),i.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-lg mb-1 leading-tight",children:p.client.name}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-3",children:f.name==="Projeto Geral"?"Projeto Completo":f.name}),i.jsxs("button",{onClick:()=>t({id:f.id,title:`${m.label} - ${f.name==="Projeto Geral"?"Projeto Completo":f.name}`,clientName:p.client.name,projectId:p.id}),className:"w-full py-1.5 flex items-center justify-center gap-2 bg-primary/10 hover:bg-primary/20 text-primary rounded-lg text-xs font-bold transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"event"}),"Agendar"]})]},f.id))});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`hidden md:flex flex-col bg-white dark:bg-[#1a2632] border-l border-slate-200 dark:border-slate-800 shadow-sm transition-all duration-300 ${s?"w-72":"w-12"}`,children:[i.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 shrink-0",children:[s&&i.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 text-sm",children:"Tarefas Pendentes"}),i.jsx("button",{onClick:()=>o(!s),className:"p-1 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-500 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:s?"chevron_right":"chevron_left"})})]}),s&&d,!s&&i.jsxs("div",{className:"flex-1 flex flex-col items-center pt-4 gap-4",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"task"}),u.length>0&&i.jsx("span",{className:"bg-rose-500 text-white text-[10px] font-bold size-5 flex items-center justify-center rounded-full",children:u.length})]})]}),i.jsxs("div",{className:"md:hidden",children:[!l&&i.jsxs("button",{onClick:()=>c(!0),className:"fixed bottom-6 right-6 z-50 bg-primary text-white rounded-full p-3 shadow-lg hover:bg-primary-600 transition-all active:scale-95",children:[i.jsx("span",{className:"material-symbols-outlined",children:"task"}),u.length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-rose-500 text-white text-[10px] font-bold size-5 flex items-center justify-center rounded-full",children:u.length})]}),l&&i.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end",onClick:()=>c(!1),children:[i.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm"}),i.jsxs("div",{className:"relative bg-white dark:bg-[#1a2632] rounded-t-2xl shadow-2xl max-h-[70vh] flex flex-col animate-slide-up",onClick:f=>f.stopPropagation(),children:[i.jsx("div",{className:"flex justify-center py-2 shrink-0",children:i.jsx("div",{className:"w-10 h-1 bg-slate-300 dark:bg-slate-600 rounded-full"})}),i.jsxs("div",{className:"flex items-center justify-between px-4 pb-3 border-b border-slate-200 dark:border-slate-800 shrink-0",children:[i.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 text-sm",children:"Tarefas Pendentes"}),i.jsx("button",{onClick:()=>c(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:i.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"close"})})]}),d]})]})]})]})},I0e=({isOpen:t,onClose:e,initialDate:r,initialTask:n,editingAppointment:a})=>{const{appointmentTypes:s,addAppointment:o,updateAppointment:l,deleteAppointment:c}=e_(),{projects:u,currentUser:d}=yr(),f=D.useMemo(()=>{const R=new Map;return u.forEach(G=>{G.client&&R.set(G.client.id,G.client)}),Array.from(R.values())},[u]),[p,m]=D.useState(""),[v,x]=D.useState(""),[_,y]=D.useState("09:00"),[g,w]=D.useState(60),[E,N]=D.useState(""),[k,S]=D.useState(""),[b,A]=D.useState("");D.useEffect(()=>{var R;if(t)if(a){m(a.title);const G=new Date(a.start);x(G.toISOString().split("T")[0]),y(G.toTimeString().slice(0,5)),w(a.durationMinutes),N(a.typeId),S(a.clientId||""),A(a.notes||"")}else{if(m(n?`Reunio: ${n.title}`:""),x((r||new Date).toISOString().split("T")[0]),!a&&!r){const U=new Date;U.setMinutes(0),U.setHours(U.getHours()+1),y(U.toTimeString().slice(0,5))}if(w(30),N(((R=s[0])==null?void 0:R.id)||""),n){const U=f.find(Q=>Q.name===n.clientName);U&&S(U.id)}else S("");A(n?`Agendamento referente  tarefa: ${n.title}`:"")}},[t,a,r,n,s,f]);const T=async R=>{if(R.preventDefault(),!d){alert("Sesso invlida. Por favor, faa login novamente.");return}if(!p||!v||!_||!E){alert("Por favor, preencha todos os campos obrigatrios.");return}try{const[G,U,Q]=v.split("-").map(Number),[te,K]=_.split(":").map(Number),X=new Date(G,U-1,Q,te,K);if(isNaN(X.getTime()))throw new Error("Data ou horrio invlido.");const se=new Date(X.getTime()+g*6e4),Z=f.find(de=>de.id===k),F={title:p,start:X.toISOString(),end:se.toISOString(),durationMinutes:g,typeId:E,clientId:Z==null?void 0:Z.id,clientName:Z==null?void 0:Z.name,userId:d.id,notes:b||"",linkedTaskId:(n==null?void 0:n.id)??(a==null?void 0:a.linkedTaskId)};console.log("AppointmentModal: Sending data",F),a?await l(a.id,F):await o(F),e()}catch(G){console.error("Erro ao agendar:",G);const U=G instanceof Error?G.message:"Erro desconhecido";alert(`Falha ao agendar: ${U}`)}},I=()=>{a&&confirm("Tem certeza que deseja excluir este agendamento?")&&(c(a.id),e())};if(!t)return null;const O=s.find(R=>R.id===E);return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] rounded-xl shadow-xl w-full max-w-lg overflow-hidden border border-slate-200 dark:border-slate-800 animate-scale-in",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-100 dark:border-slate-800",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:a?"Editar Agendamento":"Novo Agendamento"}),i.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Ttulo"}),i.jsx("input",{type:"text",required:!0,value:p,onChange:R=>m(R.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-sm focus:ring-primary focus:border-primary",placeholder:"Ex: Reunio de Apresentao"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Tipo de Compromisso"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(R=>i.jsx("button",{type:"button",onClick:()=>N(R.id),className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all border ${E===R.id?"border-transparent text-white shadow-sm ring-2 ring-offset-1 dark:ring-offset-[#1a2632]":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-300"}`,style:{backgroundColor:E===R.id?R.color:void 0,borderColor:E===R.id?R.color:void 0,"--tw-ring-color":R.color},children:R.name},R.id))})]}),((O==null?void 0:O.requireClient)||k)&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Cliente"}),i.jsxs("select",{value:k,onChange:R=>S(R.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-sm",children:[i.jsx("option",{value:"",children:"Selecione um cliente..."}),f.map(R=>i.jsx("option",{value:R.id,children:R.name},R.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Data"}),i.jsx("input",{type:"date",required:!0,value:v,onChange:R=>x(R.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Horrio"}),i.jsx("input",{type:"time",required:!0,value:_,onChange:R=>y(R.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-sm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Durao"}),i.jsxs("select",{value:g,onChange:R=>w(Number(R.target.value)),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-sm",children:[i.jsx("option",{value:15,children:"15 minutos"}),i.jsx("option",{value:30,children:"30 minutos"}),i.jsx("option",{value:60,children:"1 hora"}),i.jsx("option",{value:90,children:"1,5 horas"}),i.jsx("option",{value:120,children:"2 horas"}),i.jsx("option",{value:150,children:"2,5 horas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Observaes"}),i.jsx("textarea",{value:b,onChange:R=>A(R.target.value),rows:3,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-sm"})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-800",children:[a&&i.jsx("button",{type:"button",onClick:I,className:"mr-auto text-rose-500 hover:text-rose-700 text-sm font-medium px-3 py-2 rounded-lg hover:bg-rose-50 transition-colors",children:"Excluir"}),i.jsx("button",{type:"button",onClick:e,className:"text-slate-600 hover:text-slate-800 font-medium px-4 py-2 rounded-lg hover:bg-slate-100 transition-colors text-sm",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary-600 text-white font-bold px-6 py-2 rounded-lg shadow-sm transition-colors text-sm",children:a?"Salvar Alteraes":"Agendar"})]})]})]})})},O0e=()=>{var b;const{appointments:t,appointmentTypes:e}=e_(),{currentUser:r,users:n}=yr(),[a,s]=D.useState(new Date),[o,l]=D.useState("month"),[c,u]=D.useState(!1),[d,f]=D.useState(void 0),[p,m]=D.useState(null),[v,x]=D.useState(null),[_,y]=D.useState(r!=null&&r.id?[r.id]:[]),g=["Admin","Proprietario","Gerente","SuperAdmin"].includes((r==null?void 0:r.role)||""),w=D.useMemo(()=>g?_.length===0?[]:t.filter(A=>_.includes(A.userId)):t.filter(A=>A.userId===(r==null?void 0:r.id)),[t,_,g,r]),E=A=>{f(A),m(null),x(null),u(!0)},N=A=>{m(A),x(null),f(void 0),u(!0)},k=A=>{x(A),m(null),f(new Date),u(!0)},S=()=>{u(!1),m(null),x(null),f(void 0)};return i.jsxs("div",{className:"flex h-full bg-slate-50 dark:bg-[#101922] relative overflow-hidden",children:[i.jsxs("div",{className:"flex-1 flex flex-col min-w-0 p-4 overflow-hidden",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Agenda"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Gerencie seus compromissos e tarefas."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[g&&i.jsxs("div",{className:"relative group/dropdown",children:[i.jsxs("button",{onClick:()=>{const A=document.getElementById("agenda-user-dropdown");A&&A.classList.toggle("hidden")},className:"flex items-center gap-2 bg-white dark:bg-slate-800 px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all",children:[i.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"group"}),i.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:_.length===n.length?"Todas Agendas":_.length===1?((b=n.find(A=>A.id===_[0]))==null?void 0:b.name)||"Uma Agenda":`${_.length} Agendas`}),i.jsx("span",{className:"material-symbols-outlined text-slate-400 group-hover/dropdown:text-primary transition-colors",children:"keyboard_arrow_down"})]}),i.jsxs("div",{id:"agenda-user-dropdown",className:"hidden absolute right-0 top-full mt-2 w-64 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-800 overflow-hidden z-50 animate-fade-in origin-top-right backdrop-blur-md bg-white/90 dark:bg-slate-800/90",children:[i.jsxs("div",{className:"p-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:[i.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors group/item",children:[i.jsx("div",{className:"relative flex items-center justify-center",children:i.jsx("input",{type:"checkbox",checked:_.length===n.length,onChange:A=>{A.target.checked?y(n.map(T=>T.id)):y([(r==null?void 0:r.id)||""])},className:"w-5 h-5 rounded border-slate-300 dark:border-slate-600 text-primary focus:ring-primary transition-all cursor-pointer"})}),i.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 group-hover/item:text-primary transition-colors",children:"Ver Todas"})]}),i.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-700 my-1 mx-2"}),n.map(A=>i.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl transition-all cursor-pointer group/item
                                                    ${_.includes(A.id)?"bg-primary/5":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsx("div",{className:"relative flex items-center justify-center",children:i.jsx("input",{type:"checkbox",checked:_.includes(A.id),onChange:T=>{T.target.checked?y(I=>[...I,A.id]):y(I=>I.filter(O=>O!==A.id))},className:"w-5 h-5 rounded border-slate-300 dark:border-slate-600 text-primary focus:ring-primary transition-all cursor-pointer"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:`text-sm font-bold transition-colors ${_.includes(A.id)?"text-primary":"text-slate-700 dark:text-slate-200 group-hover/item:text-primary"}`,children:A.id===(r==null?void 0:r.id)?"Minha Agenda":A.name}),i.jsx("span",{className:"text-[10px] text-slate-400 uppercase tracking-wider font-bold",children:A.role})]})]},A.id))]}),i.jsx("div",{className:"p-2 bg-slate-50 dark:bg-slate-900/50 border-t border-slate-100 dark:border-slate-700",children:i.jsx("button",{onClick:()=>{var A;return(A=document.getElementById("agenda-user-dropdown"))==null?void 0:A.classList.add("hidden")},className:"w-full py-2 text-xs font-bold text-slate-500 hover:text-primary transition-colors uppercase tracking-widest",children:"Fechar"})})]})]}),i.jsxs("button",{onClick:()=>{f(new Date),m(null),x(null),u(!0)},className:"bg-primary hover:bg-primary-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors font-bold shadow-sm whitespace-nowrap",children:[i.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Novo Agendamento"]})]})]}),i.jsx("div",{className:"flex-1 min-h-0",children:i.jsx(C0e,{date:a,view:o,appointments:w,types:e,onDateChange:s,onViewChange:l,onSelectSlot:E,onSelectAppointment:N})})]}),i.jsx(P0e,{onSchedule:k}),i.jsx(I0e,{isOpen:c,onClose:S,initialDate:d,initialTask:v,editingAppointment:p})]})},Wn={blue:{bg:"bg-blue-500",border:"border-blue-600",text:"text-white",light:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300"},emerald:{bg:"bg-emerald-500",border:"border-emerald-600",text:"text-white",light:"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300"},violet:{bg:"bg-violet-500",border:"border-violet-600",text:"text-white",light:"bg-violet-50 dark:bg-violet-900/20 text-violet-700 dark:text-violet-300"},orange:{bg:"bg-orange-500",border:"border-orange-600",text:"text-white",light:"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300"},rose:{bg:"bg-rose-500",border:"border-rose-600",text:"text-white",light:"bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300"},amber:{bg:"bg-amber-500",border:"border-amber-600",text:"text-white",light:"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300"},cyan:{bg:"bg-cyan-500",border:"border-cyan-600",text:"text-white",light:"bg-cyan-50 dark:bg-cyan-900/20 text-cyan-700 dark:text-cyan-300"},indigo:{bg:"bg-indigo-500",border:"border-indigo-600",text:"text-white",light:"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300"},teal:{bg:"bg-teal-500",border:"border-teal-600",text:"text-white",light:"bg-teal-50 dark:bg-teal-900/20 text-teal-700 dark:text-teal-300"},pink:{bg:"bg-pink-500",border:"border-pink-600",text:"text-white",light:"bg-pink-50 dark:bg-pink-900/20 text-pink-700 dark:text-pink-300"},slate:{bg:"bg-slate-400",border:"border-slate-500",text:"text-white",light:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400"}},D0e=["blue","emerald","violet","orange","rose","amber","cyan","indigo","teal","pink"],R0e={"Sem Previso":"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400",Previsto:"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300 border border-amber-200 dark:border-amber-700",Agendado:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-700",Concludo:"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300"},y2=6,M0e=1.2,$0e=["dom","seg","ter","qua","qui","sex","sab"],L0e={backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(100,116,139,0.35) 4px, rgba(100,116,139,0.35) 5px)"},w2={backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 4px, rgba(100,116,139,0.32) 4px, rgba(100,116,139,0.32) 5px)"},_2=(t,e,r)=>Math.max(e,Math.min(r,t)),h4=(t,e)=>{if(!t)return null;const r=zo(new Date,new Date(t),e),n=ur(new Date(t),"dd/MM/yyyy");return r>15?{cls:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 font-bold",icon:"event",label:` Data Limite: ${n} (+${r} d..)`,pulse:!1}:r>=0&&r<=15?{cls:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 font-bold",icon:"warning",label:` Data Limite: ${n} (+${r} d..)`,pulse:!1}:{cls:"bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400 font-bold animate-pulse",icon:"alarm",label:` URGENTE  Prazo vencido h ${Math.abs(r)} d..`,pulse:!0}},V0e=(t,e)=>{const r=e[t];if(!r)return null;const n=r.stage;return n===5?{icon:"precision_manufacturing",cls:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400",label:"Fabricao"}:n===6?{icon:"local_shipping",cls:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",label:"Logstica"}:n===7?{icon:"construction",cls:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",label:"Montagem Ativa"}:null},N2=H.memo(({batch:t,project:e,assemblyTeams:r,workflowConfig:n,holidays:a,canEdit:s,onOpenScheduleModal:o})=>{var _,y,g,w,E,N,k,S;const l=((_=t.assemblySchedule)==null?void 0:_.status)||"Sem Previso",c=r.find(b=>{var A;return b.id===((A=t.assemblySchedule)==null?void 0:A.teamId)}),u=h4(t.assemblyDeadline,a),d=V0e(t.phase,n),f=n[t.phase],p=((y=t.environmentIds)==null?void 0:y.length)||e.environments.length,m=p*3,v=((g=t.assemblySchedule)==null?void 0:g.estimatedDays)??m,x=((w=t.assemblySchedule)==null?void 0:w.estimatedDays)!==void 0&&t.assemblySchedule.estimatedDays!==m;return i.jsxs("div",{className:"bg-white dark:bg-[#1e2936] rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:`px-2.5 py-1 flex items-center justify-between ${R0e[l]}`,children:[i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:l}),c&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${((E=Wn[c.color])==null?void 0:E.bg)||"bg-slate-400"}`}),i.jsx("span",{className:"text-[10px] font-bold",children:c.name})]})]}),i.jsxs("div",{className:"p-2",children:[i.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm truncate",children:e.client.name}),i.jsxs("div",{className:"text-[10px] text-slate-400 mb-1.5",children:[t.name||"Lote","  ",p," amb",p!==1?"s":""]}),d&&i.jsxs("div",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded-full text-[10px] font-bold mb-1.5 ${d.cls}`,children:[i.jsx("span",{className:"material-symbols-outlined text-[11px]",children:d.icon}),(f==null?void 0:f.label)||d.label]}),u&&i.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-lg text-[10px] mb-1.5 ${u.cls}`,children:[i.jsx("span",{className:"material-symbols-outlined text-[11px]",children:u.icon}),u.label]}),i.jsxs("div",{className:`text-[10px] mb-1.5 flex items-center gap-1 ${x?"text-blue-600 dark:text-blue-400":"text-slate-400"}`,children:[i.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"timer"}),x?`${v} d.. (ajustado)`:`${p}3 = ${m} d..`]}),((N=t.assemblySchedule)==null?void 0:N.scheduledDate)&&i.jsxs("div",{className:"text-[10px] text-slate-500 mb-1.5 flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"event"}),ur(new Date(t.assemblySchedule.scheduledDate),"dd/MM/yy",{locale:ua})]}),!((k=t.assemblySchedule)!=null&&k.scheduledDate)&&((S=t.assemblySchedule)==null?void 0:S.forecastDate)&&i.jsxs("div",{className:"text-[10px] text-amber-600 mb-1.5 flex items-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"event_available"}),"Prev: ",ur(new Date(t.assemblySchedule.forecastDate),"dd/MM/yy",{locale:ua})]}),s&&i.jsxs("button",{onClick:()=>o(t),className:"w-full mt-1 py-1 rounded-lg text-[10px] font-bold bg-primary text-white hover:bg-primary/90 transition-colors flex items-center justify-center gap-1",children:[i.jsx("span",{className:"material-symbols-outlined text-[13px]",children:l==="Sem Previso"?"calendar_add_on":"edit_calendar"}),l==="Sem Previso"?"Agendar":"Editar"]})]})]})}),F0e=()=>{const{batches:t,projects:e,workflowConfig:r,assemblyTeams:n,updateBatchAssemblySchedule:a,saveAssemblyTeams:s,canUserEditAssembly:o,companySettings:l,updateCompanySettings:c,assistanceTickets:u,assistanceWorkflow:d,updateAssistanceTicket:f}=yr(),p=o(),m=V=>qme(V)||LP(V,l==null?void 0:l.holidays),[v,x]=D.useState(y2);D.useEffect(()=>{const V=()=>{const C=window.innerWidth;C<768?x(2):C<1024?x(3):C<1280?x(4):x(y2)};return V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]);const[_,y]=D.useState(new Date),g=Is(_,{weekStartsOn:1}),w=v*7,E=Math.floor(w*M0e),N=Co(g,E-1),k=mw({start:g,end:N}),S=D.useRef(null),b=D.useRef(null),A=D.useRef(!1),[T,I]=D.useState(!1),O=D.useMemo(()=>{const V=[];return k.forEach(C=>{const $=ur(C,"MMMM yyyy",{locale:ua});!V.length||V[V.length-1].label!==$?V.push({label:$,count:1}):V[V.length-1].count++}),V},[k]),[R,G]=D.useState("Todos"),[U,Q]=D.useState("Todos"),[te,K]=D.useState("Todos"),[X,se]=D.useState(null),[Z,F]=D.useState(!1),[de,me]=D.useState({}),[Ge,Me]=D.useState(!1),[ot,Be]=D.useState(null),[xe,ve]=D.useState(!1),[be,le]=D.useState({}),[Ze,ie]=D.useState(!1),[Pe,Ae]=D.useState(!1),[Ee,Oe]=D.useState([]),[_e,Ke]=D.useState(null),[je,tt]=D.useState({name:"",color:"blue",memberInput:"",members:[],serviceTypes:["assembly"]}),[ht,pt]=D.useState(!1),[Fe,It]=D.useState("QUEUE"),Zt=V=>{const C=V.split("T")[0].split("-");return new Date(parseInt(C[0]),parseInt(C[1])-1,parseInt(C[2]))},he=V=>{const C=typeof V=="string"?Zt(V):V;return ep(C,g)/E*100},Vr=(V,C)=>{const $=he(V);return _2(C/E*100,0,100-$)},hr=V=>{if(!V)return!1;const C=Zt(V);return C>=g&&C<=N},Fr=V=>{V.preventDefault(),A.current=!1,b.current={startX:V.clientX,startAnchor:_},I(!0)},bt=V=>{if(!b.current||!S.current)return;const C=V.clientX-b.current.startX;Math.abs(C)>5&&(A.current=!0);const $=(S.current.clientWidth-128)/E,W=Math.round(-C/$);y(Co(b.current.startAnchor,W))},ir=()=>{b.current=null,I(!1)},en=V=>{A.current=!1,b.current={startX:V.touches[0].clientX,startAnchor:_}},Ur=V=>{if(!b.current||!S.current)return;const C=V.touches[0].clientX-b.current.startX;Math.abs(C)>5&&(A.current=!0);const $=(S.current.clientWidth-128)/E,W=Math.round(-C/$);y(Co(b.current.startAnchor,W))},pr=()=>{b.current=null},Er=D.useMemo(()=>t.filter(V=>V.status==="Active"&&r[V.phase]&&[5,6,7].includes(r[V.phase].stage)),[t,r]),mr=D.useMemo(()=>Er.map(V=>({batch:V,project:e.find(C=>C.id===V.projectId)})).filter(V=>!!V.project),[Er,e]),Br=D.useMemo(()=>mr.filter(({batch:V})=>{var $;const C=(($=V.assemblySchedule)==null?void 0:$.status)||"Sem Previso";return R==="Todos"||C===R}),[mr,R]),or=D.useMemo(()=>t.filter(V=>V.status==="Active"&&r[V.phase]&&r[V.phase].stage===8),[t,r]),wr=D.useMemo(()=>or.map(V=>({batch:V,project:e.find(C=>C.id===V.projectId)})).filter(V=>!!V.project),[or,e]),Nt=D.useMemo(()=>wr.filter(({batch:V})=>{var $;const C=(($=V.assemblySchedule)==null?void 0:$.status)||"Sem Previso";return U==="Todos"||C===U}),[wr,U]),Yt=D.useMemo(()=>{const V=mr.flatMap(({batch:$,project:W})=>{const B=$.assemblySchedule,ee=(B==null?void 0:B.scheduledDate)||(B==null?void 0:B.forecastDate);if(!ee)return[];const Y=n.find(We=>We.id===(B==null?void 0:B.teamId)),ne=(B==null?void 0:B.estimatedDays)||1,ce=new Date(ee),pe=ts(ce,ne,l==null?void 0:l.holidays),Ce=Math.max(1,ep(pe,ce));return[{batchId:$.id,date:ee,clientName:W.client.name,batchName:$.name||"Lote",teamId:(B==null?void 0:B.teamId)||null,teamColor:(Y==null?void 0:Y.color)||"slate",status:(B==null?void 0:B.status)||"Sem Previso",estimatedDays:ne,calendarDays:Ce,assemblyDeadline:$.assemblyDeadline,isPostAssembly:!1}]}),C=wr.flatMap(({batch:$,project:W})=>{const B=$.assemblySchedule,ee=(B==null?void 0:B.scheduledDate)||(B==null?void 0:B.forecastDate);if(!ee)return[];const Y=n.find(We=>We.id===(B==null?void 0:B.teamId)),ne=(B==null?void 0:B.estimatedDays)||1,ce=new Date(ee),pe=ts(ce,ne,l==null?void 0:l.holidays),Ce=Math.max(1,ep(pe,ce));return[{batchId:$.id,date:ee,clientName:W.client.name,batchName:"Ps-Mont: "+($.name||"Lote"),teamId:(B==null?void 0:B.teamId)||null,teamColor:(Y==null?void 0:Y.color)||"slate",status:(B==null?void 0:B.status)||"Sem Previso",estimatedDays:ne,calendarDays:Ce,assemblyDeadline:$.assemblyDeadline,isPostAssembly:!0}]});return[...V,...C]},[mr,wr,n,l==null?void 0:l.holidays]),Ot=D.useMemo(()=>[...n.map(C=>({team:C,events:Yt.filter($=>$.teamId===C.id)}))],[n,Yt]),er=31,Bt=D.useMemo(()=>u.filter(V=>V.status!=="10.8"),[u]),bn=D.useMemo(()=>Bt.filter(V=>te==="Todos"||V.status===te),[Bt,te]),zr=D.useMemo(()=>Bt.map(V=>({ticket:V,project:e.find(C=>C.client.id===V.clientId)})),[Bt,e]),re=D.useMemo(()=>zr.filter(V=>!!V.project).map(({ticket:V,project:C})=>{const $=new Date(V.createdAt),W=ts($,er,l==null?void 0:l.holidays),B=n.find(ne=>ne.id===V.teamId),ee=V.estimatedDays||er,Y=Math.max(1,ep(W,$));return{ticketId:V.id,code:V.code||`ASS-${V.id.substring(0,5)}`,date:V.createdAt,clientName:C.client.name,teamId:V.teamId||null,teamColor:(B==null?void 0:B.color)||"slate",status:V.status,priority:V.priority,estimatedDays:ee,calendarDays:Y,deadline:W.toISOString()}}),[zr,n,l==null?void 0:l.holidays]),$e=D.useMemo(()=>[...n.filter(C=>{var $;return(($=C.serviceTypes)==null?void 0:$.includes("assistance"))!==!1}).map(C=>({team:C,events:re.filter($=>$.teamId===C.id),isAssistance:!0})),{team:null,events:re.filter(C=>!C.teamId),isAssistance:!0}].filter(C=>C.events.length>0),[n,re]),z=V=>h4(V,l==null?void 0:l.holidays),q=V=>{var W,B;const C=e.find(ee=>ee.id===V.projectId),$=(((W=C==null?void 0:C.environments)==null?void 0:W.length)||1)*3;me({...V.assemblySchedule||{status:"Sem Previso"},estimatedDays:((B=V.assemblySchedule)==null?void 0:B.estimatedDays)??$}),se(V),F(!0)},Ne=()=>{var C;if(!X)return;Me(!0);const V={status:de.status||"Sem Previso",forecastDate:de.forecastDate,scheduledDate:de.scheduledDate,estimatedDays:de.estimatedDays,notes:de.notes};if(de.teamId&&(V.teamId=de.teamId,V.teamName=(C=n.find($=>$.id===de.teamId))==null?void 0:C.name),a(X.id,V),V.scheduledDate&&V.status==="Agendado"){const $=e.find(W=>W.id===X.projectId);$&&$.client.phone&&l.whatsappClientTemplates&&ud(async()=>{const{sendClientNotification:W,addWhatsAppLog:B}=await import("./communicationService-C1eVLKVU.js");return{sendClientNotification:W,addWhatsAppLog:B}},__vite__mapDeps([0,1])).then(({sendClientNotification:W,addWhatsAppLog:B})=>{const ee={nomeCliente:$.client.name,data:ur(new Date(V.scheduledDate),"dd/MM/yyyy",{locale:ua}),vendedor:$.sellerName||"",etapa:"Montagem Agendada"};W("assembly_scheduled",$.client.phone,$.client.name,ee,l).then(({log:Y})=>{if(Y.phone){const ne=B(l.whatsappLogs||[],Y);c({...l,whatsappLogs:ne})}})})}setTimeout(()=>{Me(!1),F(!1),se(null)},400)},Se=()=>{X&&(Me(!0),a(X.id,null),setTimeout(()=>{Me(!1),F(!1),se(null)},400))},Ue=V=>{le({forecastDate:V.forecastDate,scheduledDate:V.scheduledDate,estimatedDays:V.estimatedDays??er,teamId:V.teamId,schedulingNotes:V.schedulingNotes}),Be(V),ve(!0)},st=async()=>{var C;if(!ot)return;ie(!0);const V={...ot,forecastDate:be.forecastDate,scheduledDate:be.scheduledDate,estimatedDays:be.estimatedDays,teamId:be.teamId,teamName:be.teamId?(C=n.find($=>$.id===be.teamId))==null?void 0:C.name:void 0,schedulingNotes:be.schedulingNotes};await f(V),setTimeout(()=>{ie(!1),ve(!1),Be(null)},400)},it=()=>{Oe([...n]),Ke(null),tt({name:"",color:"blue",memberInput:"",members:[],serviceTypes:["assembly"]}),Ae(!0)},lr=V=>{Ke(V),tt({name:V.name,color:V.color,memberInput:"",members:[...V.members],serviceTypes:V.serviceTypes||["assembly"]})},Cn=V=>{t.some($=>{var W;return((W=$.assemblySchedule)==null?void 0:W.teamId)===V})&&!window.confirm("Esta equipe possui montagens agendadas. Ao excluir, os lotes vinculados ficaro sem equipe. Deseja continuar?")||(Oe($=>$.filter(W=>W.id!==V)),(_e==null?void 0:_e.id)===V&&(Ke(null),tt({name:"",color:"blue",memberInput:"",members:[],serviceTypes:["assembly"]})))},tr=()=>{const V=je.memberInput.trim();V&&tt(C=>({...C,members:[...C.members,V],memberInput:""}))},Wr=V=>{tt(C=>({...C,members:C.members.filter(($,W)=>W!==V)}))},qr=()=>{if(je.name.trim()){if(je.serviceTypes.length===0){alert("Selecione pelo menos um tipo de servio (Montagem ou Assistncia)");return}if(_e)Oe(V=>V.map(C=>C.id===_e.id?{...C,name:je.name,color:je.color,members:je.members,serviceTypes:je.serviceTypes}:C));else{const V={id:`team-${Date.now()}`,name:je.name,color:je.color,members:je.members,serviceTypes:je.serviceTypes};Oe(C=>[...C,V])}Ke(null),tt({name:"",color:"blue",memberInput:"",members:[],serviceTypes:["assembly"]})}},yn=async()=>{pt(!0),await s(Ee),pt(!1),Ae(!1)},Tr=V=>y(C=>Co(C,V*7)),ya=()=>y(new Date),wa=D.useMemo(()=>{const V=new Date;return V>=g&&V<=N},[g,N]);return i.jsxs("div",{className:"flex flex-col h-full overflow-hidden bg-background-light dark:bg-background-dark",children:[i.jsxs("div",{className:"px-4 md:px-6 py-3 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] flex flex-wrap items-center gap-3 shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>Tr(-4),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-colors",title:"Recuar 4 semanas",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"keyboard_double_arrow_left"})}),i.jsx("button",{onClick:()=>Tr(-1),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-colors",title:"Recuar 1 semana",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_left"})}),i.jsxs("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 px-2 min-w-[180px] text-center",children:[ur(g,"dd 'de' MMM",{locale:ua}),"  ",ur(N,"dd 'de' MMM yyyy",{locale:ua})]}),i.jsx("button",{onClick:()=>Tr(1),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-colors",title:"Avanar 1 semana",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"})}),i.jsx("button",{onClick:()=>Tr(4),className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-colors",title:"Avanar 4 semanas",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"keyboard_double_arrow_right"})})]}),i.jsx("button",{onClick:ya,className:`px-3 py-1.5 text-xs font-bold rounded-lg transition-colors ${wa?"bg-primary/10 text-primary hover:bg-primary/20":"bg-primary text-white hover:bg-primary/90 shadow-sm"}`,children:"Hoje"}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"flex md:hidden bg-slate-100 dark:bg-slate-800 rounded-lg p-0.5",children:[i.jsx("button",{onClick:()=>It("QUEUE"),className:`px-3 py-1 text-xs rounded-md font-bold transition-colors ${Fe==="QUEUE"?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-500"}`,children:"Fila"}),i.jsx("button",{onClick:()=>It("GANTT"),className:`px-3 py-1 text-xs rounded-md font-bold transition-colors ${Fe==="GANTT"?"bg-white dark:bg-slate-700 text-primary shadow-sm":"text-slate-500"}`,children:"Gantt"})]}),p&&i.jsxs("button",{onClick:it,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"groups"}),"Equipes"]})]}),i.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[i.jsx("div",{className:`flex-1 flex flex-col overflow-hidden ${Fe==="QUEUE"?"hidden md:flex":"flex"}`,children:i.jsxs("div",{ref:S,className:`flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar select-none ${T?"cursor-grabbing":"cursor-grab"}`,onMouseDown:Fr,onMouseMove:bt,onMouseUp:ir,onMouseLeave:ir,onTouchStart:en,onTouchMove:Ur,onTouchEnd:pr,children:[i.jsxs("div",{className:"sticky top-0 z-20 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632]",children:[i.jsxs("div",{className:"flex border-b border-slate-100 dark:border-slate-800",children:[i.jsx("div",{className:"w-32 shrink-0 border-r border-slate-200 dark:border-slate-700"}),i.jsx("div",{className:"flex-1 flex overflow-hidden",children:O.map((V,C)=>i.jsx("div",{style:{flex:V.count},className:"px-2 py-0.5 text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide border-r last:border-r-0 border-slate-200 dark:border-slate-700 truncate",children:V.label},C))})]}),i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"w-32 shrink-0 px-3 py-2 border-r border-slate-200 dark:border-slate-700 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Equipe"}),i.jsx("div",{className:"flex-1 relative overflow-hidden",style:{height:38},children:k.map((V,C)=>{const $=m(V),W=ur(V,"yyyy-MM-dd")===ur(new Date,"yyyy-MM-dd");return i.jsxs("div",{className:`absolute top-0 bottom-0 flex flex-col items-center justify-center border-r border-slate-200 dark:border-slate-700 ${$?"bg-slate-50 dark:bg-slate-800/60":""}`,style:{left:`${C/E*100}%`,width:`${1/E*100}%`,...$?L0e:{}},children:[i.jsx("div",{className:$?"text-[10px] font-bold uppercase text-slate-300 dark:text-slate-600 leading-tight":"text-[10px] font-bold uppercase text-slate-500 dark:text-slate-400 leading-tight",children:$0e[V.getDay()]}),i.jsx("div",{className:`font-bold leading-tight ${W?"text-[11px] text-rose-600 dark:text-rose-400":$?"text-[9px] text-slate-300 dark:text-slate-600":"text-[11px] text-slate-600 dark:text-slate-400"}`,children:ur(V,"d")})]},C)})})]})]}),Ot.map(({team:V,events:C},$)=>{var W;return i.jsxs(H.Fragment,{children:[i.jsxs("div",{className:"flex border-b border-slate-100 dark:border-slate-800 last:border-b-0",children:[i.jsx("div",{className:"w-32 shrink-0 px-3 py-2 border-r border-slate-200 dark:border-slate-700 flex items-start gap-2",children:V?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`w-2.5 h-2.5 rounded-full shrink-0 mt-0.5 ${((W=Wn[V.color])==null?void 0:W.bg)||"bg-slate-400"}`}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-bold text-slate-700 dark:text-slate-200 truncate",children:V.name}),V.members.length>0&&i.jsxs("div",{className:"text-[10px] text-slate-400 truncate",children:[V.members.slice(0,2).join(", "),V.members.length>2?"...":""]})]})]}):i.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Sem equipe"})}),i.jsxs("div",{className:"flex-1 relative",style:{minHeight:48},children:[k.map((B,ee)=>{const Y=m(B);return i.jsx("div",{className:`absolute top-0 bottom-0 border-r border-slate-200 dark:border-slate-700 ${Y?"bg-slate-50/90 dark:bg-slate-800/50":""}`,style:{left:`${ee/E*100}%`,width:`${1/E*100}%`,...Y?w2:{}}},ee)}),hr(new Date().toISOString())&&i.jsx("div",{className:"absolute top-0 bottom-0 bg-orange-200/50 dark:bg-orange-900/30 z-10 pointer-events-none",style:{left:`${he(new Date)}%`,width:`${1/E*100}%`}}),C.map(B=>{const ee=he(B.date),Y=Vr(B.date,B.calendarDays),ne=Wn[B.teamColor]||Wn.slate,ce=B.status==="Previsto";return i.jsxs("div",{className:`absolute top-1.5 bottom-1.5 rounded-md px-2 flex items-center z-10 overflow-hidden transition-transform hover:scale-y-105 ${ne.bg} ${ce?"border-2 border-dashed border-white/60 opacity-80":"shadow-md"} ${p?"cursor-pointer":"cursor-default"}`,style:{left:`${ee}%`,width:`${Math.max(Y,1.5)}%`,minWidth:"44px"},onClick:()=>{if(A.current||!p)return;const pe=t.find(Ce=>Ce.id===B.batchId);pe&&q(pe)},title:`${B.clientName}  ${B.batchName} (${B.estimatedDays} d..)`,children:[i.jsx("span",{className:"text-white text-[10px] font-bold truncate select-none",children:B.clientName}),B.assemblyDeadline&&hr(B.assemblyDeadline)&&(()=>{const pe=B.assemblyDeadline,Ce=he(pe),We=Y>0?(Ce-ee)/Y*100:0;return i.jsx("div",{className:"absolute -top-1 w-2 h-2 bg-rose-600 rotate-45 z-30 pointer-events-none",style:{left:`${_2(We,0,92)}%`},title:`Prazo: ${ur(new Date(pe),"dd/MM/yyyy")}`})})()]},B.batchId)})]})]}),$<Ot.length-1&&i.jsx("div",{className:"w-full h-px bg-slate-200 dark:bg-slate-700"})]},(V==null?void 0:V.id)||"no-team")}),$e.length>0&&Ot.some(V=>V.events.length>0)&&i.jsx("div",{className:"w-full h-px bg-slate-300 dark:bg-slate-600 my-1"}),$e.map(({team:V,events:C},$)=>{var W;return i.jsxs(H.Fragment,{children:[i.jsxs("div",{className:"flex border-b border-slate-100 dark:border-slate-800 last:border-b-0",children:[i.jsx("div",{className:"w-32 shrink-0 px-3 py-2 border-r border-slate-200 dark:border-slate-700 flex items-start gap-2 bg-green-50/50 dark:bg-green-900/20",children:V?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:`w-2.5 h-2.5 rounded-full shrink-0 mt-0.5 ${((W=Wn[V.color])==null?void 0:W.bg)||"bg-slate-400"}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-xs font-bold text-slate-700 dark:text-slate-200 truncate",children:V.name}),i.jsx("div",{className:"text-[7px] font-bold text-green-600 dark:text-green-400 uppercase tracking-tight",children:"Assistncia"}),V.members.length>0&&i.jsxs("div",{className:"text-[10px] text-slate-400 truncate",children:[V.members.slice(0,2).join(", "),V.members.length>2?"...":""]})]})]}):i.jsx("span",{className:"text-[10px] text-slate-400 italic",children:"Sem equipe (Assistncia)"})}),i.jsxs("div",{className:"flex-1 relative",style:{minHeight:48},children:[k.map((B,ee)=>{const Y=m(B);return i.jsx("div",{className:`absolute top-0 bottom-0 border-r border-slate-200 dark:border-slate-700 ${Y?"bg-slate-50/90 dark:bg-slate-800/50":""}`,style:{left:`${ee/E*100}%`,width:`${1/E*100}%`,...Y?w2:{}}},`asst-grid-${ee}`)}),hr(new Date().toISOString())&&i.jsx("div",{className:"absolute top-0 bottom-0 bg-orange-200/50 dark:bg-orange-900/30 z-10 pointer-events-none",style:{left:`${he(new Date)}%`,width:`${1/E*100}%`}}),C.map(B=>{const ee=he(B.date),Y=Vr(B.date,B.calendarDays),ne=B.priority==="Urgente";return i.jsx("div",{className:`absolute top-1.5 bottom-1.5 rounded-md px-2 flex items-center z-10 overflow-hidden transition-transform hover:scale-y-105 ${ne?"bg-rose-500 shadow-md":"bg-emerald-500 shadow-md"} ${p?"cursor-pointer":"cursor-default"}`,style:{left:`${ee}%`,width:`${Math.max(Y,1.5)}%`,minWidth:"44px"},title:`${B.clientName}  ${B.code} (${B.status}) - ${B.estimatedDays} d..`,children:i.jsx("span",{className:"text-white text-[10px] font-bold truncate select-none",children:B.clientName})},B.ticketId)})]})]}),$<$e.length-1&&i.jsx("div",{className:"w-full h-px bg-slate-200 dark:bg-slate-700"})]},`assistance-${(V==null?void 0:V.id)||"no-team"}`)}),Ot.every(V=>V.events.length===0)&&$e.every(V=>V.events.length===0)&&i.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-300 dark:text-slate-600 text-5xl mb-2",children:"bar_chart"}),i.jsx("p",{className:"text-sm text-slate-400",children:"Nenhuma montagem ou assistncia agendada neste perodo"}),i.jsx("p",{className:"text-xs text-slate-300 dark:text-slate-600 mt-1",children:"Adicione agendamentos na fila ao lado"})]}),i.jsxs("div",{className:"flex items-center justify-center py-2 gap-1 opacity-40 hover:opacity-70 transition-opacity",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 dark:text-slate-500 text-sm",children:"swipe"}),i.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500",children:"Arraste para navegar"})]})]})}),i.jsx("div",{className:`w-full md:w-64 lg:w-80 xl:w-96 shrink-0 border-l border-slate-200 dark:border-slate-800 flex flex-col overflow-hidden bg-slate-50/50 dark:bg-[#1a2632] ${Fe==="GANTT"?"hidden md:flex":"flex"}`,children:i.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[i.jsxs("div",{className:"sticky top-0 z-10 px-3 py-2 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1e2936]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"construction"}),i.jsx("h3",{className:"text-xs font-bold text-slate-700 dark:text-slate-200",children:"Fila de Montagens"})]}),i.jsxs("span",{className:"text-[10px] text-slate-400 font-medium",children:[Er.length," lotes"]})]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:["Todos","Sem Previso","Previsto","Agendado","Concludo"].map(V=>i.jsx("button",{onClick:()=>G(V),className:`px-2 py-0.5 rounded-full text-[10px] font-bold transition-colors ${R===V?"bg-primary text-white":"bg-slate-100 dark:bg-slate-800 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:V},V))})]}),i.jsx("div",{className:"p-2 space-y-2",children:Br.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-300 dark:text-slate-600 text-4xl mb-2",children:"construction"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Nenhum lote para este filtro"})]}):Br.map(({batch:V,project:C})=>i.jsx(N2,{batch:V,project:C,assemblyTeams:n,workflowConfig:r,holidays:l==null?void 0:l.holidays,canEdit:p,onOpenScheduleModal:q},V.id))}),i.jsx("div",{className:"mx-2 my-1 h-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"sticky top-0 z-10 px-3 py-2 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1e2936]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-orange-600 text-sm",children:"build_circle"}),i.jsx("h3",{className:"text-xs font-bold text-slate-700 dark:text-slate-200",children:"Fila de Ps-Montagens"})]}),i.jsxs("span",{className:"text-[10px] text-slate-400 font-medium",children:[or.length," lotes"]})]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:["Todos","Sem Previso","Previsto","Agendado","Concludo"].map(V=>i.jsx("button",{onClick:()=>Q(V),className:`px-2 py-0.5 rounded-full text-[10px] font-bold transition-colors ${U===V?"bg-orange-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:V},V))})]}),i.jsx("div",{className:"p-2 space-y-2",children:Nt.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-300 dark:text-slate-600 text-4xl mb-2",children:"build_circle"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Nenhuma ps-montagem neste filtro"})]}):Nt.map(({batch:V,project:C})=>i.jsx(N2,{batch:V,project:C,assemblyTeams:n,workflowConfig:r,holidays:l==null?void 0:l.holidays,canEdit:p,onOpenScheduleModal:q},V.id))}),i.jsx("div",{className:"mx-2 my-1 h-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"sticky top-0 z-10 px-3 py-2 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1e2936]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"material-symbols-outlined text-emerald-600 text-sm",children:"support_agent"}),i.jsx("h3",{className:"text-xs font-bold text-slate-700 dark:text-slate-200",children:"Fila de Assistncias"})]}),i.jsxs("span",{className:"text-[10px] text-slate-400 font-medium",children:[Bt.length," chamados"]})]}),i.jsx("div",{className:"flex flex-wrap gap-1",children:[{key:"Todos",label:"Todos"},...d.filter(V=>V.id!=="10.8").map(V=>({key:V.id,label:V.label}))].map(V=>i.jsx("button",{onClick:()=>K(V.key),className:`px-2 py-0.5 rounded-full text-[10px] font-bold transition-colors ${te===V.key?"bg-emerald-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-500 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:V.label},V.key))})]}),i.jsx("div",{className:"p-2 space-y-2",children:bn.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-300 dark:text-slate-600 text-4xl mb-2",children:"support_agent"}),i.jsx("p",{className:"text-xs text-slate-400",children:Bt.length===0?"Nenhuma assistncia tcnica ativa":"Nenhum chamado para este filtro"})]}):bn.map(V=>{var Ce,We,Ye;const C=e.find(vt=>vt.client.id===V.clientId),$=(C==null?void 0:C.client.name)||V.clientId||"Cliente",W=n.find(vt=>vt.id===V.teamId),B=new Date(V.createdAt),ee=ts(B,er,l==null?void 0:l.holidays),Y=zo(new Date,ee,l==null?void 0:l.holidays),ne=((Ce=d.find(vt=>vt.id===V.status))==null?void 0:Ce.label)||V.status,ce={"10.1":"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300","10.2":"bg-cyan-50 dark:bg-cyan-900/20 text-cyan-700 dark:text-cyan-300","10.3":"bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-300","10.4":"bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300","10.5":"bg-orange-50 dark:bg-orange-900/20 text-orange-700 dark:text-orange-300","10.6":"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300","10.7":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300"}[V.status]||"bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400",pe=Y<7?"text-rose-600 dark:text-rose-400 font-bold":Y<15?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400";return i.jsxs("div",{className:"bg-white dark:bg-[#1e2936] rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:`px-2.5 py-1 flex items-center justify-between ${ce} border-b border-slate-200/50 dark:border-slate-700/50`,children:[i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:ne}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[V.priority==="Urgente"&&i.jsx("span",{className:"material-symbols-outlined text-rose-500 text-sm animate-pulse",children:"priority_high"}),W&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${((We=Wn[W.color])==null?void 0:We.bg)||"bg-slate-400"}`}),i.jsx("span",{className:"text-[10px] font-bold",children:W.name})]})]})]}),i.jsxs("div",{className:"p-2",children:[i.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm truncate",children:$}),i.jsx("div",{className:"text-[10px] text-slate-400 mb-1.5",children:V.code||`ASS-${V.id.substring(0,5)}`}),i.jsxs("div",{className:`text-[10px] mb-1.5 flex items-center gap-1 ${pe}`,children:[i.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"schedule"}),"SLA: ",Y," d.. restantes"]}),i.jsxs("div",{className:"text-[10px] text-slate-400 flex items-center gap-1 mb-2",children:[i.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"calendar_month"}),"Aberto ",ur(B,"dd/MM/yy",{locale:ua}),((Ye=V.items)==null?void 0:Ye.length)>0&&i.jsxs("span",{className:"ml-1",children:[" ",V.items.length," item",V.items.length!==1?"ns":""]})]}),p&&i.jsx("button",{onClick:()=>Ue(V),className:"w-full px-3 py-1.5 text-xs font-bold bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg transition-colors hover:bg-blue-100 dark:hover:bg-blue-800 active:scale-95",children:" Agendar"})]})]},V.id)})})]})})]}),Z&&X&&(()=>{var B,ee,Y,ne,ce;const V=e.find(pe=>pe.id===X.projectId),C=((B=X.environmentIds)==null?void 0:B.length)||(V==null?void 0:V.environments.length)||1,$=C*3,W=z(X.assemblyDeadline);return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>F(!1),children:i.jsxs("div",{className:"bg-white dark:bg-[#1e2936] w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-scale-up flex flex-col max-h-[90dvh]",onClick:pe=>pe.stopPropagation(),children:[i.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-start shrink-0",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"calendar_add_on"}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Agendamento de Montagem"})]}),i.jsxs("p",{className:"text-sm text-slate-500",children:[V==null?void 0:V.client.name,"  ",X.name]})]}),i.jsx("button",{onClick:()=>F(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"overflow-y-auto flex-1 custom-scrollbar p-5 space-y-4",children:[W&&i.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg text-xs ${W.cls}`,children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"alarm"}),i.jsx("span",{className:"font-bold",children:W.label})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Equipe"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>me(pe=>({...pe,teamId:void 0,teamName:void 0})),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-colors ${de.teamId?"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800":"bg-slate-800 text-white border-slate-800"}`,children:"Sem equipe"}),n.map(pe=>{const Ce=Wn[pe.color]||Wn.slate,We=de.teamId===pe.id;return i.jsxs("button",{onClick:()=>me(Ye=>({...Ye,teamId:pe.id,teamName:pe.name})),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold border transition-colors ${We?`${Ce.bg} ${Ce.text} border-transparent`:"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${We?"bg-white/70":Ce.bg}`}),pe.name]},pe.id)}),n.length===0&&i.jsx("p",{className:"text-xs text-slate-400 italic",children:'Nenhuma equipe cadastrada. Clique em "Equipes" para adicionar.'})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Status"}),i.jsx("div",{className:"flex gap-2",children:["Sem Previso","Previsto","Agendado","Concludo"].map(pe=>i.jsx("button",{onClick:()=>me(Ce=>({...Ce,status:pe})),className:`flex-1 py-1.5 rounded-lg text-[11px] font-bold border transition-colors ${de.status===pe?"bg-primary text-white border-primary":"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:pe},pe))})]}),(de.status==="Previsto"||de.status==="Agendado")&&i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:de.status==="Agendado"?"Data Confirmada":"Data Prevista"}),i.jsx("input",{type:"date",value:de.status==="Agendado"?((ee=de.scheduledDate)==null?void 0:ee.split("T")[0])||"":((Y=de.forecastDate)==null?void 0:Y.split("T")[0])||"",onChange:pe=>{const Ce=pe.target.value;de.status==="Agendado"?me(We=>({...We,scheduledDate:Ce,forecastDate:Ce})):me(We=>({...We,forecastDate:Ce}))},className:"w-full border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Durao Estimada (dias)"}),i.jsx("input",{type:"number",min:"1",value:de.estimatedDays||"",onChange:pe=>me(Ce=>({...Ce,estimatedDays:Number(pe.target.value)})),className:"w-full border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none"}),i.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[" Estimativa automtica: ",C," amb  3 d.. = ",i.jsxs("strong",{children:[$," dias teis"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Observaes"}),i.jsx("textarea",{rows:2,value:de.notes||"",onChange:pe=>me(Ce=>({...Ce,notes:pe.target.value})),placeholder:"Informaes adicionais...",className:"w-full border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none resize-none custom-scrollbar"})]})]}),i.jsxs("div",{className:"p-5 border-t border-slate-100 dark:border-slate-700 flex justify-between gap-3 shrink-0",children:[i.jsx("div",{className:"flex gap-2",children:p&&(((ne=X==null?void 0:X.assemblySchedule)==null?void 0:ne.status)==="Previsto"||((ce=X==null?void 0:X.assemblySchedule)==null?void 0:ce.status)==="Agendado")&&i.jsxs("button",{onClick:Se,disabled:Ge,className:"px-5 py-2 bg-rose-600 text-white rounded-lg text-sm font-bold hover:bg-rose-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"cancel"}),"Cancelar Agendamento"]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Fechar"}),i.jsxs("button",{onClick:Ne,disabled:Ge,className:"px-5 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors flex items-center gap-2 disabled:opacity-50",children:[Ge?i.jsx("span",{className:"material-symbols-outlined text-sm animate-spin",children:"progress_activity"}):i.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),"Salvar"]})]})]})]})})})(),xe&&ot&&(()=>{const V=e.find(C=>C.client.id===ot.clientId);return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>ve(!1),children:i.jsxs("div",{className:"bg-white dark:bg-[#1e2936] w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-scale-up flex flex-col max-h-[90dvh]",onClick:C=>C.stopPropagation(),children:[i.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-start shrink-0",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"calendar_add_on"}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Agendar Assistncia"})]}),i.jsxs("p",{className:"text-sm text-slate-500",children:[V==null?void 0:V.client.name,"  ",ot.code||ot.id]})]}),i.jsx("button",{onClick:()=>ve(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"overflow-y-auto flex-1 custom-scrollbar p-5 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Equipe Responsvel"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx("button",{onClick:()=>le(C=>({...C,teamId:void 0})),className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-colors ${be.teamId?"border-slate-200 dark:border-slate-700 text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800":"bg-slate-800 text-white border-slate-800"}`,children:"Sem equipe"}),n.filter(C=>{var $;return(($=C.serviceTypes)==null?void 0:$.includes("assistance"))!==!1}).map(C=>{const $=Wn[C.color]||Wn.slate,W=be.teamId===C.id;return i.jsxs("button",{onClick:()=>le(B=>({...B,teamId:C.id})),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold border transition-colors ${W?`${$.bg} ${$.text} border-transparent`:"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${W?"bg-white/70":$.bg}`}),C.name]},C.id)}),n.filter(C=>{var $;return(($=C.serviceTypes)==null?void 0:$.includes("assistance"))!==!1}).length===0&&i.jsx("p",{className:"text-xs text-slate-400 italic",children:'Nenhuma equipe cadastrada. Clique em "Equipes" para adicionar.'})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Data de Previso"}),i.jsx("input",{type:"date",value:be.forecastDate?be.forecastDate.split("T")[0]:"",onChange:C=>le($=>({...$,forecastDate:C.target.value?new Date(C.target.value).toISOString():void 0})),className:"w-full border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Data Confirmada (Agendada)"}),i.jsx("input",{type:"date",value:be.scheduledDate?be.scheduledDate.split("T")[0]:"",onChange:C=>le($=>({...$,scheduledDate:C.target.value?new Date(C.target.value).toISOString():void 0})),className:"w-full border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Dias Estimados"}),i.jsx("input",{type:"number",min:"0",value:be.estimatedDays||"",onChange:C=>le($=>({...$,estimatedDays:C.target.value?parseInt(C.target.value):void 0})),className:"w-full border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none"}),i.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[" SLA padro: ",i.jsxs("strong",{children:[er," dias teis"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Notas de Agendamento"}),i.jsx("textarea",{rows:3,value:be.schedulingNotes||"",onChange:C=>le($=>({...$,schedulingNotes:C.target.value})),placeholder:"Informaes adicionais sobre o agendamento...",className:"w-full border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none resize-none custom-scrollbar"})]})]}),i.jsxs("div",{className:"p-5 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 shrink-0",children:[i.jsx("button",{onClick:()=>ve(!1),className:"px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Cancelar"}),i.jsxs("button",{onClick:st,disabled:Ze,className:"px-5 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors flex items-center gap-2 disabled:opacity-50",children:[Ze?i.jsx("span",{className:"material-symbols-outlined text-sm animate-spin",children:"progress_activity"}):i.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),"Salvar"]})]})]})})})(),Pe&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>Ae(!1),children:i.jsxs("div",{className:"bg-white dark:bg-[#1e2936] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden animate-scale-up flex flex-col max-h-[90dvh]",onClick:V=>V.stopPropagation(),children:[i.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"groups"}),i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Equipes de Montagem"})]}),i.jsx("button",{onClick:()=>Ae(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("div",{className:"flex flex-col md:flex-row flex-1 overflow-hidden",children:[i.jsxs("div",{className:"w-full md:w-56 shrink-0 border-b md:border-b-0 md:border-r border-slate-100 dark:border-slate-700 overflow-y-auto custom-scrollbar p-3 space-y-2 max-h-48 md:max-h-none",children:[i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Equipes cadastradas"}),Ee.length===0&&i.jsx("p",{className:"text-xs text-slate-400 italic text-center py-4",children:"Nenhuma equipe ainda"}),Ee.map(V=>{const C=Wn[V.color]||Wn.slate;return i.jsxs("div",{className:`rounded-xl p-2.5 border transition-colors ${(_e==null?void 0:_e.id)===V.id?"bg-primary/5 border-primary/30":"border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("div",{className:`w-3 h-3 rounded-full shrink-0 ${C.bg}`}),i.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 truncate flex-1",children:V.name})]}),V.members.length>0&&i.jsx("p",{className:"text-[10px] text-slate-400 truncate pl-5",children:V.members.join(", ")}),V.serviceTypes&&V.serviceTypes.length>0&&i.jsxs("div",{className:"flex gap-1 mt-1 pl-5 flex-wrap",children:[V.serviceTypes.includes("assembly")&&i.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-bold",children:"Montagem"}),V.serviceTypes.includes("assistance")&&i.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 font-bold",children:"Assistncia"})]}),i.jsxs("div",{className:"flex gap-1 mt-1.5",children:[i.jsx("button",{onClick:()=>lr(V),className:"flex-1 py-0.5 text-[10px] rounded-md bg-slate-100 dark:bg-slate-800 text-slate-500 hover:bg-primary/10 hover:text-primary transition-colors font-bold",children:"Editar"}),i.jsx("button",{onClick:()=>Cn(V.id),className:"flex-1 py-0.5 text-[10px] rounded-md bg-slate-100 dark:bg-slate-800 text-slate-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 hover:text-rose-500 transition-colors font-bold",children:"Excluir"})]})]},V.id)})]}),i.jsxs("div",{className:"flex-1 p-5 overflow-y-auto custom-scrollbar space-y-4",children:[i.jsx("h4",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:_e?`Editando: ${_e.name}`:"Nova Equipe"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Nome da equipe"}),i.jsx("input",{type:"text",value:je.name,onChange:V=>tt(C=>({...C,name:V.target.value})),placeholder:"Ex: Equipe Alpha",className:"w-full border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-2",children:"Cor"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:D0e.map(V=>{const C=Wn[V];return i.jsx("button",{onClick:()=>tt($=>({...$,color:V})),className:`w-7 h-7 rounded-full ${C.bg} flex items-center justify-center transition-transform ${je.color===V?"ring-2 ring-offset-2 ring-primary scale-110":"hover:scale-110"}`,children:je.color===V&&i.jsx("span",{className:"material-symbols-outlined text-white text-sm",children:"check"})},V)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-2",children:"Tipos de Servio"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer transition-colors",children:[i.jsx("input",{type:"checkbox",checked:je.serviceTypes.includes("assembly"),onChange:V=>{tt(C=>({...C,serviceTypes:V.target.checked?[...C.serviceTypes,"assembly"].filter(($,W,B)=>B.indexOf($)===W):C.serviceTypes.filter($=>$!=="assembly")}))},className:"w-4 h-4 rounded cursor-pointer accent-primary"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:"Montagem"}),i.jsx("p",{className:"text-[10px] text-slate-400",children:"Agendamentos de montagem de mveis"})]})]}),i.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer transition-colors",children:[i.jsx("input",{type:"checkbox",checked:je.serviceTypes.includes("assistance"),onChange:V=>{tt(C=>({...C,serviceTypes:V.target.checked?[...C.serviceTypes,"assistance"].filter(($,W,B)=>B.indexOf($)===W):C.serviceTypes.filter($=>$!=="assistance")}))},className:"w-4 h-4 rounded cursor-pointer accent-primary"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:"Assistncia Tcnica"}),i.jsx("p",{className:"text-[10px] text-slate-400",children:"Chamados e visitas tcnicas de assistncia"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide block mb-1.5",children:"Membros"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("input",{type:"text",value:je.memberInput,onChange:V=>tt(C=>({...C,memberInput:V.target.value})),onKeyDown:V=>{(V.key==="Enter"||V.key===",")&&(V.preventDefault(),tr())},placeholder:"Nome do membro (Enter para adicionar)",className:"flex-1 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 focus:ring-1 focus:ring-primary focus:border-primary outline-none"}),i.jsx("button",{onClick:tr,className:"px-3 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"})})]}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:je.members.map((V,C)=>i.jsxs("span",{className:"inline-flex items-center gap-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 text-xs rounded-full px-2.5 py-1 font-medium",children:[V,i.jsx("button",{onClick:()=>Wr(C),className:"text-slate-400 hover:text-rose-500 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"close"})})]},C))})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[_e&&i.jsx("button",{onClick:()=>{Ke(null),tt({name:"",color:"blue",memberInput:"",members:[],serviceTypes:["assembly"]})},className:"px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:qr,disabled:!je.name.trim(),className:"flex-1 py-2 bg-slate-800 dark:bg-slate-700 text-white rounded-lg text-sm font-bold hover:bg-slate-700 dark:hover:bg-slate-600 transition-colors disabled:opacity-40",children:_e?"Atualizar Equipe":"Adicionar Equipe"})]})]})]}),i.jsxs("div",{className:"p-5 border-t border-slate-100 dark:border-slate-700 flex justify-end gap-3 shrink-0 bg-slate-50 dark:bg-[#1a2632]",children:[i.jsx("button",{onClick:()=>Ae(!1),className:"px-4 py-2 rounded-lg text-sm font-bold text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Cancelar"}),i.jsxs("button",{onClick:yn,disabled:ht,className:"px-5 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary/90 transition-colors flex items-center gap-2 disabled:opacity-50",children:[ht?i.jsx("span",{className:"material-symbols-outlined text-sm animate-spin",children:"progress_activity"}):i.jsx("span",{className:"material-symbols-outlined text-sm",children:"save"}),"Salvar Equipes"]})]})]})})]})},U0e=()=>{const{stores:t,allUsers:e,toggleStoreStatus:r,createStore:n,updateStore:a,updateUser:s}=yr(),[o,l]=D.useState(!1),[c,u]=D.useState(!1),[d,f]=D.useState(""),[p,m]=D.useState(""),[v,x]=D.useState(""),[_,y]=D.useState(""),[g,w]=D.useState(""),[E,N]=D.useState(null),[k,S]=D.useState({name:"",cnpj:"",corporateName:"",address:"",phone:"",logoUrl:"",socialMedia:""}),[b,A]=D.useState(""),[T,I]=D.useState(null),[O,R]=D.useState(""),[G,U]=D.useState(""),Q=D.useMemo(()=>t.map(F=>{const de=e.filter(me=>me.storeId===F.id).length;return{...F,userCount:de}}),[t,e]),te=Q.filter(F=>F.status==="active").length,K=e.length,X=F=>{if(F.preventDefault(),!d||!p||!_||!g){alert("Todos os campos so obrigatrios.");return}n(d,p,v||"Administrador",_,g),l(!1),f(""),m(""),x(""),y(""),w("")},se=F=>{N(F.id),S({name:F.settings.name||F.name,cnpj:F.settings.cnpj||"",corporateName:F.settings.corporateName||"",address:F.settings.address||"",phone:F.settings.phone||"",logoUrl:F.settings.logoUrl||"",socialMedia:F.settings.socialMedia||""}),A(F.slug);const de=e.find(me=>me.storeId===F.id&&me.role==="Admin");de?(I(de),R(de.username),U(de.password||"")):(I(null),R(""),U("")),u(!0)},Z=F=>{var de;if(F.preventDefault(),!!E){if(b!==((de=t.find(me=>me.id===E))==null?void 0:de.slug)&&t.some(Ge=>Ge.slug===b&&Ge.id!==E)){alert("Este ID de Login (Slug) j est em uso por outra loja.");return}a(E,{slug:b,settings:k}),T&&s({...T,username:O,password:G}),u(!1),N(null)}};return i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#101922] p-8 overflow-y-auto",children:[i.jsxs("div",{className:"max-w-6xl mx-auto w-full",children:[i.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"p-2 bg-purple-600 text-white rounded-lg",children:i.jsx("span",{className:"material-symbols-outlined",children:"admin_panel_settings"})}),i.jsx("h1",{className:"text-3xl font-extrabold text-slate-900 dark:text-white",children:"Painel do Gestor"})]}),i.jsx("p",{className:"text-slate-500",children:"Controle de acesso e monitoramento das empresas cadastradas."})]}),i.jsxs("button",{onClick:()=>l(!0),className:"bg-purple-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-purple-600/30 hover:bg-purple-700 transition-all flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined",children:"add_business"}),"Nova Loja"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Lojas Ativas"}),i.jsxs("p",{className:"text-4xl font-extrabold text-slate-800 dark:text-white",children:[te," ",i.jsxs("span",{className:"text-lg text-slate-400 font-normal",children:["/ ",Q.length]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Total de Usurios"}),i.jsx("p",{className:"text-4xl font-extrabold text-slate-800 dark:text-white",children:K})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] p-6 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800",children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Receita Mensal (Est.)"}),i.jsxs("p",{className:"text-4xl font-extrabold text-emerald-600",children:["R$ ",(te*299).toLocaleString()]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Lojas Cadastradas"})}),i.jsxs("table",{className:"w-full text-left",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-500",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase",children:"Empresa"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase",children:"Slug (Login)"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase",children:"Data Cadastro"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase",children:"Usurios"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase",children:"Status"}),i.jsx("th",{className:"px-6 py-4 text-xs font-bold uppercase text-right",children:"Ao"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:Q.map(F=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 font-bold text-slate-900 dark:text-white",children:F.name}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400 font-mono",children:F.slug}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-600 dark:text-slate-400",children:new Date(F.createdAt).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs font-bold text-slate-600 dark:text-slate-300",children:F.userCount})}),i.jsx("td",{className:"px-6 py-4",children:F.status==="active"?i.jsx("span",{className:"px-2.5 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-bold rounded-full uppercase",children:"Ativo"}):i.jsx("span",{className:"px-2.5 py-0.5 bg-rose-100 text-rose-700 text-xs font-bold rounded-full uppercase",children:"Suspenso"})}),i.jsx("td",{className:"px-6 py-4 text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>se(F),className:"p-1.5 rounded text-slate-400 hover:text-blue-500 hover:bg-blue-50 transition-colors",title:"Editar Dados da Empresa",children:i.jsx("span",{className:"material-symbols-outlined text-lg",children:"edit"})}),i.jsx("button",{onClick:()=>r(F.id),className:`text-sm font-bold px-3 py-1.5 rounded transition-colors ${F.status==="active"?"text-rose-600 hover:bg-rose-50 border border-rose-200":"text-emerald-600 hover:bg-emerald-50 border border-emerald-200"}`,children:F.status==="active"?"Suspender":"Ativar"})]})})]},F.id))})]})]})]}),o&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>l(!1),children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden animate-scale-up",onClick:F=>F.stopPropagation(),children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Cadastrar Nova Loja"}),i.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("form",{onSubmit:X,className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Dados da Empresa"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Nome Fantasia"}),i.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800",value:d,onChange:F=>f(F.target.value),placeholder:"Ex: Mveis Planejados do Centro"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"ID de Login (Slug)"}),i.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800",value:p,onChange:F=>m(F.target.value.toLowerCase().replace(/[^a-z0-9]/g,"")),placeholder:"Ex: moveiscentro"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Este ser o ID usado para fazer login na empresa."})]})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100 dark:border-slate-800",children:[i.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Primeiro Usurio (Admin)"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Nome do Responsvel"}),i.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800",value:v,onChange:F=>x(F.target.value),placeholder:"Nome completo"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Usurio"}),i.jsx("input",{type:"text",required:!0,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800",value:_,onChange:F=>y(F.target.value),placeholder:"admin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Senha"}),i.jsx("input",{type:"password",required:!0,className:"w-full rounded-lg border-slate-200 dark:bg-slate-800",value:g,onChange:F=>w(F.target.value),placeholder:""})]})]})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border border-slate-200 rounded-lg text-slate-600 font-bold hover:bg-slate-50",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-bold hover:bg-purple-700 shadow-lg shadow-purple-600/20",children:"Criar Loja"})]})]})]})}),c&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-fade-in",onClick:()=>u(!1),children:i.jsxs("div",{className:"bg-white dark:bg-[#1a2632] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden animate-scale-up",onClick:F=>F.stopPropagation(),children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50 dark:bg-slate-900",children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"Editar Dados da Empresa"}),i.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600",children:i.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),i.jsxs("form",{onSubmit:Z,className:"p-6 space-y-6 max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg border border-slate-100 dark:border-slate-800 mb-2",children:[i.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"vpn_key"}),"Acesso e Identificao"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Nome Fantasia"}),i.jsx("input",{type:"text",value:k.name,onChange:F=>S({...k,name:F.target.value}),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"ID Login (Slug)"}),i.jsx("input",{type:"text",value:b,onChange:F=>A(F.target.value.toLowerCase().replace(/[^a-z0-9]/g,"")),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm font-mono text-slate-600 dark:text-slate-300"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"CNPJ"}),i.jsx("input",{type:"text",value:k.cnpj,onChange:F=>S({...k,cnpj:F.target.value}),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Razo Social"}),i.jsx("input",{type:"text",value:k.corporateName,onChange:F=>S({...k,corporateName:F.target.value}),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Endereo Completo"}),i.jsx("input",{type:"text",value:k.address,onChange:F=>S({...k,address:F.target.value}),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Telefone Comercial"}),i.jsx("input",{type:"text",value:k.phone,onChange:F=>S({...k,phone:F.target.value}),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Redes Sociais"}),i.jsx("input",{type:"text",value:k.socialMedia,onChange:F=>S({...k,socialMedia:F.target.value}),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm",placeholder:"@instagram"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"URL da Logo"}),i.jsx("input",{type:"text",value:k.logoUrl,onChange:F=>S({...k,logoUrl:F.target.value}),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm"})]})]}),T&&i.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-800 pt-4 mt-4",children:[i.jsxs("h4",{className:"text-xs font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-sm",children:"security"}),"Acesso Master (Admin)"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-purple-50 dark:bg-purple-900/10 p-4 rounded-xl border border-purple-100 dark:border-purple-900/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Usurio (Login)"}),i.jsx("input",{type:"text",value:O,onChange:F=>R(F.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm focus:ring-purple-500 focus:border-purple-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Senha"}),i.jsx("input",{type:"text",value:G,onChange:F=>U(F.target.value),className:"w-full rounded-lg border-slate-200 dark:bg-slate-800 text-sm focus:ring-purple-500 focus:border-purple-500"})]}),i.jsxs("p",{className:"col-span-2 text-[10px] text-slate-400",children:["Editando credenciais de: ",i.jsx("strong",{children:T.name})]})]})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border border-slate-200 rounded-lg text-slate-600 font-bold hover:bg-slate-50",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 shadow-lg shadow-blue-600/20",children:"Salvar Alteraes"})]})]})]})})]})},p4=D.createContext(void 0),B0e=({children:t})=>{const{batches:e,workflowConfig:r,projects:n}=yr(),[a,s]=D.useState([]);D.useEffect(()=>{const f=localStorage.getItem("fluxo_notifications");if(f)try{s(JSON.parse(f))}catch(p){console.error("Failed to parse notifications",p)}},[]),D.useEffect(()=>{localStorage.setItem("fluxo_notifications",JSON.stringify(a))},[a]),D.useEffect(()=>{},[e,r]);const o=f=>{const p={id:crypto.randomUUID(),date:new Date().toISOString(),read:!1,...f};s(m=>[p,...m])},l=f=>{s(p=>p.map(m=>m.id===f?{...m,read:!0}:m))},c=()=>{s(f=>f.map(p=>({...p,read:!0})))},u=()=>{s([])},d=a.filter(f=>!f.read).length;return i.jsx(p4.Provider,{value:{notifications:a,unreadCount:d,addNotification:o,markAsRead:l,markAllAsRead:c,clearNotifications:u},children:t})},z0e=()=>{const t=D.useContext(p4);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t};class j2 extends D.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r)}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:i.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[200px] p-8 text-center",children:[i.jsx("span",{className:"material-symbols-outlined text-5xl text-rose-400 mb-4",children:"error"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Algo deu errado"}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:((e=this.state.error)==null?void 0:e.message)||"Erro inesperado no componente."}),i.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary-600",children:"Tentar novamente"})]}):this.props.children}}const W0e=()=>{const[t,e]=D.useState(qe.DASHBOARD),{currentProjectId:r,setCurrentProjectId:n,currentUser:a,logout:s,permissions:o,companySettings:l,projects:c}=yr(),{unreadCount:u,notifications:d,markAllAsRead:f}=z0e(),[p,m]=D.useState(!1),[v,x]=D.useState(!1),[_,y]=D.useState(!1),g=D.useRef(null),[w,E]=D.useState(""),[N,k]=D.useState(!1),S=D.useRef(null);D.useEffect(()=>{const U=()=>e(qe.CLIENT_REGISTRATION);return window.addEventListener("navigate-registration",U),()=>window.removeEventListener("navigate-registration",U)},[]),D.useEffect(()=>{(a==null?void 0:a.role)==="SuperAdmin"?e(qe.SUPER_ADMIN):a&&e(qe.DASHBOARD)},[a]),D.useEffect(()=>{const U=Q=>{Q.key==="Escape"&&(r?n(null):p?m(!1):N?k(!1):v?(x(!1),E("")):_&&y(!1))};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[r,p,N,v,_,n]),D.useEffect(()=>{const U=Q=>{S.current&&!S.current.contains(Q.target)&&k(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const b=D.useMemo(()=>{if(!w.trim()||w.length<2)return[];const U=w.toLowerCase();return c.filter(Q=>{var te,K;return Q.client.name.toLowerCase().includes(U)||((te=Q.client.phone)==null?void 0:te.toLowerCase().includes(U))||((K=Q.sellerName)==null?void 0:K.toLowerCase().includes(U))}).slice(0,8)},[w,c]);if(!a)return i.jsx(vB,{});const A=U=>{if(a.role==="SuperAdmin")return U===qe.SUPER_ADMIN;const Q=o.find(te=>te.role===a.role);if(!Q)return!1;switch(U){case qe.DASHBOARD:return Q.canViewDashboard;case qe.KANBAN:return Q.canViewKanban;case qe.CLIENT_LIST:return Q.canViewClients;case qe.SETTINGS:return Q.canViewSettings;case qe.ASSEMBLY_SCHEDULER:return Q.canViewAssembly??!1;case qe.POST_ASSEMBLY:return Q.canViewPostAssembly??!1;case qe.ASSISTANCE:return Q.canViewAssistance??!1;default:return!0}},T=()=>{n(null)},I=()=>{e(qe.CLIENT_LIST)},O=()=>{if(a.role==="SuperAdmin")return i.jsx(U0e,{});switch(t){case qe.DASHBOARD:return i.jsx(h2,{});case qe.KANBAN:return i.jsx(lB,{});case qe.CLIENT_REGISTRATION:return i.jsx(uB,{onComplete:I});case qe.ASSISTANCE:return i.jsx(dB,{});case qe.POST_ASSEMBLY:return i.jsx(hB,{});case qe.ASSEMBLY_SCHEDULER:return i.jsx(F0e,{});case qe.CLIENT_LIST:return i.jsx(fB,{});case qe.SETTINGS:return i.jsx(mB,{});case qe.AGENDA:return i.jsx(O0e,{});default:return i.jsx(h2,{})}},R=()=>{if(a.role==="SuperAdmin")return"Gesto Global";switch(t){case qe.DASHBOARD:return"Viso Geral";case qe.KANBAN:return"Painel de Controle";case qe.CLIENT_REGISTRATION:return"Novo Cadastro";case qe.CLIENT_LIST:return"Carteira de Clientes";case qe.SETTINGS:return"Configuraes";case qe.AGENDA:return"Minha Agenda";case qe.ASSISTANCE:return"Assistncia";case qe.POST_ASSEMBLY:return"Ps-Montagem";case qe.ASSEMBLY_SCHEDULER:return"Montagens";default:return"FluxoERP"}},G=[];return a.role==="SuperAdmin"?G.push({icon:"domain",view:qe.SUPER_ADMIN,label:"Lojas",group:1}):(A(qe.DASHBOARD)&&G.push({icon:"home",view:qe.DASHBOARD,label:"Incio",group:1}),A(qe.KANBAN)&&G.push({icon:"view_kanban",view:qe.KANBAN,label:"Kanban",group:1}),G.push({icon:"calendar_month",view:qe.AGENDA,label:"Agenda",group:1}),A(qe.CLIENT_LIST)&&G.push({icon:"contacts",view:qe.CLIENT_LIST,label:"Clientes",group:1}),A(qe.ASSEMBLY_SCHEDULER)&&G.push({icon:"carpenter",view:qe.ASSEMBLY_SCHEDULER,label:"Montagens",group:2}),A(qe.POST_ASSEMBLY)&&G.push({icon:"fact_check",view:qe.POST_ASSEMBLY,label:"Ps-Mont.",group:2}),A(qe.ASSISTANCE)&&G.push({icon:"support_agent",view:qe.ASSISTANCE,label:"Assistncia",group:2}),A(qe.SETTINGS)&&G.push({icon:"settings",view:qe.SETTINGS,label:"Config",group:3})),i.jsxs("div",{className:"flex flex-col md:flex-row h-[100dvh] w-screen overflow-hidden bg-background-light dark:bg-background-dark font-display relative",children:[i.jsxs("aside",{className:"hidden md:flex w-20 bg-white dark:bg-[#1a2632] border-r border-slate-200 dark:border-slate-800 flex-col items-center py-6 z-30 shrink-0",children:[i.jsx("div",{className:"mb-4"})," ",i.jsxs("nav",{className:"flex flex-col gap-6 w-full px-4",children:[G.map((U,Q)=>{const te=G[Q-1],K=te&&te.group!==U.group;return i.jsxs(H.Fragment,{children:[K&&i.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 w-full -my-2"}),i.jsx(H0e,{icon:U.icon,isActive:t===U.view||U.view===qe.CLIENT_LIST&&t===qe.CLIENT_REGISTRATION,onClick:()=>e(U.view),tooltip:U.label})]},U.view)}),i.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 w-full my-2"}),i.jsx("button",{onClick:s,className:"w-full aspect-square rounded-xl flex items-center justify-center text-slate-400 hover:bg-rose-50 hover:text-rose-500 transition-all",title:"Sair",children:i.jsx("span",{className:"material-symbols-outlined",children:"logout"})})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[i.jsxs("header",{className:"h-14 md:h-16 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#1a2632] flex items-center justify-between px-4 md:px-6 shrink-0 z-20 gap-3 relative",children:[v&&i.jsxs("div",{className:"absolute inset-0 z-30 bg-white dark:bg-[#1a2632] flex items-center px-3 gap-2 md:hidden",children:[i.jsx("button",{onClick:()=>{x(!1),E(""),k(!1)},className:"p-1.5 text-slate-400",children:i.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),i.jsxs("div",{ref:S,className:"flex-1 relative",children:[i.jsx("input",{ref:g,type:"text",placeholder:"Buscar cliente, vendedor...",value:w,onChange:U=>{E(U.target.value),k(!0)},onFocus:()=>k(!0),className:"w-full bg-slate-100 dark:bg-slate-800 rounded-xl px-3 py-2 text-sm text-slate-700 dark:text-slate-200 placeholder-slate-400 outline-none border-none",autoFocus:!0}),N&&w.length>=2&&i.jsx("div",{className:"absolute top-full mt-1 left-0 right-0 bg-white dark:bg-[#1e293b] rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50",children:b.length===0?i.jsx("div",{className:"px-4 py-3 text-sm text-slate-400 text-center",children:"Nenhum cliente encontrado"}):b.map(U=>i.jsx("button",{onMouseDown:()=>{n(U.id),E(""),k(!1),x(!1)},className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-800 border-b border-slate-100 dark:border-slate-800 last:border-0 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[16px]",children:"person"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:U.client.name}),i.jsxs("div",{className:"text-xs text-slate-400",children:[U.sellerName,"  ",U.environments.length," amb."]})]})]})},U.id))})]})]}),i.jsx("div",{className:"flex items-center gap-3 shrink-0",children:i.jsx("h1",{className:"text-lg md:text-xl font-bold text-slate-800 dark:text-white",children:R()})}),a.role!=="SuperAdmin"&&i.jsxs("div",{ref:v?void 0:S,className:"hidden md:flex flex-1 max-w-sm relative mx-4",children:[i.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-800 rounded-xl px-3 py-2 w-full border border-transparent focus-within:border-primary/40 transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[18px]",children:"search"}),i.jsx("input",{type:"text",placeholder:"Buscar cliente, vendedor...",value:w,onChange:U=>{E(U.target.value),k(!0)},onFocus:()=>k(!0),className:"bg-transparent text-sm w-full focus:ring-0 border-none p-0 text-slate-700 dark:text-slate-200 placeholder-slate-400 outline-none"}),w&&i.jsx("button",{onClick:()=>{E(""),k(!1)},className:"text-slate-400 hover:text-slate-600",children:i.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"close"})})]}),N&&w.length>=2&&i.jsx("div",{className:"absolute top-full mt-1 w-full bg-white dark:bg-[#1e293b] rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50",children:b.length===0?i.jsx("div",{className:"px-4 py-3 text-sm text-slate-400 text-center",children:"Nenhum cliente encontrado"}):b.map(U=>i.jsx("button",{onMouseDown:()=>{n(U.id),E(""),k(!1)},className:"w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-800 border-b border-slate-100 dark:border-slate-800 last:border-0 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[16px]",children:"person"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:U.client.name}),i.jsxs("div",{className:"text-xs text-slate-400",children:[U.sellerName,"  ",U.environments.length," amb."]})]})]})},U.id))})]}),i.jsxs("div",{className:"flex items-center gap-3 md:gap-4 shrink-0",children:[a.role!=="SuperAdmin"&&i.jsx("button",{onClick:()=>x(!0),className:"md:hidden p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 transition-colors",children:i.jsx("span",{className:"material-symbols-outlined text-xl",children:"search"})}),i.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[i.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:a.role==="SuperAdmin"?"Acesso":"Empresa"}),i.jsx("span",{className:`text-sm font-bold ${a.role==="SuperAdmin"?"text-purple-600":"text-primary dark:text-blue-400"}`,children:a.role==="SuperAdmin"?"Administrador":l.name})]}),i.jsx("div",{className:"hidden md:block h-8 w-px bg-slate-200 dark:bg-slate-700"}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>m(!p),className:"relative p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-white transition-colors",children:[i.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),u>0&&i.jsx("span",{className:"absolute top-1 right-1 size-2.5 bg-rose-500 rounded-full border-2 border-white dark:border-[#1a2632]"})]}),p&&i.jsxs("div",{className:"fixed md:absolute inset-x-3 md:inset-x-auto md:right-0 top-16 md:top-full md:mt-2 md:w-80 bg-white dark:bg-[#1e293b] rounded-2xl shadow-xl border border-slate-200 dark:border-slate-800 overflow-hidden z-50 animate-fade-in origin-top-right",children:[i.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[i.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Notificaes"}),u>0&&i.jsx("button",{onClick:f,className:"text-xs text-sky-600 hover:text-sky-700 font-medium",children:"Marcar todas lidas"})]}),i.jsx("div",{className:"max-h-64 overflow-y-auto",children:d.length===0?i.jsx("div",{className:"p-6 text-center text-slate-500 text-sm",children:"Nenhuma notificao."}):d.map(U=>i.jsx("div",{className:`p-4 border-b border-slate-50 dark:border-slate-800 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors ${U.read?"":"bg-sky-50/50 dark:bg-sky-900/10"}`,children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:`mt-1 size-2 rounded-full shrink-0 ${U.read?"bg-slate-300":"bg-sky-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:U.title}),i.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-2",children:U.message}),i.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:[new Date(U.date).toLocaleDateString()," ",new Date(U.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})},U.id))})]})]}),i.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[i.jsx("div",{className:"size-8 md:size-9 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600 overflow-hidden",children:a.avatar?i.jsx("img",{src:a.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):a.name.charAt(0)}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("p",{className:"text-sm font-bold text-slate-800 dark:text-white leading-none",children:a.name}),i.jsx("p",{className:"text-xs text-slate-500",children:a.role})]}),i.jsx("button",{onClick:s,className:"md:hidden size-8 rounded-lg flex items-center justify-center text-slate-400 hover:text-rose-500 transition-colors",title:"Sair",children:i.jsx("span",{className:"material-symbols-outlined text-xl",children:"logout"})})]})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden relative content-bottom-nav md:pb-0 flex flex-col min-h-0",children:O()})]}),i.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white dark:bg-[#1a2632] border-t border-slate-200 dark:border-slate-800 bottom-nav",children:i.jsx("div",{className:"flex items-center justify-around h-16 px-1",children:(()=>{var se;const Q=G.length>5,te=Q?G.slice(0,4):G,K=Q?G.slice(4):[],X=K.some(Z=>t===Z.view||Z.view===qe.CLIENT_LIST&&t===qe.CLIENT_REGISTRATION);return i.jsxs(i.Fragment,{children:[te.map(Z=>{const F=t===Z.view||Z.view===qe.CLIENT_LIST&&t===qe.CLIENT_REGISTRATION;return i.jsxs("button",{onClick:()=>{e(Z.view),y(!1)},className:`flex flex-col items-center justify-center gap-0.5 flex-1 py-1 transition-colors ${F?"text-primary":"text-slate-400"}`,children:[i.jsx("span",{className:`material-symbols-outlined text-2xl ${F?"font-bold":""}`,style:F?{fontVariationSettings:"'FILL' 1, 'wght' 600"}:{},children:Z.icon}),i.jsx("span",{className:`text-[10px] leading-tight ${F?"font-bold":"font-medium"}`,children:Z.label})]},Z.view)}),Q&&i.jsxs("div",{className:"relative flex-1",children:[i.jsxs("button",{onClick:()=>y(!_),className:`flex flex-col items-center justify-center gap-0.5 w-full py-1 transition-colors ${X||_?"text-primary":"text-slate-400"}`,children:[i.jsx("span",{className:"material-symbols-outlined text-2xl",style:X?{fontVariationSettings:"'FILL' 1, 'wght' 600"}:{},children:X&&((se=K.find(Z=>t===Z.view))==null?void 0:se.icon)||"more_horiz"}),i.jsx("span",{className:`text-[10px] leading-tight ${X?"font-bold":"font-medium"}`,children:"Mais"})]}),_&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>y(!1)}),i.jsx("div",{className:"absolute bottom-full mb-2 right-0 min-w-[160px] bg-white dark:bg-[#1e293b] rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-40 animate-fade-in",children:K.map(Z=>{const F=t===Z.view||Z.view===qe.CLIENT_LIST&&t===qe.CLIENT_REGISTRATION;return i.jsxs("button",{onClick:()=>{e(Z.view),y(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors border-b border-slate-100 dark:border-slate-800 last:border-0 ${F?"bg-primary/5 text-primary":"text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[i.jsx("span",{className:"material-symbols-outlined text-xl",style:F?{fontVariationSettings:"'FILL' 1, 'wght' 600"}:{},children:Z.icon}),i.jsx("span",{className:`text-sm ${F?"font-bold":"font-medium"}`,children:Z.label})]},Z.view)})})]})]})]})})()})}),r&&a.role!=="SuperAdmin"&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 md:p-6 animate-fade-in",onClick:T,children:i.jsx("div",{className:"bg-white dark:bg-[#101922] w-full max-w-[95vw] md:max-w-[90vw] lg:max-w-[1200px] h-[95dvh] md:h-[90dvh] rounded-2xl shadow-2xl overflow-hidden flex flex-col animate-scale-up",onClick:U=>U.stopPropagation(),children:i.jsx(xB,{onBack:T})})})]})},q0e=()=>(D.useEffect(()=>{const t=()=>{const n=localStorage.getItem("fluxo_erp_theme")||"auto",a=n==="dark"||n==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",a)};t();const e=window.matchMedia("(prefers-color-scheme: dark)"),r=()=>t();return e.addEventListener("change",r),window.addEventListener("storage",t),()=>{e.removeEventListener("change",r),window.removeEventListener("storage",t)}},[]),i.jsx(j2,{children:i.jsx(ZU,{children:i.jsx(nB,{children:i.jsx(B0e,{children:i.jsx(pB,{children:i.jsx(sB,{children:i.jsx(j2,{children:i.jsx(W0e,{})})})})})})})})),H0e=({icon:t,isActive:e,onClick:r,tooltip:n})=>i.jsxs("button",{onClick:r,className:`
        w-full aspect-square rounded-xl flex items-center justify-center transition-all duration-200 group relative
        ${e?"bg-primary text-white shadow-lg shadow-primary/30":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-primary"}
      `,children:[i.jsx("span",{className:"material-symbols-outlined text-2xl",children:t}),i.jsx("div",{className:"absolute left-full ml-2 px-2.5 py-1 rounded-lg bg-slate-800 dark:bg-slate-200 text-white dark:text-slate-800 text-xs font-bold whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-150 z-50 shadow-lg",children:n})]}),m4=document.getElementById("root");if(!m4)throw new Error("Could not find root element to mount to");const G0e=$P(m4);G0e.render(i.jsx(H.StrictMode,{children:i.jsx(q0e,{})}));
